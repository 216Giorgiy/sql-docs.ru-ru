---
title: Консолидация оценки отчетов (данные помощник миграции SQL Server) | Документы Microsoft
ms.custom: ''
ms.date: 04/16/2018
ms.prod: sql
ms.prod_service: dma
ms.reviewer: ''
ms.suite: sql
ms.technology: dma
ms.tgt_pltfrm: ''
ms.topic: conceptual
keywords: ''
helpviewer_keywords:
- Data Migration Assistant, Assess
ms.assetid: ''
caps.latest.revision: ''
author: HJToland3
ms.author: jtoland
manager: craigg
ms.openlocfilehash: 7192c055b4b9bfb6155f0963c598f9dc4a760c0a
ms.sourcegitcommit: 1740f3090b168c0e809611a7aa6fd514075616bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/03/2018
---
# <a name="consolidate-assessment-reports-data-migration-assistant"></a>Объединять оценки (данных помощник по миграции)

В командной строке можно использовать для выполнения миграции оценок в автоматическом режиме, начиная с версии 2.1 помощник по миграции данных. Эта функция позволяет выполнить оценку в масштабе. Результаты оценки в формате JSON или CSV-файла.

Можно оценить несколько баз данных в один экземпляр программы командной строки помощник по миграции данных и экспортировать все результаты оценки в единый файл JSON. Или можно оценить одну базу данных во время и позже объединить результаты из этих нескольких файлов JSON в базу данных SQL.

Сведения о том, как запустить помощник по миграции данных из командной строки см. в разделе [запуска данных помощник по миграции из командной строки](../dma/dma-commandline.md). 


## <a name="import-assessment-results-into-a-sql-server-database"></a>Импорт результатов оценки в базе данных SQL Server

Использовать сценарий PowerShell, доступных в этом [репозитории Github](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/data-migration-assistant) импорта оценки результатов из JSON-файлов в базу данных SQL Server.

> [!NOTE]
> PowerShell v5 или более поздняя версия требуется.

При выполнении сценария, необходимо предоставить следующие сведения: 

- **serverName**: имя экземпляра SQL Server, который требуется импортировать оценки результатов из JSON-файлов.

- **Имя базы данных**: имя базы данных, для получения импортировать результаты.

- **jsonDirectory**: папку, сохранить результаты оценки, в один или несколько файлов JSON.

- **processTo**: SQLServer

Добавление указанных выше параметров в разделе «Выполнение функции» следующим образом.

```
dmaProcessor -serverName localhost \`\
-databaseName DMAReporting \`\
-jsonDirectory "C:\\temp\\DMACmd\\output\\" \`\
-processTo SQLServer
```

Сценарий PowerShell создает следующие объекты в экземпляре SQL Server, которая была указана, если объекты не существуют:

- **База данных** — имя, указанное в параметрах PowerShell

  - Главного репозитория

- **Таблица** – ReportData

  - Данные для отчетов

- **Таблица** -BreakingChangeWeighting

  - Ссылочная таблица для всех критических изменений. Здесь можно определить собственные значения весовой коэффициент для оказания влияния на более точные ранжирования обновления успешно процента (%).

- **Представление** — UpgradeSuccessRanking\_локальное развертывание

  - Представление, содержащее фактор успеха для каждой базы данных для перенесенных локально.

- **Представление** — UpgradeSuccessRanking\_Azure

  - Представление, содержащее фактор успеха для каждой базы данных для перенесенных локально.

- **Хранимая процедура** — JSONResults\_вставки

  - Используется для импорта данных из файла JSON в SQL Server.

- **Хранимая процедура** — AzureFeatureParityResults\_вставки

  - Используется для импорта компонентов Azure четности результаты из файла JSON в SQL Server.

- **Тип таблицы** – JSONResults

  - Используется для хранения результатов JSON для оценки в локальной среде и передавать JSONResults\_вставить хранимой процедуры

- **Тип таблицы** – AzureFeatureParityResults

  - Используется для хранения компонентов Azure четности результатов для оценки azure и передать AzureFeatureParityResults\_вставить хранимой процедуры

Создает сценарий PowerShell **обработано** каталогов в указанный каталог, содержащий файлы JSON, которые должны быть обработаны.

После завершения скрипта, результаты импортируются в таблице ReportData.

### <a name="viewing-the-results-in-sql-server"></a>Просмотр результатов в SQL Server

После загрузки данных, подключитесь к экземпляру SQL Server. Экран должен выглядеть, как показано на следующем рисунке:

![Консолидированные отчеты в базе данных SQL Server](../dma/media/DMAReportingDatabase.png)

Dbo. Таблица ReportData содержит содержимое файла JSON в необработанном виде.

## <a name="on-premises-upgrade-success-ranking"></a>Локальные обновления успех ранжирования

Чтобы просмотреть список баз данных и их ранга успех процента (%), выберите dbo. Представление UpgradeSuccessRanking_OnPrem:

![Данные в представлении UpgradeSuccessRaning_OnPrem](../dma/media/UpgradeSuccessRankingView.png)

Вы видите для конкретной базы данных Какова вероятность успеха обновления для уровней совместимости другой. Таким образом например, базе данных HR был оцениваемого для уровней совместимости 100, 110, 120 и 130. Эта оценка поможет визуально увидеть объем усилий, участвующих в миграции до более поздней версии SQL Server из базы данных находится в текущей версии.

Обычно метрики, которые вас интересуют является, сколько изменений критические предназначены для конкретной базы данных. В приведенном выше примере видно, наличие в базе данных HR фактор успеха обновления 50% для уровней совместимости 100, 110, 120 и 130.

Эта метрика могут зависеть от изменения взвешивание значений dbo. Таблица BreakingChangeWeighting.

В следующем примере усилий на исправления проблемы синтаксиса в базе данных HR считается высокого уровня, присваивается значение 3 **усилия**. Так как он не займет много времени для исправления ошибки синтаксиса, присваивается значение 1 **FixTime**. Так как некоторые стоимость будет заниматься внесения изменений, присваивается значение 2 **стоимость**. Это значение изменяется Changerank переходом на 2.

> [!NOTE]
> Оценки — по шкале от 1 до 5.  1, низкий и высокий уровень 5. Кроме того ChangeRank является вычисляемым столбцом.

![Трудозатраты, FixTime и стоимость значения проблемы синтаксиса](../dma/media/SyntaxIssueEffort.png)

Теперь в этом примере при запросе dbo. Представление UpgradeSuccessRanking_OnPrem коэффициент успешного обновления базы данных HR для критические изменения удалены.

![Обновления фактор успеха для базы данных персонала предприятия](../dma/media/UpgradeSuccessFactor_HR.png)

## <a name="azure-upgrade-success-ranking"></a>Ранжирование Azure успешности обновления

Чтобы просмотреть список баз данных для миграции данных в базе данных SQL Azure и рангу успех процент, выберите dbo. Представление UpgradeSuccessRanking_Azure.

![Данные в представлении UpgradeSuccessRanking_Azure](../dma/media/UpgradeSuccessRankingView_Azure.png)

Здесь вы заинтересованы в MigrationBlocker значение. 100,00 означает, что ранг успех 100% для перемещения базы данных до версии 12 базы данных SQL Azure.

Разница с этим представлением то, что в настоящее время нет переопределения для изменения взвешенное значение для блокирования правила переноса.

Сведения о сообщениях на эти данные с помощью Power BI в разделе [отчет о консолидированных оценки с PowerBI](../dma/dma-powerbiassesreport.md).
