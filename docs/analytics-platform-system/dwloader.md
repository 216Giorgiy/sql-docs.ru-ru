---
title: dwloader загрузчик командной строки для параллельного хранилища данных
author: barbkess
ms.author: barbkess
manager: craigg
ms.prod: analytics-platform-system
ms.prod_service: mpp-data-warehouse
ms.service: ''
ms.component: ''
ms.suite: sql
ms.custom: ''
ms.technology: mpp-data-warehouse
description: '**dwloader** параллельного хранилища данных (PDW) средство командной строки, загружающий строк таблицы в пакетном режиме в существующую таблицу.'
ms.date: 11/04/2016
ms.topic: article
ms.assetid: f79b8354-fca5-41f7-81da-031fc2570a7c
caps.latest.revision: 90
ms.openlocfilehash: 83d04928aa0c8f7fe0156f557466edccc36470dd
ms.sourcegitcommit: 9351e8b7b68f599a95fb8e76930ab886db737e5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
# <a name="dwloader-command-line-loader"></a>dwloader загрузчика командной строки
**dwloader** параллельного хранилища данных (PDW) средство командной строки, загружающий строк таблицы в пакетном режиме в существующую таблицу. При загрузке строк, можно добавить все строки в конец таблицы (*режим добавления* или *режиме fastappend*), будет добавлена новая строка и обновлять существующие строки (*режиме upsert*), или удалить все существующие строки перед загрузкой и затем вставить все строки в пустую таблицу (*перезагрузить режим*).  
  
**Процесс загрузки данных**  
  
1.  Подготовка данных источника.  
  
    Используйте собственный процесс ETL для создания источника данных, необходимо загрузить. Источник данных должен быть отформатирован в соответствии со схемой целевой таблицы. Сохранять исходные данные в один или несколько текстовых файлов и скопируйте текстовых файлов в один каталог на сервере загрузки. Сведения о загрузке сервера см. в разделе [приобретать и настраивать сервер загрузки](acquire-and-configure-loading-server.md)  
  
2.  Подготовка параметров загрузки.  
  
    Решите, какие параметры загрузки будет использоваться. Сохраните параметры загрузки в файле конфигурации. Скопируйте файл конфигурации в локальной папке на сервере загрузки. **Dwloader** в этом разделе описаны параметры конфигурации.  
  
3.  Подготовьте нагрузки параметров восстановления.  
  
    Выбрать способ **dwloader** обработки строк, которые не удалось загрузить. Чтобы выполнить загрузку, **dwloader** сначала загружает данные в промежуточную таблицу и затем передает данные в целевую таблицу. Как загрузчик загружает данные в промежуточную таблицу, он отслеживает число строк, которые не удалось загрузить. Например строки, которые имеют некорректный формат будет невозможно загрузить. Ошибочные строки копируются в файл отклонения. По умолчанию нагрузки прерывает после первого отклонения, если не указать пороговое значение отклонения другой.  
  
4.  Установка **dwloader**.  
  
    Установите dwloader на сервер загрузки, если он еще не установлен. 

<!-- MISSING LINK
    See [Install dwloader Command-Line Loader &#40;SQL Server PDW&#41;](install-dwloader-command-line-loader-sql-server-pdw.md). 
--> 
  
5.  Запустите **dwloader**.  
  
    Войдите на сервер для загрузки и запуска исполняемого файла **dwloader.exe** с соответствующими параметрами командной строки.  
  
6.  Проверка результатов.  
  
    Вы можете проверить ошибками строк для просмотра, если все строки, не удалось загрузить файл (указанный -R). Если этот файл пуст, все строки успешно загружен. **dwloader** является транзакционной, поэтому если любой шаг завершается с ошибкой (отличного от отклоненных строк), выполнит откат всех шагов исходное состояние.  
  
<!-- 
![Topic link icon](media/topic-link.gif "Topic_Link")[Syntax Conventions](syntax-conventions-sql-server-pdw.md)  
-->  


## <a name="syntax"></a>Синтаксис  
  
```  
dwloader.exe { -h }  
  
dwloader.exe   
    {  
        { -U login_name  -P password  }  
        | -W  
    }  
    [ -f parameter_file ]  
    [ -S target_appliance ]  
    { -T target_database_name . [ schema ] . table_name }   
    { -i source_data_location } [ <source_data_options> ]  
    { -R load_failure_file_name } [ <load_failure_options> ]  
    [ <loading_options> ]  
}  
  
<source_data_options> ::=  
{  
    [ -fh number_header_rows ]  
    [ < variable_length_column_options > | < fixed_width_column_options > ]  
    [ -D { mdy | myd | ymd | ydm | dmy | dym | custom_date_format } ]  
    [ -dt datetime_format_file ]  
}  
  
<variable_length_column_options> ::=  
{  
    [ -e character_encoding ]  
    -r row_delimiter   
    [ -s string_delimiter ]  
    -t field_delimiter   
}  
  
<fixed_width_column_options> ::=  
{  
    -w fixed_width_config_file   
    [ -e character_encoding ]   
    -r row_delimiter   
}  
  
<load_failure_options> ::=  
{  
    [ -rt { value | percentage } ]  
    [ -rv reject_value ]  
    [ -rs reject_sample_value ]  
}  
  
<loading_options> ::=  
{  
    [ -d staging_database_name ]  
    [ -M { append | fastappend | upsert -K merge_column [ ,...n ] | reload } ]  
    [ -b batchsize ]   
    [ -c ]  
    [ -E ]  
    [ -m ]  
    [ -N ]  
    [ -se ]   
}  
```  
  
## <a name="arguments"></a>Аргументы  
**-h**  
Отображает простой справочные сведения об использовании загрузчика. Справка отображается только в том случае, если заданы никакие другие параметры командной строки.  
  
**-U** *login_name*  
Допустимое имя входа проверки подлинности SQL Server с соответствующими разрешениями для выполнения загрузки.  
  
**-P** *password*  
Пароль для проверки подлинности SQL Server *login_name*.  
  
**-W**  
Использовать проверку подлинности Windows. (Нет *login_name* или *пароль* требуется.) 

<!-- MISSING LINK
For information about configuring Windows Authentication, see [Security - Configure Domain Trusts](security-configure-domain-trusts.md).  
-->
  
**-f** *parameter_file_name*  
Использовать файл параметров *parameter_file_name*, вместо параметров командной строки. *parameter_file_name* может содержать любой параметр командной строки, за исключением *имя_пользователя* и *пароль*. Если параметр указан в командной строке и в файле параметров, из командной строки переопределяет параметр file.  
  
Файл параметров содержит один параметр без **-** префикс в каждой строке.  
  
Примеры:  
  
`rt=percentage`  
  
`rv=25`  
  
**-S***target_appliance*  
Указывает SQL Server PDW устройством, которое будет получать загруженных данных.  
  
*Для соединения Infiniband*, *target_appliance* указывается как < имя устройства >-SQLCTL01. Чтобы настроить это подключение, в разделе [настройки сетевых адаптеров InfiniBand](configure-infiniband-network-adapters.md).  
  
Для подключения Ethernet *target_appliance* IP-адрес для кластера управления узлами.  
  
Если не указано, dwloader по умолчанию используется значение, указанное во время установки dwloader. 

<!-- MISSING LINK
For more information about this install option, see [Install dwloader Command-Line Loader](install-dwloader.md).  
-->
  
**-T** *target_database_name.*[*schema*].*table_name*  
Трехкомпонентное имя для целевой таблицы.  
  
**-I***source_data_location*  
Расположение исходных файлов для загрузки. Каждый исходный файл должен находиться в текстовый файл или текстовый файл, который сжимается с помощью gzip. Только один исходный файл можно будет сжат в каждый файл gzip.  
  
Для форматирования исходный файл:  
  
-   Исходный файл должен быть отформатирован в соответствии с параметры загрузки.  
  
-   Каждая строка в файле исходного кода содержит данные строки одной таблицы. Источник данных должен соответствовать схеме целевой таблицы. Также должно соответствовать столбца порядка и типов данных. Каждое поле в строке представляет столбец в целевой таблице.  
  
-   По умолчанию переменной длины и полей разделены разделителем. Чтобы указать тип разделителя, используйте параметры командной строки < variable_length_column_options >. Чтобы указать поля фиксированной длины, используйте параметры командной строки < fixed_width_column_options >.  
  
Чтобы указать местоположение источника данных:  
  
-   Источник данных может быть сетевой путь или локальный путь к каталогу на сервере загрузки.  
  
-   Чтобы указать все файлы в каталоге, введите путь к каталогу, за которым следует * подстановочный знак.  Загрузчик не загружать файлы из всех подкаталогов, в источник данных... Загрузчик ошибки, если каталог существует в файле gzip.  
  
-   Чтобы указать некоторые файлы в каталоге, используйте сочетание символов и * подстановочный знак.  
  
Загрузка нескольких файлов с помощью одной команды.  
  
-   Все файлы должны находиться в том же каталоге.  
  
-   Файлы должны быть все текстовые файлы, все файлы gzip или сочетание текста и gzip файлы.  
  
-   Ни один из файлов может содержать сведения о заголовке.  
  
-   Все файлы должны использовать один и тот же тип кодирования символ. См. параметр – e.  
  
-   Все файлы должны быть загружены в той же таблице.  
  
-   Все файлы будут сцеплены и загружен, как если бы они являются один файл и отклоненных строк будет отправлена отклонить один файл.  
  
Примеры:  
  
-   -i \\\loadserver\loads\daily\\*.gz  
  
-   -i \\\loadserver\loads\daily\\*.txt  
  
-   -i \\\loadserver\loads\daily\monday.*  
  
-   -i \\\loadserver\loads\daily\monday.txt  
  
-   -i \\\loadserver\loads\daily\\*  
  
**-R** *load_failure_file_name*  
В случае сбоев при загрузке, **dwloader** хранит строки с ошибкой для нагрузочных тестов и описание сбоя сведения об ошибке в файле с именем *load_failure_file_name*. Если этот файл уже существует, dwloader приведет к перезаписи существующего файла. *load_failure_file_name* создается при возникновении первой ошибки. Если все строки успешно, загрузить *load_failure_file_name* не создается.  
  
**-fh** *number_header_rows*  
Количество строк, чтобы пропустить в начале *source_data_file_name*. Значение по умолчанию равно 0.  
  
<variable_length_column_options>  
Параметры для *source_data_file_name* с символами столбцов переменной длины. По умолчанию *source_data_file_name* содержит символы ASCII в столбцы с переменной длиной.  
  
Для ASCII-файлов значения NULL, представляются последовательное размещение разделители. Например, в файле с разделителями канала ("|»), указывается значение NULL «||». В файле с разделителями запятыми, указывается значение NULL «,,». Кроме того **-E** (--emptyStringAsNull) должен быть указан параметр. Дополнительные сведения о -E см. ниже.  
  
**-e** *character_encoding*  
Указывает тип кодировки символов для данных для загрузки из файла данных. Параметры являются ASCII (по умолчанию), UTF-8, UTF16 или UTF16BE, где UTF16 прямым порядком следования байтов, а UTF16BE — с обратным порядком байтов. Эти параметры являются нечувствительными к регистру.  
  
**-t** *field_delimiter*  
Разделитель для каждого поля (столбца) в строке. В качестве разделителя полей — один или несколько из этих escape-символы ASCII или шестнадцатеричных значений ASCII...  
  
|Название|Escape-символ|Шестнадцатеричный символьный|  
|--------|--------------------|-----------------|  
|Вкладка|\t|0x09|  
|Возврат каретки (CR)|\r|0x0d|  
|Перевод строки (LF)|\n|0x0a|  
|CRLF|\r\n|0x0d0x0a|  
|Запятая|','|0x2c|  
|Двойная кавычка|\\"|0x22|  
|Одинарная кавычка|\\'|0x27|  
  
Чтобы указать знак вертикальной черты в командной строке, заключите его в двойные кавычки «|». Это позволит избежать интерпретации анализатором командной строки. Другие символы, заключаются в одинарные кавычки.  
  
Примеры:  
  
-t «|»  
  
-t ""  
  
-t 0x0a  
  
\t -t  
  
-t "~ | ~"  
  
**-r** *row_delimiter*  
Разделитель для каждой строки файла источника данных. Разделитель строк — одно или несколько значений ASCII.  
  
Чтобы указать символы возврата каретки (CR), перевод строки (LF) или символ табуляции в качестве разделителя, можно использовать escape-символы (\r, \n, \t) или их шестнадцатеричные значения (0 x, 0d 09). Чтобы указать другие специальные символы в качестве разделителей, используйте их в шестнадцатеричное значение.  
  
Примеры CR + LF.  
  
\r\n - r  
  
0x0d0x0a - r  
  
Примеры CR:  
  
\r - r  
  
-r 0x0d  
  
Примеры LF.  
  
\n - r  
  
-r 0x0a  
  
LF является обязательным для Unix. CR является обязательным для Windows.  
  
**-s** *string_delimiter*  
Разделитель для строковых данных типа полей, разделенных текстом входного файла. Разделитель строк — одно или несколько значений ASCII.  Он может быть указан как символ (например, -s *) или как шестнадцатеричное значение (например, -s 0x22 для двойные кавычки).  
  
Примеры:  
  
-s *  
  
-s 0x22  
  
< fixed_width_column_options >  
Параметры для исходного файла данных со столбцами, фиксированной длины. По умолчанию *source_data_file_name* содержит символы ASCII в столбцы с переменной длиной.  
  
Фиксированная ширина столбцов не поддерживаются при – e-UTF8.  
  
**-w** *fixed_width_config_file*  
Путь и имя файла конфигурации, который указывает число символов в каждом столбце. Каждое поле должно быть указано.  
  
Этот файл должен находиться на сервере загрузки. Путь может быть UNC-пути, относительный или абсолютный путь. В каждой строке *fixed_width_config_file* с именами один столбец и число символов для этого столбца. Имеется одна строка для каждого столбца, как показано ниже, и порядок, в файле должен совпадать с порядком в целевой таблице:  
  
*column_name*=*num_chars*  
  
*column_name*=*num_chars*  
  
Пример фиксированной ширины файла конфигурации.  
  
SalesCode = 3  
  
SalesID = 10  
  
Пример строки в *source_data_file_name*:  
  
230Shirts0056  
  
320Towels1356  
  
В предыдущем примере первый загруженной строки будут иметь SalesCode = "230" и SalesID = «Shirts0056». Во-вторых загруженной строки будут иметь SalesCode = "320" и SaleID = «Towels1356».  
  
Сведения о том, как обрабатывать начальные и конечные пробелы или преобразования типа данных в режиме фиксированной ширины в разделе [dwloader правила преобразования типов данных](dwloader-data-type-conversion-rules.md).  
  
**-e** *character_encoding*  
Указывает тип кодировки символов для данных для загрузки из файла данных. Параметры являются ASCII (по умолчанию), UTF-8, UTF16 или UTF16BE, где UTF16 прямым порядком следования байтов, а UTF16BE — с обратным порядком байтов. Эти параметры являются нечувствительными к регистру.  
  
Фиксированная ширина столбцов не поддерживаются при – e-UTF8.  
  
**-r** *row_delimiter*  
Разделитель для каждой строки файла источника данных. Разделитель строк — одно или несколько значений ASCII.  
  
Чтобы указать символы возврата каретки (CR), перевод строки (LF) или символ табуляции в качестве разделителя, можно использовать escape-символы (\r, \n, \t) или их шестнадцатеричные значения (0 x, 0d 09). Чтобы указать другие специальные символы в качестве разделителей, используйте их в шестнадцатеричное значение.  
  
Примеры CR + LF.  
  
\r\n - r  
  
0x0d0x0a - r  
  
Примеры CR:  
  
\r - r  
  
-r 0x0d  
  
Примеры LF.  
  
\n - r  
  
-r 0x0a  
  
LF является обязательным для Unix. CR является обязательным для Windows.  
  
**-D** { **гмд** | ГДМ | МДГ | МГД |  ДМГ | ДГМ | *custom_date_format* }  
Указывает порядок месяц (m), (d) день и год (y) для всех полей даты и времени во входном файле. Порядок по умолчанию является «гмд». Чтобы указать несколько форматов заказ для этого же исходного файла, используйте параметр-dt.  
  
«гмд» | ДМГ  
ГДМ и ДМГ позволяют же формат ввода. Оба позволяют год, чтобы быть в начале или конце даты. Например, для обоих **ГДМ** и **ДМГ** форматов даты 2013-02-03 или 02-03-2013 может иметь во входном файле.  
  
ГДМ  
Можно загружать только входные данные в формате ГДМ в столбцы типа данных datetime и smalldatetime. Не удается загрузить ГДМ значения в столбец datetime2, дату или тип данных datetimeoffset.  
  
mdy  
позволяет МДГ <month> <space> <day> <comma> <year>.  
  
Примеры МДГ входные данные для 1 января 1975 г.  
  
-   1 января 1975 г.  
  
-   01 янв 75  
  
-   Янв/1/75  
  
-   01011975  
  
мгд  
Входной файл примеры для марта 04,2010: 2010-03-04, 2010/3/4  
  
дгм  
Входной файл примеры для 04 марта 2010 г.: 2010-04-03, 2010/4/3  
  
*custom_date_format*  
*custom_date_format* — это формат настраиваемые дата (например, мм/дд/гггг) и включается только для обратной совместимости. dwloader не не enfoce пользовательский формат. Вместо этого при указании пользовательский формат, **dwloader** преобразует его в соответствующий параметр ГМД, ГДМ, МДГ, ДГМ, МГД или ДМГ.  
  
Например если указать – D мм/дд/гггг, dwloader ожидает, что все даты ввода располагаются с месяца, во-первых, а затем день и затем год (МДГ). Не реализуется 2 месяца символ 2 дня цифр и 4 цифр года в соответствии с пользовательский формат. Ниже приведены некоторые примеры способов можно отформатировать даты во входном файле, если дата имеет формат – D мм/дд/гггг: 01/02/2013 Jan.02.2013, 1/2/2013  
  
Для форматирования более подробные сведения см. в разделе [dwloader правила преобразования типов данных](dwloader-data-type-conversion-rules.md).  
  
**-dt** *datetime_format_file*  
Каждый формат datetime указано в файле с именем *datetime_format_file*. В отличие от параметров командной строки файл параметров, которые содержат пробелы не нужно заключать в двойные кавычки. Невозможно изменить формат даты и времени, как загрузить данные. Файл источника данных и соответствующего столбца в целевой таблице должны иметь тот же формат.  
  
Каждая строка содержит имя столбца в таблице назначения и формат даты и времени.  
  
Примеры:  
  
`LastReceiptDate=ymd`  
  
`ModifiedDate=dym`  
  
**-d** *staging_database_name*  
Имя базы данных, который будет содержать промежуточной таблицы. Значение по умолчанию — базы данных, указанной с помощью параметра -T с базой данных для целевой таблицы. Дополнительные сведения об использовании промежуточной базы данных см. в разделе [создать базу данных промежуточного хранения](staging-database.md).  
  
**-M** *load_mode_option*  
Указывает, следует ли добавить, вставка, или же перезагрузить данные. Режим по умолчанию append.  
  
Добавление  
Загрузчик вставляет строки в конце существующих строк в таблице назначения.  
  
fastappend  
Загрузчик вставляет строки напрямую, без использования временной таблицы, в конец существующих строк в таблице назначения. fastappend требует множественных транзакций (– m) параметра. Промежуточной базы данных не может быть указан при использовании fastappend. Нет никакого отката с fastappend, что означает восстановление после сбоя или прерванный нагрузки, обрабатываемых собственного процесса загрузки.  
  
Вставка **-K***merge_column* [,...*n* ]    
Загрузчик использует инструкцию SQL Server Merge для обновления существующих строк и вставлять новые строки.  
  
Параметр -K указывает столбец или столбцы для слияния на. Эти столбцы формируют ключ слияния, который должен обозначать уникальную строку. Если ключ слияния существует в целевой таблице, строка обновляется. Если ключ объединения не существует в целевой таблице, добавляется строка.  
  
Для распределенных хэш таблиц ключ объединения должен быть или включать столбец распределения.  
  
Для реплицированных таблиц слияния ключ представляет собой сочетание одного или нескольких столбцов. Эти столбцы задаются в соответствии с потребностями приложения.  
  
Несколько столбцов должен быть запятыми без пробелов или запятыми пробелами и заключено в одинарные кавычки.  
  
Если две строки в исходной таблице имеют совпадающие значения ключа слияния, их соответствующие строки должны быть одинаковыми.  
  
Перезагрузить  
Загрузчик Усекает целевую таблицу, прежде чем он вставляет в источнике данных.  
  
**-b** *batchsize*  
Рекомендуется только для использования службой поддержки корпорации Майкрософт *batchsize* является размер пакета SQL Server для массового копирования, выполняющий DMS в экземпляры SQL Server на вычислительных узлах.  Когда *batchsize* задан, переопределяет размер загрузки пакета, который динамически вычисляется для каждого нагрузки SQL Server PDW.  
  
Начиная с SQL Server 2012 PDW, узел элемента управления динамически вычисляет размер пакета для каждого нагрузки по умолчанию. Это автоматический расчет основан на несколько параметров, таких как объем памяти, тип целевой таблицы, схемы целевой таблицы, тип нагрузки, размер файла и класса пользователя ресурса.  
  
Например, если режим загрузки FASTAPPEND, а таблица имеет кластеризованный индекс, SQL Server PDW будет, по умолчанию попытка использовать размер пакета равным 1 048 576, чтобы группы строк будет ЗАКРЫТО и нагрузки непосредственно в columnstore без прохода через разностного хранилища. Если памяти не допускает размера, 1 048 576, dwloader выберет меньший размер.  
  
Если тип загрузки FASTAPPEND, *batchsize* применяется для загрузки данных в таблицу, в противном случае *batchsize* применяется для загрузки данных в промежуточную таблицу.  
  
< reject_options >  
Задает параметры для определения количества сбоев при загрузке позволяют загрузчик. Если сбой загрузки превышает пороговое значение, загрузчик halt и фиксирует все строки.  
  
**-rt** { **значение** | процент}  
Указывает, является ли*reject_value* в **-rv** *reject_value* литерала число строк (значение) или скорость сбоя (в процентах). По умолчанию используется значение.  
  
Параметр процент — вычисление в режиме реального времени, которое происходит через интервалы в соответствии с параметром - rs.  
  
Например если загрузчик попытки загрузить 100 строк и 25 неудачно и успешно 75, частота сбоев — 25%.  
  
**-rv** *reject_value*  
Указывает количество или процент строк отклонения, чтобы разрешить до остановка нагрузки. **-Rt** определяет параметр, если *reject_value* относится к числу строк или процент строк.  
  
Значение по умолчанию *reject_value* — 0.  
  
При использовании со значением -rt загрузчик останавливает нагрузки при reject_value превышает количество отклоненных строк.  
  
Когда использовать -rt процент, загрузчик вычисляет процент интервалы (-параметр rs). Таким образом, может превышать процент сбойных строк *reject_value*.  
  
**-rs** *reject_sample_size*  
При использовании `-rt percentage` параметр, чтобы указать добавочное процент проверки. Например если reject_sample_size равно 1000, загрузчик вычисляет процент сбойных строк после попытки загрузить 1000 строк. Он пересчитает процент сбойных строк после пытается загрузить каждый дополнительный 1000 строк.  
  
**-c**  
Удаляет пробелы из левой и правой части char, nchar, varchar и nvarchar поля. Преобразует каждого поля, которое содержит только пробелы в пустую строку.  
  
Примеры:  
  
"" возвращает усекается до ''  
  
Возвращает усекается 'abc' до 'abc'  
  
При использовании с параметром -E, — c-E операции происходит раньше. Поля, содержащие только пробелы, преобразуются на пустую строку, а не значение NULL.  
  
**-E**  
Преобразует пустые строки в значение NULL. Значение по умолчанию — не выполнять эти преобразования.  
  
**-m**  
Используйте режим множественных транзакций для второго этапа загрузки; При загрузке данных из промежуточной таблицы в распределенных таблицу.  
  
С **– m**, SQL Server PDW выполняет и фиксирует загружает в параллельном режиме. Это выполняется гораздо быстрее, чем режим загрузки по умолчанию, но не является безопасным в транзакции.  
  
Без **– m**, SQL Server PDW выполняет и фиксирует загружает последовательно всех распределения в каждом вычислительном узле и одновременно в вычислительных узлов. Этот метод медленнее, чем режим множественных транзакций, но является типизированным транзакции.  
  
**-m** не является обязательным для *append*, *перезагрузить*, и *upsert*.  
  
**-m** является обязательным для fastappend.  
  
**-m** не может использоваться с реплицированными таблицами.  
  
**-m** применяется только ко второму этапу загрузки. Он не применяется к первой фазы загрузки; При загрузке данных в промежуточную таблицу.  
  
Нет никакого отката с режимом множественных транзакций, что означает восстановление после сбоя или прерванный нагрузки, обрабатываемых собственного процесса загрузки.  
  
Мы рекомендуем использовать **– m** только при загрузке в пустую таблицу, так что можно будет восстановить без потери данных. Для восстановления после сбоя загрузки: удалить целевую таблицу, устранить ее загрузки, создать повторно целевую таблицу и снова запустите нагрузки.  
  
**-N**  
Проверьте наличие действительного сертификата SQL Server PDW от доверенного центра сертификации целевого устройства. Используется для обеспечения данных не выполняется злоумышленником и отправлять их несанкционированного расположение. Сертификат уже должны быть установлены на устройстве. Единственный способ установки сертификата — для администратора устройства, чтобы установить его при помощи диспетчера конфигурации. Попросите администратора устройства, если вы не знаете ли устройство имеет установленный сертификат доверенным.  
  
**-se**  
Пропустить загрузку пустые файлы. Это также пропускает распаковка файлов пустой gzip.  
  
## <a name="return-code-values"></a>Значения кода возврата  
0 (успешное завершение) или другие целочисленное значение (неуспешное завершение)  
  
В командном файле окна или пакет, используйте `errorlevel` для отображения кода возврата. Например:  
  
```  
dwloader  
echo ReturnCode=%errorlevel%  
if not %errorlevel%==0 echo Fail  
if %errorlevel%==0 echo Success  
```  
  
При использовании PowerShell, используйте `$LastExitCode`.  
  
## <a name="permissions"></a>Разрешения  
Требуется разрешение НАГРУЗКИ и применимые разрешения на целевую таблицу (INSERT, UPDATE, DELETE). Требуется разрешение CREATE (для создания временной таблицы) в промежуточной базе данных. Если не используется промежуточной базы данных, в целевой базе данных требуется разрешение CREATE. 

<!-- MISSING LINK
For more information, see [Grant permissions to load data](grant-permissions-to-load-data.md).  
-->
  
## <a name="general-remarks"></a>Общие замечания  
Сведения о преобразовании типов данных при загрузке с dwloader см. в разделе [dwloader правила преобразования типов данных](dwloader-data-type-conversion-rules.md).  
  
Если параметр содержит один или несколько пробелов, заключите в двойные кавычки этот параметр.  
  
Загрузчик следует запускать из папки установки. Исполняемый файл dwloader предустановленным с устройством и расположен в каталоге C:\Program Files\Microsoft SQL Server данных Warehouse\DWLoader.  
  
Можно переопределить параметр, который указан в файле параметров (-f параметр), указав его в качестве параметра командной строки.  
  
Можно одновременно запустить несколько экземпляров загрузчика. Максимальное количество экземпляров загрузчика — стандартное и не может быть изменено. 

<!-- MISSING LINK
For the maximum number of loads per appliance, see [Minimum and Maximum Values](minimum-maximum-values.md)  
-->
  
Загруженных данных может потребоваться больше или меньше места на устройстве, чем в исходном местоположении. Можно выполнить тест imports с подмножествами данных для оценки потребление дискового пространства.  
  
Несмотря на то что **dwloader** — это процесс транзакции и выполнит откат надлежащим образом при сбое, его невозможно откатить назад в том случае, когда Массовая загрузка выполнена успешно. Чтобы отменить активный **dwloader** обработки, введите сочетание клавиш CTRL + C.  
  
## <a name="limitations-and-restrictions"></a>Ограничения  
Общий размер всех нагрузок, которые выполняются одновременно, должно быть меньше, чем LOG_SIZE для базы данных и рекомендуется, чтобы общий размер всех параллельных загрузок — меньше 50% LOG_SIZE. Чтобы добиться этого предельного размера, можно разделить большой нагрузки на несколько пакетов. Дополнительные сведения о LOG_SIZE см. в разделе [Создание базы данных](../t-sql/statements/create-database-parallel-data-warehouse.md)  
  
При загрузке нескольких файлов с помощью команды один нагрузки, все отклоненные строки будут записаны в тот же файл отклонения. Отклонить файла отображается какой входной файл содержит каждой отклоненные строки.  
  
Пустая строка не должна использоваться как разделитель. Если пустая строка используется в качестве разделителя строки, произойдет сбой загрузки. Если используется как разделитель столбцов, нагрузки игнорирует разделитель и продолжает использовать значение по умолчанию «|» в качестве разделителя столбцов. При использовании в качестве разделителей строк, пустая строка учитывается и поведение по умолчанию применяется.  
  
## <a name="locking-behavior"></a>Режим блокировки  
**dwloader** режим блокировки варьируется в зависимости от *load_mode_option*.  
  
-   **Добавление** — Append имеет рекомендуемое и наиболее распространенным типом. Добавление загружает данные в промежуточную таблицу. Блокировка подробно описан ниже.  
  
-   **Быстрое добавление** — Добавление Fast загружает непосредственно в окончательной таблице ExclusiveUpdate блокировка таблицы и представляет собой единственный режим, который не использует промежуточной таблицы.  
  
-   **перезагрузить** — перезагрузить загружает данные в промежуточную таблицу и требует монопольной блокировки на промежуточную таблицу и окончательной таблицы. Перезагрузка не рекомендуется для одновременных операций.  
  
-   **Вставка** — Upsert загружает данные в промежуточную таблицу, а затем выполняет слияние из промежуточной таблицы для окончательной таблицы. Upsert не требует монопольных блокировок на окончательной таблицы. Производительность может меняться при использовании upsert. Проверьте поведение в вашей среде.  
  
### <a name="locking-behavior"></a>Режим блокировки  
**Режим блокировки append**  
  
Добавление может выполняться в нескольких транзакций режиме (с помощью аргумента – m), но не безопасные транзакции. Поэтому добавьте следует использовать в качестве транзакционной операцией (без использования аргумента – m). К сожалению во время последней операции INSERT SELECT транзакционный режим в настоящее время примерно в шесть раз медленнее, чем режим нескольких транзакций.  
  
В режиме дозаписи загружает данные в два этапа. Первый этап загружает данные из исходного файла в промежуточную таблицу одновременно (может возникнуть фрагментация). Этап 2 загружает данные из промежуточной таблицы в окончательной таблицы. На втором этапе выполняет **INSERT INTO... ВЫБЕРИТЕ параметр WITH (TABLOCK)** операции. Следующая таблица показывает режим блокировки на окончательной таблицы и режим добавления режим ведения журнала при использовании:  
  
|Тип таблицы|Множественных транзакций<br />Режим (-m)|Таблица пуста.|Поддерживается с параллелизмом|Ведение журнала|  
|--------------|-----------------------------------|------------------|-------------------------|-----------|  
|Куча|Да|Да|Да|Минимальный|  
|Куча|Да|Нет|Да|Минимальный|  
|Куча|Нет|Да|Нет|Минимальный|  
|Куча|Нет|Нет|Нет|Минимальный|  
|CL|Да|Да|Нет|Минимальный|  
|CL|Да|Нет|Да|Полная|  
|CL|Нет|Да|Нет|Минимальный|  
|CL|Нет|Нет|Да|Полная|  
  
В приведенном выше таблице показаны **dwloader** с помощью режима append загрузки в кучу или кластеризованный индекс (CI) таблицу, независимо от флага нескольких транзакций и загрузить в пустую таблицу или таблица не пуста. Блокировка и ведение журнала работы каждой такой комбинации нагрузки отображается в таблице. Для экземпляра этапе (2) в режиме append загрузки в кластеризованный индекс без указания режима нескольких транзакций и в пустой таблице будет иметь PDW создать монопольную блокировку для таблицы и ведения журнала сводится к минимуму. Это означает, что клиент не сможет загрузить (2-й) этапа и запросов одновременно в пустую таблицу. Однако при загрузке с такой же конфигурацией в непустую таблицу PDW не выдаст монопольной блокировки на таблицу и параллелизма возможно. К сожалению полное протоколирование происходит замедление процесса.  
  
## <a name="examples"></a>Примеры  
  
### <a name="a-simple-dwloader-example"></a>A. Пример простого dwloader  
В следующем примере показан запуск **загрузчика** с выбраны только необходимые параметры. Другие параметры берутся из файла Глобальная конфигурация *loadparamfile.txt*.  
  
Пример использования проверки подлинности SQL Server.  
  
```  
--Load over Ethernet  
dwloader.exe -S 10.192.63.148 -U mylogin -P 123jkl -f /configfiles/loadparamfile.txt  
  
--Load over InfiniBand to appliance named MyPDW  
dwloader.exe -S MyPDW-SQLCTL01 -U mylogin -P 123jkl -f /configfiles/loadparamfile.txt  
```  
  
Тот же пример с использованием проверки подлинности Windows.  
  
```  
--Load over Ethernet  
dwloader.exe -S 10.192.63.148 -W -f /configfiles/loadparamfile.txt  
  
--Load over InfiniBand to appliance named MyPDW  
dwloader.exe -S MyPDW-SQLCTL01 -W -f /configfiles/loadparamfile.txt  
```  
  
Пример использования аргументов исходный файл и файл ошибок.  
  
```  
--Load over Ethernet  
dwloader.exe -U mylogin -P 123jkl -S 10.192.63.148  -i C:\SQLData\AWDimEmployees.csv -T AdventureWorksPDW2012.dbo.DimEmployees -R C:\SQLData\LoadErrors  
```  
  
### <a name="b-load-data-into-an-adventureworks-table"></a>Б. Загрузка данных в таблицу AdventureWorks  
Следующий пример является частью пакетного сценария, которая загружает данные в **AdventureWorksPDW2012**.  Чтобы просмотреть полный скрипт, откройте файл aw_create.bat, который поставляется вместе с **AdventureWorksPDW2012** пакет установки. 

<!-- Missing link
For more information, see [Install AdventureWorksPDW2012](install-adventureworkspdw2012.md).  
-->

В следующем фрагменте скрипта использует dwloader для загрузки данных в таблицы в DimAccount и DimCurrency. Этот скрипт использует Ethernet-адрес. Если он использовал InfiniBand, сервер будет *< appliance_name >*`-SQLCTL01`.  
  
```  
set server=10.193.63.134  
set user=<MyUser>  
set password=<MyPassword>  
  
set schema=AdventureWorksPDW2012.dbo  
set load="C:\Program Files\Microsoft SQL Server Parallel Data Warehouse\100\dwloader.exe"  
set mode=reload  
  
--Loads data into the AdventureWorksPDW2012.dbo.DimAccount table  
--Source data is stored in the file DimAccount.txt,   
--which is in the current directory.  
  
set t1=DimAccount  
%load% -S %server% -E -M %mode% -e Utf16 -i .\%t1%.txt -T %schema%.%t1% -R %t1%.bad -t "|" -r \r\n -U %user% -P %password%   
  
--Loads data from the DimCurrency.txt file into  
--AdventureWorksPDW2012.dbo.DimCurrency  
set t1=DimCurrency  
%load% -S %server% -E -M %mode% -e Utf16 -i .\%t1%.txt -T %schema%.%t1% -R %t1%.bad -t "|" -r \r\n -U %user% -P %password%  
```  
  
Ниже приведен DDL для DimAccount таблицы.  
  
```  
CREATE TABLE DimAccount(  
AccountKey int NOT NULL,  
ParentAccountKey int,  
AccountCodeAlternateKey int,  
ParentAccountCodeAlternateKey int,  
AccountDescription nvarchar(50),  
AccountType nvarchar(50),  
Operator nvarchar(50),  
CustomMembers nvarchar(300),  
ValueType nvarchar(50),  
CustomMemberOptions nvarchar(200))  
with (CLUSTERED INDEX(AccountKey),  
DISTRIBUTION = REPLICATE);  
```  
  
Ниже приведен пример файла данных DimAccount.txt, содержащий данные для загрузки в таблицу DimAccount.  
  
```  
--Sample of data in the DimAccount.txt load file.  
  
1||1||Balance Sheet||~||Currency|  
2|1|10|1|Assets|Assets|+||Currency|  
3|2|110|10|Current Assets|Assets|+||Currency|  
4|3|1110|110|Cash|Assets|+||Currency|  
5|3|1120|110|Receivables|Assets|+||Currency|  
6|5|1130|1120|Trade Receivables|Assets|+||Currency|  
7|5|1140|1120|Other Receivables|Assets|+||Currency|  
8|3|1150|110|Allowance for Bad Debt|Assets|+||Currency|  
9|3|1160|110|Inventory|Assets|+||Currency|  
10|9|1162|1160|Raw Materials|Assets|+||Currency|  
11|9|1164|1160|Work in Process|Assets|+||Currency|  
12|9|1166|1160|Finished Goods|Assets|+||Currency|  
13|3|1170|110|Deferred Taxes|Assets|+||Currency|  
```  
  
### <a name="c-load-data-from-the-command-line"></a>В. Загрузка данных из командной строки  
Можно заменить сценарий в примере Б, введя в командной строке, все параметры, как показано в следующем примере.  
  
```  
C:\Program Files\Microsoft SQL Server Parallel Data Warehouse\100\dwloader.exe –S <Control node IP> -E –M reload –e UTF16 -i .\DimAccount.txt –T AdventureWorksPDW2012.dbo.DimAccount –R DimAccount.bad –t "|" –r \r\n –U <login> -P <password>  
```  
  
Описание параметров командной строки:  
  
-   *C:\Program Files\Microsoft SQL Server параллельных данных Warehouse\100\dwloader.exe* установленных расположение dwloader.exe.  
  
-   *-S* следуют IP-адрес узла управления.  
  
-   *-E* указывает загружать пустые строки как NULL.  
  
-   *-M перезагрузить* указывает выполнить усечение целевой таблицы, до его вставки в источнике данных.  
  
-   *-e UTF16* указывает исходный файл использует прямым порядком следования байтов типа кодировки символов.  
  
-   *-i.\DimAccount.txt* указывает данные в файле с именем DimAccount.txt, который существует в текущем каталоге.  
  
-   *-T AdventureWorksPDW2012.dbo.DimAccount* указывает 3 частей имя таблицы для получения данных.  
  
-   *-R DimAccount.bad* строк, которые не удалось загрузить будет записан в файл с именем DimAccount.bad.  
  
-   *– t «|»*  указывает полей во входном файле DimAccount.txt, разделяются символом вертикальной черты.  
  
-   *-r \r\n* указывает каждая строка в DimAccount.txt заканчивается символом возврата каретки и перевода строки символов.  
  
-   *-U < login_name > -P <password>*  указывает имя входа и пароль для имени входа с разрешениями для выполнения загрузки.  
  

<!-- MISSING LINK

## See Also  
[Common Metadata Query Examples](metadata-query-examples.md)  

-->
  
