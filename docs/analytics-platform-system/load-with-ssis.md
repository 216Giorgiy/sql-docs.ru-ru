---
title: "Загрузка данных со службами Integration Services"
author: barbkess
ms.author: barbkess
manager: jhubbard
ms.prod: analytics-platform-system
ms.prod_service: mpp-data-warehouse
ms.service: 
ms.component: 
ms.suite: sql
ms.custom: 
ms.technology: mpp-data-warehouse
description: "Предоставляет информации о развертывании и ссылки для загрузки данных в хранилище параллельных данных SQL Server с помощью пакетов служб SQL Server Integration Services (SSIS)."
ms.date: 10/20/2016
ms.topic: article
ms.assetid: 9bdb559a-a91c-4342-8a6e-438cb93f975c
caps.latest.revision: "69"
ms.openlocfilehash: f00f72886a10c8be05db6a28adf3df89f8116081
ms.sourcegitcommit: cc71f1027884462c359effb898390c8d97eaa414
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/21/2017
---
# <a name="load-data-with-integration-services"></a>Загрузка данных со службами Integration Services
Предоставляет информации о развертывании и ссылки для загрузки данных в хранилище параллельных данных SQL Server с помощью пакетов служб SQL Server Integration Services (SSIS).  
  
<!-- MISSING LINKS

## <a name="BeforeBegin"></a>Before You Begin  
Before you can start loading data, use the following topics to install the Integration Services Destination Adapters and to create an Integration Services package that connects SQL Server PDW:  


-   [Install Integration Services destination adapters](install-integration-services-destination-adapters.md)  
  
-   [Connect With Integration Services for loading](connect-with-ssis-for-loading.md)  
  
For general information about developing Integration Services packages, see [Designing and Implementing Packages (Integration Services)](http://msdn.microsoft.com/library/ms141091&#40;v=sql11&#40;.aspx) on MSDN.  

-->
  
## <a name="Basics"></a>Основы  
Службы Integration Services — это компонент SQL Server для высокопроизводительного извлечения, преобразования и загрузки (ETL) данных и обычно используется для заполнения и обновления хранилища данных.  
  
Адаптер загрузки PDW — это компонент служб Integration Services, который позволяет загрузить данные в PDW с помощью dtsx-пакетов служб Integration Services. В рабочем процессе пакета для SQL ServerPDW можно загружать и объединять данные из нескольких источников и загрузки данных в несколько назначений. Загрузки происходят параллельно как внутри пакета, так и среди нескольких параллельно выполняющихся пакетов; параллельно в одном устройстве может выполняться до 10 загрузок.  
  
Кроме задач, описанных в этом разделе другие возможности служб Integration Services для фильтрации, преобразование, анализ и очистку данных перед загрузкой в хранилище данных. Кроме того, можно повышать производительность рабочих процессов пакета путем запуска инструкций SQL, запуска дочерних пакетов или отправки почты.  
  
Полную документацию служб Integration Services см. в разделе [SQL Server Integration Services](http://msdn.microsoft.com/library/ms141026(v=sql11).aspx).  
  
## <a name="HowToDeployPackage"></a>Методы для выполнения пакета служб Integration Services  
Используйте один из следующих методов для запуска пакета служб Integration Services.  
  
### <a name="run-from-sql-server-2008-r2-business-intelligence-development-studio-bids"></a>Запуск из SQL Server 2008 R2 Business Intelligence Development Studio (BIDS)  
Чтобы запустить пакет из в BIDS, щелкните пакет правой кнопкой мыши и выберите **выполнение пакета**.  
  
По умолчанию BIDS выполняется пакетов с помощью 64-разрядных двоичных файлов. Это определяется **Run64BitRuntime** свойства пакета. Чтобы задать это свойство, перейдите к **обозревателе решений**, щелкните правой кнопкой мыши проект и выберите **свойства**. На **страницы свойств служб интеграции**, перейдите в меню **свойства конфигурации** и выберите **Отладка**. Вы увидите **Run64BitRuntime** свойства в разделе **параметры отладки**. Чтобы использовать 32-разрядной среды выполнения, задайте значение **False**. Чтобы использовать 64-разрядной среды выполнения, задайте значение **True**.  
  
### <a name="run-from-sql-server-2012-sql-server-data-tools"></a>Запустите из SQL Server 2012 SQL Server Data Tools  
Чтобы запустить пакет из в SQL Server Data Tools, щелкните пакет правой кнопкой мыши и выберите **выполнение пакета**.  
  
### <a name="run-from-powershell"></a>Выполните в PowerShell  
Чтобы запустить пакет из Windows PowerShell с помощью **dtexec** программы:`dtexec /FILE <packagePath>`  
  
Например `dtexec /FILE "C:\Users\User1\Desktop\Package.dtsx"`  
  
### <a name="run-from-a-windows-command-prompt"></a>Командную строку запуска из Windows 
Чтобы запустить пакет из командной строки Windows, с помощью **dtexec** программы:`dtexec /FILE <packagePath>`  
  
Например: `dtexec /FILE "C:\Users\User1\Desktop\Package.dtsx"`.  
  
## <a name="DataTypes"></a>Типы данных  
При использовании службы Integration Services для загрузки данных из источника данных в базе данных SQL Server PDW, сначала сопоставляются данные из источника данных в типы данных служб Integration Services. Это позволяет сопоставлять данные из нескольких источников с общим набором типов данных.  
  
Затем сопоставляются данные из служб Integration Services с типами данных SQL Server PDW. Для каждого типа данных SQL Server PDW в следующей таблице перечислены типы данных служб Integration Services, которые могут быть преобразованы в тип данных SQL Server PDW.  
  
|Тип данных PDW|Интеграция служб типы данных (s), соответствующие типу данных PDW|  
|---------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------|  
|BIT|DT_BOOL|  
|bigint|DT_I1, DT_I2, DT_I4, DT_I8, DT_UI1, DT_UI2, DT_UI4|  
|CHAR|DT_STR|  
|DATE|DT_DBDATE|  
|DATETIME|DT_DATE, DT_DBDATE, DT_DBTIMESTAMP, DT_DBTIMESTAMP2|  
|DATETIME2|DT_DATE, DT_DBDATE, DT_DBTIMESTAMP, DT_DBTIMESTAMP2|  
|DATETIMEOFFSET|DT_WSTR|  
|DECIMAL|DT_DECIMAL, DT_I1, DT_I2, DT_I4, DT_I4, DT_I8, DT_NUMERIC, DT_UI1, DT_UI2, DT_UI4, DT_UI8|  
|FLOAT|DT_R4, DT_R8|  
|INT|DT_I1, DTI2, DT_I4, DT_UI1, DT_UI2|  
|MONEY|DT_CY|  
|NCHAR|DT_WSTR|  
|NUMERIC|DT_DECIMAL, DT_I1, DT_I2, DT_I4, DT_I8, DT_NUMERIC, DT_UI1, DT_UI2, DT_UI4, DT_UI8|  
|NVARCHAR|DT_WSTR, DT_STR|  
|real|DT_R4|  
|SMALLDATETIME|DT_DBTIMESTAMP2|  
|SMALLINT|DT_I1, DT_I2, DT_UI1|  
|SMALLMONEY|DT_R4|  
|TIME|DT_WSTR|  
|TINYINT|DT_I1|  
|VARBINARY|DT_BYTES|  
|VARCHAR|DT_STR|  
  
**Ограниченная поддержка точности типов данных**  
  
PDW приводит к возникновению ошибки проверки при сопоставлении входного столбца DT_NUMERIC или DT_DECIMAL, который содержит значение с точностью больше 28.  
  
**Неподдерживаемые типы данных**  
  
SQL Server PDW не поддерживает следующие типы данных служб Integration Services:  
  
-   DT_DBTIMESTAMPOFFSET  
  
-   DT_DBTIME2  
  
-   DT_GUID  
  
-   DT_IMAGE  
  
-   DT_NTEXT  
  
-   DT_TEXT  
  
Чтобы загрузить столбцов, содержащих данные из этих типов в SQL Server PDW, необходимо добавить вышестоящих «Конвертация данных» в потоке данных для преобразования данных в совместимый тип данных.  
  
## <a name="permissions"></a>Разрешения  
Чтобы запустить пакет служб Integration Services нагрузки, необходимо:  
  
-   Разрешение загрузки в базе данных.  
  
-   Применимые INSERT, UPDATE, DELETE разрешения на целевую таблицу.  
  
-   Если используется промежуточной базы данных, разрешение CREATE в промежуточной базе данных. Это необходимо для создания временной таблицы.  
  
-   Если промежуточная база данных не используется, разрешение CREATE в целевой базе данных. Это необходимо для создания временной таблицы.  
  
## <a name="GenRemarks"></a>Общие замечания  
При пакета служб Integration Services имеет несколько назначений SQL Server PDW под управлением, и одно из подключений прерывается, службы Integration Services прекращает передачу во все назначения SQL Server PDW.  
  
## <a name="Limits"></a>Ограничения  
Число назначений SQL Server PDW для одного источника данных для пакета служб Integration Services, ограничивается максимальное число активных нагрузок. Это максимальное значение — стандартное и не предназначено для настройки пользователем. 

<!-- MISSING LINKS
For the maximum number of loads and queued loads per appliance, see [Minimum and maximum values](minimum-and-maximum-values.md).  
-->
  
Назначений пакета служб Integration Services для одного источника данных считается как одна нагрузка при выполнении пакета. Например, предположим, что максимальное количество активных нагрузок равно 10. Пакет не будет запущен, если попытается открыть 11 или больше назначений для одного источника данных.  
  
Несколько пакетов могут работать параллельно при условии, что каждый пакет использует не больше максимального количества активных нагрузок. Например, если максимальное количество активных нагрузок составляет 10, то можно одновременно запускать два пакета по 10 назначений в каждом. Пока один пакет будет выполняться, второй будет ожидать в очереди нагрузок.  
  
Если количество нагрузок в очереди нагрузок превысит максимальное количество нагрузок в очереди, пакет не запустится. Например, если максимальное количество нагрузок составляет 10 на устройство и максимальное количество нагрузок в очереди равно 40 на устройство, то можно одновременно запускать пяти пакетов служб Integration Services, каждый 10 назначений. Если произойдет попытка запустить шестой пакет, он не запустится.  

> [!IMPORTANT]
> С помощью источника данных OLE DB для служб SSIS с адаптером назначения PDW, могут привести к повреждению данных, если исходная таблица содержит столбцы char и varchar с параметрами сортировки SQL. Мы рекомендуем использовать ADO.NET, источник, если исходная таблица содержит столбцы типа char или varchar с параметрами сортировки SQL. 

  
## <a name="Locks"></a>Режим блокировки  
При загрузке данных со службами Integration Services, SQL ServerPDW использует блокировки на уровне строк для обновления данных в целевой таблице. Это означает, что каждая строка будет недоступна для чтения и записи на время обновления. Строки в целевой таблице не блокируются, пока данные загружаются в промежуточную таблицу.  
  
## <a name="Examples"></a>Примеры  
  
### <a name="Walkthrough"></a>А. Простой нагрузочный из неструктурированного файла  
Следующий пример демонстрирует использование служб Integration Services для загрузки данных неструктурированного файла в SQL Server PDW Appliance нагрузки простых данных.  В этом примере предполагается, что службы Integration Services уже установлен на клиентском компьютере, и SQL Server PDW назначения установлено, как описано выше.  
  
В этом примере мы будет загружена в `Orders` таблицы, которая имеет следующая инструкция DDL. `Orders` Таблица является частью `LoadExampleDB` базы данных.  
  
```sql  
CREATE TABLE LoadExampleDB.dbo.Orders (  
   id INT,  
   city varchar(25),  
   lastUpdateDate DATE,  
   orderDate DATE)  
;  
```  
  
Вот загрузки данных.  
  
```  
id        city           lastUpdateDate     orderdate  
--------- -------------- ------------------ ----------  
1         Seattle        2010-05-01         2010-01-01  
2         Denver         2002-06-25         1999-01-02  
```  
  
В процессе подготовки для загрузки Создание неструктурированного файла `exampleLoad.txt`, содержащий данные для загрузки:  
  
```  
id,city,lastUpdateDate,orderDate  
1,Seattle,2010-05-01,2010-01-01  
2,Denver,2002-06-25,1999-01-02  
```  
  
Во-первых создайте пакет служб Integration Services, выполните следующие действия:  
  
1.  В SQL Server Data Tools \(SSDT\)выберите **файл**, **New**, а затем **проекта**. Выберите **проект служб Integration Services** из перечисленных параметров. Имя этого проекта `ExampleLoad`и нажмите кнопку **ОК**.  
  
2.  Нажмите кнопку **поток управления** вкладку, а затем перетащите **задачи потока данных** из **элементов** для **поток управления** области.  
  
3.  Нажмите кнопку **потока данных** вкладку, а затем перетащите **Flat File Source** из **элементов** для **потока данных** области. Дважды щелкните поле, чтобы открыть созданный **Редактор источника неструктурированного файла**.  
  
4.  Нажмите кнопку **диспетчера соединений** и нажмите кнопку **New**.  
  
5.  В **имя диспетчера соединений** введите понятное имя для соединения. В этом примере `Example Load Flat File CM`.  
  
6.  Нажмите кнопку **Обзор** и выберите `ExampleLoad.txt` файл на локальном компьютере.  
  
7.  Поскольку неструктурированного файла содержит строки с именами столбцов, нажмите кнопку **имена столбцов в первой строке данных** поле.  
  
8.  Нажмите кнопку **столбцы** в левом столбце и предварительного просмотра данных, которые будут загружены, чтобы убедиться, что имена столбцов и данных интерпретировались правильно.  
  
9. Нажмите кнопку **Дополнительно** в левом столбце. Щелкните имя каждого столбца, чтобы просмотреть тип данных, связанный с данными. Внесите изменения в поле так, чтобы типы данных, загружаемых данных совместима с типами столбца назначения.  
  
10. Нажмите кнопку **ОК** сохранить диспетчера соединений.  
  
11. Нажмите кнопку **ОК** для выхода из **Редактор источника неструктурированного файла**.  
  
Укажите место назначения для потока данных.  
  
1.  Перетащите **назначение SQL Server PDW** из **элементов** для **потока данных** области.  
  
2.  Дважды щелкните поле, созданный для загрузки **Редактор назначения SQL Server PDW**.  
  
3.  Щелкните стрелку вниз рядом с **диспетчера соединений**.  
  
4.  Выберите **создайте новое соединение**.  
  
5.  Заполните сведения для сервера, пользователя, пароль и целевой базы данных с помощью сведения, связанные с вашим устройством. (Ниже приведены примеры). Затем нажмите кнопку **ОК**.  
  
    Для соединения InfiniBand **имя сервера**: введите < имя устройства >-SQLCTL01 17001.  
  
    Для подключения Ethernet **имя сервера**: Введите IP-адрес кластера узлов элемента управления, запятая, порт 17001. Например 10.192.63.134,17001.  
  
    **Пользователь:**`user1`  
  
    **Пароль:**`password1`  
  
    **Целевая база данных:**`LoadExampleDB`  
  
6.  Выберите целевую таблицу: `Orders`.  
  
7.  Выберите **Append** режим загрузки и нажмите кнопку **ОК**.  
  
Укажите поток данных из источника в место назначения.  
  
1.  На **потока данных** панели, перетащите зеленую стрелку от **Flat File Source** поле для **назначение SQL Server PDW** поле.  
  
2.  Дважды щелкните **назначение SQL Server PDW** поле, чтобы увидеть **Редактор назначения SQL Server PDW** еще раз. Имена столбцов из неструктурированного файла в левой части экрана появится в разделе **несопоставленные входные столбцы**. Имена столбцов из целевой таблицы в правой части должны отображаться в списке **несопоставленные целевые столбцы**. Сопоставьте столбцы путем перетаскивания или двойным щелчком имен соответствующих столбцов в **несопоставленные входные столбцы** и **несопоставленные целевые столбцы** списки **сопоставленные столбцы**поле. Нажмите кнопку **ОК** для сохранения параметров.  
  
3.  Сохранить пакет, щелкнув **Сохранить** в **файл** меню.  
  
Запустите пакет на компьютере службы Integration Services.  
  
1.  В службах Integration Services**обозревателе решений** (правый столбец), щелкните правой кнопкой мыши `Package.dtsx` и выберите **Execute**.  
  
2.  Пакет будет запущен и ход выполнения, а также все ошибки отображаются в **выполняется** области. Использовать клиент SQL, чтобы подтвердить загрузку или контроля нагрузки через консоль администрирования SQL Server PDW.  
  
## <a name="see-also"></a>См. также:  
[Создать задачу «скрипт», использующий адаптер назначения PDW служб SSIS](create-ssis-script-task-using-pdw-destination-adapter.md)  
[SQL Server Integration Services](http://msdn.microsoft.com/library/ms141026&#40;v=sql11&#40;.aspx)  
[Проектирование и разработка пакетов (службы Integration Services)](http://msdn.microsoft.com/library/ms141091&#40;v=sql11&#40;.aspx)  
[Учебник: Создание основного пакета с помощью мастера](http://technet.microsoft.com/library/ms365330&#40;v=sql11&#40;.aspx)  
[Приступая к работе (службы Integration Services)](http://go.microsoft.com/fwlink/?LinkId=202412)  
[Пример создания динамического пакета](http://go.microsoft.com/fwlink/?LinkId=202413)  
[Проектирование пакетов служб SSIS для параллелизма (видеоматериал по SQL Server)](http://msdn.microsoft.com/library/dd795221.aspx)  
[Примеры сообщества Microsoft SQL Server: Службы Integration Services](http://go.microsoft.com/fwlink/?LinkId=202415)  
[Повышение эффективности добавочной загрузки с измененных данных](http://msdn.microsoft.com/library/bb895315&#40;v=sql11&#40;.aspx)  
[Преобразование "Медленно изменяющееся измерение"](http://msdn.microsoft.com/library/ms141715&#40;v=sql11&#40;.aspx)  
[Задача «Массовая вставка»](http://msdn.microsoft.com/library/ms141239&#40;v=sql11&#40;.aspx)  
  
<!-- MISSING LINKS
[Grant permissions to load data](grant-permissions-to-load-data.md)  
[Common metadata query examples](metadata-query-examples.md)
-->
