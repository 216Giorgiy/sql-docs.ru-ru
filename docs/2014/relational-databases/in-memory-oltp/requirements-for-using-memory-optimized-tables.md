---
title: Требования для использования таблиц, оптимизированных для памяти | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.suite: ''
ms.technology: in-memory-oltp
ms.tgt_pltfrm: ''
ms.topic: conceptual
applies_to:
- SQL Server 2014
ms.assetid: 47d9a7e8-c597-4b95-a58a-dcf66df8e572
caps.latest.revision: 53
author: CarlRabeler
ms.author: carlrab
manager: craigg
ms.openlocfilehash: 66edebe05c59ca8bcb0d755f3e6d530718cf1388
ms.sourcegitcommit: 79d4dc820767f7836720ce26a61097ba5a5f23f2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/16/2018
ms.locfileid: "40393960"
---
# <a name="requirements-for-using-memory-optimized-tables"></a>Требования для использования таблиц, оптимизированных для памяти
  В дополнение к [оборудованию и программному обеспечению для установки SQL Server 2014](../../sql-server/install/hardware-and-software-requirements-for-installing-sql-server.md), ниже приведены требования для использования In-Memory OLTP:  
  
-   64-разрядный выпуск [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)] Enterprise, Developer или Evaluation.  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] требуется достаточный объем памяти для хранения данных в оптимизированных для памяти таблицах и индексах. Для учета версий строк необходим объем памяти, в два раза превышающий ожидаемый размер оптимизированных для памяти таблицах и индексов. Однако фактический необходимый объем памяти будет зависеть от вашей рабочей нагрузки. Необходимо отслеживать использование памяти и при необходимости вносить корректировки. Размер данных в таблицах, оптимизированных для памяти, не должен превышать разрешенный процент пула. Чтобы определить размер таблицы, оптимизированной для памяти, см. в разделе [sys.dm_db_xtp_table_memory_stats &#40;Transact-SQL&#41;](/sql/relational-databases/system-dynamic-management-views/sys-dm-db-xtp-table-memory-stats-transact-sql).  
  
     При наличии дисковых таблиц в базе данных нужно предоставить достаточный объем памяти для буферного пула и обработки запросов для этих таблиц.  
  
     Важно знать, сколько памяти потребует конкретное приложение In-Memory OLTP. Дополнительные сведения см. в статье [Оценка требований к объему памяти для таблиц, оптимизированных для памяти](memory-optimized-tables.md) .  
  
-   Свободного места на диске требуется вдвое больше, чем для хранимых и оптимизированных для памяти таблиц.  
  
-   Для использования In-Memory OLTP необходимо, чтобы процессор поддерживал инструкцию **cmpxchg16b** . Все современные 64-разрядные процессоры поддерживают **cmpxchg16b**.  
  
     Если вы используете ведущее приложение виртуальной Машины и [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] отображает ошибку, из-за более старым процессором, проверьте, имеет ли приложение параметр конфигурации, чтобы разрешить **cmpxchg16b**. Если нет, можно использовать Hyper-V, поддерживающую **cmpxchg16b** без изменения параметров конфигурации.  
  
-   Чтобы установить OLTP в памяти, выберите **службы компонента Database Engine** при установке [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].  
  
     Для установки создания отчетов ([определение ли таблица или хранимая процедура должна быть перенесена в In-Memory OLTP](determining-if-a-table-or-stored-procedure-should-be-ported-to-in-memory-oltp.md)) и [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] (для управления In-Memory OLTP через [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] обозреватель объектов), выберите **управления Средства — базовый** или **средства управления — Дополнительно** при установке [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].  
  
## <a name="important-notes-on-using-includehek2includeshek-2-mdmd"></a>Важные примечания относительно использования [!INCLUDE[hek_2](../../../includes/hek-2-md.md)]  
  
-   Общий объем памяти всех устойчивых таблиц в базе данных не должен превышать 250 ГБ. Дополнительные сведения см. в разделе [устойчивость таблиц, оптимизированных для памяти](durability-for-memory-optimized-tables.md).  
  
-   Данный выпуск [!INCLUDE[hek_2](../../../includes/hek-2-md.md)] направлен на оптимальную работу на системах с 2 или 4 сокетами и меньше чем с 60 ядрами.  
  
-   Файлы контрольных точек не должны удаляться вручную. [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] автоматически выполняет сборку мусора по ненужным файлам контрольных точек. Дополнительные сведения см. в обсуждении по слиянию данных и разностных файлов в [устойчивость таблиц, оптимизированных для памяти](durability-for-memory-optimized-tables.md).  
  
-   В этой первой версии In-Memory OLTP (в [!INCLUDE[ssSQL14](../../includes/sssql14-md.md)]), является единственным способом удаления оптимизированной для памяти файловой группы удалить базу данных.  
  
-   Если вы пытаетесь удалить большой пакет строк, в то время как происходит одновременная вставка или обновление рабочей нагрузки, которая влияет на количество строк, которые вы стараетесь удалить, удаление, вероятно, завершиться ошибкой. Обходным приемом является остановка вставки или обновления рабочей нагрузки перед выполнением удаления. Вы также можете настроить транзакцию на мелкие транзакции, которые, скорее всего, не прервутся конкурентной рабочей нагрузкой. Как и со всеми операциями записи в таблицах, оптимизированных для памяти, используйте логику повторных попыток ([Guidelines for Retry Logic для транзакции на оптимизированных для памяти таблицах](../../database-engine/guidelines-for-retry-logic-for-transactions-on-memory-optimized-tables.md)).  
  
-   Если создается одна или несколько баз данных с таблицами, оптимизированными для памяти, необходимо включить быструю инициализацию файлов (предоставьте стартовой учетной записи служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] право SE_MANAGE_VOLUME_NAME) для экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Без быстрой инициализации файлов оптимизированные для памяти файлы хранилища (файлы данных и разностные файлы) будут инициализироваться при создании и могут отрицательно повлиять на производительность рабочей нагрузки. Дополнительные сведения о быстрой инициализации файлов см. в разделе [Инициализация файлов базы данных](../databases/database-instant-file-initialization.md). Сведения о включении быстрой инициализации файлов см. в разделе [Как и зачем необходимо включать быструю инициализацию файлов](http://blogs.msdn.com/b/sql_pfe_blog/archive/2009/12/23/how-and-why-to-enable-instant-file-initialization.aspx).  
  
## <a name="did-this-article-help-you-were-listening"></a>Эта статья помогла вам? Мы слушаем  
 Какие сведения вы искали и удалось ли вам их найти? Мы прислушиваемся к вашим отзывам для совершенствования материалов. Отправляйте свои комментарии по адресу [ sqlfeedback@microsoft.com ](mailto:sqlfeedback@microsoft.com?subject=Your%20feedback%20about%20the%20Requirements%20for%20Using%20Memory-Optimized%20Tables%20page).  
  
## <a name="see-also"></a>См. также  
 [Выполняющаяся в памяти OLTP (оптимизация в памяти)](in-memory-oltp-in-memory-optimization.md)  
  
  
