---
title: Набор строк DISCOVER_CALC_DEPENDENCY | Документация Майкрософт
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology:
- analysis-services
- docset-sql-devref
ms.topic: reference
helpviewer_keywords:
- DISCOVER_CALC_DEPENDENCIES rowset
ms.assetid: f39dde72-fa5c-4c82-8b4e-88358aa2e422
author: minewiskan
ms.author: owend
manager: craigg
ms.openlocfilehash: 88e423e248293e537dba5d90e8d688b826cb5244
ms.sourcegitcommit: 3da2edf82763852cff6772a1a282ace3034b4936
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/02/2018
ms.locfileid: "48199057"
---
# <a name="discovercalcdependency-rowset"></a>Набор строк DISCOVER_CALC_DEPENDENCY
  Сообщает о зависимостях между вычислениями и об объектах, упоминаемых в этих вычислениях. Эти сведения можно использовать в клиентском приложении для сообщения о проблемах со сложными формулами и предупреждения об удалении или изменении связанных объектов. Этот набор строк можно использовать для извлечения выражений расширений интеллектуального анализа данных, используемых в мерах или вычисляемых столбцах.  
  
 **Применимо к:** табличные модели  
  
## <a name="rowset-columns"></a>Столбцы наборов строк  
 `DISCOVER_CALC_DEPENDENCY` Набор строк содержит следующие столбцы. Кроме того, в таблице указывается тип данных, возможность ограничения столбцом числа возвращаемых строк, а также предоставляется описание каждого столбца.  
  
|Имя столбца|Индикатор типа|Ограничение|Описание|  
|-----------------|--------------------|-----------------|-----------------|  
|`DATABASE_NAME`|`DBTYPE_WSTR`|Да|Указывает имя базы данных, содержащей объект, для которого запрошен анализ зависимостей. Если отсутствует, используется текущая база данных.<br /><br /> `DISCOVER_DEPENDENCY_CALC` Набора строк можно ограничить с помощью этого столбца.|  
|`OBJECT_TYPE`|`DBTYPE_WSTR`|Да|Указывает тип объекта, для которого запрошен анализ зависимостей. Объект должен принадлежать к одному из следующих типов:<br /><br /> -   `ACTIVE_RELATIONSHIP`: активная связь<br />-   `CALC_COLUMN`: Вычисляемый столбец.<br />-   `HIERARCHY`: иерархия<br />-   `MEASURE`: мера<br />-   `RELATIONSHIP`: отношение<br />-   `KPI`: ключевой показатель Эффективности (KPI)<br /><br /> `DISCOVER_DEPENDENCY_CALC` Набора строк можно ограничить с помощью этого столбца.|  
|`QUERY`|`DBTYPE_WSTR`|Да|В табличные модели, созданные в [!INCLUDE[ssSQL11SP1](../../../includes/sssql11sp1-md.md)], вы можете включить запрос или выражение DAX, чтобы отобразить диаграмму зависимостей для этого запроса или выражения. Ограничение QUERY дает клиентским приложениям возможность определить, какие объекты используются запросом DAX.<br /><br /> Ограничение `QUERY` можно указывать в XMLA или в предложении WHERE запроса динамического административного представления. Дополнительные сведения см. в разделе «Примеры».|  
|`TABLE`|`DBTYPE_WSTR`||Имя таблицы, содержащей объект, для которого создаются сведения о зависимостях.|  
|`OBJECT`|`DBTYPE_WSTR`||Имя объекта, для которого создаются сведения о зависимостях. Если объект является мерой или вычисляемым столбцом, используйте имя меры. Если объект является связью, используйте имя таблицы (или измерение куба), где находится столбец, участвующий в связи.|  
|`EXPRESSION`|`DBTYPE_WSTR`||Формула, содержащая объект, для которого выполняется поиск зависимостей.|  
|`REFERENCED_OBJECT_TYPE`|`DBTYPE_WSTR`||Возвращает тип объекта, зависимого от упоминаемого объекта. Возвращаемые объекты могут принадлежать к следующим типам:<br /><br /> -   `CALC_COLUMN`: вычисляемый столбец<br />-   `COLUMN`: Столбец данных<br />-   `MEASURE`: мера<br />-   `RELATIONSHIP`: отношение<br />-   `KPI`: ключевой показатель Эффективности (KPI)|  
|`REFERENCED_TABLE`|`DBTYPE_ WSTR`||Имя таблицы, содержащей зависимый объект.|  
|`REFERENCED_OBJECT`|`DBTYPE_ WSTR`||Имя объекта, зависимого от упоминаемого объекта. Для мер и вычисляемых столбцов имя меры или столбца. Для связей полное имя таблицы (или измерение куба), где находится зависимый объект.|  
|`REFERENCED_EXPRESSION`|`DBTYPE_WSTR`||Формула в вычисляемом столбце или в измерении, зависимая от упоминаемого объекта.|  
  
## <a name="example"></a>Пример  
 **Основной синтаксис**  
  
 Следующий запрос представляет собой простой запрос динамического административного представления, который возвращает значения для всех столбцов в этом наборе строк с использованием базы данных по умолчанию для текущего соединения. Этот запрос можно выполнить в окне запросов многомерных выражений и просмотреть его результаты в среде [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)]. Также можно выполнить указания, приведенные в публикации [Querying PowerPivot DMVs from Excel (на английском языке)](http://go.microsoft.com/fwlink/?LinkID=235146) , чтобы просмотреть результаты запроса динамического административного представления в Excel.  
  
```  
SELECT * FROM $System.DISCOVER_CALC_DEPENDENCY  
```  
  
## <a name="example"></a>Пример  
 **Сортировка результатов**  
  
 Добавьте предложение ORDER BY для сортировки набора строк по таблице или другому столбцу.  
  
```  
SELECT * FROM $System.DISCOVER_CALC_DEPENDENCY ORDER BY [TABLE] ASC  
```  
  
## <a name="example"></a>Пример  
 **Фильтрация с помощью предложения WHERE**  
  
 В следующем запросе показано, как добавить ограничение с помощью предложения WHERE. Следующие столбцы можно использовать в качестве фильтров запроса в предложении WHERE: `Database_Name`, `Object_Type`, и `Query`.  
  
```  
SELECT * From $SYSTEM.DISCOVER_CALC_DEPENDENCY WHERE OBJECT_TYPE = 'RELATIONSHIP' OR OBJECT_TYPE = 'ACTIVE_RELATIONSHIP'  
```  
  
## <a name="example"></a>Пример  
 **Фильтрация по мерам и вычисляемым столбцам для просмотра базовых выражений DAX**  
  
 В этом запросе вы можете выбрать только меру или вычисляемый столбец, а затем просмотреть выражение DAX, которое используется в вычислении. Столбец ВЫРАЖЕНИЕ также может содержать выражения DAX. Если DISCOVER_CALC_DEPENDENCY используется для извлечения выражения расширений интеллектуального анализа данных, используемого в модели, то для этой задачи достаточно данного запроса. Возвращаются все выражения, используемые в этой модели, в порядке возрастания.  
  
```  
SELECT * From $SYSTEM.DISCOVER_CALC_DEPENDENCY WHERE OBJECT_TYPE = 'MEASURE' OR OBJECT_TYPE = 'CALC_COLUMN' ORDER BY [EXPRESSION] ASC  
```  
  
## <a name="example"></a>Пример  
 **Фильтрация с помощью ЗАПРОСА**  
  
 С помощью ограничения ЗАПРОСА вы можете выполнить запрос DAX, чтобы просмотреть все объекты, которые используются в этом запросе. Рассмотрим простой запрос, например «Evaluate Customer». Как следует из названия, этот запрос возвращает те строки данных о клиенте, которые создаются на основе столбцов таблицы Customer. Если выполнить DISCOVER_CALC_DEPENDENCY с ограничением QUERY, равным «Evaluate customer», то будут возвращены столбцы (или объекты), используемые в этом запросе. В данном случае это будет список столбцов таблицы Customer.  
  
 Следующий набор запросов демонстрирует синтаксис для ограничения QUERY. Эти запросы вы можете использовать для [Табличной модели AdventureWorks в SQL Server 2012](http://msftdbprodsamples.codeplex.com/releases/view/55330) , чтобы просмотреть результирующий набор.  
  
 Первый запрос отображает способ задания ограничения QUERY для имен объектов, которые содержат пробелы. Второй запрос, заимствованный из раздела [Выполнение запросов DAX с помощью OLE DB и ADOMD.NET](http://go.microsoft.com/fwlink/?LinkId=254329), является более сложным запросом, который содержит объекты из нескольких таблиц.  
  
> [!NOTE]  
>  Хотя запросы отображаются для использования с двойными кавычками, в действительности применяются только одиночные кавычки. Включает одну пару одинарных кавычек "Evaluate \<имя_таблицы >", и одинарные кавычки, используется имя таблицы необходимо экранировать путем удвоения. Одинарные кавычки для имени таблицы необходимы только для имен таблиц, содержащих пробелы.  
  
```  
SELECT * From $SYSTEM.DISCOVER_CALC_DEPENDENCY WHERE QUERY = 'EVALUATE ''Reseller Sales'''  
```  
  
```  
SELECT * from $system.DISCOVER_CALC_DEPENDENCY WHERE QUERY = 'EVALUATE CALCULATETABLE(VALUES(''Product Subcategory''[Product Subcategory Name]), ''Product Category''[Product Category Name] = "Bikes")'  
```  
  
## <a name="example"></a>Пример  
 **Пример xmlа для ограничения ЗАПРОСА**  
  
 Вы можете использовать команду Discover из XMLA для возврата объектов запроса в таблице. XMLA возвращает результаты в виде необработанного XML. Для синтаксического анализа результатов в более удобном для чтения виде вы можете использовать ADOMD.NET.  
  
```  
<Discover xmlns="urn:schemas-microsoft-com:xml-analysis">  
   <RequestType>DISCOVER_CALC_DEPENDENCY</RequestType>  
     <Restrictions>  
        <RestrictionList>  
            <QUERY>Evaluate 'Reseller Sales'</QUERY>  
        </RestrictionList>  
    </Restrictions>  
    <Properties />  
</Discover>  
```  
  
## <a name="using-adomdnet-to-return-the-rowset"></a>Использование ADOMD.NET для возврата набора строк  
 Если для получения метаданных используется ADOMD.NET и набор строк схемы, то для ссылки на объект набора строк схемы в методе GetSchemaDataSet вы можете использовать идентификатор GUID или строку. Дополнительные сведения см. в статье [Working with Schema Rowsets in ADOMD.NET](../../../relational-databases/native-client-ole-db-rowsets/rowsets.md).  
  
 В следующей таблице указываются значения строки и идентификатора GUID, определяющие этот набор строк.  
  
|Аргумент|Значение|  
|--------------|-----------|  
|GUID|a07ccd46-8148-11d0-87bb-00c04fc33942|  
|ADOMDNAME|DependencyGraph|  
  
## <a name="see-also"></a>См. также  
 [Наборы строк схемы служб аналитики](../analysis-services-schema-rowsets.md)   
 [Используйте динамические административные представления &#40;динамические административные представления&#41; мониторинг Analysis Services](../../instances/use-dynamic-management-views-dmvs-to-monitor-analysis-services.md)  
  
  
