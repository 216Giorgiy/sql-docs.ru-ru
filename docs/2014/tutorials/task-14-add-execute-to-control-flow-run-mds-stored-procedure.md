---
title: 'Задача 14: Добавление «Выполнение SQL» в поток управления для выполнения хранимых процедур для MDS | Документы Microsoft'
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.suite: ''
ms.technology:
- data-quality-services
- integration-services
- master-data-services
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 9a5d1b52-d505-4e6f-8a89-569329c094e2
caps.latest.revision: 6
author: douglaslMS
ms.author: douglasl
manager: jhubbard
ms.openlocfilehash: 3d364f3e0a2fbff167336bffa6ea5092d0954d14
ms.sourcegitcommit: 5dd5cad0c1bbd308471d6c885f516948ad67dfcf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2018
ms.locfileid: "36096981"
---
# <a name="task-14-adding-execute-sql-task-to-control-flow-to-run-the-stored-procedure-for-mds"></a>Задача 14. Добавление задачи «Выполнение SQL» в поток управления для выполнения хранимых процедур для MDS
  После загрузки данных в промежуточные таблицы служб MDS вы выполняете хранимую процедуру, связанную с этой таблицей, для загрузки данных из промежуточных таблиц в соответствующие таблицы в базе данных MDS. У этой хранимой процедуры два обязательных параметра, которые нужно передать: LogFlag и VersionName. Параметр LogFlag определяет, записываются ли транзакции в журнал в ходе промежуточного процесса, а параметр VersionName представляет версию модели. В разделе [промежуточная хранимая процедура](http://msdn.microsoft.com/library/hh231028.aspx) Дополнительные сведения см.  
  
 В этой задаче вы добавляете задачу «Выполнение SQL» в поток управления для вызова хранимой процедуры и загрузки промежуточных данных в соответствующие таблицы базы данных MDS.  
  
1.  Теперь, переключитесь в **поток управления** вкладки.  
  
2.  Перетащите **Execute SQL Task** из **область элементов служб SSIS** для **поток управления** вкладки.  
  
3.  Щелкните правой кнопкой мыши **Execute SQL Task** в **поток управления** и нажмите кнопку **переименование**. Тип **вызов хранимой процедуры для загрузки данных в MDS** и нажмите клавишу **ввод**.  
  
4.  Подключение **Receive, очистка, соответствия и исправление данных поставщика** для **вызов хранимой процедуры для загрузки данных** с помощью зеленого соединителя.  
  
     ![Подключиться к задача «Выполнение SQL»](../../2014/tutorials/media/et-addingesqltasktocftorunthespformds-01.jpg "соединиться задача «Выполнение SQL»")  
  
5.  С помощью **переменных** окна, добавьте две новые переменные со следующими параметрами. Если вы не видите **переменных** окно, нажмите кнопку **SSIS** в строке меню щелкните **переменных**.  
  
    |Имя|Тип данных|Значение|  
    |----------|---------------|-----------|  
    |LogFlag|Int32|1|  
    |VersionName|String|VERSION_1|  
  
     ![Окно переменных служб SSIS](../../2014/tutorials/media/et-addingesqltasktocftorunthespformds-02.jpg "окно переменных служб SSIS")  
  
6.  Дважды щелкните **запуска хранимой процедуры для загрузки данных в MDS**.  
  
7.  В **редактор выполнение задач SQL** выберите **(local). MDS** (или **localhost. MDS**) для **соединения**.  
  
8.  Тип **EXEC [stg]. [ udp_Supplier_Leaf]?,?,?** для **инструкции SQL**. Имя можно проверить с помощью среды SQL Server Management Studio.  
  
     ![Выполнение общих параметров SQL диалоговое окно редактора -](../../2014/tutorials/media/et-addingesqltasktocftorunthespformds-03.jpg "выполнить SQL диалоговое окно редактора - Общие параметры")  
  
9. Нажмите кнопку **сопоставление параметров** в меню слева.  
  
10. В **сопоставление параметров** щелкните **добавить** для добавления сопоставления. Разверните окно и измените размер столбцов, чтобы можно было видеть значения в раскрывающемся списке.  
  
11. Выберите **User::VersionName** из раскрывающегося списка для **имя переменной**.  
  
12. Выберите **NVARCHAR** для **тип данных**.  
  
13. Тип **0** (ноль) в **имя параметра**.  
  
14. Повторите предыдущие четыре шага, чтобы добавить другие переменные.  
  
    |Имя переменной|Тип данных (важно)|Имя параметра|  
    |-------------------|-----------------------------|--------------------|  
    |User::LogFlag|LONG|1|  
    |User::BatchTag|NVARCHAR|2|  
  
     ![Выполнение задач редактора SQL - сопоставление параметров](../../2014/tutorials/media/et-addingesqltasktocftorunthespformds-04.jpg "выполнение задачи редактора SQL - сопоставление параметров")  
  
15. Нажмите кнопку **ОК** закрыть **редактор SQL Выполнение** диалоговое окно.  
  
## <a name="next-step"></a>Следующий шаг  
 [Задача 15. Построение и запуск проекта служб SSIS](../../2014/tutorials/task-15-building-and-running-the-ssis-project.md)  
  
  