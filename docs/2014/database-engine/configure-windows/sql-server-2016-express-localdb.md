---
title: SQL Server 2014 Express LocalDB | Документы Microsoft
ms.custom: ''
ms.date: 07/17/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.suite: ''
ms.technology:
- database-engine
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- user instances
- LocalDB, described
- local database runtime
- file database
- LocalDB
ms.assetid: 5a641a46-7cfb-4d7b-a90d-6e4625719d74
caps.latest.revision: 30
author: JennieHubbard
ms.author: jhubbard
manager: jhubbard
ms.openlocfilehash: 8dcd0be9d5bdf14230be67c8ce2fffb708a713b9
ms.sourcegitcommit: 5dd5cad0c1bbd308471d6c885f516948ad67dfcf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2018
ms.locfileid: "36087925"
---
# <a name="sql-server-2014-express-localdb"></a>SQL Server 2014 Express LocalDB
  [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)] `LocalDB` — Это режим выполнения [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] предназначенный для разработчиков программ. `LocalDB` Программа установки копирует минимальный набор файлов, необходимых для запуска [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)]. Один раз `LocalDB` — разработчики могут установить соединение с помощью специальной строки подключения. При соединении необходимая [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] инфраструктуры является автоматически создается и запускается, что позволяет приложению использовать базу данных без выполнения сложной или продолжительное время настройки. Средства разработчика позволяют использовать [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] для написания и проверки кода [!INCLUDE[tsql](../../includes/tsql-md.md)] без необходимости управления полным экземпляром сервера [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Экземпляр [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] `LocalDB` осуществляется с помощью `SqlLocalDB.exe` программы. [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]`LocalDB` следует использовать вместо [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] является устаревшей функции пользовательского экземпляра.  
  
## <a name="installing-localdb"></a>Установка LocalDB  
 Основной способ установки `LocalDB` с помощью программы SqlLocalDB.msi. `LocalDB` можно использовать при установке номера SKU [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)]. Выберите `LocalDB` на **Выбор компонентов** во время установки [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]. Может существовать только одна копия `LocalDB` двоичные файлы для каждой основной [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] версии. Можно запускать несколько процессов [!INCLUDE[ssDE](../../includes/ssde-md.md)] , которые будут использовать одни и те же двоичные файлы. Экземпляр [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] запущен как `LocalDB` имеет те же ограничения, как [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)]  
  
## <a name="description"></a>Описание  
 `LocalDB` Программа установки использует программу SqlLocalDB.msi для установки необходимых файлов на компьютере. После установки `LocalDB` является экземпляром класса [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] , можно создавать и открывать [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] баз данных. Файлы системной базы данных, как правило, хранятся в каталоге AppData пользователя, который обычно скрыт. Например, **C:\Users\\<пользователь\>\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\LocalDBApp1\\**. Файлы пользовательской базы данных хранятся в месте, указанном пользователем, как правило, в папке **C:\Users\\<пользователь\>\Documents\\**.  
  
 Дополнительные сведения о включении `LocalDB` в приложении, в разделе [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] документации [Обзор локальных данных](http://msdn.microsoft.com/library/ms233817\(VS.110\).aspx), [Пошаговое руководство: Создание базы данных SQL Server LocalDB](http://msdn.microsoft.com/library/ms233763\(VS.110\).aspx), и [Пошаговое руководство: подключение к данным базы данных SQL Server LocalDB (Windows Forms)](http://msdn.microsoft.com/library/ms171890\(VS.110\).aspx).  
  
 Дополнительные сведения о `LocalDB` API, в разделе [SQL Server Express LocalDB Справочник по API экземпляра](http://msdn.microsoft.com/library/hh234692\(SQL.110\).aspx) и [функция LocalDBStartInstance](http://msdn.microsoft.com/library/hh217143\(SQL.110\).aspx).  
  
 Программа SqlLocalDb позволяет создавать новые экземпляры `LocalDB`, запускать и останавливать экземпляр `LocalDB`, а также включает параметры для управления `LocalDB`.  Дополнительные сведения о программе SqlLocalDb см. в разделе [Программа SqlLocalDB](../../tools/sqllocaldb-utility.md).  
  
 Параметры сортировки экземпляра для `LocalDB` заданы в SQL_Latin1_General_CP1_CI_AS и не может быть изменено. Параметры сортировки на уровне базы данных, на уровне столбца и на уровне выражения поддерживаются обычным образом. Содержащиеся базы данных следуют правилам метаданных и параметрам сортировки tempdb, определенным [Contained Database Collations](../../relational-databases/databases/contained-database-collations.md).  
  
### <a name="restrictions"></a>Ограничения  
 `LocalDB` не может быть подписчиком в репликации слиянием.  
  
 `LocalDB` не поддерживает FILESTREAM.  
  
 `LocalDB` разрешены только локальные очереди компонента Service Broker.  
  
 Экземпляр `LocalDB` владельцем встроенные учетные записи, например NT AUTHORITY\SYSTEM может иметь проблемы с управляемостью из-за перенаправления файловой системы windows. Вместо этого используйте обычную учетную запись windows в качестве владельца.  
  
### <a name="automatic-and-named-instances"></a>Автоматические и именованные экземпляры  
 `LocalDB` поддерживает два типа экземпляров: автоматические и именованные экземпляры.  
  
-   Автоматические экземпляры `LocalDB` являются открытыми. Они создаются и обслуживаются автоматически и могут использоваться любым приложением. Один автоматический экземпляр `LocalDB` существует для каждой версии `LocalDB` установлен на компьютере пользователя. Автоматические экземпляры `LocalDB` обеспечивают удобное управление экземплярами. Нет необходимости создавать экземпляр. Он просто работает. Это упрощает установку приложения и его перенос на другой компьютер. Если на целевом компьютере установлена указанная версия `LocalDB` установлен автоматический экземпляр `LocalDB` для этой версии доступен на конечном компьютере также. Автоматические экземпляры `LocalDB` именуются по специальному шаблону имени экземпляра, к которой принадлежит зарезервированному пространству имен. Это предотвращает конфликты имен с именованными экземплярами `LocalDB`. Автоматический экземпляр имеет имя **MSSQLLocalDB**.  
  
-   Именованные экземпляры `LocalDB` являются закрытыми. Они принадлежат одному приложению, которое отвечает за создание экземпляра и управление им. Именованные экземпляры обеспечивают изоляцию от других экземпляров и способствуют повышению производительности за счет снижения уровня конфликта за ресурсы с другими пользователями базы данных. Именованные экземпляры должны явно создаваться пользователем с помощью `LocalDB` API управления или неявным образом через файл app.config управляемого приложения в файле (несмотря на то, что управляемое приложение также может использовать API-интерфейса, при необходимости). Каждый именованный экземпляр `LocalDB` имеет связанный `LocalDB` версию, которая указывает на соответствующий набор `LocalDB` двоичных файлов. Имя экземпляра `LocalDB` — `sysname` данных введите и может содержать до 128 символов. (в отличие от обычных именованных экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], где допускается использование только обычных имен NetBIOS из 16 символов ASCII). Имя экземпляра `LocalDB` может содержать любые символы Юникода, допустимые в имени файла.  Именованный экземпляр, в котором используется имя автоматического экземпляра, становится автоматическим экземпляром.  
  
 Разные пользователи одного и того же компьютера могут иметь экземпляры с одинаковыми именами. Каждый экземпляр является отдельным процессом, который запускается от разных пользователей.  
  
## <a name="shared-instances-of-localdb"></a>Общие экземпляры LocalDB  
 Для поддержки сценариев, где нескольким пользователям компьютера требуется подключиться для одного экземпляра `LocalDB`, `LocalDB` поддерживает общий доступ к экземплярам. Владелец экземпляра может разрешить другим пользователям компьютера соединяться со своим экземпляром. Автоматические и именованные экземпляры `LocalDB` можно использовать совместно. Для совместного использования экземпляра `LocalDB` пользователь выбирает общее имя (псевдоним), для него. Поскольку общее имя видно всем пользователям компьютера, то оно должно быть уникальным на этом компьютере. Общее имя для экземпляра `LocalDB` имеет тот же формат, как и для именованного экземпляра `LocalDB`.  
  
 Только администратор компьютера может создать общего экземпляра `LocalDB`. Общий экземпляр `LocalDB` может отменить общий доступ, администратор или владелец общего экземпляра `LocalDB`. Для совместного использования и без предоставления общего доступа экземпляр `LocalDB`, используйте `LocalDBShareInstance` и `LocalDBUnShareInstance` методы `LocalDB` API, или общий ресурс и соответствующих параметров программы SqlLocalDb.  
  
## <a name="starting-localdb-and-connecting-to-localdb"></a>Запуск LocalDB и подключение к LocalDB  
  
### <a name="connecting-to-the-automatic-instance"></a>Подключение к автоматическому экземпляру  
 Самым простым способом использования `LocalDB` является подключение к автоматическому экземпляру, владельцем текущего пользователя с помощью строки подключения **«Server = (localdb) \MSSQLLocalDB;Integrated Security = true»**. Подключиться к определенной базе данных, используя имя файла, можно с помощью строки подключения, подобной следующей: **"Server=(LocalDB)\MSSQLLocalDB; Integrated Security=true; AttachDbFileName=D:\Data\MyDB1.mdf"**.  
  
> [!NOTE]  
>  В первый раз пытается подключиться пользователь на компьютере `LocalDB`, автоматический экземпляр необходимо будет создать и запустить. Дополнительное время, необходимое для создания экземпляра, может стать причиной того, что попытка соединения завершится с ошибкой истечения времени ожидания. В этом случае подождите несколько секунд до завершения процесса создания экземпляра, а затем подключитесь снова.  
  
### <a name="creating-and-connecting-to-a-named-instances"></a>Создание и подключение к именованным экземплярам  
 Помимо автоматических экземпляров `LocalDB` также поддерживает именованные экземпляры. Используйте программу SqlLocalDB.exe для создания, запуска и остановки именованного экземпляра `LocalDB`. Дополнительные сведения об SqlLocalDB.exe см. в разделе [Программа SqlLocalDB](../../tools/sqllocaldb-utility.md).  
  
```ms-dos  
REM Create an instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\120\Tools\Binn\SqlLocalDB.exe" create LocalDBApp1  
REM Start the instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\120\Tools\Binn\SqlLocalDB.exe" start LocalDBApp1  
REM Gather information about the instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\120\Tools\Binn\SqlLocalDB.exe" info LocalDBApp1  
```  
  
 Вышеуказанная последняя строка возвращает информацию, аналогичную следующей.  
  
|||  
|-|-|  
|Имя|«LocalDBApp1»|  
|Версия|\<текущая версия>|  
|Общее имя|""|  
|Владелец|"\<пользователь Windows>"|  
|Автоматическое создание|Нет|  
|Состояние|запуск|  
|Время последнего запуска|\<дата и время>|  
|Имя канала экземпляра|np:\\\\.\pipe\LOCALDB#F365A78E\tsql\query|  
  
> [!NOTE]  
>  Если приложение использует версию .NET ранее 4.0.2 необходимо подключиться непосредственно к именованному каналу `LocalDB`. Значение имени канала экземпляра — это именованный канал, который экземпляр `LocalDB` выполняет прослушивание. Часть имени канала экземпляра после LOCALDB # будет изменяться при каждом запуске экземпляра `LocalDB` запущена. Для подключения к экземпляру `LocalDB` с помощью [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], введите имя канала экземпляра в **имя сервера** поле **подключиться к [!INCLUDE[ssDE](../../includes/ssde-md.md)]**  диалоговое окно. Из пользовательской программы можно установить соединение с экземпляром `LocalDB` с помощью строки подключения, аналогичной `SqlConnection conn = new SqlConnection(@"Server=np:\\.\pipe\LOCALDB#F365A78E\tsql\query");`  
  
### <a name="connecting-to-a-shared-instance-of-localdb"></a>Соединение с общим экземпляром LocalDB  
 Чтобы соединиться с общим экземпляром `LocalDB` добавить **.\\**  (точка + обратная косая черта) в строку подключения для ссылки на пространство имен, зарезервированное для общих экземпляров. Например, чтобы соединиться с общим экземпляром `LocalDB` с именем `AppData` использовать строку подключения, таких как `(localdb)\.\AppData` как часть строки соединения. Пользователь, устанавливающий соединение с общим экземпляром `LocalDB` , не принадлежащие им требуется проверка подлинности Windows или [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] входа для проверки подлинности.  
  
## <a name="troubleshooting"></a>Устранение неполадок  
 Сведения об устранении неполадок `LocalDB`, в разделе [Устранение неполадок SQL Server 2012 Express LocalDB](http://social.technet.microsoft.com/wiki/contents/articles/4609.aspx).  
  
## <a name="permissions"></a>Разрешения  
 Экземпляр [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)] `LocalDB` является экземпляром, созданным пользователем для собственного использования. Любой пользователь компьютера может создать базу данных, используя экземпляр `LocalDB`, сохранив файлы в своем пользовательском профиле и запустив процесс со своими учетными данными. По умолчанию доступ к экземпляру `LocalDB` ограничен его владельцем. Данные, содержащиеся в `LocalDB` защищен средствами файловой системы к файлам базы данных. Если файлы пользовательской базы данных хранятся в общей папке, базу данных можно открыть любой пользователь, имеющий доступ к файловой системе к этому расположению с помощью экземпляра `LocalDB` они владеют. Если файлы базы данных хранятся в защищенном месте, например в папке пользовательских данных, то базу данных может открыть только сам пользователь, а также администратор, обладающий правами доступа к данной папке. `LocalDB` Файлы можно открыть только один экземпляр `LocalDB` одновременно.  
  
> [!NOTE]  
>  `LocalDB` всегда запускается в контексте безопасности; то есть `LocalDB` никогда не будет запускаться с учетными данными группы локальных администраторов. Это означает, что все базы данных файлы, используемые `LocalDB` должны быть доступны учетной записи владельца пользователя Windows, не подразумевает членства в группе локальных администраторов.  
  
## <a name="see-also"></a>См. также  
 [Программа SqlLocalDB](../../tools/sqllocaldb-utility.md)  
  
  