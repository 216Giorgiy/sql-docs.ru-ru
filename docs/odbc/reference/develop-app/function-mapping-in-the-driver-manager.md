---
title: Функция сопоставления диспетчера драйверов | Документы Microsoft
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.suite: sql
ms.technology: connectivity
ms.tgt_pltfrm: ''
ms.topic: conceptual
helpviewer_keywords:
- Unicode [ODBC], functions
- driver manager [ODBC], function mapping
- functions [ODBC], Unicode functions
ms.assetid: ff093b29-671a-4fc0-86c9-08a311a98e54
caps.latest.revision: 5
author: MightyPen
ms.author: genemi
manager: craigg
ms.openlocfilehash: ee2e5d3e770ddd605618f6a71161f410dab7ab52
ms.sourcegitcommit: 1740f3090b168c0e809611a7aa6fd514075616bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/03/2018
ms.locfileid: "32911809"
---
# <a name="function-mapping-in-the-driver-manager"></a>Сопоставление функции диспетчера драйверов
Диспетчер драйверов поддерживает две точки входа для функции, принимающие строковые аргументы. Объявление функции (**SQLDriverConnect**) — форма ANSI функции. Форма Юникода снабжен *W* (**SQLDriverConnectW**.)  
  
 Файл заголовка ODBC также поддерживает функции, назначив *A,* (**SQLDriverConnectA**) для удобства смешанных приложений ANSI или Юникод. Вызовы к **A** функции являются фактически вызывает точку входа внешнее (**SQLDriverConnect**.)  
  
 Если приложение компилируется с _UNICODE **#define**, файл заголовка ODBC сопоставит вызовы объявление функции (**SQLDriverConnect**) до версии Юникода (**SQLDriverConnectW** .)  
  
 Диспетчер драйверов распознает драйвер как драйвер Юникода, если **SQLConnectW** поддерживается драйвером.  
  
 Если драйвер является драйвером Юникода, диспетчер драйверов вызывает функцию следующим образом:  
  
-   Передает функции без аргументов строки или параметров напрямую посредством драйвера.  
  
-   Передает функции Юникода (с *W* суффикс) напрямую с помощью драйвера.  
  
-   Преобразует функцию ANSI (с *A* суффикс) функции Юникода (с *W* суффикс) при преобразовании строковых аргументов в Юникод (DBCS) и передает драйверу функции Юникода.  
  
 Если драйвер является драйвером ANSI, диспетчер драйверов вызывает функцию следующим образом:  
  
-   Передает функции без строковые аргументы и параметры непосредственно с помощью драйвера.  
  
-   Преобразует функции Юникода (с *W* суффикс) вызов функции в ANSI и передает их драйверу.  
  
-   Передает функцию ANSI непосредственно к драйверу.  
  
 Диспетчер драйверов Юникод внутренним образом. В результате оптимальной производительности достигается при работе с драйвером Юникода приложения с поддержкой Юникода так, как диспетчер драйверов просто передает функции Юникода с помощью драйвера. При работе с драйвером ANSI приложение ANSI, диспетчер драйверов необходимо преобразовать строк из ANSI в Юникод при обработке некоторых функций, таких как **SQLDriverConnect**. После обработки функция, диспетчер драйверов необходимо затем преобразовать строку в кодировке Юникод ANSI перед отправкой функция драйвер ANSI.  
  
 Приложение нельзя изменить или чтения буфера привязанного параметра, когда драйвер возвращает SQL_STILL_EXECUTING или SQL_NEED_DATA. Диспетчер драйверов оставляет буферами, которые привязаны к ANSI, пока драйвер возвращает SQL_SUCCESS, SQL_SUCCESS_WITH_INFO или SQL_ERROR. Многопоточные приложения не должен получать доступ ко всем значениям связанных параметров, которые другого потока выполнение инструкции SQL на. Диспетчер драйверов преобразует данные из Юникода в ANSI «на месте» и другой поток может считать данных ANSI в этих буферах, а драйвер продолжает обрабатывать инструкции SQL. Приложения с привязкой данных в Юникоде ANSI драйвер не должен выполнить привязку двух разных столбцов в тот же адрес.
