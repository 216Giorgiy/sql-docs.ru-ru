---
title: Фиксации и отката транзакций | Документы Microsoft
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.suite: sql
ms.technology: connectivity
ms.tgt_pltfrm: ''
ms.topic: conceptual
helpviewer_keywords:
- rolling back transactions [ODBC]
- committing transactions [ODBC]
- transactions [ODBC], rolling back
- transactions [ODBC], committing
ms.assetid: 800f2c1a-6f79-4ed1-830b-aa1a62ff5165
caps.latest.revision: 5
author: MightyPen
ms.author: genemi
manager: craigg
ms.openlocfilehash: af1cadd835060cd6518b7e20c979702847d0b072
ms.sourcegitcommit: 1740f3090b168c0e809611a7aa6fd514075616bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/03/2018
ms.locfileid: "32910049"
---
# <a name="committing-and-rolling-back-transactions"></a>Фиксации и отката транзакций
Для фиксации или отката транзакции в режиме ручной фиксации, приложение вызывает **SQLEndTran**. Драйверы для СУБД, которые обычно поддерживают транзакции реализуют эту функцию, выполнив **ЗАФИКСИРОВАТЬ** или **ОТКАТА** инструкции. Диспетчер драйверов не вызывает **SQLEndTran** когда соединение находится в режиме автоматической фиксации; он просто возвращает SQL_SUCCESS, даже если приложение попытается выполнить откат транзакции. Так как драйверы для СУБД, которые не поддерживают транзакции всегда находятся в режиме автоматической фиксации, они могут либо реализовать **SQLEndTran** возвращает SQL_SUCCESS не выполняя никаких действий или реализует его вообще.  
  
> [!NOTE]  
>  Приложения не должны фиксации или отката транзакции, выполнив **ФИКСАЦИИ** или **ОТКАТА** инструкции с **SQLExecute** или **SQLExecDirect**. Это влияние не определены. Возможны следующие проблемы драйвера, не зная, когда транзакция активна и эти инструкции, сбой источниках данных, которые не поддерживают транзакции. Эти приложения должны вызывать метод **SQLEndTran** вместо него.  
  
 Если приложение передает дескриптор среды **SQLEndTran** но концептуально вызывает проход дескриптора соединения, диспетчер драйверов не **SQLEndTran** с дескриптором среды для каждого из драйверов, имеется один или несколько активных подключений в среде. Драйвер фиксирует транзакции для каждого соединения в среде. Тем не менее важно понимать, что драйвер и диспетчера драйверов выполняет двухфазной фиксации для подключений в среде; Это просто программирования удобство одновременно вызывать **SQLEndTran** для всех подключений в среде.  
  
 (A *двухфазной фиксации* обычно используется для фиксации транзакции, которые распределены по нескольким источникам данных. На первой стадии его источники данных опрашиваются относительно могут ли они зафиксировать свою часть транзакции. На втором этапе транзакция фиксируется фактически во всех источниках данных. Если источников данных ответить на первом этапе, что они не удается зафиксировать транзакцию, на втором этапе не выполняется.)
