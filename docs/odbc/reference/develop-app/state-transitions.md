---
title: "Преобразования состояний | Документы Microsoft"
ms.custom: 
ms.date: 01/19/2017
ms.prod: sql-non-specified
ms.reviewer: 
ms.suite: 
ms.technology:
- drivers
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- state transitions [ODBC]
- unallocated state [ODBC]
- handles [ODBC], state transitions
- allocated state [ODBC]
- connection state [ODBC]
ms.assetid: fc741611-6535-43cc-8156-6d897d04664e
caps.latest.revision: 5
author: MightyPen
ms.author: genemi
manager: jhubbard
ms.workload: Inactive
ms.translationtype: MT
ms.sourcegitcommit: f7e6274d77a9cdd4de6cbcaef559ca99f77b3608
ms.openlocfilehash: 42aedfe48871b04b311fb5de31fb9866e0e2468c
ms.contentlocale: ru-ru
ms.lasthandoff: 09/09/2017

---
# <a name="state-transitions"></a>Переходы состояния
ODBC определяет дискретных *состояния* для каждой среды, для каждого подключения и каждой инструкции. Например, среда имеет три состояния: свободен (в которой выделяется среда не), выделенное (в которой выделяется среды, но подключения не выделяются) и (в котором среды и одно или несколько соединений, соединение выделить). Соединение имеет семь возможные состояния; операторы имеют 13 возможных состояний.  
  
 Какой-либо элемент, как определяется по дескриптору перемещает из одного состояния в другое когда приложение вызывает определенные функции или функции и передает дескриптор этого элемента. Такие перемещения называется *состояния*. Например, выделение дескриптора среды с **SQLAllocHandle** перемещает среду из нераспределенный выделенное и освобождение дескриптора с **SQLFreeHandle** возвращается из выделенного для Освобождено. ODBC определяет ограниченное число допустимые переходы между состояниями, который является другим способом о том, что функции должен вызываться в определенном порядке.  
  
 Некоторые функции, такие как **SQLGetConnectAttr**, вообще не влияет на состояние. Другие функции, влияющие на состояние одного элемента. Например **SQLDisconnect** перемещает соединение из состояния подключения в выделенное состояние. Наконец некоторые функции, влияющие на состояние более одного элемента. Например, выделение дескриптора соединения с **SQLAllocHandle** перемещает соединение из нераспределенный выделенное состояние и среду из распределенного состояние соединения.  
  
 Если приложение вызывает функцию не по порядку, функция возвращает *состояние ошибки перехода*. Например, если среда находится в состояние подключения и приложение вызывает **SQLFreeHandle** с этого дескриптора среды **SQLFreeHandle** возвращает SQLSTATE HY010 (функция ошибка последовательности), так как он может вызываться только в том случае, если среда находится в состоянии выделенное. Определив это как недопустимого изменения состояния, ODBC запрещает освобождение среды, пока имеются активные соединения в приложении.  
  
 Некоторые переходы между состояниями присущие архитектуре ODBC. Например не нельзя выделить дескриптор подключения без первого выделения дескриптора среды, так как функция, которая выделяет дескриптор подключения требуется дескриптор среды. Другие переходы между состояниями, устанавливаемым диспетчера драйверов и драйверов. Например **SQLExecute** выполняет подготовленную инструкцию. Если передается дескриптор инструкции не в состоянии подготовки, **SQLExecute** возвращает SQLSTATE HY010 (функция ошибка последовательности).  
  
 С точки зрения приложения обычно просты переходов между состояниями: допустимые переходы между состояниями, как правило, перейдите в наличии в наличии с потоком хорошо написанное приложение. Переходы между состояниями являются более сложными для диспетчера драйверов и драйверов, так как они позволяют отслеживать состояние среды, для каждого подключения и каждой инструкции. Большая часть этой работы выполняется диспетчером драйверов; Большая часть работы, которая должна быть выполнена с помощью драйверов происходит с помощью инструкций с ожидающими результатами.  
  
 Части 1 и 2 этого руководства («Введение в ODBC» и «Разработка приложений и драйверов»), как правило, не упоминается явно переходов между состояниями. Вместо этого они описывают порядок вызова функции. Например, «Выполнение инструкции» указывается, что инструкцию необходимо подготовить с помощью **SQLPrepare** перед выполнением с **SQLExecute**. Полное описание состояний и переходов между состояниями, включая переходы проверяются диспетчером драйверов и драйверами, который необходимо проверить. в разделе [приложение б: ODBC состояния перехода таблицы](../../../odbc/reference/appendixes/appendix-b-odbc-state-transition-tables.md).

