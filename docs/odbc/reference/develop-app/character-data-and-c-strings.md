---
title: "Символьные данные и строки C | Документы Microsoft"
ms.custom: 
ms.date: 01/19/2017
ms.prod: sql-non-specified
ms.prod_service: drivers
ms.service: 
ms.component: reference
ms.reviewer: 
ms.suite: sql
ms.technology: drivers
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- data buffers [ODBC], length
- data buffers [ODBC], character data
- buffers [ODBC], C strings
- buffers [ODBC], character data
- character data and buffers [ODBC]
- length of data buffers [ODBC]
- data buffers [ODBC], C strings
- buffers [ODBC], length
- C strings and buffers [ODBC]
ms.assetid: 3a141cb4-229d-4027-9349-615cb2995e36
caps.latest.revision: "5"
author: MightyPen
ms.author: genemi
manager: jhubbard
ms.workload: Inactive
ms.openlocfilehash: 54f9d438571b1535d16f5fc3b333e9a9cede42eb
ms.sourcegitcommit: 7f8aebc72e7d0c8cff3990865c9f1316996a67d5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2017
---
# <a name="character-data-and-c-strings"></a>Символьные данные и строки на языке C
Входные параметры, которые ссылаются на данные переменной длины символов (например, имена столбцов, динамических параметров и значений атрибутов строки) имеют связанные длина параметра. Если приложение завершает работу строки с нулевой символ, как это обычно на языке C, он предоставляет в качестве аргумента, либо длина в байтах строки (не включая символ конца строки) или SQL_NTS (строка Null-Terminated). Длина неотрицательным аргументом фактическую длину связанной строки. Длина аргумента может быть 0, чтобы указать строку нулевой длины, отличный от значения NULL. Отрицательное значение SQL_NTS Указывает драйверу, что для определения длины строки путем размещения символа конечное значение null.  
  
 Когда драйвер возвращает символьные данные в приложение, драйвер должен всегда null закрыть его. Это предоставляет приложению выбрать, следует ли обрабатывать данные, как строка или массив символов. Если буфера приложения недостаточно велик для возврата всех символьных данных, драйвер обрезает его до байтовая длина буфера меньше количество байтов, необходимых символом конечное значение null, null прерывает усеченные данные и сохраняет его в буфер. Таким образом приложения всегда должно выделить дополнительное пространство для символа конечное значение null в буферов, используемых для извлечения символьных данных. Например буфер байтов 51 необходимую для получения данных 50 символов.  
  
 Необходимо уделить особое приложением и драйвера при отправке или получении долго символьные данные в частях с **SQLPutData** или **SQLGetData**. Если данные передаются в виде ряда нулем строк, символы конечное значение null для этих строк необходимо вырезаны, прежде чем данные могут быть собраны.  
  
 Число Программисты ODBC путать строки C и символьных данных. Это произошло является артефактом на языке C при определении функции ODBC. Если драйвер ODBC или приложение использует другой язык — помните, что ODBC не зависит от языка — это путаницы снижает вероятность возникновения.  
  
 Когда C строки используются для хранения символьных данных, знак завершения null не рассматривается как часть данных и не считается частью его длина в байтах. Например данные символ «ABC» могут храниться как строка C «ABC\0» или массив символов {'A', 'B', 'C'}. Байтовая длина данных — 3, независимо от того, имеется ли он интерпретируется как строка или массив символов.  
  
 Несмотря на то, что приложения и драйверы обычно используют строки C (нули массивов знаков) для хранения символьных данных, нет необходимости делать это. В языке C символьные данные могут рассматриваться как массив символов (без конечное значение null) и его длина в байтах отдельно переданный буфер длины/индикатора.  
  
 Так как символьные данные могут сохраняться в массиве не — нули, и его длина в байтах передается отдельно, можно внедрять нуль-символов в символьные данные. Однако поведение функции ODBC в этом случае не определено и относящиеся к драйверу ли драйвер обрабатывает это неправильно. Таким образом взаимодействующие приложения всегда должно обрабатывать символьных данных, который может содержать внедренные символы null как двоичные данные.
