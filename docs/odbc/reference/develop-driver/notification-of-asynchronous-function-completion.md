---
title: Уведомление о завершении асинхронной функции | Документы Microsoft
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: drivers
ms.service: ''
ms.component: odbc
ms.reviewer: ''
ms.suite: sql
ms.technology:
- drivers
ms.tgt_pltfrm: ''
ms.topic: conceptual
ms.assetid: 336565da-4203-4745-bce2-4f011c08e357
caps.latest.revision: 5
author: MightyPen
ms.author: genemi
manager: craigg
ms.openlocfilehash: f9ef152274bd9ceea650ebd3c74f97c51c18500c
ms.sourcegitcommit: 2ddc0bfb3ce2f2b160e3638f1c2c237a898263f4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/03/2018
---
# <a name="notification-of-asynchronous-function-completion"></a>Уведомление о завершении асинхронной функции
В Windows 8 SDK ODBC добавлен механизм для уведомления приложения при завершении асинхронной операции, который мы будем называть «уведомления о завершении». (См. [асинхронное выполнение (метод уведомления)](../../../odbc/reference/develop-app/asynchronous-execution-notification-method.md) для получения дополнительной информации.) В этом разделе рассматриваются некоторые вопросы для разработчиков драйвера.  
  
## <a name="the-interface-between-the-driver-manager-and-driver"></a>Интерфейс между диспетчером драйверов и драйверов  
 Диспетчер драйверов внутренне предоставляет функцию обратного вызова [SQLAsyncNotificationCallback функция](../../../odbc/reference/develop-driver/sqlasyncnotificationcallback-function.md). **SQLAsyncNotificationCallback** может вызываться только с помощью драйвера--приложения нельзя вызвать напрямую. Драйвер вызывает **SQLAsyncNotificationCallback** каждый раз, когда новые данные от сервера получен после последнего возвращение SQL_STILL_EXECUTING.  
  
 Диспетчер драйверов предоставляет механизм обратного вызова, драйвер может уведомлять диспетчера драйверов некоторых прогресса в выполнении асинхронной операции после соответствующая функция возвращает значение SQL_STILL_EXECUTING  
  
 Диспетчер драйверов задает атрибут SQL_ATTR_ASYNC_DBC_NOTIFICATION_CALLBACK на дескрипторе соединений драйвер с НЕНУЛЕВОЙ указатель на функцию с типом SQL_ASYNC_NOTIFICATION_CALLBACK для работы в режиме уведомления для драйвера все асинхронные операции над этот дескриптор. Аналогичным образом диспетчер драйверов задает атрибут SQL_ATTR_ASYNC_STMT_NOTIFICATION_CALLBACK маркер инструкции драйвер указатель функции, отличных от NULL, который также относится к типу SQL_ASYNC_NOTIFICATION_CALLBACK для работы в режиме уведомления для драйвера асинхронные операции для этого дескриптора.  
  
 Если асинхронная операция выполняется на дескриптор драйвера, драйвер асинхронной функции должно работать в стиль без блокировки. Если операцию не удается выполнить немедленно, драйвер функция должна возвращать значение SQL_STILL_EXECUTING. Это требование справедливо для опроса режим и режим уведомления.  
  
 Если дескриптор в асинхронном режиме уведомления, драйвер необходимо вызвать функцию обратного вызова уведомления, адрес которого является значение для атрибута SQL_ATTR_ASYNC_DBC_NOTIFICATION_CALLBACK или SQL_ATTR_ASYNC_STMT_NOTIFICATION_CALLBACK, один раз после Возвращает значение SQL_STILL_EXECUTING. Другими словами один возвращение SQL_STILL_EXECUTING должны составлять пару с один вызов функции обратного вызова уведомления. Драйвер должен использовать текущее значение атрибута дескриптор SQL_ATTR_ASYNC_DBC_NOTIFICATION_CONTEXT или SQL_ATTR_ASYNC_STMT_NOTIFICATION_CONTEXT как значение для параметра функции обратного вызова *pContext*.  
  
 Драйвер не должны вызывать обратно в поток, который вызывает функции драйвера. Нет причин для уведомления о ходе выполнения до выполнения возврата функцией. Драйвер должен использовать собственный поток для обратного вызова. Диспетчер драйверов не будет использовать драйвер поток обратного вызова для выполнения логики интенсивной обработки.  
  
 Диспетчер драйверов вызывает исходную функцию снова после драйвер выполняет обратный вызов. Диспетчер драйверов может использовать поток, не это поток приложения или драйвера потока. Если драйвер использует некоторые сведения, связанные с потоком (например, маркер или пользователь идентификатором безопасности), драйвер должен сохранить необходимые сведения в первоначальном вызове асинхронных и используйте сохраненное значение перед всю асинхронную операцию Завершает. Как правило только **SQLDriverConnect**, **SQLConnect**, или **SQLBrowseConnect** должны использовать такого рода сведения.  
  
## <a name="see-also"></a>См. также  
 [Разработка драйвера ODBC](../../../odbc/reference/develop-driver/developing-an-odbc-driver.md)
