---
title: "Чтобы избежать ошибок в R-пакеты, установленные в библиотеках пользователя | Документы Microsoft"
ms.custom: 
ms.date: 09/29/2017
ms.prod: sql-non-specified
ms.reviewer: 
ms.suite: 
ms.technology:
- r-services
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 99ffd9b8-aa6d-4ac2-9840-4e66d0463978
caps.latest.revision: 2
author: jeannt
ms.author: jeannt
manager: jhubbard
ms.workload: Inactive
ms.translationtype: MT
ms.sourcegitcommit: 29122bdf543e82c1f429cf401b5fe1d8383515fc
ms.openlocfilehash: 0de06ebee16d903b4b00c9d8e4673bf450c485d1
ms.contentlocale: ru-ru
ms.lasthandoff: 10/10/2017

---
# <a name="avoiding-errors-on-r-packages-installed-in-user-libraries"></a>Чтобы избежать ошибок в R-пакеты, установленные в библиотек пользователей

Опытным пользователям R привыкшим установки R-пакетов в библиотеке пользователя всякий раз, когда имя библиотеки по умолчанию заблокированы или не доступен. Тем не менее этот подход не поддерживается в SQL Server и установка библиотеку пользователя обычно завершается по ошибке «не удалось найти пакет».

Здесь приведены способы решения проблем, которые помогут избежать возникновения этой ошибки. Объясняет, как можно изменить код R и предлагает правильный R пакета процесса установки с помощью пакетов R от экземпляра SQL Server.

## <a name="why-r-user-libraries-cannot-be-accessed-from-sql-server"></a>Почему библиотек пользователей R нельзя получить доступ из SQL Server

Разработчики R, которым необходимо установить новые пакеты R привыкли к установке пакетов по желанию и использовании закрытого Библиотека пользовательских всякий раз, когда имя библиотеки по умолчанию недоступен, или когда разработчик не является администратором на компьютере.

Например, в типичной среде разработки R, пользователю добавить расположение пакета R в переменную среды `libPath`, или ссылаться на полный путь к пакету, следующим образом:

```R
library("c:/Users/<username>/R/win-library/packagename")  
```

Однако это не сможет работать при запуске решения R в SQL Server, так как пакеты R должна быть установлена на конкретные стандартные библиотеки, связанный с экземпляром.

В противном случае при попытке вызова пакета может появиться следующая ошибка:

*Ошибка в library(xxx): не найден пакет называется «имя пакета»*

Рекомендуется также неправильный разработки установить необходимые пакеты R в библиотеку пользовательского как может привести к ошибкам при запуске решения другим пользователем, который не имеет доступа к расположение библиотеки.

## <a name="how-to-install-r-packages-to-an-accessible-library"></a>Установка пакетов R в библиотеку доступен

**Для SQL Server 2016**

Используйте библиотеку пакет, связанный с экземпляром. Дополнительные сведения см. в разделе [пакеты R, установленных с SQL Server](installing-and-managing-r-packages.md)

**Для SQL Server 2017 г.**

SQL Server предоставляет возможности для управления несколькими версиями пакета и предоставить пользователям разрешения на отдельные пакеты без необходимости, что пользователи имеют доступ к файловой системе.

Дополнительные сведения о том, как создать библиотеку пакета shared и назначать пользователей ролям см. в разделе [R пакета управления для SQL Server](r-package-management-for-sql-server-r-services.md).

При использовании подхода пакета управления на основе ролей базы данных, не обязательно устанавливать несколько копий одного пакета, в каталогах другого пользователя. Установите одну копию пакета требуется и использовать его совместно с проверкой подлинности пользователей. Поскольку пакеты управляются на уровне базы данных, можно также скопировать групп пакетов и связанных разрешений между базами данных.

## <a name="tips-for-avoiding-package-not-found-errors"></a>Советы для предотвращения ошибок «не удалось найти пакет»

+ Измените код, чтобы устранить зависимости от пользователя библиотеки. При переносе решений R для запуска в [!INCLUDE [ssNoVersion_md](..\..\includes\ssnoversion-md.md)], очень важно выполнять следующие:

    + Установите все пакеты, которые необходимы для библиотеки по умолчанию, связанный с экземпляром.

    + Измените код, чтобы убедиться, что пакеты будут загружены из библиотеки по умолчанию, не из каталогов ad-hoc или библиотек пользователей.

+ Избегайте установки нерегламентированный пакет как часть решения. Проверьте код, чтобы убедиться, что никакие вызовы удаленных пакетов или код, который устанавливает пакеты динамически. Если у вас нет разрешений, произойдет сбой кода и при наличии разрешений необходимо устанавливать пакеты отдельно от другого кода, который нужно выполнить.

+ Измените все прямой пути к библиотекам пакета R. Если пакет установлен в библиотеку по умолчанию, среда выполнения R загрузит его из этой библиотеки, даже если в коде R указана другая библиотека.

