---
title: "Установка дополнительных пакетов R на SQL Server | Документация Майкрософт"
ms.custom:
- SQL2016_New_Updated
ms.date: 11/08/2016
ms.prod: sql-server-2016
ms.reviewer: 
ms.suite: 
ms.technology:
- r-services
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 21456462-e58a-44c3-9d3a-68b4263575d7
caps.latest.revision: 16
author: jeannt
ms.author: jeannt
manager: jhubbard
ms.translationtype: MT
ms.sourcegitcommit: 876522142756bca05416a1afff3cf10467f4c7f1
ms.openlocfilehash: adc0e5fc229547632759c5702e98d87f4b71cbb3
ms.contentlocale: ru-ru
ms.lasthandoff: 09/01/2017

---
# <a name="install-additional-r-packages-on-sql-server"></a>Установка дополнительных R-пакетов в SQL Server
Здесь описывается установка новых пакетов R в экземпляре [!INCLUDE[rsql_productname_md](../../includes/rsql-productname-md.md)] на компьютере с доступом к Интернету.

## <a name="1-locate-the-windows-binaries-in-zip-file-format"></a>1. Поиск двоичных файлов Windows в формате ZIP

Пакеты R поддерживаются на многих платформах. Необходимо убедиться, что пакет, который нужно установить, имеет двоичный формат для платформы Windows. В противном случае загруженный пакет работать не будет.

Например, чтобы получить пакет [FISHalyseR](http://bioconductor.org/packages/release/bioc/html/FISHalyseR.html) с сайта Bioconductor, выполните следующие действия.  
  
1.  В списке **Package Archives** (Архивы пакетов) найдите версию **Windows binary** (Двоичный файл Windows).  
  
2.  Щелкните правой кнопкой мыши ссылку на ZIP-файл и выберите  **Сохранить объект как**.  
  
3.  Перейдите к локальной папке, в которой хранятся пакеты в ZIP-формате, и нажмите кнопку **Сохранить**.  
  
 Будет создана локальная копия пакета. Затем можно установить пакет или скопировать пакет в ZIP-формате на сервер без доступа к Интернету.  
  
  
## <a name="2-open-the-default-r-package-library-for-sql-server-r-services"></a>2. Открытие библиотеки пакетов R по умолчанию для служб R SQL Server 

На сервере, на котором установлены пакеты R, связанные с [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)], перейдите к папке. Важно устанавливать пакеты в библиотеке по умолчанию, связанной с текущим экземпляром. 

Дополнительные сведения о поиске этой библиотеки см. в статье [Установка пакетов R и управление ими](../../advanced-analytics/r-services/installing-and-managing-r-packages.md).

   Для каждого экземпляра, в котором будет выполняться пакет, необходимо установить отдельную копию пакетов. В настоящее время пакеты не могут совместно использоваться разными экземплярами.
     
  
## <a name="3-open-an-administrative-command-prompt"></a>3. Открытие командной строки администратора 

Откройте среду R с правами администратора.  Это можно сделать с помощью командной строки Windows или одной из служебных программ R.
  
### <a name="using-the-windows-command-prompt"></a>В командной строке Windows 

1. Откройте командную строку Windows от имени администратора и перейдите в каталог, где находятся файлы RTerm.Exe или RGui.exe.  
  
    При стандартной установке это каталог R **\bin** . Например, в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] средства R можно найти здесь: 

    **Экземпляр по умолчанию**

     `C:\Program Files\MSSQL13.MSSQLSERVER\R_SERVICES\bin` 
 
     **Именованный экземпляр**
   
     `C:\Program files\MSSQL13.<instanceName>\R_SERVICES\bin\x64`  
  
2. Запустите файл **R.Exe**.  
  
### <a name="using-the-r-command-line-utilities"></a>С помощью программ командной строки R 
  
1. В проводнике Windows перейдите к каталогу, в котором содержатся средства R.  
  
2. Щелкните правой кнопкой мыши файл **RGui.exe** или **RTerm.exe** и выберите команду **Запуск от имени администратора**.  
## <a name="4-install-the-package"></a>4. Установка пакета

Команда R для установки пакета зависит от источника пакета (Интернет или локальный ZIP-файл).  
  
### <a name="install-package-from-internet"></a>Установка пакета через Интернет  
  
1.  Обычно для установки нового пакета из CRAN или одного из зеркальных сайтов необходимо использовать следующую команду:  
  
    ```  
    install.packages("target_package_name")  
    ```
    
    Обратите внимание, что двойные кавычки всегда обязательны для имени пакета.

2.  Чтобы указать расположение библиотеки, в которой необходимо установить пакет, выполните следующую команду:
    
    ```  
    lib.SQL <- "C:\\Program Files\\Microsoft SQL Server\\MSSQL13.MSSQLSERVER\\R_SERVICES\\library"    
    ```

    Обратите внимание, что для [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] в настоящее время допускается только одна библиотека пакетов. Не устанавливайте пакеты в библиотеку пользователя. В противном случае запустить пакет из [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] будет невозможно.   
     
3.  Определив расположение библиотеки, следующая инструкция установит распространенный пакет e1070 в библиотеку пакетов, используемую службами R.  
  
    ```  
    install.packages("e1071", lib = lib.SQL)  
    ```  
  
4.  Вам потребуется указать зеркальный сайт для получения пакета. Выберите любой зеркальный сайт, удобный для вашего расположения.  
  
    Список текущих зеркал CRAN см. на [этом сайте](https://cran.r-project.org/mirrors.html).  
  
    > [!TIP]  
    >  Чтобы не приходилось выбирать зеркальный сайт при добавлении каждого нового пакета, в среде разработки R можно настроить постоянное использование одного репозитория.  
    >   
    >  Для этого измените файл глобальных параметров R (RPROFILE) и добавьте следующую строку:  
    >   
    >  `options(repos=structure(c(CRAN="<mirror site URL>")))`  
    >   
    >  Чтобы получить подробные сведения о настройках и других файлах, загружаемых при запуске среды выполнения R, выполните следующую команду из консоли R:  
    >   
    >  `?Startup`  
  
5.  Если целевой пакет зависит от дополнительных пакетов, установщик R автоматически скачает нужные зависимости и установит их.  
  
### <a name="manual-package-installation-or-installing-on-computer-with-no-internet-access"></a>Установка пакета вручную или на компьютере без доступа к Интернету 

1. Если пакет, который планируется установить, имеет зависимости, получите необходимые пакеты заранее и добавьте их в папку с другими ZIP-файлами пакетов.

    > [!TIP]
    > 
    > Если требуется поддержка автономной установки пакетов R, рекомендуется настроить локальный репозиторий с помощью [miniCRAN](https://mran.revolutionanalytics.com/package/miniCRAN/).  
  
2.  В командной строке R введите следующую команду, чтобы указать путь и имя пакета для установки:  
   
    ```  
    install.packages("C:\\Temp\\Downloaded packages\\mynewpackage.zip", repos=NULL)  
    ``` 
     
    Эта команда извлекает R-пакет из локального ZIP-архива (при условии что копия сохранена в каталоге `C:\Temp\Downloaded packages`) и устанавливает пакет (с его зависимостями) в библиотеке R на локальном компьютере.  
  
3.  Если вы ранее изменяли среду R на компьютере, следует убедиться, что переменная среды R `.libPath` использует только один путь, указывающий на папку R_SERVICES экземпляра.  
  
> [!NOTE]
> Если на компьютере помимо служб R SQL Server установлен сервер Microsoft R Server (изолированный), будет доступна отдельная установка R со всеми средствами и библиотеками R. Пакеты, установленные в библиотеке R_SERVER, используются только компонентом Microsoft R Server. [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не может получить к ним доступ.  
> 
>  Обязательно используйте библиотеку R_SERVICES при установке пакетов, которые необходимо применять в SQL Server.

  
## <a name="see-also"></a>См. также:  
 [Установка служб SQL Server R Services &#40;в базе данных&#41;](../../advanced-analytics/r-services/set-up-sql-server-r-services-in-database.md)  
  
  

