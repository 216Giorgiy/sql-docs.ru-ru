---
title: Настройка производительности служб R SQL Server | Документация Майкрософт
ms.custom: ''
ms.date: 07/12/2017
ms.reviewer: ''
ms.suite: sql
ms.prod: machine-learning-services
ms.prod_service: machine-learning-services
ms.component: r
ms.technology: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.author: heidist
author: HeidiSteen
manager: cgronlun
ms.workload: Inactive
ms.openlocfilehash: 4e8d2b11b23bfe40fb33ac1332899c453c19dc1b
ms.sourcegitcommit: 059fc64ba858ea2adaad2db39f306a8bff9649c2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/04/2018
---
# <a name="performance-tuning-for-r-in-sql-server"></a>Настройка производительности для R в SQL Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

В этой статье является первым в ряд из четырех статей, посвященных оптимизации производительности для служб R, основанная на две конкретные случаи:

- Тестирование производительности, как группа разработчиков продукта для проверки показатели производительности решений R

- Оптимизация производительности команды обработки и анализа данных Microsoft для сценария конкретного машинного обучения часто предложенные клиентами.

Этот ряд предназначена для предоставления рекомендации о типах методы, которые наиболее полезны для выполнения заданий R в SQL Server оптимизации производительности.

+ В этом разделе (первого) предоставляет обзор архитектуры и некоторых распространенных проблем при оптимизации для выполнения задач обработки и анализа данных.
+ Второй статье рассматриваются оборудования и оптимизация SQL Server.
+ В третьей статье описаны оптимизации в коде R и ресурсы для ввода в эксплуатацию.
+ В четвертой статье описаны методы теста в подробности и результаты отчеты и выводы.

**Применяется к:** служб R SQL Server 2016, SQL Server 2017 г машинного обучения служб

## <a name="performance-goals-and-targeted-scenarios"></a>Целевые показатели производительности и целевых сценариев

Компонент служб R впервые появился в SQL Server 2016 для поддержки выполнения скриптов R в SQL Server. При использовании этой возможности среды выполнения R работает в отдельном процессе от компонента database engine, но безопасно обменивается данными с компонентом database engine, использование ресурсов сервера и служб, взаимодействующих с SQL Server, например запуска доверенные.

В SQL Server 2017 г поддержки было объявлено для запуска скриптов Python, используя ту же архитектуру с дополнительного языка для выполнения в будущем.

По мере роста числа поддерживаемых версий и языка, очень важно учитывать вероятность конфликта ресурсов из-за задач обучения машины администратор базы данных и архитектор баз данных, и что они имеют возможность настроить сервер для поддержки новых рабочих нагрузок. Несмотря на то, что сохранение analytics месту размещения данных исключает перемещений небезопасных данных, также перемещается аналитических рабочих нагрузок off ноутбук, специалист по анализу данных и на сервер, где размещаются данные.

Оптимизация производительности для машинного обучения четко не является универсальным предложение. Следующие общие задачи могут быть очень различные профили производительности:

- Обучение задачи: Создание и обучении модели регрессии и обучении нейронной сети
- Конструируются с помощью R и извлечения компонентов с помощью T-SQL
- Оценка для отдельных строк или небольшими группами и массовой оценки с помощью табличной входных данных
- Выполнение оценки в R и развертывание модели в рабочей среде на сервере SQL Server в хранимых процедурах
- Изменить код R, чтобы свести к минимуму передачи данных или удалите преобразования дорогостоящих данных
- Включение автоматического тестирования и переподготовки моделей

Поскольку Выбор методов оптимизации, зависит от того, какие задачи является критическим для приложения или вариант использования, практические примеры охватывают общей производительности советы и рекомендации по оптимизации для конкретного сценария оптимизации для массовой оценки.

+ **Параметры оптимизации отдельных в SQL Server**

    В первом практический пример производительности нескольких тесты выполнялись на один набор данных используется один тип модели. Алгоритм rxLinMod в RevoscaleR был использован для создания модели и создавать оценки от него, но для проверки влияния каждого изменения систематически изменения кода, а также базовых таблиц данных.

    Например в один тестовый запуск, код R была изменена, чтобы сравнение может выполняться между конструируются с помощью функции преобразования и предварительно вычисление функции и затем загрузив компонентов из таблицы. В другой тестовый запуск эффективность обучения модели было сравнивать между использованием стандартной индексированные таблицы и данных в таблицу, содержащую различные типы сжатия или новые типы индекса.

+ **Оптимизация для конкретного сценария оценки большого объема**

    Задачи машинного обучения в второй практический пример включает обработку многих резюме передан для нескольких позиций и найти лучший вариант для каждого задания положения. Самой модели машинного обучения, сформулировать как двоичная классификация: он принимает описание возобновления и задание в качестве входного и создает вероятности для каждой пары resume-job. Поскольку предназначена для того, чтобы найти наилучшее соответствие для дальнейшей фильтрации и получить только хорошо соответствуют используется порог вероятности, определяемой пользователем.

    Для этого решения основной целью был для достижения низкую задержку во время оценки. Тем не менее эта задача является невыгодно даже в процессе оценки, поскольку каждое новое задание должно сопоставляться со миллионы резюме в течение разумного промежутка времени. Кроме того на этапе проектирования компонент создает более 2000 функций resume или задания и является критическим фактором производительности.

Мы рекомендуем просмотреть все результаты первой практический пример, чтобы определить, какие методы применяются для решения и оценить потенциальные последствия.

Просмотрите результаты оценки практический пример оптимизации, как автор применить различные методики и оптимизированы для поддержки конкретной рабочей нагрузки сервера.

## <a name="performance-optimization-process"></a>Процесс оптимизации производительности

Конфигурация и настройка производительности требует создания сплошной базы, для которого требуется уровень оптимизации, предназначенных для конкретных рабочих нагрузок:

- Выберите соответствующий сервер узла аналитику. Как правило предпочтительнее reporting получателей, хранилища данных или другом сервере, который уже используется для других отчетов или анализа. Однако в гибридное решение транзакций аналитической обработки (HTAP) рабочих данных используются как входные данные для R для быстрой оценки.

- Настройте экземпляр SQL Server для операций обработчика баланс базы данных и R или выполнения на должном уровне сценария Python. Это может быть изменение SQL Server по умолчанию для памяти и использования ЦП, NUMA и настройки соответствия процессоров и создание групп ресурсов.

- Оптимизация удаленного сервера для поддержки эффективного использования внешних скриптов. Увеличение числа учетных записей, используемых для выполнения внешних скриптов, включения управления пакетами, может включать и назначение пользователям связанных ролей безопасности.

- Применение конкретных оптимизации хранилища данных и передачи в SQL Server, включая индексирования и стратегии статистики, конструктор запросов и оптимизации запросов и структуру таблиц, используемых для машинного обучения. Также может анализировать источники данных и данных транспорта методов или изменения процессов ETL для оптимизации извлечения признаков.

- Настройки аналитической модели во избежание недостатки. Области оптимизации, которые возможны зависит от сложности кода R, пакеты и данные, которые вы используете. Основные задачи включают удаление преобразования данных много ресурсов или Разгрузка данных подготовки или компонент технических задач из R или Python процессов ETL или SQL. Может также рефакторинг скрипты, исключение устанавливает пакет в строке, разделить отдельные инструкции для обучения, оценки и оценки кода R и упростить код, чтобы работать более эффективно, как хранимую процедуру.

## <a name="articles-in-this-series"></a>Статьи в этой серии

+ [Настройка производительности для R в SQL Server — оборудование](..\r\sql-server-configuration-r-services.md)

    Содержит рекомендации по настройке оборудования, [!INCLUDE [ssNoVersion_md](..\..\includes\ssnoversion-md.md)] устанавливается на, а также для настройки экземпляра SQL Server для лучшей поддержки внешних скриптов. Это особенно полезно для **администраторам баз данных**.

+ [Настройка производительности для R в SQL Server — код и данные оптимизации](..\r\r-and-data-optimization-r-services.md)

    Определенные советы по оптимизации внешнего сценария, чтобы избежать известных проблем. Это может пригодиться для **специалистами по анализу данных**.

    [!NOTE]
    > Хотя большая часть сведений в этом разделе относится к R в целом, некоторая информация относится только к RevoScaleR аналитические функции. Руководство по производительности подробные недоступен для **revoscalepy** и другие поддерживаемые библиотеки Python.

+ [Настройка производительности для R в SQL Server — методы и результаты](..\r\performance-case-study-r-services.md)

    Обобщает данные использовался две конкретные случаи, как была протестирована производительности и влияние на результаты оптимизации.
