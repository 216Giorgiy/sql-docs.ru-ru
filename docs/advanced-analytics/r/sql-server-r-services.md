---
title: "SQL Server машинного обучения и служб R (в базе данных) | Документы Microsoft"
ms.date: 03/16/2018
ms.reviewer: 
ms.suite: sql
ms.prod: machine-learning-services
ms.prod_service: machine-learning-services
ms.component: r
ms.technology: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 
caps.latest.revision: 
author: HeidiSteen
ms.author: heidist
manager: cgronlun
ms.workload: Active
ms.openlocfilehash: 0d5bb56717eefa50a219db051eb611a82974a0bc
ms.sourcegitcommit: 8e897b44a98943dce0f7129b1c7c0e695949cc3b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/21/2018
---
# <a name="sql-server-machine-learning-and-r-services-in-database"></a>SQL Server машинного обучения и служб R (в базе данных)
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

Установка в базе данных машинного обучения работает в контексте экземпляр ядра СУБД SQL Server, предоставляя поддержку внешних скриптов R и Python резидентного данных в экземпляре SQL Server. Поскольку машинное обучение интегрирован с [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], можно analytics близко к данным, избежав затрат и рисков, связанных с перемещением данных.

Поскольку ядро базы данных имеет несколько экземпляров, можно установить более одного экземпляра аналитики в базе данных или даже старой и новой версии side-by-side. Доступные параметры: либо [обучения машины службы (в базе данных) для SQL Server 2017 г.](../install/sql-machine-learning-standalone-windows-install.md) с R и Python, или [служб R SQL Server 2016 (в Datatbase)](../install/sql-r-standalone-windows-install.md) с только что R. 

Компоненты обучения машины также могут быть установлены как независимой от экземпляра [автономные серверы](r-server-standalone.md). Как правило, мы рекомендуется обрабатывать (автономный) и (в базе данных) установок как взаимно монопольного во избежание конфликтов ресурсов, но если имеется достаточно ресурсов, существуют не запрет для сотрудников на обоих их установки на одном физическом компьютере.

## <a name="choosing-between-in-database-and-standalone-analytics"></a>Выбор между аналитика в базе данных и с отдельного сервера

Понимание требований к разработке поможет выбрать (в базе данных) и подходы (автономный). Изолированный сервер становится проще настраивать и управлять максимальную гибкость при его использовании, или если вы хотите также подключаться к различным источникам данных за пределами SQL Server. 

Аналитика в базе данных предназначены для тесная интеграция с данными в SQL Server. Можно написать запрос T-SQL, вызывающие функции R или Python и выполнить скрипт в SQL Server Management Studio или любое средство или приложение, используемое для внешних или внедренный T-SQL. Если необходимо выполнять код R или Python в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], либо с помощью хранимых процедур, либо с помощью SQL Server экземпляр как [контекста вычислений](https://docs.microsoft.com/machine-learning-server/r/concept-what-is-compute-context), необходимо установить аналитика в базе данных. Этот параметр обеспечивает безопасность максимальный объем данных и интеграции с помощью средств SQL Server.

Как в базе данных и автономные серверы можно компенсировать ресурсы памяти и процессора ограничения открытым исходным кодом R и Python. Оба варианта включают же пакеты и средства, с возможностью загрузки и обработки больших объемов данных на нескольких ядер и собрать результаты в один выходной объединенный. Функции и алгоритмы предназначены для масштабирования и полезности: прогнозирующей аналитики, статистическое моделирование и визуализации данных и современных алгоритмов машинного обучения в коммерческих серверного продукта разработан и поддерживается Корпорация Майкрософт. 

## <a name="components-of-an-in-database-installation"></a>Компоненты установки в базе данных

SQL Server 2016 — R только. SQL Server 2017 поддерживает R и Python. Ниже перечислены компоненты, в каждой версии. За исключением службы панели запуска SQL Server, в этой таблице идентичен был указан в [автономный сервер статьи](r-server-standalone.md).

| Компонент | Описание |
|-----------|-------------|
| Служба панели запуска SQL Server | Служба, управляющая обмена данными между внешних сред выполнения R и Python и [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] экземпляра. |
| R-пакеты | [RevoScaleR](revoscaler-overview.md) является первичная библиотека для масштабируемый R с помощью функций для обработки данных, преобразования, visualzation и анализа.  <br/>[MicrosoftML (R)](https://docs.microsoft.com/machine-learning-server/r-reference/microsoftml/microsoftml-package) добавляет алгоритмов машинного обучения для создания пользовательских моделей для анализа текста, анализ образов и анализ мнений. <br/>[mrsdeploy](operationalization-with-mrsdeploy.md) предложений веб-развертывания службы (в SQL Server 2017 г. только). <br/>[olapR](how-to-create-mdx-queries-using-olapr.md) предназначен для указания запросов многомерных Выражений в R.|
| Microsoft R Open (MRO) | [MRO](https://mran.microsoft.com/open) является открытым исходным кодом корпорации Майкрософт распределение R. Пакет и интерпретатор включены. Всегда используйте версию MRO, объединенными в программе установки. |
| Средства R | Windows консоль R и командные строки являются стандартные средства в R распространения. Найти их в \Program files\Microsoft SQL Server\140\R_SERVER\bin\x64. |
| R-Примеры и сценарии |  Пакеты с открытым исходным кодом R и RevoScaleR включают встроенные наборы данных, можно создать и запустить скрипт, используя предварительно установленные данные. Их можно найти на \Program files\Microsoft SQL Server\140\R_SERVER\library\datasets и \library\RevoScaleR. |
| Пакеты Python | [revoscalepy](../python/what-is-revoscalepy.md) является первичная библиотека для масштабируемый Python с помощью функций для обработки данных, преобразования, visualzation и анализа. <br/>[microsoftml (Python)](https://docs.microsoft.com/machine-learning-server/python-reference/microsoftml/microsoftml-package) добавляет алгоритмов машинного обучения для создания пользовательских моделей для анализа текста, анализ образов и анализ мнений.  |
| Средства Python | Встроенные средства командной строки Python полезен для нерегламентированной проверки и задачи. Найдите инструмент в \Program files\Microsoft SQL Server\140\PYTHON_SERVER\python.exe. |
| Anaconda | Anaconda — распределение открытым исходным кодом, Python и основные пакеты. |
| Python примеры и сценарии | С помощью R, Python включает встроенные наборы данных и сценариев. Найти данные revoscalepy в \Program files\Microsoft SQL Server\140\PYTHON_SERVER\lib\site packages\revoscalepy\data\sample данных. |
| Предварительно обученный моделей в R и Python | Предварительно обученной модели являются поддерживается и может использоваться на отдельном сервере, но их нельзя установить через программу установки SQL Server. Программа установки Microsoft Server обучения машины предоставляет моделей, которые можно установить бесплатно. Дополнительные сведения см. в разделе [установки обученная моделей машинного обучения на сервере SQL Server](install-pretrained-models-sql-server.md). |

## <a name="get-started-step-by-step"></a>Приступая к работе пошаговые

Запуск программы установки, присоединение двоичные файлы для вашего другого средства разработки и создайте первый сценарий.

### <a name="step-1-install-the-software"></a>Шаг 1: Установка программного обеспечения

Установите одну из этих версий.

+ [SQL Server 2017 г машины обучения Services (в базе данных)](../install/sql-machine-learning-services-windows-install.md)

+ [SQL Server 2016 R Services (в базе данных) — только для чтения](../install/sql-r-services-windows-install.md)
 
### <a name="step-2-configure-a-development-tool"></a>Шаг 2: Настройка средство разработки

Настройка средств разработки для использования двоичные файлы сервера обучения машины. Дополнительные сведения о Python см. в разделе [двоичные файлы Python ссылку](https://docs.microsoft.com/machine-learning-server/python/quickstart-python-tools). Инструкции по подключению в R Studio см. в разделе [с помощью другой версии R](https://support.rstudio.com/hc/en-us/articles/200486138-Using-Different-Versions-of-R) и указать средству C:\Program Files\Microsoft SQL Server\140\R_SERVER\bin\x64. Вы также можете попробовать [средства R для Visual Studio](https://docs.microsoft.com/visualstudio/rtvs/installation). 

Обычно, специалисты по анализу данных использовать свои собственные ноутбука или разработки, на рабочей станции R или Python для изучения данных и построение и настройка прогнозных моделей, пока не получает хорошую прогнозную модель. 

С помощью анализа в базе данных в SQL Server нет необходимости изменять этот процесс. После завершения установки можно запустить код R или Python [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] локально или удаленно:

![rsql_keyscenario2](media/rsql-keyscenario2.png) 

+ **Использование интегрированной среды разработки, вы предпочитаете**. Клиентские компоненты[!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] предоставляют специалисту все необходимые средства для экспериментов и разработки. Эти средства включают среду выполнения R, библиотеку математического ядра Intel для повышения производительности стандартных операций R и набор улучшенных пакетов R, поддерживающих выполнение кода R в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  

+ **Работать удаленно или локально**. Специалисты могут подключаться к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и передавать данные на клиент для локального анализа обычным образом. Тем не менее, лучшим решением является использование **RevoScaleR** или **revoscalepy** API-интерфейсы для принудительной отправки вычислений [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] компьютера, как избежать ресурсоемкого небезопасного перемещения данных.

+ **Внедрение скриптов R или Python в [!INCLUDE[tsql](../../includes/tsql-md.md)] хранимых процедур**. При полной оптимизации кода, заключите их в оболочку в хранимой процедуре, чтобы избежать ненужного перемещения данных и оптимизации задач обработки данных.

### <a name="step-3-write-your-first-script"></a>Шаг 3: Создайте первый сценарий

Вызовите функции R или Python из скрипта T-SQL:
  
  + [R. Использование кода на языке R в Transact-SQL](../tutorials/rtsql-using-r-code-in-transact-sql-quickstart.md) 
  + [R. Дополнительные аналитические функции в базе данных для разработчиков SQL](../tutorials/sqldev-in-database-r-for-sql-developers.md)
  + [Python. Запуск Python с помощью T-SQL](../tutorials/run-python-using-t-sql.md)
  + [Python. Дополнительные аналитические функции в базе данных для разработчиков SQL](../tutorials/sqldev-in-database-python-for-sql-developers.md)

Выберите лучший язык для задачи. R лучше всего подходит для статистических вычислений, которые трудно реализовать с помощью SQL. Для операций на основе набора данных, использовать возможности [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для достижения максимальной производительности. Используете ядро базы данных в памяти для быстрого вычислений над столбцами.

### <a name="step-4-optimize-your-solution"></a>Шаг 4: Оптимизация решения

Когда модель готова для масштабирования данных предприятия, специалист по анализу данных часто работает с SQL DBA или разработчику оптимизации процессов, таких как:

+ Формирование признаков
+ Приема данных и преобразование данных
+ Оценки

В большинстве случаев с помощью R специалисты по анализу данных имели проблем производительности и масштабирования, особенно при использовании больших наборов данных. Это так, как общая реализация среды выполнения является однопотоковым и может вместить только те наборы данных, которые помещаются в доступную память на локальном компьютере. Интеграция со службами SQl Server Machine Learning предоставляет множество функций, для повышения производительности, с большим объемом данных:

+ **RevoScaleR**: R этот пакет содержит реализации некоторых наиболее популярных функций R, переработанные для обеспечения параллелизма и масштабирования. Кроме того, пакет содержит функции, дополнительно повышающие производительность и масштабируемость за счет принудительной отправки вычислений на компьютер [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , который обычно обладает гораздо большим объемом памяти и вычислительных ресурсов.

+ **revoscalepy**. Эта библиотека Python, доступных в SQL Server 2017 г реализует наиболее популярных функций в RevoScaleR, например контекстах удаленных вычислений и многие алгоритмы, которые поддерживают распределенную обработку.

**Resources**

+ [Пример производительности](../../advanced-analytics/r/performance-case-study-r-services.md)
+ [R и оптимизация данных](../../advanced-analytics/r/r-and-data-optimization-r-services.md)

### <a name="step-5-deploy-and-consume"></a>Шаг 5: Развертывание и использование

После модель или скрипт готов для использования в рабочей среде, разработчик базы данных может внедрить модель или код в хранимой процедуре, чтобы сохраненные кода R или Python можно вызвать из приложения. Хранение и выполнение кода R в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] имеет множество преимуществ: можно использовать удобный интерфейс [!INCLUDE[tsql](../../includes/tsql-md.md)] , а все вычисления выполняются в базе данных без ненужного перемещения данных.

![rsql_keyscenario1](media/rsql-keyscenario1.png)

+ **Безопасные и расширяемый**. [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] использует новую архитектуру расширяемости, которая обеспечивает безопасность ядра СУБД и изолирует сеансы R и Python. Вы также можете контролировать пользователей, которым разрешено выполнять скрипты, и можно указать, какие базы данных может осуществляться из кода. Можно управлять объемом ресурсов, выделяемых для среды выполнения, чтобы предотвратить на общую производительность сервера негативное влияние масштабных вычислений.

+ **Планирование и аудита**. При выполнении внешних скриптов заданий [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], можно управлять и аудита данных, используемой специалистами по анализу данных. Можно также запланировать задания и создавайте рабочие процессы, содержащий внешние сценарии R или Python, так же, как бы запланировать другие задания T-SQL или хранимой процедуры.

Чтобы воспользоваться преимуществами управление ресурсами и функции безопасности в SQL Server, процесс развертывания может включать следующие задачи:

+ Преобразование yourcode в функцию, которая может выполняться неоптимальным в хранимой процедуре
+ Настройка параметров безопасности и блокировка пакетов, используемые конкретной задачи
+ Включение ресурсами (требуется выпуск Enterprise edition)

**Resources**

+ [Управление ресурсами для R](resource-governance-for-r-services.md)
+ [Управление пакетами R для SQL Server](r-package-management-for-sql-server-r-services.md)

## <a name="see-also"></a>См. также:

 [SQL Server машинного обучения и R Server (изолированный)](sql-server-r-services.md)
