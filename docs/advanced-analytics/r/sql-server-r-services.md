---
title: SQL Server машинное обучение и служб R (в базе данных) | Документация Майкрософт
ms.prod: sql
ms.technology: machine-learning
ms.date: 04/15/2018
ms.topic: conceptual
author: HeidiSteen
ms.author: heidist
manager: cgronlun
ms.openlocfilehash: 05a2a17988912d7066b0d9f6bf398b889a3cd882
ms.sourcegitcommit: c37da15581fb34250d426a8d661f6d0d64f9b54c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/20/2018
ms.locfileid: "39174781"
---
# <a name="sql-server-machine-learning-and-r-services-in-database"></a>SQL Server машинное обучение и служб R (в базе данных)
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

Установка в базе данных машинного обучения работает в контексте экземпляр ядра СУБД SQL Server, предоставляя поддержку внешних скриптов R и Python резидентного данные в экземпляре SQL Server. Так как машинное обучение интегрирована с [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], можно также оставить analytics рядом с данными и исключить затраты и риски безопасности, связанные с перемещением данных.

Так как ядро базы данных имеет несколько экземпляров, можно установить более одного экземпляра в базе данных аналитики, или даже более старой и новой версий side-by-side. Среди возможных вариантов, либо [служб SQL Server 2017 машинного обучения (в базе данных)](../install/sql-machine-learning-standalone-windows-install.md) с R и Python, или [SQL Server 2016 R Services (в базе данных)](../install/sql-r-standalone-windows-install.md) с только что R. 

Компонентов машинного обучения также можно установить как независимый экземпляр [автономных серверов](r-server-standalone.md). Как правило, мы рекомендуем обрабатывать (изолированный) и (в базе данных) установок как взаимно монопольного, чтобы избежать конфликта ресурсов, но если у вас есть достаточно ресурсов, существуют не запрет для сотрудников на их Установка на одном физическом компьютере.

## <a name="choosing-between-in-database-and-standalone-analytics"></a>Выбор между в базе данных и автономной аналитики

Понимание требований к разработке поможет выбрать между (в базе данных) и приближается к (изолированная версия). Автономный сервер проще настраивать и управлять максимум гибкости при его использовании, или если вы хотите также подключаться к различным источникам данных за пределами SQL Server. 

Аналитика в базе данных предназначены для глубокая интеграция с данными в SQL Server. Можно писать запросы T-SQL, которые вызывают функции R или Python и выполнить скрипт в SQL Server Management Studio или любое средство или приложение, используемое для внешних или внедренный T-SQL. Если вам нужно выполнять код R или Python в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], либо с помощью хранимых процедур, либо с помощью SQL Server экземпляр как [контекста вычислений](https://docs.microsoft.com/machine-learning-server/r/concept-what-is-compute-context), необходимо установить аналитики в базе данных. Этот вариант обеспечивает максимальный объем данных безопасности и интеграция со средствами SQL Server.

Как в базе данных и автономные серверы могут смягчить ограничения памяти и обработки открытым исходным кодом R и Python. Оба варианта включают одинаковые пакеты и инструменты, с возможностью загрузки и обработки больших объемов данных на нескольких ядрах и статистическая обработка результатов в виде одного объединенного вывода. Функции и алгоритмы предназначены для масштабирования и служебной программы: прогнозной аналитики, статистического моделирования, визуализации данных и передовых алгоритмов машинного обучения в коммерческих серверного продукта разработаны и поддерживаемых Корпорация Майкрософт. 

## <a name="components-of-an-in-database-installation"></a>Компоненты установки в базе данных

SQL Server 2016 — R только. SQL Server 2017 поддерживает R и Python. Ниже перечислены функции, в каждой версии. За исключением службы панели запуска SQL Server, эта таблица совпадает со значением, предоставленным в [автономного сервера статье](r-server-standalone.md).

| Компонент | Описание |
|-----------|-------------|
| Служба панели запуска SQL Server | Это служба, которая управляет взаимодействием между внешних сред выполнения R и Python и [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] экземпляра. |
| Пакеты R | [RevoScaleR](revoscaler-overview.md) является основной библиотекой для масштабируемый R с функциями для преобразования, visualzation, анализа и обработки данных.  <br/>[MicrosoftML (R)](https://docs.microsoft.com/machine-learning-server/r-reference/microsoftml/microsoftml-package) добавляет алгоритмов машинного обучения для создания пользовательских моделей для анализа текста, анализ образов и анализ тональности. <br/>[mrsdeploy](operationalization-with-mrsdeploy.md) предложения веб-развертывание службы (в SQL Server 2017 г. только). <br/>[olapR](how-to-create-mdx-queries-using-olapr.md) предназначен для указания запросов многомерных Выражений в R.|
| Microsoft R Open (MRO) | [MRO](https://mran.microsoft.com/open) является открытым исходным кодом корпорации Майкрософт распределение R. Включены пакета и интерпретатор. Всегда используйте версию MRO, объединенными в программе установки. |
| Инструменты R | Окнах консоли R и Командная строка, стандартные средства в дистрибутив R. Найти их на \Program files\Microsoft SQL Server\140\R_SERVER\bin\x64. |
| R Примеры и сценарии |  Пакеты с открытым исходным кодом R и RevoScaleR описан встроенных наборов данных, что можно создать и запустить сценарий с помощью предварительно установленных данных. Их можно найти в \Program files\Microsoft SQL Server\140\R_SERVER\library\datasets и \library\RevoScaleR. |
| Пакеты Python | [revoscalepy](../python/what-is-revoscalepy.md) является основной библиотекой для масштабируемый Python с помощью функций для преобразования, visualzation, анализа и обработки данных. <br/>[microsoftml (Python)](https://docs.microsoft.com/machine-learning-server/python-reference/microsoftml/microsoftml-package) добавляет алгоритмов машинного обучения для создания пользовательских моделей для анализа текста, анализ образов и анализ тональности.  |
| Инструменты Python | Встроенное средство командной строки Python полезен для нерегламентированной отладки и задачи. Найти средство в \Program files\Microsoft SQL Server\140\PYTHON_SERVER\python.exe. |
| Anaconda | Anaconda — дистрибутив открытым исходным кодом Python и основных пакетов. |
| Примеры Python и сценарии | С помощью R, Python, содержит встроенные наборы данных и сценарии. Найти данные revoscalepy в \Program files\Microsoft SQL Server\140\PYTHON_SERVER\lib\site-packages\revoscalepy\data\sample-data. |
| Предварительно обученных моделей R и Python | Предварительно обученных моделей поддерживается и может использоваться на изолированном сервере, но их нельзя установить через программу установки SQL Server. Программа установки сервера машинного обучения Майкрософт предоставляет моделей, которые можно установить бесплатно. Дополнительные сведения см. в разделе [Install обученная моделей машинного обучения на сервере SQL Server](../install/sql-pretrained-models-install.md). |

## <a name="get-started-step-by-step"></a>Начало работы пошаговые

Начните с установки, присоединить двоичные файлы привычного средства разработки и написанию первого скрипта.

### <a name="step-1-install-the-software"></a>Шаг 1: Установка программного обеспечения

Установите одну из этих версий:

+ [Службы машинного обучения из состава SQL Server 2017 (в базе данных)](../install/sql-machine-learning-services-windows-install.md)

+ [SQL Server 2016 R Services (в базе данных) — только для чтения](../install/sql-r-services-windows-install.md)
 
### <a name="step-2-configure-a-development-tool"></a>Шаг 2: Настройка средство разработки

Настройка средств разработки для использования двоичных файлов сервера машинного обучения. Дополнительные сведения о Python см. в разделе [двоичные файлы Python ссылку](https://docs.microsoft.com/machine-learning-server/python/quickstart-python-tools). Инструкции по подключению в R Studio, см. в разделе [с помощью разных версий R](https://support.rstudio.com/hc/en-us/articles/200486138-Using-Different-Versions-of-R) и указать средству C:\Program Files\Microsoft SQL Server\140\R_SERVER\bin\x64. Вы также можете попробовать [инструменты R для Visual Studio](https://docs.microsoft.com/visualstudio/rtvs/installation). 

Обычно, обработке и анализу данных использовать свои собственные ноутбук или разработки, на рабочей станции R или Python исследовать данные и сборка, и также настройка прогнозные модели, пока не получает хорошую прогнозную модель. 

С помощью аналитики в базе данных в SQL Server нет необходимости изменять этот процесс. После завершения установки можно запустить код R или Python на [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] локально или удаленно:

![rsql_keyscenario2](media/rsql-keyscenario2.png) 

+ **Использовать интегрированную среду разработки, вы предпочитаете**. Клиентские компоненты[!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] предоставляют специалисту все необходимые средства для экспериментов и разработки. Эти средства включают среду выполнения R, библиотеку математического ядра Intel для повышения производительности стандартных операций R и набор улучшенных пакетов R, поддерживающих выполнение кода R в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  

+ **Работать удаленно или локально**. Специалисты могут подключаться к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и передавать данные на клиент для локального анализа обычным образом. Однако, лучшим решением является использование **RevoScaleR** или **revoscalepy** API-интерфейсы для принудительной отправки вычислений [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] компьютера, как избежать ресурсоемкого небезопасного перемещения данных.

+ **Внедрение сценариев R или Python в [!INCLUDE[tsql](../../includes/tsql-md.md)] хранимых процедур**. Когда ваш код полностью оптимизирован, заключите его в хранимой процедуре, чтобы избежать ненужного перемещения данных и оптимизировать задачи обработки данных.

### <a name="step-3-write-your-first-script"></a>Шаг 3: Создайте первый сценарий

Вызовите функции R или Python из сценария T-SQL:
  
  + [R. Использование кода на языке R в Transact-SQL](../tutorials/rtsql-using-r-code-in-transact-sql-quickstart.md) 
  + [R. Дополнительные аналитические функции в базе данных для разработчиков SQL](../tutorials/sqldev-in-database-r-for-sql-developers.md)
  + [Python. Запуск Python с помощью T-SQL](../tutorials/run-python-using-t-sql.md)
  + [Python. Дополнительные аналитические функции в базе данных для разработчиков SQL](../tutorials/sqldev-in-database-python-for-sql-developers.md)

Выберите наилучший язык, для задачи. R — это наилучшим образом подходит для статистических вычислений, которые трудно реализовать с помощью SQL. Для операций на основе набора данных, воспользуйтесь преимуществами [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для достижения максимальной производительности. Используйте ядро базы данных в памяти для очень быстро вычислений по столбцам.

### <a name="step-4-optimize-your-solution"></a>Шаг 4: Оптимизация решения

Когда модель готова для масштабирования в корпоративных данных, специалист по обработке данных часто работает с разработчика или администратора БАЗЫ данных SQL, оптимизировать процессы, такие как:

+ Формирование признаков
+ Прием данных и преобразования данных
+ Оценки

Традиционно специалистов по анализу данных с помощью языка R испытывали проблемы с производительностью и масштабирования, особенно при использовании большого набора данных. Том, что общая реализация среды выполнения является однопоточным и могут обеспечивать только те наборы данных, которые помещаются в доступную память на локальном компьютере. Интеграция со службами машинного обучения SQl Server предоставляет много возможностей для повышения производительности с большим объемом данных:

+ **RevoScaleR**: R, этот пакет содержит реализации некоторых наиболее популярных функций R, переработанные для обеспечения параллелизма и масштабирования. Кроме того, пакет содержит функции, дополнительно повышающие производительность и масштабируемость за счет принудительной отправки вычислений на компьютер [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , который обычно обладает гораздо большим объемом памяти и вычислительных ресурсов.

+ **revoscalepy**. Эта библиотека Python, доступных в SQL Server 2017 реализует наиболее популярных функций в RevoScaleR, такие как контексты удаленных вычислений и множество алгоритмов, которые поддерживают распределенную обработку.

**Ресурсы**

+ [Пример производительности](../../advanced-analytics/r/performance-case-study-r-services.md)
+ [R и оптимизация данных](../../advanced-analytics/r/r-and-data-optimization-r-services.md)

### <a name="step-5-deploy-and-consume"></a>Шаг 5: Развертывание и использование

Когда модель или скрипт будет готов для использования в рабочей среде, разработчик баз данных может внедрить модель или код в хранимую процедуру, чтобы сохраненный код R или Python могут вызываться из приложения. Хранение и выполнение кода R в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] имеет множество преимуществ: можно использовать удобный интерфейс [!INCLUDE[tsql](../../includes/tsql-md.md)] , а все вычисления выполняются в базе данных без ненужного перемещения данных.

![rsql_keyscenario1](media/rsql-keyscenario1.png)

+ **Надежную и расширяемую**. [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] использует новую архитектуру расширяемости, которая обеспечивает безопасность ядра базы данных и изолирует сеансы R и Python. Вы также можете контролировать пользователей, которым разрешено выполнять скрипты, и можно указать, какие базы данных может осуществляться по коду. Вы можете управлять объем ресурсов, выделяемых для среды выполнения, чтобы предотвратить негативное влияние на общую производительность сервера масштабных вычислений.

+ **Планирование и аудит**. При выполнении внешних скриптов заданий в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], можно управлять и использовать данные аудита по обработке и анализу данных. Можно также запланировать заданий и проектировать рабочие процессы со внешних скриптов R или Python, так же, как будет планировать другие задания T-SQL или хранимой процедуры.

Преимущества управления ресурсами и функции безопасности в SQL Server, процесс развертывания может включать следующие задачи:

+ Преобразование yourcode на функцию, которая может быть оптимальным в хранимой процедуре
+ Настройка безопасности и блокирования пакетов, используемых определенной задачи
+ Включения управления ресурсами (требуется корпоративный выпуск)

**Ресурсы**

+ [Управление ресурсами для R](resource-governance-for-r-services.md)
+ [Управление пакетами R для SQL Server](install-additional-r-packages-on-sql-server.md)

## <a name="see-also"></a>См. также

 [SQL Server машинное обучение и R Server (изолированный)](sql-server-r-services.md)
