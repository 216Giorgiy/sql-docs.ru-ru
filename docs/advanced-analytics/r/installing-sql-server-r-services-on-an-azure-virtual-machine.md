---
title: "Установка компонентов обучения машины SQL Server на виртуальной машине Azure | Документы Microsoft"
ms.custom: 
ms.date: 10/31/2017
ms.reviewer: 
ms.suite: sql
ms.prod: machine-learning-services
ms.prod_service: machine-learning-services
ms.component: r
ms.technology: r-services
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: c3c223b8-75c4-412e-a319-d57ecf6533af
caps.latest.revision: "11"
author: jeannt
ms.author: jeannt
manager: cgronlund
ms.workload: Inactive
ms.openlocfilehash: af558a4792eed6d38eb03fc80d230c5ada8d7fb5
ms.sourcegitcommit: 23433249be7ee3502c5b4d442179ea47305ceeea
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/20/2017
---
# <a name="installing-sql-server-machine-learning-features-on-an-azure-virtual-machine"></a>Установка SQL Server машинного обучения функции на виртуальной машине Azure
 
При развертывании виртуальной машины Azure, включающий [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], теперь можно выбрать машинного обучения, как средство для добавления экземпляра при создании виртуальной Машины.

+ [Создание новой виртуальной Машины, службы R и SQL Server 2016](#new)
+ [Добавление компонентов обучения машины к существующей виртуальной машины с SQL Server 2016](#existing)

> [!NOTE]
> Виртуальные машины, теперь доступны для 2017 г. SQL Server! В разделе [это объявление](https://azure.microsoft.com/blog/announcing-new-azure-vm-images-sql-server-2017-on-linux-and-windows/) подробные сведения.
> 
> R также доступна как функцию предварительного просмотра в базе данных SQL Azure. Дополнительные сведения см. в разделе [с помощью R в базе данных SQL Azure](../r/using-r-in-azure-sql-database.md).

## <a name="create-a-new-sql-server-2017-virtual-machine"></a>Создание новой виртуальной машины SQL Server 2017 г.

Чтобы использовать R или Python в 2017 г. SQL Server, убедитесь, что получение виртуальной машины под управлением Windows. [!INCLUDE[sscurrentlong-md](../../includes/sscurrentlong-md.md)]в Linux поддерживает быстрое [оценки собственного](../sql-native-scoring.md) с помощью функции ПРОГНОЗИРОВАНИЯ T-SQL, но другие машинного обучения возможности не доступны еще в этом выпуске.

Список предложений виртуальной Машине SQL Server см. в статье: [Обзор SQL Server на виртуальных машинах Azure (Windows)](https://docs.microsoft.com/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-server-iaas-overview).

### <a name="new"></a>Создание новой виртуальной Машины SQL Server Enterprise с машинного обучения

1. На портале Azure щелкните виртуальные МАШИНЫ и нажмите кнопку Создать.
2. Установите SQL Server 2017 г Enterprise Edition.
3. Настройте имя сервера и разрешения учетной записи, а затем выберите ценовой план.
4. В **параметры сервера SQL Server** (шаг 4 в мастере установки виртуальной Машины), найдите **Machine Services обучения (Advanced Analytics)** и нажмите кнопку **включить**.
5. Просмотрите сводку, представленную для проверки, и нажмите кнопку **ОК**.
6. Когда виртуальная машина будет готова, подключитесь к ней и откройте предварительно установленную среду SQL Server Management Studio. Машинное обучение готов к выполнению.
7. Чтобы проверить их готовность, вы можете открыть новое окно запроса и выполнить простую инструкцию (например, приведенную ниже), в которой используется язык R для создания последовательности чисел от 1 до 10.

    ```
    EXEC sp_execute_external_script
    @language = N'R'
    , @script = N' OutputDataSet <- as.data.frame(seq(1, 10, ));'
    , @input_data_1 = N'   ;'
    WITH RESULT SETS (([Sequence] int NOT NULL));
    ```

6. Если вы планируете подключиться к экземпляру из клиента обработки и анализа удаленных данных, выполните [дополнительные шаги](#additional-steps) при необходимости.

### <a name="disable-machine-learning-features-on-a-sql-server-vm"></a>Отключение функции обучения компьютера на виртуальной Машине SQL Server

Также можно включить или отключить эту функцию на существующей виртуальной машины SQL Server в любое время.

1. Откройте колонку виртуальной машины.
2. Щелкните **Параметры**, а затем выберите **Конфигурация SQL Server**.
3. Внесите изменения в функциях и применить.

### <a name="existing"></a>Добавление существующей виртуальной Машине SQL Server 2016 Enterprise служб R

При создании виртуальной машины Azure, включенные SQL Server без машинного обучения, можно добавить функцию, выполните следующие действия:

1. Повторно запустите установку [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и добавьте этот компонент на странице мастера **Конфигурация сервера**.
2. Включите выполнение внешних скриптов и перезапустите экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. Дополнительные сведения см. в разделе [настроить SQL Server R Services](../../advanced-analytics/r/set-up-sql-server-r-services-in-database.md).
3. (Необязательно.) Настройте доступ к базе данных для рабочих учетных записей R, если требуется удаленное выполнение скрипта.
   Дополнительные сведения см. в разделе [Установка служб R SQL Server](../../advanced-analytics/r/set-up-sql-server-r-services-in-database.md).
3. (Необязательно.) Измените правило брандмауэра на виртуальной машине Azure, если вы планируете разрешить выполнение скрипта R из удаленных клиентов для обработки и анализа данных. Дополнительные сведения см. в разделе [Разблокирование брандмауэра](#firewall) выше.
4. Установите или включите необходимые сетевые библиотеки. Дополнительные сведения см. в разделе [Добавление сетевых протоколов](#network) выше.

## <a name="additional-steps"></a>Дополнительные действия

Некоторые дополнительные действия не требуются, если ожидается, что удаленным клиентам доступ к серверу удаленного контекста вычислений SQL Server.

### <a name="firewall"></a>Разблокирование брандмауэра

По умолчанию брандмауэр на виртуальную машину Azure использует правило, которое блокирует сетевой доступ для локальных учетных записей пользователей.

Необходимо отключить это правило, чтобы убедиться, что доступ к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] экземпляр из клиента обработки и анализа удаленных данных.  В противном случае машинного обучения кода невозможно выполнить в контексты вычислений, использующих рабочей виртуальной машины.

Чтобы включить доступ к удаленным данным обработки и анализа клиентам:

1. На виртуальной машине откройте брандмауэр Windows в режиме повышенной безопасности.
2. Выберите **Правила для исходящих подключений**.
3. Отключите следующее правило:
  
     `Block network access for R local user accounts in SQL Server instance MSSQLSERVER`
  
### <a name="enable-odbc-callbacks-for-remote-clients"></a>Включение обратных вызовов ODBC для удаленных клиентов

Если ожидается, что клиентов, вызывающих сервера необходимо выдавать запросы ODBC как часть их машинного обучения решения, необходимо убедиться, что панель запуска осуществлять вызовы ODBC от имени удаленного клиента. Для этого необходимо разрешить вход в экземпляр рабочим учетным записям SQL, которые используются панелью запуска.
Дополнительные сведения см. в разделе [Установка служб R SQL Server](../../advanced-analytics/r/set-up-sql-server-r-services-in-database.md).

### <a name="network"></a>Добавление сетевых протоколов

+ Включите именованные каналы.
  
  Службы [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] используют протокол именованных каналов для подключений между компьютерами клиента и сервера, а также для некоторых внутренних подключений. Если именованные каналы не включены, вам необходимо установить и включить их на виртуальной машине Azure и любом клиенте обработки и анализа данных, который подключен к серверу.
  
+ Включите протокол TCP/IP.

  Он требуется для подключений замыкания на себя. Если возникли следующие ошибки, включите поддержку TCP/IP на виртуальной машине, которая поддерживает экземпляр:

  «DBNETLIB; SQL Server не существует или доступ запрещен»

## <a name="related-resources"></a>Связанные ресурсы

[Использование языка R в базе данных Azure SQL](../r/using-r-in-azure-sql-database.md)