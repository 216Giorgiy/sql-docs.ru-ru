---
title: "Обновление и установка часто задаваемые вопросы (SQL Server R Services) | Документы Microsoft"
ms.custom:
- SQL2016_New_Updated
ms.date: 06/16/2017
ms.prod: sql-server-2016
ms.reviewer: 
ms.suite: 
ms.technology:
- r-services
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 001e66b9-6c3f-41b3-81b7-46541e15f9ea
caps.latest.revision: 59
author: jeannt
ms.author: jeannt
manager: jhubbard
ms.workload: On Demand
ms.translationtype: MT
ms.sourcegitcommit: cd1366409f9fb0af271b26fad3b8b911f99acc06
ms.openlocfilehash: 395554af6b9d014d560d8b6520d032966630c5b2
ms.contentlocale: ru-ru
ms.lasthandoff: 09/08/2017

---
# <a name="upgrade-and-installation-faq-sql-server-r-services"></a>Обновление и установка часто задаваемые вопросы (SQL Server R Services)

В этом разделе содержатся ответы на некоторые распространенные вопросы об установке машинного обучения функции в SQL Server. Она также охватывает часто задаваемые вопросы об обновлениях. Некоторые проблемы возникают только при обновлении с предварительных версий. Таким образом рекомендуется определить версию и выпуск первой и выполните обновление до последней версии или выпуска службы как можно быстрее.

**Применяется к:** служб R SQL Server 2016, SQL Server 2017 г машинного обучения службы (в базе данных)

## <a name="performing-setup-for-the-first-time"></a>Выполнение установки в первый раз

Выполните процедуры для настройки [! INCLUDEssCurrent] и компоненты R, как описано здесь: 

+ [Настройка SQL Server R Services или машины обучения службы в базе данных](../../advanced-analytics/r-services/set-up-sql-server-r-services-in-database.md)
+ [Настройка SQL Server 2017 г. с Python](../python/setup-python-machine-learning-services.md)
+ [Создание изолированного сервера R Server](create-a-standalone-r-server.md)

После установки SQL Server, чтобы использовать внешние сценарии R или Python, необходимо выполнить дополнительную настройку. Это, так как функция выполнения внешнего скрипта не включена по умолчанию.

> [!NOTE]
> Не используйте инструкции по установке, которые были опубликованы до выпуска общедоступной версии SQL Server 2016. Процесс установки полностью изменить между ранних выпусках и версии официального выпуска. 

### <a name="requirements-and-restrictions"></a>Требования и ограничения

В зависимости от сборки служб R, вы устанавливаете могут применяться некоторые следующие ограничения:

- В ранних версиях служб SQL Server 2016 R нотации имена в формате 8.3 требовалось на диск, содержащий рабочий каталог. Если вы установили предварительную версию, обновление до пакета обновления 1 для SQL Server 2016 следует удалить это требование.

- Установить [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] в отказоустойчивом кластере нельзя. 

- На виртуальной Машине Azure может потребоваться дополнительная настройка. Например может потребоваться создать исключение брандмауэра для поддержки удаленного доступа.

- Установка Side-by-side другую версию R или другие выпуски Revolution Analytics, не поддерживается.

- Новые установки предварительных версий [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] больше не поддерживаются. Если вы используете предварительную версию, обновление как можно быстрее.

- Отключите антивирусную до начала установки. По завершении установки рекомендуется приостановить выполнение поиска вирусов на папки, используемые SQL Server (предпочтительно по всему дереву).

### <a name="licensing-agreements-for-unattended-installs"></a>Лицензионные соглашения для автоматической установки

При использовании командной строки для обновления экземпляра SQL Server, убедитесь, что, в командной строке включает новый параметр лицензионного соглашения, */IACCEPTROPENLICENSEAGREEMENT*. Установка может завершиться ошибкой, если этот параметр не используется.

### <a name="offline-installation-of-r-components-for-a-localized-version-of-sql-server"></a>Для установки компонентов R для локализованной версии SQL Server в автономном режиме

При установке служб R на компьютере, который не имеет доступа к Интернету, необходимо выполнить следующие дополнительные действия. Загрузите установщик компонентов R в локальную папку, перед запуском программы установки SQL Server и изменить файл установщика, чтобы убедиться, что установлен правильный язык.

Идентификатор языка, используемый для компонентов R должно быть таким же, как язык установки SQL Server, или **Далее** кнопка отключена и не может завершить установку.

Дополнительные сведения см. в разделе [Установка компонентов R без доступа к Интернету](../../advanced-analytics/r-services/installing-ml-components-without-internet-access.md).

## <a name="post-installation-configuration"></a>Настройка после установки

Чтобы использовать машинного обучения с R или Python, дополнительная настройка не требуется после запуска программы установки SQL Server. В зависимости от уровня безопасности сервера и экземпляра SQL Server и баз данных, может потребоваться выполнить дополнительные шаги. Просмотрите эти шаги из инструкции по установке, чтобы определить, если какой-либо дополнительной настройки могут быть необходимы.

[Задайте копии SQL Server R Services в базе данных](set-up-sql-server-r-services-in-database.md)

- Функция, которая поддерживает выполнение внешних скриптов, например R или Python, отключена по умолчанию для базы данных безопасности и должна быть включена.

- Убедитесь, что учетные записи работника, используется панель запуска для запуска R или Python имеют доступ к экземпляру.

- Может потребоваться включить удаленный доступ на сервере, или создать правило брандмауэра, разрешающее входящего соединения с SQL Server.

- В зависимости от нагрузки плановой может потребоваться оптимизировать сервер для машинного обучения задачи. 

## <a name="upgrades-or-uninstallation"></a>Обновления или удаления программного обеспечения

Этот раздел содержит подробные инструкции для конкретных сценариев обновления.

Обновление с предварительной версии служб R SQL Server 2016 больше не поддерживаются. Рекомендуется удалить предварительную версию и затем установить полную версию как можно быстрее.

### <a name="support-for-slipstream-upgrades"></a>Поддержка интегрированных обновлений

Интегрированная установка — это возможность применить исправление или обновление для экземпляра, установка которого завершилась сбоем, чтобы устранить существующие неполадки. Преимущество этого метода — что SQL Server обновляется в то же время выполнения программы установки, предотвращение отдельные перезагрузку позже.

Если сервер не имеет доступа к Интернету, необходимо загрузить установщик SQL Server. *Прежде чем* запустить процесс обновления, необходимо отдельно скачать соответствующие версии установщиков компонентов R. 

Расположения загрузки. в разделе [компоненты установки R без доступа к Интернету](installing-ml-components-without-internet-access.md).

Когда все файлы установки будут скопированы в локальный каталог, запустите программу установки, введя в командной строке SETUP.EXE.

- Используйте */updatesource* аргумент, чтобы указать расположение локального файла, содержащего обновления SQL Server, например накопительного пакета обновления или пакета обновления.

- Используйте */MRCACHEDIRECTORY* аргумент, чтобы указать папку, содержащую CAB-файлов компонентов R.

Дополнительные сведения см. в записи группой поддержки: [развертывание служб R на компьютерах без доступа к Интернету](https://blogs.msdn.microsoft.com/sqlcat/2016/10/20/do-it-right-deploying-sql-server-r-services-on-computers-without-internet-access/).

### <a name="upgrade-r-components-offline"></a>Обновление компонентов R в автономном режиме

После установки или обновления серверов, которые не подключены к Интернету, необходимо загрузить обновленную версию компонентов r. вручную перед началом обновления. Дополнительные сведения см. в разделе [компоненты установки R без доступа к Интернету](../../advanced-analytics/r-services/installing-ml-components-without-internet-access.md).

### <a name="schedule-for-update-of-r-components"></a>Расписание для обновления компонентов R

Будут выпущены исправления или улучшения для SQL Server 2016 компонентов R также обновляются или обновляться, если экземпляр уже включает в себя компонент служб R.

При использовании SQL Server 2017 г. Получение обновлений для компонентов R, устанавливаются автоматически.

Начиная с 2016 декабря вы можете обновить компоненты R чаще чем цикл выпуска SQL Server. Для этого *привязки* экземпляр служб R в политику современных жизненного цикла программного обеспечения. В настоящее время поддержка предоставляется только для обновления экземпляров 2016. При выпуске новой версии R Server можно будет обновить до экземпляров 2017 г. также.

Дополнительные сведения см. в разделе [SqlBindR используется для обновления экземпляра SQL Server R Services](../../advanced-analytics/r-services/use-sqlbindr-exe-to-upgrade-an-instance-of-r-services.md).

### <a name="upgrade-from-a-pre-release-version-of-sql-server-2016"></a>Обновление с предварительной версии SQL Server 2016

Как правило обновления на месте в любой предварительной версии не поддерживаются.

Для успешной установки служб R, необходимо удалить все предыдущие версии [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] и связанными компонентами R. Сюда входят CTP3-версии SQL Server 2016, CTP-версия 3.1, CTP-версия 3.2, RC0 или RC1.

Удаление предварительной версии может быть сложным и необходим работающий специальный скрипт. Обратитесь в службу технической поддержки.

Следующие версии были установлены с предварительными версиями SQL Server 2016.

| Version | Сборка         |
|---------|---------------|
| CTP 3.0 | 13.0.xxx      |
| CTP 3.1 | 13.0.801.12   |
| CTP 3.2 | 13.0.900.73   |
| CTP 3.3 | 13.0.1000.281 |
| RC1     | 13.0.1200.242 |
| RC2     | 13.0.1300.275 |
| RC3     | 13.0.1400.361 |

При наличии подозрений о версии с помощью запуска `@@VERSION` из SQL Server Management Studio.

### <a name="problems-with-setup-of-r-server-standalone"></a>Проблемы с установки R Server (изолированный)

В этом разделе описываются проблемы, характерные для установки Microsoft R Server (изолированный), используйте программу установки SQL Server 2016. Более общих проблемах, связанных с R Server обновления см. в разделе [Microsoft R Server](https://msdn.microsoft.com/microsoft-r/) на сайте MSDN.

#### <a name="failure-to-install-localized-versions"></a>Ошибка установки локализованных версий

При автономной установки R Server предварительных версий не позволяют использовать языки локализации.

Как правило когда сервер не имеет доступа к Интернету, перед запуском программы установки необходимо загрузить все пакеты установки для R Server. Затем можно указать расположение файлов во время установки.

Тем не менее если идентификатор языка, связанного с пакетом установщика не совпадает с языком программы установки SQL Server, возникает проблема. Дойдя до страницы для установки компонентов R, **Далее** кнопка отключена и не может продолжить установку. Чтобы избежать этого можно переименовать пакета для использования соответствующим идентификатором.

Например, пакеты установки может называться `SRO_3.2.2.0_1031.cab`.
Чтобы установить 104 языка на сервере SQL Server, переименуйте файл в `SRO_3.2.2.0_1041.cab`.

#### <a name="installing-r-services-and-r-server-standalone-on-the-same-computer"></a>Установка служб R и изолированный сервер R на том же компьютере

Как правило установке служб R (в базе данных) и R Server (изолированного) на том же компьютере. Тем не менее если на сервере имеется достаточно мощности, изолированный сервер R может быть полезен в качестве средства разработки. Может также потребоваться использовать возможности ввода в эксплуатацию R Server, и доступ к данным SQL Server с сервера R, без перемещения данных.

Обратите внимание, что при установке R Server and R Services на том же компьютере установлены два отдельных наборов те же библиотеки R. Один используется для работы с экземпляром SQL Server, а второй — для разработки приложений используйте или сервером R.

В более ранних версиях SQL Server 2016 установки R Server (изолированный) и служб R (в базе данных), в то же время может вызвать ошибку с сообщением «доступ запрещен». Эта проблема была исправлена в пакете обновления 1 для SQL Server 2016.

Если возникла эта ошибка и необходимо обновить эти компоненты, выполните интегрированной установки SQL Server 2016 с пакетом обновления 1. Существует два способа разрешить эту проблему, для которых требуется удалить и переустановить.

1. Удаление служб R (в базе данных) и убедитесь, что учетные записи пользователей для SQLRUserGroup, удаляются.

2. Перезапустите сервер, а затем переустановите R Server (изолированный).

3. Выполнения SQL Server после установки более и на этот раз выберите **Добавление компонентов к существующему серверу SQL**.

4. Выберите экземпляр, а затем выберите **служб R (в базе данных)** параметр для добавления.

В некоторых случаях эта процедура не удается решить проблему. Попробуйте следующее решение.

1. Удаление службы R (в базе данных) и R Server (изолированный) в то же время.

2. Удалите учетные записи локального пользователя (SQLRUserGroup).

3. Перезапустите сервер.

4. Запустите программу установки SQL Server и добавить только компонент служб R (в базе данных). Не устанавливайте **R Server (изолированный)**.

## <a name="see-also"></a>См. также:

 [Приступая к работе с SQL Server R Services](../r/getting-started-with-sql-server-r-services.md)

 [Приступая к работе с Microsoft R Server автономный](../r/getting-started-with-microsoft-r-server-standalone.md)

