---
title: "Дополнительные параметры конфигурации для службы обучения машины | Документы Microsoft"
ms.custom:
- SQL2016_New_Updated
ms.date: 11/01/2016
ms.prod: sql-server-2016
ms.reviewer: 
ms.suite: 
ms.technology:
- r-services
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 8d73fd98-0c61-4a62-94bb-75658195f2a6
caps.latest.revision: 21
author: jeannt
ms.author: jeannt
manager: jhubbard
ms.translationtype: MT
ms.sourcegitcommit: 876522142756bca05416a1afff3cf10467f4c7f1
ms.openlocfilehash: 872acf107d72989b4623a9d5f4ccb85c44d1f2f9
ms.contentlocale: ru-ru
ms.lasthandoff: 09/01/2017

---
# <a name="advanced-configuration-options-for-machine-learning-services"></a>Дополнительные параметры конфигурации для службы машинного обучения

Это статье описаны изменения, выполненные после установки, чтобы изменить конфигурацию среды выполнения R и других служб, связанных с машинного обучения в SQL Server.

Применяется к: службы R SQL Server 2016, SQL Server 2017 г машинного обучения служб

##  <a name="bkmk_Provisioning"></a>Подготовка учетных записей пользователей для машины учебные

Внешний скрипт обрабатывает в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] выполняются в контексте учетные записи локальных пользователей с ограниченными правами доступа. Выполнение этих процессов в отдельные учетные записи с низким уровнем привилегий дает следующие преимущества:

+ Уменьшение привилегий для процессов среды выполнения внешнего скрипта на [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] компьютера
+ Обеспечивает изоляцию между сеансами внешней среды выполнения, например R или Python.

При установке новых окон *пул учетных записей пользователей* создается, содержащий учетные записи локальных пользователей, необходимые для выполнения процесса среды выполнения R. При необходимости для поддержки R можно изменить количество пользователей. Администратор базы данных также должен предоставить этой группе разрешение на подключение к любому экземпляру, где включены службы R. Дополнительные сведения см. в разделе [Modify the User Account Pool for SQL Server R Services](../../advanced-analytics/r/modify-the-user-account-pool-for-sql-server-r-services.md).

Тем не менее для важных ресурсов в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] можно определить список управления доступом (ACL), чтобы запретить доступ к этой группе и предотвратить доступ процесса среды выполнения R к ресурсам.

+ Пул учетных записей пользователей связан с определенным экземпляром.  Для каждого экземпляра, на котором включен скрипт R, создается отдельный пул рабочих учетных записей. Учетные записи не могут совместно использоваться разными экземплярами.

+ Имена учетных записей пользователей в пуле имеют формат SQLInstanceName*nn*. Например, при использовании экземпляра по умолчанию в качестве сервера R пул учетных записей пользователей поддерживает такие имена учетных записей, как MSSQLSERVER01, MSSQLSERVER02 и т. д.

+ Размер пула учетных записей пользователей является статическим (по умолчанию — 20). Число сеансов среды выполнения R, которые могут запускаться одновременно, ограничено размером пула учетных записей пользователей. Тем не менее администратор может изменить это ограничение с помощью диспетчера конфигурации SQL Server.

Дополнительные сведения об изменении пула учетных записей пользователей см. в разделе [Modify the User Account Pool for SQL Server R Services](../../advanced-analytics/r/modify-the-user-account-pool-for-sql-server-r-services.md).

##  <a name="bkmk_ManagingMemory"></a>Управление памятью, используемые процессами внешних скриптов

По умолчанию процессы среды выполнения R, связанные с [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] , могут использовать не более 20 % всей памяти компьютера. Однако при необходимости администратор может изменить это ограничение.

Как правило, этот объем памяти будет недостаточным для серьезных задач R, таких как обучение модели и прогнозирование на основе нескольких строк данных. Возможно, потребуется сократить объем памяти, зарезервированный для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (или других служб), и использовать регулятор ресурсов для определения и выделения внешнего пула или пулов ресурсов. Дополнительные сведения см. в разделе [управление ресурсами для R](../../advanced-analytics/r/resource-governance-for-r-services.md).

##  <a name="bkmk_ChangingConfig"></a>Изменить дополнительные параметры службы с помощью файла конфигурации

Вы можете управлять некоторыми дополнительными свойствами служб [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] с помощью файла конфигурации [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)]. Этот файл создается во время установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и по умолчанию сохраняется в формате обычного текста в следующем каталоге:

`<instance path>\binn\rlauncher.config`

Для изменения этого файла необходимо иметь права администратора на компьютере, на котором выполняется [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . При изменением файла конфигурации рекомендуется сделать его резервную копию.

Например чтобы с помощью блокнота откройте файл конфигурации для экземпляра по умолчанию, будет откройте командную строку от имени администратора и введите следующую команду:

```
C:\>Notepad.exe "%programfiles%\Microsoft SQL Server\MSSQL13.MSSQLSERVER\mssql\binn\rlauncher.config"  
```

##  <a name="bkmk_properties"></a>Изменение свойств конфигурации

В следующей таблице перечислены все параметры, которые поддерживаются для [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], а также их допустимые значения.

Все параметры задаются в виде пары "ключ — значение", каждый параметр указывается в отдельной строке. Например это свойство задает уровень трассировки для RLauncher:

по умолчанию — TRACE_LEVEL=4.


|**Имя параметра**|**Тип значения**|**По умолчанию**|**Описание**|
|------------------|----------------|-------------|-----------------|
|JOB_CLEANUP_ON_EXIT|Целочисленный<br /><br /> 0 = Отключено<br /><br /> 1 = Включено|1<br /><br /> Файлы журнала удаляются при выходе.|Указывает, необходимо ли очищать временную рабочую папку, создаваемую для каждого сеанса R, после завершения сеанса R. Этот параметр полезен для отладки.<br /><br /> Примечание. Это внутренний параметр. Не изменяйте его значение.|
|TRACE_LEVEL|Целочисленный<br /><br /> 1 = ошибка<br /><br /> 2 — производительность<br /><br /> 3 — предупреждение<br /><br /> 4 — сведения|1<br /><br /> Выводить только предупреждения|Задает уровень детализации трассировки для средства запуска R (MSSQLLAUNCHPAD) для целей отладки. Этот параметр влияет на уровень детализации трассировки, которая хранится в следующих файлах трассировки. Оба файла трассировки находятся в пути, который задается параметром LOG_DIRECTORY:<br /><br /> **rlauncher.log**: файл трассировки, созданный для сеансов R, запущенных запросами T-SQL.<br /><br /> |

## <a name="bkmk_Launchpad"></a>Изменение учетной записи службы запуска

Отдельные [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)] служба создается для каждого экземпляра, на котором вы настроили машинного обучения служб.

По умолчанию панель запуска настроена для работы под учетной записью NT Service\MSSQLLaunchpad, имеющей все необходимые разрешения на выполнения скриптов R. Однако при изменении этой учетной записи панели запуска может невозможно для запуска или для доступа к экземпляру SQL Server, где должны запускаться внешних скриптов.

При изменении учетной записи службы обязательно используйте приложение **Локальная политика безопасности** и добавьте следующие разрешения для каждой учетной записи службы:

+ Назначение квот памяти процессам (SeIncreaseQuotaPrivilege)
+ Обход проходной проверки (SeChangeNotifyPrivilege)
+ Вход в систему в качестве службы (SeServiceLogonRight)
+ Замена токена уровня процесса (SeAssignPrimaryTokenPrivilege)

Дополнительные сведения о разрешениях, необходимых для запуска служб SQL Server, см. в разделе [Права доступа и права Windows](https://msdn.microsoft.com/library/ms143504.aspx#Windows).

## <a name="see-also"></a>См. также:

[Вопросы безопасности](security-considerations-for-the-r-runtime-in-sql-server.md)
