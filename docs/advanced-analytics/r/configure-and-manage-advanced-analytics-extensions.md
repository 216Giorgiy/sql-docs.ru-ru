---
title: Расширенная конфигурация для службы машинного обучения SQL Server | Документация Майкрософт
ms.prod: sql
ms.technology: machine-learning
ms.date: 04/15/2018
ms.topic: conceptual
author: HeidiSteen
ms.author: heidist
manager: cgronlun
ms.openlocfilehash: 8384773f6db4c0ced2fc68e52cd78100c98c52fd
ms.sourcegitcommit: 79d4dc820767f7836720ce26a61097ba5a5f23f2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/16/2018
ms.locfileid: "40394944"
---
# <a name="advanced-configuration-options-for-sql-server-machine-learning-services"></a>Дополнительные параметры конфигурации для службы машинного обучения SQL Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

В этой статье описываются изменения, выполненные после завершения установки, чтобы изменить конфигурацию среды выполнения внешних скриптов и другие службы, связанные с машинным обучением в SQL Server.

**Применяется к:** служб R SQL Server 2016, SQL Server 2017 службы машинного обучения

##  <a name="bkmk_Provisioning"></a> Подготовка дополнительных учетных записей пользователей для машины обучения

Внешний скрипт обрабатывает в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] выполняются в контексте учетных записей локальных пользователей с низким уровнем прав. Выполнение этих процессов в отдельных учетных записей с низким уровнем привилегий дает следующие преимущества:

+ Уменьшает привилегии процессов среды выполнения внешнего скрипта на [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] компьютера
+ Обеспечивает изоляцию между сеансами внешней среды выполнения, например R или Python.

В процессе установки, новых Windows *пул учетных записей пользователей* создается, содержащий учетные записи локальных пользователей, необходимые для запуска среды выполнения внешних процессов, таких как R или Python. Можно изменить число пользователей, как требуется для поддержки задач машинного обучения. 

Кроме того администратору базы данных необходимо предоставить этой группе разрешение на подключение к любому экземпляру, где включен машинного обучения. Дополнительные сведения см. в разделе [изменение пула учетных записей пользователей для службы машинного обучения SQL Server](../../advanced-analytics/r/modify-the-user-account-pool-for-sql-server-r-services.md).

К protext конфиденциальным ресурсам на [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], можно определить список управления доступом (ACL) для этой группы. Указав ресурсы, которые группе запрещен доступ к, можно запретить доступ внешними процессами, например среды выполнения R или Python.

+ Пул учетных записей пользователей связан с определенным экземпляром. Для каждого экземпляра, на компьютер, на котором работает обучения требуется отдельный пул рабочих учетных записей. Учетные записи не могут совместно использоваться разными экземплярами.

+ Имена учетных записей пользователей в пуле имеют формат SQLInstanceName*nn*. Например при использовании экземпляра по умолчанию для машинного обучения, пул учетных записей пользователей поддерживает имена учетных записей, например MSSQLSERVER01, MSSQLSERVER02 и т. д.

+ Размер пула учетных записей пользователей является статическим (по умолчанию — 20). Размер этого пула учетных записей пользователей, ограничивается число сеансов внешней среды выполнения, которые могут запускаться одновременно. Чтобы изменить это ограничение, администратор должен использовать диспетчер конфигурации SQL Server.

Дополнительные сведения о том, как вносить изменения в пул учетных записей пользователей см. в разделе [изменение пула учетных записей пользователей для службы машинного обучения SQL Server](../../advanced-analytics/r/modify-the-user-account-pool-for-sql-server-r-services.md).

##  <a name="bkmk_ManagingMemory"></a> Управление памятью, используемых внешними процессами скриптов

По умолчанию среды выполнения внешних скриптов для машинного обучения, ограничены не более чем 20% всей памяти компьютера. Зависит от системы, но в общем случае может оказаться этот предел недостатка задачи серьезные машинного обучения, такие как Обучение модели и прогнозирование на основе нескольких строк данных. 

Для поддержки машинного обучения, администратор может увеличить этот предел. При этом может потребоваться уменьшить объем памяти, зарезервированный для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или для других служб. Также можно использовать для определения внешнего пула ресурсов или пулы регулятора ресурсов, таким образом, чтобы выделить конкретный ресурс к заданиям R или Python.

Дополнительные сведения см. в разделе [управление ресурсами для машинного обучения](../../advanced-analytics/r/resource-governance-for-r-services.md).


## <a name="bkmk_Launchpad"></a>Изменение учетной записи службы панели запуска

Отдельный [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)] служба создается для каждого экземпляра, на котором вы настроили в службах машинного обучения.

По умолчанию панель запуска настроена для работы под учетной записью NT Service\MSSQLLaunchpad, имеющей все необходимые разрешения на выполнения скриптов R. Тем не менее при изменении этой учетной записи панели запуска не можно запустить или для доступа к экземпляру SQL Server, где должны запускаться внешних скриптов.

При изменении учетной записи службы обязательно используйте приложение **Локальная политика безопасности** и добавьте следующие разрешения для каждой учетной записи службы:

+ Назначение квот памяти процессам (SeIncreaseQuotaPrivilege)
+ Обход проходной проверки (SeChangeNotifyPrivilege)
+ Вход в систему в качестве службы (SeServiceLogonRight)
+ Замена токена уровня процесса (SeAssignPrimaryTokenPrivilege)

Дополнительные сведения о разрешениях, необходимых для запуска служб SQL Server, см. в разделе [Права доступа и права Windows](../../database-engine/configure-windows/configure-windows-service-accounts-and-permissions.md).

##  <a name="bkmk_ChangingConfig"></a> Изменить дополнительные параметры службы

В ранних версиях SQL Server 2016 R Services, можно изменить некоторые свойства службы, изменив [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] файла конфигурации. 

Тем не менее этот файл больше не используется для изменения конфигурации. Мы рекомендуем использовать диспетчер конфигурации SQL Server на эффект изменения конфигурации службы, такие как учетная запись службы и число пользователей.

**Чтобы изменить конфигурацию панели запуска**

1. Откройте [диспетчер конфигурации SQL Server](../../relational-databases/sql-server-configuration-manager.md). 
2. Щелкните правой кнопкой мыши панель запуска SQL Server и выберите **свойства**.

    + Чтобы изменить учетную запись службы, щелкните **вход в систему** вкладки.

    + Чтобы увеличить количество пользователей, нажмите кнопку **Дополнительно** вкладки.


**Изменение параметров отладки**

Некоторые свойства можно изменить только с помощью файла конфигурации панели запуска, который может быть полезен в случаях, например, отладка. Файл конфигурации создается во время [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] установки и по умолчанию сохраняется как обычный текстовый файл в следующем расположении: `<instance path>\binn\rlauncher.config`

Для изменения этого файла необходимо иметь права администратора на компьютере, на котором выполняется [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . При изменением файла конфигурации рекомендуется сделать его резервную копию.

В следующей таблице перечислены параметры [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], их допустимые значения. 

|**Имя параметра**|**Тип**|**Описание**|
|----|----|----|
|ЗАДАНИЕ\_ОЧИСТКИ\_ON\_ВЫХОДА|Целочисленный |Это внутренний параметр. не изменяйте это значение. </br></br>Указывает ли рабочей папке создается для каждого сеанса внешней среды выполнения могут быть удалены после завершения сеанса. Этот параметр полезен для отладки. </br></br>Поддерживаемые значения: **0** (отключено) или **1** (включено). </br></br>Значение по умолчанию равно 1, значение файлы журнала удаляются при выходе.|
|ТРАССИРОВКИ\_УРОВЕНЬ|Целочисленный |Настраивает уровень детализации трассировки MSSQLLAUNCHPAD для целей отладки. Это влияет на файлы трассировки в каталоге, указанном параметром LOG_DIRECTORY. </br></br>Поддерживаемые значения: **1** (ошибка), **2** (производительность), **3** (предупреждение), **4** (сведения). </br></br>Значение по умолчанию равно 1, то есть только выводить предупреждения.|

Все параметры задаются в виде пары "ключ — значение", каждый параметр указывается в отдельной строке. Например, чтобы изменить уровень трассировки, необходимо добавить строку `Default: TRACE_LEVEL=4`.

## <a name="see-also"></a>См. также

[Вопросы безопасности](security-considerations-for-the-r-runtime-in-sql-server.md)
