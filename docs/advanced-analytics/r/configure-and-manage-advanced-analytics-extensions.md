---
title: Расширенная конфигурация для служб SQL Server Machine Learning | Документы Microsoft
ms.prod: sql
ms.technology: machine-learning
ms.date: 04/15/2018
ms.topic: conceptual
author: HeidiSteen
ms.author: heidist
manager: cgronlun
ms.openlocfilehash: 5fc4e661f68a23ff2a954b832463eb60c7449057
ms.sourcegitcommit: 7a6df3fd5bea9282ecdeffa94d13ea1da6def80a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
---
# <a name="advanced-configuration-options-for-sql-server-machine-learning-services"></a>Дополнительные параметры конфигурации для служб SQL Server машины обучения
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

Это статье описаны изменения, выполненные после установки, чтобы изменить конфигурацию среды выполнения внешнего скрипта и других служб, связанных с машинного обучения в SQL Server.

**Применяется к:** служб R SQL Server 2016, SQL Server 2017 г машинного обучения служб

##  <a name="bkmk_Provisioning"></a> Подготовка к работе дополнительные учетные записи пользователей для машины учебные

Внешний скрипт обрабатывает в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] выполняются в контексте учетные записи локальных пользователей с ограниченными правами доступа. Выполнение этих процессов в отдельные учетные записи с низким уровнем привилегий дает следующие преимущества:

+ Уменьшение привилегий для процессов среды выполнения внешнего скрипта на [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] компьютера
+ Обеспечивает изоляцию между сеансами внешней среды выполнения, например R или Python.

При установке новых окон *пул учетных записей пользователей* создается, содержащий учетные записи локальных пользователей, необходимые для выполнения внешних среды выполнения процессов, таких как R или Python. Можно изменить число пользователей, как требуется для поддержки задач машинного обучения. 

Кроме того администратор базы данных необходимо предоставить этой группе разрешения на подключение к любому экземпляру, где была включена машинного обучения. Дополнительные сведения см. в разделе [изменение пула учетных записей пользователей для служб SQL Server Machine Learning](../../advanced-analytics/r/modify-the-user-account-pool-for-sql-server-r-services.md).

К конфиденциальным ресурсам, protext на [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], можно определить список управления доступом (ACL) для этой группы. Указав ресурсы, которые отказано в доступе к группе, можно запретить доступ с внешними процессами, например среды выполнения R или Python.

+ Пул учетных записей пользователей связан с определенным экземпляром. Для каждого экземпляра, на компьютер, на котором работает обучения требуется отдельный пул рабочих учетных записей. Учетные записи не могут совместно использоваться разными экземплярами.

+ Имена учетных записей пользователей в пуле имеют формат SQLInstanceName*nn*. Например при использовании экземпляра по умолчанию для машинного обучения пула учетных записей пользователей поддерживает имена учетных записей, таких как MSSQLSERVER01, MSSQLSERVER02 и т. д.

+ Размер пула учетных записей пользователей является статическим (по умолчанию — 20). Число сеансов внешних среды выполнения, которые могут запускаться одновременно ограничено размером пула учетных записей пользователей. Чтобы изменить это ограничение, администратор должен использовать диспетчер конфигурации SQL Server.

Дополнительные сведения о том, как внести изменения в пуле учетных записей пользователей см. в разделе [изменение пула учетных записей пользователей для служб SQL Server Machine Learning](../../advanced-analytics/r/modify-the-user-account-pool-for-sql-server-r-services.md).

##  <a name="bkmk_ManagingMemory"></a> Управление памятью, используемые процессами внешних скриптов

По умолчанию среды выполнения внешнего скрипта для машинного обучения ограничены не более 20% всей памяти компьютера. Зависит от системы, но в общем случае может оказаться этот предел недостаточной для задач серьезные машинного обучения, такие как Обучение модели или прогноза на несколько строк данных. 

Чтобы обеспечить поддержку машинного обучения, администратор может увеличить этот предел. При этом может потребоваться уменьшить объем памяти, зарезервированный для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] или для других служб. Также можно использовать регулятор ресурсов для определения внешнего пула ресурсов или пулы, позволяя пулов ресурсов определенного задания R или Python можно выделить.

Дополнительные сведения см. в разделе [управление ресурсами для машинного обучения](../../advanced-analytics/r/resource-governance-for-r-services.md).


## <a name="bkmk_Launchpad"></a>Изменение учетной записи службы панели запуска

Отдельные [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)] служба создается для каждого экземпляра, на котором вы настроили машинного обучения служб.

По умолчанию панель запуска настроена для работы под учетной записью NT Service\MSSQLLaunchpad, имеющей все необходимые разрешения на выполнения скриптов R. Однако при изменении этой учетной записи панели запуска может невозможно для запуска или для доступа к экземпляру SQL Server, где должны запускаться внешних скриптов.

При изменении учетной записи службы обязательно используйте приложение **Локальная политика безопасности** и добавьте следующие разрешения для каждой учетной записи службы:

+ Назначение квот памяти процессам (SeIncreaseQuotaPrivilege)
+ Обход проходной проверки (SeChangeNotifyPrivilege)
+ Вход в систему в качестве службы (SeServiceLogonRight)
+ Замена токена уровня процесса (SeAssignPrimaryTokenPrivilege)

Дополнительные сведения о разрешениях, необходимых для запуска служб SQL Server, см. в разделе [Права доступа и права Windows](https://msdn.microsoft.com/library/ms143504.aspx#Windows).

##  <a name="bkmk_ChangingConfig"></a> Изменить дополнительные параметры служб

В ранних версиях служб SQL Server 2016 R можно изменить некоторые свойства службы, изменив [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] файла конфигурации. 

Тем не менее этот файл больше не используется для изменения конфигурации. Мы рекомендуем использовать диспетчер конфигурации SQL Server, в силу изменений конфигурации службы, такие как учетная запись службы и количество пользователей.

**Чтобы изменить конфигурацию панели запуска**

1. Откройте [диспетчер конфигурации SQL Server](../../relational-databases/sql-server-configuration-manager.md). 
2. Щелкните правой кнопкой мыши панель запуска SQL Server и выберите **свойства**.

    + Чтобы изменить учетную запись службы, щелкните **вход в систему** вкладки.

    + Чтобы увеличить количество пользователей, нажмите кнопку **Дополнительно** вкладки.


**Изменение параметров отладки**

Некоторые свойства можно изменить только с помощью файла конфигурации панели запуска, который может быть полезен в случаях, например отладки. Файл конфигурации создается во время [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] установки и по умолчанию сохраняется в формате обычного текста в следующем расположении: `<instance path>\binn\rlauncher.config`

Для изменения этого файла необходимо иметь права администратора на компьютере, на котором выполняется [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . При изменением файла конфигурации рекомендуется сделать его резервную копию.

В следующей таблице перечислены дополнительные параметры для [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], с одним из допустимых значений. 

|**Имя параметра**|**Тип**|**Description**|
|----|----|----|
|ЗАДАНИЕ\_ОЧИСТКИ\_ON\_ВЫХОДА|Целочисленный |Это внутренний параметр – не изменяйте это значение. </br></br>Указывает, является ли временную рабочую папку, создается для каждого сеанса внешней среды выполнения могут быть удалены после завершения сеанса. Этот параметр полезен для отладки. </br></br>Поддерживаемые значения: **0** (отключено) или **1** (включено). </br></br>Значение по умолчанию — 1, значение файлы журнала удаляются при выходе.|
|ТРАССИРОВКИ\_УРОВЕНЬ|Целочисленный |Задает уровень детализации трассировки MSSQLLAUNCHPAD для целей отладки. Это влияет на файлы трассировки в каталоге, указанном параметром LOG_DIRECTORY. </br></br>Поддерживаемые значения: **1** (ошибка), **2** (производительность) **3** (предупреждение), **4** (сведения). </br></br>Значение по умолчанию — 1, то есть только выводить предупреждения.|

Все параметры задаются в виде пары "ключ — значение", каждый параметр указывается в отдельной строке. Например, чтобы изменить уровень трассировки, необходимо добавить строку `Default: TRACE_LEVEL=4`.

## <a name="see-also"></a>См. также

[Вопросы безопасности](security-considerations-for-the-r-runtime-in-sql-server.md)
