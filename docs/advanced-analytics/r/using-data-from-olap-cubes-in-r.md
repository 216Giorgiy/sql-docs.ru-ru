---
title: Используя данные из кубов OLAP в R (SQL Server машинного обучения) | Документы Microsoft
ms.prod: sql
ms.technology: machine-learning
ms.date: 04/15/2018
ms.topic: conceptual
author: HeidiSteen
ms.author: heidist
manager: cgronlun
ms.openlocfilehash: 0753fc84ea6516da63e1e49dc68063780b99361b
ms.sourcegitcommit: 7a6df3fd5bea9282ecdeffa94d13ea1da6def80a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
---
# <a name="using-data-from-olap-cubes-in-r"></a>Используя данные из кубов OLAP в R
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

**OlapR** пакет является пакет R, предоставляемые корпорацией Майкрософт для использования с машины обучения Server и SQL Server, который позволяет использовать запросы многомерных Выражений для получения данных из кубов OLAP. В этом пакете нет необходимости создавать связанные серверы или очистить плоские наборы строк; OLAP-данным можно получить непосредственно из кода R.

В этой статье описываются API, а также обзор для пользователей R, которые могут быть неизвестны баз данных многомерных кубов OLAP и многомерных Выражений.

> [!IMPORTANT]
> Экземпляр служб Analysis Services может поддерживать обычной многомерных кубов или табличных моделей, но экземпляр не поддерживает обоих типов моделей. Таким образом прежде чем пытаться построить запрос многомерных Выражений к кубу, убедитесь, что экземпляр служб Analysis Services содержит многомерных моделей.

## <a name="what-is-an-olap-cube"></a>Что такое куб OLAP?

Оперативная аналитическая Обработка осуществляется сокращение для интерактивной аналитической обработки. Решения OLAP часто используются для сбора и хранения данных на важных для бизнеса со временем. Многие инструменты, панели мониторинга и визуализации используют данные OLAP для бизнес-аналитики. Дополнительные сведения см. в разделе [оперативной аналитической обработки](https://en.wikipedia.org/wiki/Online_analytical_processing).

Корпорация Майкрософт предоставляет [служб Analysis Services](https://docs.microsoft.com/sql/analysis-services/analysis-services), что позволяет проектировать, развертывать и запроса данных OLAP в виде _кубы_ или _табличных моделей_. Куб является многомерная база данных. _Измерения_ похожи аспекты данных или факторов в R: использования измерений для определения некоторых определенного подмножества данных, для составления сводки или анализа. Например время — важные измерения, поэтому большая многие решения OLAP, включая различные календари, которые определены по умолчанию для использования при выполнении среза и обобщения данных. 

Для повышения производительности базы данных OLAP часто вычисляют сводные значения (или _агрегаты_) заранее и сохраняет их для получения быстрее. На основе сводки *меры*, которые представляют формулы, которые могут быть применены для числовых данных. Использовать для определения подмножества данных измерения и меры для вычисления к этим данным. Например для вычисления продаж строку продукта за несколько кварталов минус налоги сообщить среднюю стоимость для конкретного поставщика, с начала года совокупное заработной платные и так далее используется меры.

Многомерные Выражения, сокращение для многомерных выражений — язык, используемый для выполнения запросов к кубам. Запрос многомерных Выражений обычно содержит определение данных, включающий одно или несколько измерений и по крайней мере одну меру, то, что запросы многомерных Выражений можно получить гораздо более сложные и последовательного windows, совокупное средние значения, суммы, ранги или процентилем. 

Ниже приведены некоторые термины, которые могут быть полезны при запуске построения запросов многомерных Выражений.

+ *Создание срезов* принимает подмножество куба, используя значения из одного измерения.

+ При*сегментировании* создается вложенный куб посредством указания диапазона значений для нескольких измерений.

+ *Детализация* позволяет перейти от сводки к подробностям.

+ *Подъем* позволяет перейти от подробностей к более высокому уровню статистической обработки.

+ *Свертка* дает сводные данные по данным в измерении.

+ *Сводка* поворачивает куб или выбранные данные.

## <a name="how-to-use-olapr-to-create-mdx-queries"></a>Использование olapR для создания запросов многомерных Выражений

В следующей статье содержатся подробные примеры синтаксиса для создания и выполнения запросов к кубу:

+ [Создание запросов многомерных Выражений, с помощью R](../../advanced-analytics/r/how-to-create-mdx-queries-using-olapr.md)

## <a name="olapr-api"></a>olapR API

Пакет **OlapR** поддерживает два метода создания запросов многомерных выражений:

- **Используйте построитель многомерных Выражений.** Использование функций R в пакете для создания простой запрос многомерных Выражений, путем выбора куба и затем настройки осей и срезы. Это легко создавать допустимый запрос многомерных Выражений, если нет доступа к средствам традиционный OLAP, или у вас нет глубокого знания языка многомерных Выражений.

    Не все запросы многомерных Выражений могут создаваться с помощью этого метода, так как многомерные Выражения могут быть сложными. Однако этот API поддерживает большинство наиболее распространенным и полезным операций, включая срез, поперечные срезы данных, углубленной детализации, rollup и pivot в измерениях N.

+ **Скопированные и вставленные корректный многомерных Выражений.** Создание вручную, а затем вставьте в любом запросе многомерных Выражений. Этот параметр рекомендуется использовать, если у вас есть существующие запросы многомерных Выражений, которые требуется повторно использовать или если требуется построить запрос слишком сложен для **olapR** для обработки.

    После построения MDX с помощью любой программы клиента, такие как среда SSMS или Excel, сохранить строку запроса. Ввести строку этого многомерных Выражений в качестве аргумента для *обработчик запросов SSAS* в **olapR** пакета. Поставщик отправляет запрос к указанному серверу служб Analysis Services и передает результаты в R. 

Примеры для построения многомерных Выражений запросов или запуске существующего запроса многомерных Выражений, см. в разделе [способ создания запросов многомерных Выражений, с помощью R](../../advanced-analytics/r/how-to-create-mdx-queries-using-olapr.md).

## <a name="known-issues"></a>Известные проблемы

В этом разделе перечислены некоторые известные проблемы и часто задаваемые вопросы о **olapR** пакета.

### <a name="tabular-model-support"></a>Поддержка табличной модели

При подключении к экземпляру служб Analysis Services, содержащий табличной модели, `explore` функция сообщает об успешном выполнении с возвращаемым значением TRUE. Тем не менее объекты в табличной модели отличаются от многомерные объекты, и структура многомерной базы данных отличается от табличной модели.

Несмотря на то, что DAX (выражения анализа данных) — это язык, обычно используемых с табличными моделями, можно создать допустимые запросы многомерных Выражений для табличной модели, если вы уже знакомы с многомерными Выражениями. Конструкторы olapR нельзя использовать для создания допустимых запросов многомерных Выражений для табличной модели.

Однако выполнение запросов многомерных Выражений, неэффективный способ получить данные из табличной модели. Если вам нужно получить данные из табличной модели для использования в R, рассмотрите следующие методы:

+ Включите режим DirectQuery модели и добавьте сервер в качестве связанного сервера в SQL Server. 
+ Если табличная модель строится на Киоск реляционных данных, получения данных непосредственно из источника.

### <a name="how-to-determine-whether-an-instance-contains-tabular-or-multidimensional-models"></a>Как определить, содержит ли экземпляр табличных или многомерных моделей

Один экземпляр служб Analysis Services может содержать только один тип модели, хотя он может содержать несколько моделей. Причина заключается в том, что существуют фундаментальные отличия между табличными моделями и многомерных моделей, определяющие способ хранения и обработки данных. Например табличные модели хранятся в памяти и используйте индексы columnstore для выполнения вычислений очень быстро. В многомерных моделях данных хранится на диске и агрегаты заранее определенные и получать с помощью запросов многомерных Выражений.

При подключении к службам Analysis Services с помощью клиента, например SQL Server Management Studio, чтобы узнать краткий обзор модели поддерживается, по значкам для базы данных.

Можно также просматривать и запрашивать свойства сервера, чтобы определить, какой тип модели поддерживает экземпляра. **Режим сервера** свойство поддерживает два значения: _многомерные_ или _табличных_.

См. в следующей статье Общие сведения об этих двух типах моделей:

+ [Сравнение многомерных и табличных моделей](https://docs.microsoft.com/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas)

См. в следующей статье сведения о запросе свойства сервера:

+ [OLE DB для OLAP наборы строк схемы](https://docs.microsoft.com/sql/analysis-services/schema-rowsets/ole-db-olap/ole-db-for-olap-schema-rowsets)

### <a name="writeback-is-not-supported"></a>Обратная запись не поддерживается.

Результаты пользовательских вычислений R обратной записи куба невозможна.

Как правило даже в том случае, если куб включена для обратной записи, поддерживаются только ограниченные операции и может потребоваться дополнительная настройка. Мы рекомендуем использовать многомерные Выражения, для таких операций.

+ [Измерения, доступные для записи](https://docs.microsoft.com/sql/analysis-services/multidimensional-models-olap-logical-dimension-objects/write-enabled-dimensions)
+ [Секции, доступные для записи](https://docs.microsoft.com/sql/analysis-services/multidimensional-models-olap-logical-cube-objects/partitions-write-enabled-partitions)
+ [Задать пользовательский доступ к данным ячейки](https://docs.microsoft.com/sql/analysis-services/multidimensional-models/grant-custom-access-to-cell-data-analysis-services)

### <a name="long-running-mdx-queries-block-cube-processing"></a>Длительные запросы многомерных Выражений блокировал обработку куба

Несмотря на то что **olapR** пакет выполняет только операции считывания, длительные запросы многомерных Выражений можно создавать блокировок, предотвратить обработку куба. Всегда заранее проверяйте запросы многомерных Выражений, чтобы знать, какой объем данных должны возвращаться.

При попытке подключиться к кубу, заблокирован, может появиться сообщение об ошибке с хранилищем данных SQL Server не удается связаться. Рекомендуемые решения включают активацию удаленных соединений, проверка сервера или имя экземпляра и т. д.; Однако Учитывайте возможность выполнения предыдущего открытое соединение.

Администратор службы SSAS может предотвратить проблемы блокировки путем идентификации и завершение открытых сеансов. Свойство времени ожидания могут также применяться к запросам многомерных Выражений на уровне сервера для принудительного прекращения всех долго выполняющихся запросов.

## <a name="resources"></a>Ресурсы

Если вы не знакомы OLAP или запросы многомерных Выражений, см. статьи Википедии: 

+ [Кубы OLAP](https://en.wikipedia.org/wiki/OLAP_cube)
+ [Запросы многомерных Выражений](https://en.wikipedia.org/wiki/MultiDimensional_eXpressions)
