---
title: "Используя данные из кубов OLAP в R | Документы Microsoft"
ms.custom: 
ms.prod: sql-non-specified
ms.date: 11/29/2017
ms.reviewer: 
ms.suite: 
ms.technology: r-services
ms.tgt_pltfrm: 
ms.topic: article
dev_langs: r-services
ms.assetid: 8093599c-8307-4237-983b-0908d0f8ab77
caps.latest.revision: "12"
author: jeannt
ms.author: jeannt
manager: cgronlund
ms.workload: On Demand
ms.openlocfilehash: 60e95f4c101a4afe2a8161ba40df7b27bd85f602
ms.sourcegitcommit: 531d0245f4b2730fad623a7aa61df1422c255edc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/01/2017
---
# <a name="using-data-from-olap-cubes-in-r"></a>Используя данные из кубов OLAP в R

**OlapR** пакет является пакет R, предоставляемые корпорацией Майкрософт для использования с машины обучения Server и SQL Server, который позволяет использовать запросы многомерных Выражений для получения данных из кубов OLAP. В этом пакете нет необходимости создавать связанные серверы или очистить плоские наборы строк; данные OLAP можно использовать непосредственно в R.

В этой статье описываются API, а также обзор для пользователей R, которые могут быть неизвестны баз данных многомерных кубов OLAP и многомерных Выражений.

> [!IMPORTANT]
> Экземпляр служб Analysis Services может поддерживать обычной многомерных кубов или табличных моделей, но экземпляр не поддерживает обоих типов моделей. Таким образом прежде чем создавать запрос к базе данных служб Analysis Services, убедитесь, что он содержит многомерных моделей.
> 
> Несмотря на то, что табличной модели можно выполнять запросы многомерных Выражений, **olapR** пакет не поддерживает соединения с экземплярами табличной модели. Если вам нужно получить данные в табличном режиме, лучшим вариантом является возможность [DirectQuery](https://docs.microsoft.com/sql/analysis-services/tabular-models/directquery-mode-ssas-tabular) модели и создание экземпляра, доступной в качестве связанного сервера в SQL Server. 

## <a name="what-is-an-olap-cube"></a>Что такое куб OLAP?

Оперативная аналитическая Обработка осуществляется сокращение для интерактивной аналитической обработки. Решения OLAP часто используются для сбора и хранения данных на важных для бизнеса со временем. Многие инструменты, панели мониторинга и визуализации используют данные OLAP для бизнес-аналитики. Дополнительные сведения см. в разделе [оперативной аналитической обработки](https://en.wikipedia.org/wiki/Online_analytical_processing).

Корпорация Майкрософт предоставляет [служб Analysis Services](https://docs.microsoft.com/sql/analysis-services/analysis-services), что позволяет проектировать, развертывать и запроса данных OLAP в виде _кубы_ или _табличных моделей_. Куб является многомерная база данных. _Измерения_ похожи аспекты данных или факторов в R: использования измерений для определения некоторых определенного подмножества данных, для составления сводки или анализа. Например время — важные измерения, поэтому большая многие решения OLAP, включая различные календари, которые определены по умолчанию для использования при выполнении среза и обобщения данных. 

Для повышения производительности базы данных OLAP часто вычисляют сводные значения (или _агрегаты_) заранее и сохраняет их для получения быстрее. На основе сводки *меры*, которые представляют формулы, которые могут быть применены для числовых данных. Использовать для определения подмножества данных измерения и меры для вычисления к этим данным. Например для вычисления продаж строку продукта за несколько кварталов минус налоги сообщить среднюю стоимость для конкретного поставщика, с начала года совокупное заработной платные и так далее используется меры.

Многомерные Выражения, сокращение для многомерных выражений — язык, используемый для выполнения запросов к кубам. Запрос многомерных Выражений обычно содержит определение данных, включающий одно или несколько измерений и по крайней мере одну меру, то, что запросы многомерных Выражений можно получить гораздо более сложные и последовательного windows, совокупное средние значения, суммы, ранги или процентилем. 

Ниже приведены некоторые термины, которые могут быть полезны при запуске построения запросов многомерных Выражений.

+ *Создание срезов* принимает подмножество куба, используя значения из одного измерения.

+ При*сегментировании* создается вложенный куб посредством указания диапазона значений для нескольких измерений.

+ *Детализация* позволяет перейти от сводки к подробностям.

+ *Подъем* позволяет перейти от подробностей к более высокому уровню статистической обработки.

+ *Свертка* дает сводные данные по данным в измерении.

+ *Сводка* поворачивает куб или выбранные данные.

## <a name="how-to-use-olapr-to-create-mdx-queries"></a>Использование olapR для создания запросов многомерных Выражений

В следующей статье содержатся подробные примеры синтаксиса для создания и выполнения запросов к кубу:

+ [Создание запросов многомерных Выражений, с помощью R](../../advanced-analytics/r/how-to-create-mdx-queries-using-olapr.md)

## <a name="olapr-api"></a>olapR API

Пакет **OlapR** поддерживает два метода создания запросов многомерных выражений:

- **Используйте построитель многомерных Выражений.** Использование функций R в пакете для создания простой запрос многомерных Выражений, путем выбора куба и затем настройки осей и срезы. Это легко создавать допустимый запрос многомерных Выражений, если нет доступа к средствам традиционный OLAP, или у вас нет глубокого знания языка многомерных Выражений.

    Не все запросы многомерных Выражений могут создаваться с помощью этого метода, так как многомерные Выражения могут быть сложными. Однако этот API поддерживает большинство наиболее распространенным и полезным операций, включая срез, поперечные срезы данных, углубленной детализации, rollup и pivot в измерениях N.

+ **Скопированные и вставленные корректный многомерных Выражений.** Создание вручную, а затем вставьте в любом запросе многомерных Выражений. Этот параметр рекомендуется использовать, если у вас есть существующие запросы многомерных Выражений, которые требуется повторно использовать или если требуется построить запрос слишком сложен для **olapR** для обработки. 

    Сборки с помощью программы любого клиента, например SSMS или Excel, MDX и затем сохранить строку, определяющую запрос многомерных Выражений. Эта строка многомерных Выражений предоставляются в качестве аргумента для *обработчик запросов SSAS* в **olapR** пакета. Функция отправляет запрос к указанному серверу служб Analysis Services и передает результаты в R, при условии, что имеются разрешения на запрос к кубу, конечно.

Примеры для построения многомерных Выражений запросов или запуске существующего запроса многомерных Выражений, см. в разделе [способ создания запросов многомерных Выражений, с помощью R](../../advanced-analytics/r/how-to-create-mdx-queries-using-olapr.md).

## <a name="known-issues"></a>Известные проблемы

В этом разделе перечислены некоторые известные проблемы и часто задаваемые вопросы о **olapR** пакета.

### <a name="tabular-models-are-not-supported"></a>Табличные модели не поддерживаются.

При подключении к экземпляру служб Analysis Services, содержащий табличной модели, `explore` функция сообщает об успешном выполнении с возвращаемым значением TRUE. Тем не менее объектам табличной модели, не совместимый тип и не может быть просмотрен.

Кроме того Если создать допустимый запрос многомерных Выражений для табличной модели (с помощью внешнего инструмента) и вставьте запрос в этот API, запрос возвращает результат NULL и не сообщает об ошибке.

Если необходимо извлечь данные из табличной модели для использования в R, рассмотрим следующие варианты.

+ Включите режим DirectQuery модели и добавьте сервер в качестве связанного сервера в SQL Server. 
+ Если табличная модель строится на Киоск реляционных данных, получения данных непосредственно из источника.

### <a name="how-to-determine-whether-an-instance-contains-tabular-or-multidimensional-models"></a>Как определить, содержит ли экземпляр табличных или многомерных моделей

Существуют фундаментальные отличия между моделями табличных и многомерных моделей, которые влияют на то, как данные будет храниться и обрабатываться. Например табличные модели хранятся в памяти и используйте индексы columnstore для выполнения вычислений очень быстро. В многомерных моделях данных хранится на диске и агрегаты заранее определенные и получать с помощью запросов многомерных Выражений.

По этой причине один экземпляр служб Analysis Services может содержать только один тип модели. См. в следующей статье Дополнительные советы о том, как различать два типа моделей:

+ [Сравнение многомерных и табличных моделей](https://docs.microsoft.com/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas)

При подключении к службам Analysis Services с помощью клиента, например SQL Server Management Studio, чтобы узнать краткий обзор модели поддерживается, по значкам для базы данных.

Также можно просмотреть свойства сервера. **Режим сервера** свойство поддерживает два значения: _многомерные_ или _табличных_.

Дополнительные сведения о том, как проверить тип сервера, с помощью свойства сервера см. в разделе [OLE DB для OLAP наборов строк схемы](https://docs.microsoft.com/sql/analysis-services/schema-rowsets/ole-db-olap/ole-db-for-olap-schema-rowsets)

### <a name="writeback-is-not-supported"></a>Обратная запись не поддерживается.

Результаты пользовательских вычислений R обратной записи куба невозможна.

Как правило даже в том случае, если куб включена для обратной записи, поддерживаются только ограниченные операции и может потребоваться дополнительная настройка. Мы рекомендуем использовать многомерные Выражения для выполнения этих операций.

+ [Измерения, доступные для записи](https://docs.microsoft.com/sql/analysis-services/multidimensional-models-olap-logical-dimension-objects/write-enabled-dimensions)
+ [Секции, доступные для записи](https://docs.microsoft.com/sql/analysis-services/multidimensional-models-olap-logical-cube-objects/partitions-write-enabled-partitions)
+ [Задать пользовательский доступ к данным ячейки](https://docs.microsoft.com/sql/analysis-services/multidimensional-models/grant-custom-access-to-cell-data-analysis-services)

## <a name="resources"></a>Ресурсы

Если вы не знакомы OLAP или запросы многомерных Выражений, см. статьи Википедии: 

+ [Кубы OLAP](https://en.wikipedia.org/wiki/OLAP_cube)
+ [Запросы многомерных Выражений](https://en.wikipedia.org/wiki/MultiDimensional_eXpressions)
