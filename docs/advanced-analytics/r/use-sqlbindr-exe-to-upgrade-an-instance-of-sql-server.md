---
title: "Обновление компонентов машины обучения в экземпляре SQL Server | Документы Microsoft"
ms.custom: 
ms.date: 07/31/2017
ms.prod: sql-server-2016
ms.reviewer: 
ms.suite: 
ms.technology:
- r-services
ms.tgt_pltfrm: 
ms.topic: article
applies_to:
- SQL Server (starting with 2016 CTP3)
ms.assetid: 4da80998-f929-4fad-a86f-87d09c1a79ef
caps.latest.revision: 15
author: jeannt
ms.author: jeannt
manager: jhubbard
ms.translationtype: MT
ms.sourcegitcommit: 876522142756bca05416a1afff3cf10467f4c7f1
ms.openlocfilehash: 2d9d7ddd95bdbcf6efca98ed94bc305924902b98
ms.contentlocale: ru-ru
ms.lasthandoff: 09/01/2017

---
# <a name="upgrade-machine-learning-components-in-a-sql-server-instance"></a>Обновление компонентов машины обучения в экземпляре SQL Server

Microsoft машины обучения сервера для Windows включает средство, которое можно использовать для обновления компонентов R, связанных с экземпляром SQL Server. Существует две версии средства: мастера и программы командной строки.

В этой статье описывается, как обновление с помощью этих средств совместимый экземпляр SQL Server, а также способы возврата экземпляр, который ранее был обновлен.

Необходимо использовать этот процесс обновления, если вы хотите получать обновления в составе обновления SQL Server. При установке нового пакета обновлений или исправлений компонентов обучения машины всегда автоматически обновляются до последней версии. Используйте этот proess только в том случае, если вы хотите обновить компоненты в управляемом темпе быстрее, чем affored выпусками SQL Server.

**Применяется к:** служб R SQL Server 2016, SQL Server 2017 г машинного обучения служб

> [!NOTE]
> На момент написания этой статьи обновления применяются только к совместимые экземпляры SQL Server 2016.  Несмотря на то, что обновление поддерживается для SQL Server 2017 г., новую версию Microsoft Server обучения машины обновления не был освобожден.

## <a name="upgrade-an-instance"></a>Обновление экземпляра

Процесс обновления называется **привязки**, так как он изменяет модель для компонентов обучения машины SQL Server для использования нового современных политика жизненного цикла поддержки. Однако обновление не изменяет модель поддержки базы данных SQL Server.

Эта система лицензирования позволяет гарантировать, что ваши специалисты по обработке и анализу данных всегда используют последнюю версию среды R. Дополнительные сведения об условиях современной политики жизненного цикла см. в статье [Support Timeline for Microsoft R Server](https://msdn.microsoft.com/microsoft-r/rserver-servicing-support) (Расписание поддержки для Microsoft R Server).

При привязке экземпляра происходит следующее:

+ Поддержка модели изменены. Вместо использования выпусками SQL Server, поддержка основана на современных новая политика жизненного цикла.
+ С каждым выпуском, в связке с версией, которая является текущей в современных новая политика жизненного цикла будут автоматически обновлены машинного обучения компонентов, связанных с экземпляром. 
+ Могут быть добавлены новые пакеты R или Python. Например, предыдущие обновления из Microsoft R Server добавлены новые пакеты R, таких как [MicrosoftML](../using-the-microsoftml-package.md), [olapR](../r/how-to-create-mdx-queries-using-olapr.md), и [sqlrutils](../r/how-to-create-a-stored-procedure-using-sqlrutils.md).
+ Экземпляр больше нельзя обновлять вручную (можно только добавлять пакеты).
+ Вы можете добавлять предварительно обученные модели.

Если впоследствии вы решите, нужно остановить обновление экземпляра в каждом выпуске, необходимо **отменить привязку** экземпляра, как описано в [в этом разделе](#bkmk_Unbind), а затем удалите машинного обучения обновления, как описано в этой статье: [запуска Microsoft R Server для Windows](https://msdn.microsoft.com/microsoft-r/rserver-install-windows). По завершении процесса будущих машинного обучения обновления на основе машины обучения Server больше не применяются к экземпляру.

### <a name="bkmk_prereqs"></a>Необходимые условия для обновления

1. Определите экземпляры, требующие обновления:
    + SQL Server 2016 с установленными службами R;
    + По крайней мере службы с пакетом обновления 1, а также CU3

2. Получить **Microsoft R Server**, загрузив отдельного установщика Windows.

    [Раздел об установке R Server 9.0.1 для Windows](https://msdn.microsoft.com/microsoft-r/rserver-install-windows#howtoinstall)

> [!TIP]
> 
> Не удается найти SqlBindR.exe? Вы, возможно, есть еще не загружены R Server. Эта программа доступна только с помощью установщика Windows для Microsoft R Server.

### <a name="bkmk_BindWizard"></a>Обновление с помощью нового мастера установки

1. Запустите новый установщик R Server на компьютере, который содержит экземпляр, который нужно обновить.
  ![Мастер установки Microsoft R Server](media/r-server-installer-01.PNG)
2. Примите лицензионное соглашение для Microsoft R Server 9.1.0 и нажмите кнопку **Далее**.
3. Примите условия лицензирования для компонентов R открытым исходным кодом и нажмите кнопку **Далее**.
4. На **Выбор папки для установки**, примите параметры по умолчанию или указать другое расположение, где будет устанавливаться библиотек R. 
5. Программа установки будет идентифицировать все локальные экземпляры, которые являются кандидатами для привязки. Экземпляры не отображаются, означает, что не найдены допустимые экземпляры. Может потребоваться в развертывании сервера или проверить, установлен ли R Services.
6. Установите флажок рядом с любой экземпляр, который требуется обновить и нажмите кнопку **Далее**.
7. Процесс может занять некоторое время.
    
    В процессе установки библиотек R, используемых SQL Server R Services для Microsoft R Server 9.1.0 заменяются с библиотеками.
    
    Панель запуска не затронутые процессом, но библиотеки в папке R_SERVICES будут удалены и будут изменены свойства для службы для использования библиотеки, в `C:\Program Files\Microsoft\R Server\R_SERVER`.

### <a name="bkmk_BindCmd"></a>Обновление с помощью командной строки

После установки Microsoft R Server можно запустить средство SqlBindR.exe из командной строки.

1. Откройте командную строку от имени администратора и перейдите в папку, содержащую sqlbindr.exe. Расположение по умолчанию`C:\Program Files\Microsoft\R Server\Setup`
2. Выполните следующую команду, чтобы просмотреть список доступных экземпляров: `SqlBindR.exe /list`.
  
   Запишите полное имя экземпляра. Например, имя экземпляра может быть `MSSQL13.MSSQLSERVER` для экземпляра по умолчанию, или около `SERVERNAME.MYNAMEDINSTANCE`.
3. Выполните команду **SqlBindR.exe** с аргументом */bind* и укажите имя обновляемого экземпляра, возвращенного на предыдущем шаге.

   Например чтобы обновить экземпляр по умолчанию, введите следующую команду:`SqlBindR.exe /bind MSSQL13.MSSQLSERVER`
4. После завершения обновления перезапустите службу панели запуска, связанную с любым измененным экземпляром.


## <a name="bkmk_Unbind"></a>Отменить или отменить привязку экземпляра

Чтобы восстановить экземпляр SQL Server для использования библиотеки исходного, устанавливаемые с SQL Server, необходимо выполнить **отменить привязку** операции. Это можно сделать путем или повторный запуск мастера установки Microsoft R Server, запустив программу SqlBindR из командной строки.

При отмене привязки завершения, удаляются с библиотеками для Microsoft R Server 9.1.0 и будут восстановлены исходные библиотек R, используемых SQL Server R Services.

Для изменения свойств запуска SQL Server для использования библиотеки R в папке по умолчанию для R_SERVICES, в `C:\Program Files\Microsoft\R Server\R_SERVER`.

### <a name="unbind-using-the-wizard"></a>Отменить привязку с помощью мастера

1. Загрузите новый установщик Microsoft R Server 9.1.0.
2. Запустите программу установки на компьютере, который имеет экземпляр, который вы хотите отменить привязку.
2. Программа установки определит локальные экземпляры, которые являются кандидатами для отмены привязки.
3. Снимите флажок рядом с экземпляр, который потребуется вернуться к исходной конфигурации SQL Server R Services.
4. Примите лицензионное соглашение для Microsoft R Server 9.1.0. Даже если вы удаляете R Server, необходимо принять лицензионное соглашение.
5. Нажмите кнопку **Готово**. Этот процесс занимает некоторое время.

### <a name="unbind-using-the-command-line"></a>Отменить привязку с помощью командной строки

1. Откройте командную строку и перейдите в папку, содержащую **sqlbindr.exe**, как описано в предыдущем разделе.

2. Выполните команду **SqlBindR.exe** с аргументом */unbind* и укажите экземпляр.

   Например следующая команда восстанавливает экземпляр по умолчанию:
   
    `SqlBindR.exe /unbind MSSQL13.MSSQLSERVER`

## <a name="known-issues"></a>Известные проблемы

В этом разделе перечислены известные проблемы, характерные для с помощью служебной программы SqlBindR.exe или обновлений с помощью программы установки Microsoft R Server, которые влияют на экземплярах SQL Server.

### <a name="restoring-packages-that-were-previously-installed"></a>Восстановление пакетов, которые были установлены

В служебной программе обновления, поставляемый с Microsoft R Server 9.0.1 программа восстановила исходных пакетов или компонентов R полностью, требование, что пользователь выполнить восстановление на экземпляре, применяются все пакеты обновления, а затем перезапустите экземпляр.

Однако последнюю версию средства обновления для Microsoft R Server 9.1.0, будет автоматически восстановить исходные компоненты R. Таким образом нет необходимости для переустановки компонентов R или повторно исправление для сервера. Тем не менее все равно необходимо установить все пакеты R, которые могли быть добавлены после первоначальной установки.

При использовании роли пакетов управления для установки и распределения пакета эту задачу гораздо проще: команды R можно использовать для синхронизации установленные пакеты в файловую систему, с помощью записи в базе данных и наоборот. Дополнительные сведения см. в разделе [Установка и управление пакеты R](installing-and-managing-r-packages.md)

### <a name="cannot-perform-upgrade-from-901"></a>Не удается выполнить обновление из 9.0.1

Если ранее был обновлен экземпляр служб SQL Server 2016 R для 9.0.1, при запуске новой программы установки Microsoft R Server 9.1.0, он будет отображать список все допустимые экземпляры и выберите ранее привязанного экземпляров по умолчанию. Если вы продолжите, ранее привязанного экземпляров свободной. В результате предыдущих 9.0.1 удаляется установки, включая все связанные пакеты, но новая версия Microsoft R Server (9.1.0) не установлен.

Чтобы избежать этого можно изменить существующие установки R Server следующим образом:
1. В панели управления откройте **Установка и удаление программ**.
2. Найдите Microsoft R Server и нажмите кнопку **изменений или изменения**.
3. При запуске программы установки выберите экземпляров, которыми вы хотите привязать к 9.1.0.

### <a name="binding-or-unbinding-leaves-multiple-temporary-folders"></a>Привязка или Отмена привязки оставляет несколько временных папок

Иногда привязки и Отмена привязки операции не удалось очистить временные папки.
Если папки с именем следующим образом, можно удалить после завершения установки.`R_SERVICES_<guid>`

> [!NOTE]
> Убедитесь, что дождитесь завершения установки. Он может занять много времени для удаления библиотеки R, связанные с одной версии, а затем добавьте новые библиотеки R. По завершении операции будут удалены временные папки.

## <a name="sqlbindrexe-command-syntax"></a>Синтаксис команды sqlbindr.exe

### <a name="usage"></a>Использование

`sqlbindr [/list] [/bind <SQL_instance_ID>] [/unbind <SQL_instance_ID>]`

### <a name="parameters"></a>Параметры

|Название|Description|
|------|------|
|*list*| Выводит список идентификаторов всех экземпляров баз данных SQL на текущем компьютере.|
|*bind*| Обновляет указанный экземпляр базы данных SQL до последней версии R Server и обеспечивает автоматическое получение экземпляром будущих обновлений для R Server.|
|*unbind*|Удаляет последнюю версию R Server из указанного экземпляра базы данных SQL и блокирует применение будущих обновлений R Server к экземпляру.|

### <a name="errors"></a>ошибки

Программа возвращает указанные ниже сообщения об ошибках.

|Ошибка|Решение|
|------|------|
|При привязке экземпляра произошла ошибка.| Не удалось привязать экземпляр. Обратитесь в службу поддержки.|
|Экземпляр уже привязан.| Вы выполнили команду *bind* , но указанный экземпляр уже привязан. Выберите другой экземпляр.|
|Экземпляр не привязан.| Вы выполнили команду *unbind* , но указанный экземпляр не привязан. Выберите другой совместимый экземпляр.|
|Недопустимый идентификатор экземпляра SQL| Возможно, вы неправильно ввели имя экземпляра. Выполните команду еще раз с аргументом *list* , чтобы просмотреть идентификаторы доступных экземпляров.|
|Экземпляры не найдены.| На этом компьютере нет экземпляра служб SQL Server R.|
|Экземпляр должен иметь совместимую версию служб SQL R (в базе данных).| Дополнительные сведения см. в разделе о требованиях совместимости в этой статье.|
|При отмене привязки экземпляра произошла ошибка.| Не удалось отменить привязку экземпляра. Обратитесь в службу поддержки.|
|Произошла непредвиденная ошибка.| Другие ошибки. Обратитесь в службу поддержки.  |
|Экземпляры SQL не найдены.| На этом компьютере нет экземпляра SQL Server. |

Дополнительные сведения см. в заметках о выпуске для Microsoft R Server:

+ [Новые возможности R Server](https://docs.microsoft.com/r-server/whats-new-in-r-server)

+ [R Server известные проблемы](https://docs.microsoft.com/r-server/resources-known-issues)

