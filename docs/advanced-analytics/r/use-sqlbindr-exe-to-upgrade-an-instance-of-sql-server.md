---
title: "Обновление компонентов машины обучения в экземпляре SQL Server | Документы Microsoft"
ms.custom: 
ms.date: 10/31/2017
ms.reviewer: 
ms.suite: sql
ms.prod: machine-learning-services
ms.prod_service: machine-learning-services
ms.component: r
ms.technology: 
ms.tgt_pltfrm: 
ms.topic: article
applies_to: SQL Server (starting with 2016 CTP3)
ms.assetid: 4da80998-f929-4fad-a86f-87d09c1a79ef
caps.latest.revision: "15"
author: jeannt
ms.author: jeannt
manager: cgronlund
ms.workload: On Demand
ms.openlocfilehash: 424e7d86a00901c22220d19e86b1bbced698d850
ms.sourcegitcommit: f486d12078a45c87b0fcf52270b904ca7b0c7fc8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2018
---
# <a name="upgrade-machine-learning-components-in-a-sql-server-instance"></a>Обновление компонентов машины обучения в экземпляре SQL Server

В этой статье объясняется процесс _привязки_, который можно использовать для обновления машинного обучения компоненты, используемые в SQL Server. Процесс привязки блокирует сервер в последовательность обновления на основе выпусков сервера Machine обучения, вместо того чтобы использовать SQL Server выпуска и расписание обновления.

> [!IMPORTANT]
> Необходимо использовать этот процесс обновления, если вы хотите получать обновления в составе обновления SQL Server. При установке нового пакета обновлений или исправлений компонентов обучения машины всегда автоматически обновляются до последней версии. Использовать только _привязки_ обработки, если вы хотите обновить компоненты в управляемом темпе быстрее, чем предоставленные выпусками SQL Server.

Если в любой момент остановить обновление по расписанию машины обучения сервера должно _отменить привязку_ экземпляра, как описано в [в этом разделе](#bkmk_Unbind)и удалите сервер машины обучения.

**Применяется к:** служб R SQL Server 2016, SQL Server 2017 г машинного обучения служб

## <a name="binding-vs-upgrading"></a>Привязки и обновление

Процесс обновления машинного обучения компонентов называется **привязки**, так как изменяется модели поддержки для компонентов обучения машины SQL Server для использования нового современных политика жизненного цикла программного обеспечения. 

Как правило переключение на новую модель лицензирования гарантирует, что специалисты по анализу данных можно всегда использовать последнюю версию R или Python. Дополнительные сведения об условиях современных политика жизненного цикла см. в разделе [временной шкалы поддержки для Microsoft R Server](https://docs.microsoft.com/machine-learning-server/resources-servicing-support).

> [!NOTE]
> Обновление не изменяет модель поддержки базы данных SQL Server и не изменяет версию SQL Server.

При привязке экземпляра происходит следующее:

+ Поддержка модели изменены. Вместо использования выпусками SQL Server, поддержка основана на современных новая политика жизненного цикла.
+ Компоненты обучения машины, связанные с экземпляром, автоматически обновляются при каждом выпуске в связке с версией, которая является текущей в современных новая политика жизненного цикла. 
+ Могут быть добавлены новые пакеты R или Python. Например, предыдущие обновления, в зависимости от Microsoft R Server 9.1 добавлен новый R-пакетов, таких как [MicrosoftML](../using-the-microsoftml-package.md), [olapR](../r/how-to-create-mdx-queries-using-olapr.md), и [sqlrutils](../r/how-to-create-a-stored-procedure-using-sqlrutils.md).
+ Экземпляр больше нельзя обновлять вручную (можно только добавлять пакеты).
+ Вы получаете возможность установить предварительно обученные модели, предоставляемой корпорацией Майкрософт.

## <a name="bkmk_prereqs"></a>Prerequisites

Начните с определения экземпляров, которые подходят для обновления. Если запустить программу установки и выберите параметр привязки, он возвращает список экземпляров, которые совместимы с обновлением.

См. в следующей таблице список поддерживаемых обновлениях и требования.

| Версия SQL Server| Поддерживаемые обновления| Примечания|
|-----|-----|------|
| SQL Server 2016| Машинного обучения сервера 9.2.1| Требуется как минимум с пакетом обновления 1, а также CU3. Службы R должно быть установлено и включено.|
| SQL Server 2017| Машинного обучения сервера 9.2.1| Службы обучения машины (в базе данных) должно быть установлено и включено. |

## <a name="bind-or-upgrade-an-instance"></a>Привязать или обновление экземпляра

Машины обучения для Windows Server включает средство, которое можно использовать для обновления машинного обучения языки и средства, связанные с экземпляром SQL Server. Существует две версии средства: мастера и программы командной строки.

Перед запуском мастера или средства командной строки, необходимо загрузить последнюю версию автономный установщик для машинного обучения компонентов.

+ [Установка машинного обучения для Windows Server 9.2.1](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-windows-install)

+ [Загрузить компоненты, необходимые для установки в автономном режиме](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-windows-offline)

### <a name="bkmk_BindWizard"></a>Обновление с помощью нового мастера установки

1. Запустите программу установки нового сервера машины обучения. Убедитесь, что для запуска программы установки на компьютере, который содержит экземпляр, который нужно обновить.

    ![Мастер настройки сервера обучения Майкрософт машины](media/mls-921-installer-start.PNG)

2. На странице **установка**Подтвердите компонента для обновления и просмотрите список совместимых экземпляров. Если экземпляры не отображаются, проверьте [необходимых компонентов](#bkmk_prereqs).

    Чтобы обновить экземпляр, установите флажок рядом с именем экземпляра. Если экземпляр не выбран, создается отдельная Установка машины Server обучения и библиотек SQL Server не изменяются.

    ![Мастер настройки сервера обучения Майкрософт машины](media/configure-the-installation.PNG)

3. На **лицензионное соглашение** выберите **я принимаю эти условия** принять условия лицензионного соглашения для компьютера сервера обучения. 

4. На последующих страницах дать согласие на дополнительные условия лицензирования для любой открытой выбранные компоненты, такие как Microsoft R Open или дистрибутив Python Anaconda.

5. На **почти правильно** страницы, запишите папку установки. По умолчанию используется папка `~\Program Files\Microsoft\ML Server`.

    Если вы хотите изменить папку установки, нажмите кнопку **Дополнительно** для возврата на первую страницу мастера. Тем не менее необходимо повторить все ранее выбора.

6. При установке компонентов в автономном режиме, могут запрошены расположение компонентов обучения необходимые машины, такие как Microsoft R Open, Python сервера и открытый Python.

Во время установки заменяются R или Python библиотек, используемый сервером SQL Server и запуска обновляется для использования новых компонентов. В результате Если экземпляр уже использовали библиотеки в папке R_SERVICES по умолчанию, после обновления будут удалены эти библиотеки и изменяются свойства для службы панели запуска, чтобы использовать библиотеки в новом расположении.

### <a name="bkmk_BindCmd"></a>Обновление с помощью командной строки

Если вы не хотите использовать мастер, можно установить сервер обучения компьютера и запустите средство SqlBindR.exe из командной строки для обновления экземпляра.

> [!TIP]
> 
> Не удается найти SqlBindR.exe? Компоненты, перечисленные выше, скорее всего, не загружен. Эта программа доступна только с помощью установщика Windows для компьютера сервера обучения.

1. Откройте командную строку от имени администратора и перейдите в папку, содержащую sqlbindr.exe. Расположение по умолчанию`C:\Program Files\Microsoft\MLServer\Setup`

2. Выполните следующую команду, чтобы просмотреть список доступных экземпляров: `SqlBindR.exe /list`.
  
   Запишите полное имя экземпляра. Например, имя экземпляра может быть `MSSQL14.MSSQLSERVER` для экземпляра по умолчанию, или около `SERVERNAME.MYNAMEDINSTANCE`.

3. Запустите **SqlBindR.exe** с */bind* аргумента и укажите имя экземпляра для обновления, с использованием имени экземпляра, который был возвращен в предыдущем шаге.

   Например чтобы обновить экземпляр по умолчанию, введите следующую команду:`SqlBindR.exe /bind MSSQL14.MSSQLSERVER`

4. После завершения обновления, перезапустите службы панели запуска, связанный с любой экземпляр, который был изменен.

## <a name="bkmk_Unbind"></a>Отменить или отменить привязку экземпляра

Если больше не хотите обновить машинного обучения компонентов с помощью сервера обучения машины, необходимо сначала _отменить привязку_ экземпляра, а затем удалите машины Server обучения.

+ Отменить привязку экземпляра

    Можно отменить привязку экземпляра и вернуться к исходной библиотеки, устанавливаемые с SQL Server, с помощью любого из этих двух методов:

    + [С помощью мастера установки](#bkmk_wizunbind) для компьютера сервера обучения и отмените выбор всех компонентов на экземпляр
    + [Используйте служебную программу SqlBindR](#bkmk_cmdunbind) с `/unbind` аргумента, за которым следует имя экземпляра.

    По завершении процесса выполняется отмена привязки будущих машинного обучения обновления на основе машины обучения Server больше не применяются к экземпляру.

+ Удаление машинного обучения сервера

    Инструкции см. в разделе [удаления машины обучения сервера для Windows](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-windows-uninstall). 

### <a name="bkmk_wizunbind"></a>Отменить привязку с помощью мастера

1. Найдите файл установщика для компьютера сервера обучения. Если вы удалили установщик, может потребоваться загрузить его снова, или скопируйте его с другого компьютера.
2. Убедитесь, что для запуска программы установки на компьютере, который имеет экземпляр, который вы хотите отменить привязку.
2. Программа установки определяет локальные экземпляры, которые являются кандидатами для отмены привязки.
3. Снимите флажок рядом с экземпляр, который потребуется вернуться к исходной конфигурации.
4. Примите лицензионное соглашение. Необходимо указать свое согласие с условиями лицензионного соглашения даже при установке.
5. Нажмите кнопку **Готово**. Этот процесс занимает некоторое время.

### <a name="bkmk_cmdunbind"></a>Отменить привязку с помощью командной строки

1. Откройте командную строку и перейдите в папку, содержащую **sqlbindr.exe**, как описано в предыдущем разделе.

2. Выполните команду **SqlBindR.exe** с аргументом */unbind* и укажите экземпляр.

   Например следующая команда восстанавливает экземпляр по умолчанию:
   
    `SqlBindR.exe /unbind MSSQL14.MSSQLSERVER`

## <a name="known-issues"></a>Известные проблемы

В этом разделе перечислены известные проблемы, характерные для с помощью служебной программы SqlBindR.exe или обновления машины обучения Server, которые могут влиять на экземпляры SQL Server.

### <a name="restoring-packages-that-were-previously-installed"></a>Восстановление пакетов, которые были установлены

В служебной программе обновления, поставляемый с Microsoft R Server 9.0.1 программа восстановила исходных пакетов или компонентов R полностью, требование, что пользователь выполнить восстановление на экземпляре, применяются все пакеты обновления, а затем перезапустите экземпляр.

Однако последнюю версию обновления программа автоматически восстанавливает исходные компоненты R. Таким образом нет необходимости для переустановки компонентов R или повторно исправление для сервера. Тем не менее необходимо установить все пакеты R, которые могли быть добавлены после первоначальной установки.

При использовании роли пакетов управления для установки и распределения пакета эту задачу гораздо проще: команды R можно использовать для синхронизации установленные пакеты в файловую систему, с помощью записи в базе данных и наоборот. Дополнительные сведения см. в разделе [R пакета управления для SQL Server](r-package-management-for-sql-server-r-services.md).

### <a name="problems-with-multiple-upgrades-from-sql-server"></a>Проблемы с помощью нескольких обновлений из SQL Server

Если ранее был обновлен экземпляр служб SQL Server 2016 R для 9.0.1, при запуске новой программы установки Microsoft R Server 9.1.0, он отображает список всех экземпляров допустимым, а затем по умолчанию выбирает ранее привязанного экземпляров. Если вы продолжите, ранее привязанного экземпляров свободной. В результате предыдущих 9.0.1 удаляется установки, включая все связанные пакеты, но новая версия Microsoft R Server (9.1.0) не установлен.

Чтобы избежать этого можно изменить существующие установки R Server следующим образом:
1. В панели управления откройте **Установка и удаление программ**.
2. Найдите Microsoft R Server и нажмите кнопку **изменений или изменения**.
3. При запуске программы установки выберите экземпляров, которыми вы хотите привязать к 9.1.0.

### <a name="binding-or-unbinding-leaves-multiple-temporary-folders"></a>Привязка или Отмена привязки оставляет несколько временных папок

Иногда привязки и Отмена привязки операции не удалось очистить временные папки.
Если папки с именем следующим образом, можно удалить после завершения установки.`R_SERVICES_<guid>`

> [!NOTE]
> Убедитесь, что дождитесь завершения установки. Он может занять много времени для удаления библиотеки R, связанные с одной версии, а затем добавьте новые библиотеки R. По завершении операции будут удалены временные папки.

## <a name="sqlbindrexe-command-syntax"></a>Синтаксис команды sqlbindr.exe

### <a name="usage"></a>Использование

`sqlbindr [/list] [/bind <SQL_instance_ID>] [/unbind <SQL_instance_ID>]`

### <a name="parameters"></a>Параметры

|Имя|Description|
|------|------|
|*list*| Выводит список идентификаторов всех экземпляров баз данных SQL на текущем компьютере.|
|*bind*| Обновляет указанный экземпляр базы данных SQL до последней версии R Server и обеспечивает автоматическое получение экземпляром будущих обновлений для R Server.|
|*unbind*|Удаляет последнюю версию R Server из указанного экземпляра базы данных SQL и блокирует применение будущих обновлений R Server к экземпляру.|

### <a name="errors"></a>ошибки

Программа возвращает указанные ниже сообщения об ошибках.

|Ошибка|Решение|
|------|------|
|При привязке экземпляра произошла ошибка.| Не удалось привязать экземпляр. Обратитесь в службу поддержки.|
|Экземпляр уже привязан.| Вы выполнили команду *bind* , но указанный экземпляр уже привязан. Выберите другой экземпляр.|
|Экземпляр не привязан.| Вы выполнили команду *unbind* , но указанный экземпляр не привязан. Выберите другой совместимый экземпляр.|
|Недопустимый идентификатор экземпляра SQL| Возможно, вы неправильно ввели имя экземпляра. Выполните команду еще раз с аргументом *list* , чтобы просмотреть идентификаторы доступных экземпляров.|
|Экземпляры не найдены.| На этом компьютере нет экземпляра служб SQL Server R.|
|Экземпляр должен иметь совместимую версию служб SQL R (в базе данных).| Дополнительные сведения см. в разделе о требованиях совместимости в этой статье.|
|При отмене привязки экземпляра произошла ошибка.| Не удалось отменить привязку экземпляра. Обратитесь в службу поддержки.|
|Произошла непредвиденная ошибка.| Другие ошибки. Обратитесь в службу поддержки.  |
|Экземпляры SQL не найдены.| На этом компьютере нет экземпляра SQL Server. |

Дополнительные сведения см. в заметках о выпуске для Microsoft R Server:

+ [Известные проблемы в компьютере сервер обучения](https://docs.microsoft.com/machine-learning-server/resources-known-issues)

+ [Объявления о выходе компонентов из предыдущего выпуска сервера R](https://docs.microsoft.com/r-server/whats-new-in-r-server)

+ [Не рекомендуется, больше не поддерживаются и измененные компоненты](https://docs.microsoft.com/machine-learning-server/resources-deprecated-features)
