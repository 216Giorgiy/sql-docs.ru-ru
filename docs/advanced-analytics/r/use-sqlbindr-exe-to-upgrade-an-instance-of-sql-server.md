---
title: Обновление компонентов R и Python в экземплярах SQL Server R (Machine Services обучения) | Документы Microsoft
description: Обновление R и Python в служб R SQL Server 2016 или SQL Server 2017 г машины обучения с помощью sqlbindr.exe выполнить привязку сервера машины обучения.
ms.prod: sql
ms.technology: machine-learning
ms.date: 05/05/2018
ms.topic: conceptual
author: HeidiSteen
ms.author: heidist
manager: cgronlun
ms.openlocfilehash: 140d84717f7343f52b1c553964cce8f0c40e2c7c
ms.sourcegitcommit: 1aedef909f91dc88dc741748f36eabce3a04b2b1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/08/2018
---
# <a name="upgrade-machine-learning-r-and-python-components-in-sql-server-instances"></a>Обновление компонентов машины обучения (R и Python) в экземплярах SQL Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

Интеграция R и Python в SQL Server включает в себя пакетов с открытым исходным кодом и частные Microsoft. В списке стандартных обслуживания SQL Server, пакеты R и Python обновляются в соответствии со цикла выпуска SQL Server, с помощью исправления для существующих пакетов в текущей версии. 

Большинство специалистов по анализу данных, привыкшему работать с более новые пакеты, как они станут доступны. Для служб SQL Server 2017 г машины обучения (в базе данных) и служб R SQL Server 2016 (в базе данных), можно получить более поздние версии R и Python, изменив *привязки* обслуживания SQL Server для [Microsoft Компьютер сервера обучения](https://docs.microsoft.com/en-us/machine-learning-server/index) и [политика современных жизненного цикла поддержки](https://support.microsoft.com/help/30881/modern-lifecycle-policy).

Привязки не изменяет основы установки: интеграция R и Python по-прежнему является частью экземпляр ядра СУБД, лицензирования не изменяется (не дополнительные затраты, связанные с привязкой) и по-прежнему содержать политики поддержки SQL Server для базы данных модуль. Но перепривязки изменить как обслуживаются пакеты R и Python. В оставшейся части этой статьи объясняется механизм привязки и принципов его работы для каждой версии SQL Server.

> [!NOTE]
> Привязка применима ко только экземпляры (в базе данных). Привязка не относится к установке (автономный).

**SQL Server 2017**

Для служб SQL Server 2017 г машины обучения считает привязки только в том случае, если Microsoft машины обучения сервер начинает предлагать дополнительные пакеты или более новых версий над теми, которые уже есть.

**SQL Server 2016**

Для клиентов служб R SQL Server 2016, существует два пути для получения новых и обновленных пакетов R. Один из них требует обновления до 2017 г. SQL Server; Второе привязку к серверу обучения Майкрософт машины.

Обновление до SQL Server 2017 г. позволяет пакеты R в версиях, включенные в этот выпуск, а также компонентов Python. Кроме того привязка получает вы обновленные пакеты R, которые дополнительно могут обновляться с каждым новым выпуском основной и дополнительный обучения машины Microsoft Server. Привязки не предоставляет поддержку Python, которая реализована 2017 г. SQL Server. 

**Обновление компонентов, доступных через сервер обучения машины Microsoft**

Следующая таблица представляет собой версию, отображается версия, установленная с SQL Server с помощью возможности обновления при привязке обучения сервера машины (ранее — R Server перед добавлением поддержки Python, начиная с MLS 9.2.1). 

Обратите внимание, что привязка не обеспечивает самые последние версии R или Anaconda. При привязке к серверу обучения машины Microsoft можно получить версию R или Python, устанавливаются с помощью программы установки, который может быть или не быть доступны в Интернете последней версии.

[**SQL Server 2016 R Services**](../install/sql-r-services-windows-install.md)

Компонент |Первоначальный выпуск | R Server 9.0.1 | R Server 9.1 | MLS 9.2.1 | MLS 9.3 |
----------|----------------|----------------|--------------|---------|-------|
Microsoft R Open (MRO) через R | R 3.2.2     | 3.3.2 R   |R 3.3.3.   | 3.4.1 R  | R 3.4.3 |
[RevoScaleR](https://docs.microsoft.com/achine-learning-server/r-reference/revoscaler/revoscaler) | 9.0 | 9.0.1 |  9.1 |  9.2.1 |  9.3 |
[MicrosoftML](https://docs.microsoft.com/machine-learning-server/r-reference/microsoftml/microsoftml-package)| n.a. | 9.0.1 |  9.1 |  9.2.1 |  9.3 |
[предварительно обученные модели](https://docs.microsoft.com/machine-learning-server/install/microsoftml-install-pretrained-models)| n.a. | 9.0.1 |  9.1 |  9.2.1 |  9.3 |
[sqlrutils](https://docs.microsoft.com/machine-learning-server/r-reference/sqlrutils/sqlrutils)| n.a. | 1.0 |  1.0 |  1.0 |  1.0 |
[OlapR](https://docs.microsoft.com/machine-learning-server/r-reference/olapr/olapr) | n.a. | 1.0 |  1.0 |  1.0 |  1.0 |


[**SQL Server 2017 г машинного обучения служб**](../install/sql-machine-learning-services-windows-install.md)

Компонент |Первоначальный выпуск | MLS 9.3 | | | |
----------|----------------|---------|-|-|-|-|
Microsoft R Open (MRO) через R | 3.4.1 R | R 3.4.3 | | | |
[RevoScaleR](https://docs.microsoft.com/machine-learning-server/r-reference/revoscaler/revoscaler) |   9.3 |  9.3 | | | |
[MicrosoftML](https://docs.microsoft.com/machine-learning-server/r-reference/microsoftml/microsoftml-package) | 9.3  | 9.3| | | |
[sqlrutils](https://docs.microsoft.com/machine-learning-server/r-reference/sqlrutils/sqlrutils)| 1.0 |  1.0 | | | |
[OlapR](https://docs.microsoft.com/machine-learning-server/r-reference/olapr/olapr) | 1.0 |  1.0 | | | |
Anaconda 4.2 через Python 3.5  | 4.2/3.5.2 | 4.2/3.5.2 | | | |
[revoscalepy](https://docs.microsoft.com/machine-learning-server/python-reference/revoscalepy/revoscalepy-package) | 9.3  | 9.3| | | |
 [microsoftml](https://docs.microsoft.com/machine-learning-server/python-reference/microsoftml/microsoftml-package) | 9.3  | 9.3| | | |
[предварительно обученные модели](https://docs.microsoft.com/machine-learning-server/install/microsoftml-install-pretrained-models) | 9.3 | 9.3| | | |

## <a name="how-component-upgrade-works"></a>Как работает обновление компонента

Выполняется обновление компонента с помощью *привязки* экземпляра служб SQL Server 2016 R (или 2017 г машины обучения экземпляр служб SQL Server) сервера обучения Майкрософт машины. [Microsoft Server обучения машины](https://docs.microsoft.com/machine-learning-server/index) продукт с локального сервера разделения из SQL Server, но с тем же интерпретаторов и пакетов. Привязки операции замены out механизм обновления службы SQL Server, чтобы можно было использовать R и Python пакеты поставляются с Microsoft Server обучения машины, которые часто оказываются более новая, чем предоставляемые обслуживания SQL Server. Поддержка коммутации политики привлекательным вариантом для команд обработки и анализа данных, которым требуется новое поколение R и модули Python для их решения. 

Привязка выполняется путем [MLS установщика](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-windows-install). Программа установки обновляет определенные пакеты R и Python, но не экземпляр SQL Server в базе данных заменяются изолированной, установка отключенного сервера.

+ Без привязки, пакеты R и Python установлены исправления для исправления ошибок, при установке пакета обновления SQL Server или накопительного пакета обновления (CU). 
+ С использованием привязки, более новые версии пакета может применяться к экземпляру, независимо от расписания CU выпуске в разделе [современных политика жизненного цикла](https://support.microsoft.com/help/30881/modern-lifecycle-policy) и выпусках Microsoft Server обучения машины. Политика поддержки жизненного цикла современных предлагает более частого обновления за время существования короче, один год. 

Привязка применима ко только функции R и Python. А именно, пакеты с открытым исходным кодом для компонентов R и Python (Microsoft R Open, Anaconda) и собственные пакеты RevoScaleR, revoscalepy и т. д. Привязка не изменяет модель поддержки для экземпляра компонента database engine и не изменяет версию SQL Server.

Привязка — отменить нельзя. Можно вернуться к SQL Server, обслуживание по [Отмена привязки экземпляра](#bkmk_Unbind) и reparing ваш экземпляр ядра СУБД SQL Server.

Суммирование, привязки необходимо следующим образом:

+ Начать с существующего, настроенного установки служб R SQL Server 2016 (или службы SQL Server 2017 г машины обучения).
+ Определите, какая версия Microsoft Server обучения машины обновленные компоненты, которые вы хотите использовать.
+ Загрузите и запустите программу установки для этой версии. Программа установки обнаружит существующий экземпляр, добавляет параметр привязки и возвращает список совместимых экземпляров.
+ Выберите экземпляр, который вы хотите выполнить привязку, а затем завершить программу установки, чтобы выполнить привязку.

С точки зрения работы пользователя технология и при работе с ним не изменяется. Единственным различием является наличие более новой версии и возможно, дополнительные пакеты изначально доступна посредством SQL Server (например, MicrosoftML для клиентов служб R SQL Server 2016).

## <a name="bkmk_BindWizard"></a>Обновление с помощью программы установки

Microsoft машины обучения программа установки обнаружит существующие функциональные возможности и версии SQL Server и вызывает служебная программа SqlBindR.exe изменение привязки. На внутреннем уровне SqlBindR связанных данных для программы установки и косвенно используемая. Позднее можно выполнить SqlBindR непосредственно из командной строки для использования определенных параметров.

1. Проверьте версию R и RevoScaleR, чтобы убедиться, что ниже, чем вы планируете заменить их с существующие версии. Дополнительные сведения см. в разделе [данные пакетов R, получения и Python](determine-which-packages-are-installed-on-sql-server.md).

1. [Загрузка сервера обучения Майкрософт машины](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-windows-install#download-machine-learning-server-installer) на компьютер, который имеет экземпляр, которую требуется обновить. 

1. Распакуйте папку и запустите программу установки.

    ![Мастер настройки сервера обучения Майкрософт машины](media/mls-921-installer-start.PNG)

1. На **установка**Подтвердите компонента для обновления и просмотрите список совместимых экземпляров. 

   В левой части экрана выберите все возможности, которые вы хотите сохранить или обновить. Не удается обновить некоторые компоненты и не влияет на другие. Пустой флажок указывает, что требуется, чтобы эта функция удалена при условии, что он уже установлен. На снимке экрана установлен экземпляр служб SQL Server 2017 г машины обучения (MSSQL14) с помощью R и Python. Эта конфигурация поддерживается, поскольку 2017 г. SQL Server имеет R и Python.

   В правой части окна установите флажок рядом с именем экземпляра. Если в списке нет экземпляров, имеется недопустимое сочетание. Если экземпляр не выбран, создается новый автономную установку сервера Machine обучения и библиотек SQL Server не изменяются.

    ![Мастер настройки сервера обучения Майкрософт машины](media/configure-the-installation.PNG)

1. На **лицензионное соглашение** выберите **я принимаю эти условия** принять условия лицензионного соглашения для компьютера сервера обучения. 

1. На последующих страницах дать согласие на дополнительные условия лицензирования для любой открытая выбранные компоненты, такие как Microsoft R Open или дистрибутив Python Anaconda.

1. На **почти правильно** страницы, запишите папку установки. Папка по умолчанию — \Program Files\Microsoft\ML сервера.

    Если вы хотите изменить папку установки, нажмите кнопку **Дополнительно** для возврата на первую страницу мастера. Тем не менее необходимо повторить все ранее выбора.

1. При наличии [установку компонентов в автономном режиме](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-windows-offline), вам могут быть запрошены расположение компонентов обучения необходимые машины, такие как Microsoft R Open, Python сервера и открытый Python.

Во время установки заменяются R или Python библиотек, используемый сервером SQL Server и запуска обновляется для использования новых компонентов. В результате Если экземпляр уже использовали библиотеки в папке R_SERVICES по умолчанию, после обновления будут удалены эти библиотеки и изменяются свойства для службы панели запуска, чтобы использовать библиотеки в новом расположении.

Привязка влияет на содержимое этих папок: C:\Program Files\Microsoft SQL Server\MSSQL13. MSSQLSERVER\R_SERVICES\library заменяется содержимым C:\Program Files\Microsoft\ML Server\R_SERVER. Установка сервера Microsoft Machine обучения создаются вторую папку и ее содержимое. 

## <a name="confirm-binding"></a>Подтвердите привязку

Повторная проверка версии R и RevoScaleR, чтобы убедиться, что у вас есть более новых версий. Дополнительные сведения см. в разделе [данные пакетов R, получения и Python](determine-which-packages-are-installed-on-sql-server.md). Клиенты служб R SQL Server 2016 также должна быть MicrosoftML.

## <a name="bkmk_BindCmd"></a>Операции командной строки

После запуска сервера обучения Майкрософт Machine командной строки служебная программа SqlBindR.exe становится доступным, можно использовать для дальнейшей операции связывания. Например если вы решите отменить привязку, можно либо повторно запустите программу установки или программы командной строки. Кроме того это средство можно использовать для проверки для экземпляра совместимости и доступности.

> [!TIP]
> Не удается найти SqlBindR? Возможно, не выполнения программы установки. SqlBindR доступна только после выполнения настройки сервера машины обучения.

1. Откройте командную строку от имени администратора и перейдите в папку, содержащую sqlbindr.exe. Расположение по умолчанию — C:\Program Files\Microsoft\MLServer\Setup

2. Выполните следующую команду, чтобы просмотреть список доступных экземпляров: `SqlBindR.exe /list`.
  
   Запишите полное имя экземпляра. Например имя экземпляра может быть MSSQL14. MSSQLSERVER для экземпляра по умолчанию или аналогичное имя сервера. МОЙИМЕНОВАННЫЙЭКЗЕМПЛЯР.

3. Запустите **SqlBindR.exe** с */bind* аргумента и укажите имя экземпляра для обновления, с использованием имени экземпляра, который был возвращен в предыдущем шаге.

   Например чтобы обновить экземпляр по умолчанию, введите следующую команду:  `SqlBindR.exe /bind MSSQL14.MSSQLSERVER`

4. После завершения обновления, перезапустите службы панели запуска, связанный с любой экземпляр, который был изменен.

## <a name="bkmk_Unbind"></a>Отменить или отменить привязку экземпляра

Можно восстановить привязанный экземпляр первоначальной установки компонентов R и Python, заданные в программе установки SQL Server. Состоит из трех частей, вернитесь к обслуживания SQL Server.

+ [Шаг 1: Отменить привязку к Microsoft машинного обучения сервера](#step-1-unbind)
+ [Шаг 2: Восстановите исходное состояние экземпляра](#step-2-restore)
+ [Шаг 3: Переустановите все пакеты, добавленные в установку](#step-3-reinstall-packages)

<a name="step-1-unbind"></a> 

### <a name="step-1-unbind"></a>Шаг 1: отменить привязку

Имеется два параметры для отката привязки: повторно запустите программу установки или программы командной строки SqlBindR.

#### <a name="bkmk_wizunbind"></a> Отменить привязку с помощью программы установки

1. Найдите файл установщика для компьютера сервера обучения. Если вы удалили установщик, может потребоваться загрузить его снова, или скопируйте его с другого компьютера.
2. Убедитесь, что для запуска программы установки на компьютере, который имеет экземпляр, который вы хотите отменить привязку.
2. Программа установки определяет локальные экземпляры, которые являются кандидатами для отмены привязки.
3. Снимите флажок рядом с экземпляр, который потребуется вернуться к исходной конфигурации.
4. Примите лицензионное соглашение. Необходимо указать свое согласие с условиями лицензионного соглашения даже при установке.
5. Нажмите кнопку **Готово**. Этот процесс занимает некоторое время.

#### <a name="bkmk_cmdunbind"></a> Отменить привязку с помощью командной строки

1. Откройте командную строку и перейдите в папку, содержащую **sqlbindr.exe**, как описано в предыдущем разделе.

2. Выполните команду **SqlBindR.exe** с аргументом */unbind* и укажите экземпляр.

   Например следующая команда восстанавливает экземпляр по умолчанию:
   
    `SqlBindR.exe /unbind MSSQL14.MSSQLSERVER`

<a name="step-2-restore"></a> 

###  <a name="step-2-repair-the-sql-server-instance"></a>Шаг 2: Исправьте экземпляр SQL Server

Запустите программу установки SQL Server для восстановления на экземпляре компонента database engine, наличие таких функций R и Python. Обновления, сохраняются, но если вы пропустили серверы SQL Server, обслуживание обновлений для пакетов R и Python, этот шаг применяется обновлений.

Кроме того это дополнительную работу, но может также полностью удалить и переустановить экземпляра компонента database engine, а затем примените все обновления службы.

<a name="step-3-reinstall-packages"></a> 

### <a name="step-3-add-any-third-party-packages"></a>Шаг 3: Добавление любых пакетов сторонних разработчиков

Возможно, вы добавили другие пакеты с открытым исходным кодом или сторонние библиотеки пакета. Поскольку Отмена привязки переключается расположение библиотеки пакета по умолчанию, необходимо переустановить пакеты для библиотеки, в которой теперь используется R и Python. Дополнительные сведения см. в разделе [пакетов по умолчанию](installing-and-managing-r-packages.md), [установить новые пакеты R](install-additional-r-packages-on-sql-server.md), и [установить новые пакеты Python](../python/install-additional-python-packages-on-sql-server.md).

## <a name="known-issues"></a>Известные проблемы

В этом разделе перечислены известные проблемы, характерные для с помощью служебной программы SqlBindR.exe или обновления машины обучения Server, которые могут влиять на экземпляры SQL Server.

### <a name="restoring-packages-that-were-previously-installed"></a>Восстановление пакетов, которые были установлены

При обновлении до версии Microsoft R Server 9.0.1 версии SqlBindR.exe для этой версии не удалось восстановить исходных пакетов или компонентов R полностью, требование, что пользователь выполнить восстановление SQL Server на экземпляре, применяются все пакеты обновления, а затем перезапустите экземпляр.

Более поздняя версия SqlBindR автоматически восстановить исходные компоненты R, устраняя необходимость в повторной установки компонентов R или повторно исправление для сервера. Тем не менее необходимо установить все обновления пакета R, которые могли быть добавлены после первоначальной установки.

При использовании роли пакетов управления для установки и распределения пакета эту задачу гораздо проще: команды R можно использовать для синхронизации установленные пакеты в файловую систему, с помощью записи в базе данных и наоборот. Дополнительные сведения см. в разделе [R пакета управления для SQL Server](r-package-management-for-sql-server-r-services.md).

### <a name="problems-with-multiple-upgrades-from-sql-server"></a>Проблемы с помощью нескольких обновлений из SQL Server

Если ранее был обновлен экземпляр служб SQL Server 2016 R для 9.0.1, при запуске новой программы установки Microsoft R Server 9.1.0, он отображает список всех экземпляров допустимым, а затем по умолчанию выбирает ранее привязанного экземпляров. Если вы продолжите, ранее привязанного экземпляров свободной. В результате предыдущих 9.0.1 удаляется установки, включая все связанные пакеты, но новая версия Microsoft R Server (9.1.0) не установлен.

Чтобы избежать этого можно изменить существующие установки R Server следующим образом:
1. В панели управления откройте **Установка и удаление программ**.
2. Найдите Microsoft R Server и нажмите кнопку **изменений или изменения**.
3. При запуске программы установки выберите экземпляров, которыми вы хотите привязать к 9.1.0.

Microsoft Server обучения машины 9.2.1 и 9.3 нет этой проблемы.

### <a name="binding-or-unbinding-leaves-multiple-temporary-folders"></a>Привязка или Отмена привязки оставляет несколько временных папок

Иногда привязки и Отмена привязки операции не удалось очистить временные папки.
Если папки с именем следующим образом, можно удалить его после завершения установки: R_SERVICES_<guid>

> [!NOTE]
> Убедитесь, что дождитесь завершения установки. Он может занять много времени для удаления библиотеки R, связанные с одной версии, а затем добавьте новые библиотеки R. По завершении операции будут удалены временные папки.

## <a name="sqlbindrexe-command-syntax"></a>Синтаксис команды SqlBindR.exe

### <a name="usage"></a>Использование

`sqlbindr [/list] [/bind <SQL_instance_ID>] [/unbind <SQL_instance_ID>]`

### <a name="parameters"></a>Параметры

|Название|Описание|
|------|------|
|*list*| Выводит список идентификаторов всех экземпляров баз данных SQL на текущем компьютере.|
|*bind*| Обновляет указанный экземпляр базы данных SQL до последней версии R Server и обеспечивает автоматическое получение экземпляром будущих обновлений для R Server.|
|*unbind*|Удаляет последнюю версию R Server из указанного экземпляра базы данных SQL и блокирует применение будущих обновлений R Server к экземпляру.|

### <a name="errors"></a>ошибки

Программа возвращает указанные ниже сообщения об ошибках.

|Ошибка|Решение|
|------|------|
|При привязке экземпляра произошла ошибка.| Не удалось привязать экземпляр. Обратитесь в службу поддержки.|
|Экземпляр уже привязан.| Вы выполнили команду *bind* , но указанный экземпляр уже привязан. Выберите другой экземпляр.|
|Экземпляр не привязан.| Вы выполнили команду *unbind* , но указанный экземпляр не привязан. Выберите другой совместимый экземпляр.|
|Недопустимый идентификатор экземпляра SQL| Возможно, вы неправильно ввели имя экземпляра. Выполните команду еще раз с аргументом *list* , чтобы просмотреть идентификаторы доступных экземпляров.|
|Экземпляры не найдены.| На этом компьютере нет экземпляра служб SQL Server R.|
|Экземпляр должен иметь совместимую версию служб SQL R (в базе данных).| Дополнительные сведения см. в разделе о требованиях совместимости в этой статье.|
|При отмене привязки экземпляра произошла ошибка.| Не удалось отменить привязку экземпляра. Обратитесь в службу поддержки.|
|Произошла непредвиденная ошибка.| Другие ошибки. Обратитесь в службу поддержки.  |
|Экземпляры SQL не найдены.| На этом компьютере нет экземпляра SQL Server. |

## <a name="see-also"></a>См. также:

+ [Установка компьютера обучения для Windows Server (подключенную к Интернету)](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-windows-install)
+ [Установка компьютера обучения для Windows Server (автономный)](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-windows-offline)
+ [Известные проблемы в компьютере сервер обучения](https://docs.microsoft.com/machine-learning-server/resources-known-issues)
+ [Объявления о выходе компонентов из предыдущего выпуска сервера R](https://docs.microsoft.com/r-server/whats-new-in-r-server)
+ [Не рекомендуется, больше не поддерживаются и измененные компоненты](https://docs.microsoft.com/machine-learning-server/resources-deprecated-features)