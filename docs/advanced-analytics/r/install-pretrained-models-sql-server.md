---
title: Установка моделей предварительно обученной машинного обучения в SQL Server | Документы Microsoft
ms.prod: sql
ms.technology: machine-learning
ms.date: 05/31/2018
ms.topic: conceptual
author: HeidiSteen
ms.author: heidist
manager: cgronlun
ms.openlocfilehash: e3abc1b1581216bb0207fbba2d857993b947afae
ms.sourcegitcommit: 2d93cd115f52bf3eff3069f28ea866232b4f9f9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34707582"
---
# <a name="install-pre-trained-machine-learning-models-on-sql-server"></a>Установить предварительно обученной машинного обучения моделей, основанных на SQL Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

В этой статье описывает, как добавление предварительно обученной моделей машинного обучения для featurization мнений анализа и изображения (в базе данных) на экземпляре SQL Server, уже имеет служб R или установлены службы SQL Server машины обучения. 

Для клиентов, которым требуется выполнять анализ мнений или изображения featurization, но нет ресурсов для получения больших наборов данных или обучения сложной модели существует предварительно обученной модели. Team Server обучения машины создается и обучения этих моделей, которые помогут приступить к работе над text и image, для обеспечения эффективного. Дополнительные сведения см. в разделе [ресурсов](#bkmk_resources) этой статьи.

Пример использования предварительно обученной модели с данными SQL Server, см. в записи командой SQL Server машинного обучения: [анализ мнений с Python в службах SQL Server машины обучения](https://blogs.msdn.microsoft.com/sqlserverstorageengine/2017/11/01/sentiment-analysis-with-python-in-sql-server-machine-learning-services/)

## <a name="pre-trained-model-availability"></a>Доступность предварительно обученной модели

Предварительно обученной модели устанавливаются с помощью установочного носителя Microsoft Server обучения машины (или Microsoft R Server, при добавлении модели к установке SQL Server 2016). Бесплатный выпуск Developer edition можно использовать для установки моделей. Нет без дополнительных затрат, связанные с установкой модели. 

Предварительно обученной модели работают с следующих продуктов и языков. Программа установки обнаруживает библиотеки интеграции, MicrosoftML или microsoftml языка и затем вставляет предварительно обученной модели в соответствующие библиотеки. После завершения установки модели доступ к модели через функции библиотеки.

+ SQL Server 2016 R Services (в базе данных) - R, только с [MicrosoftML библиотеки](https://docs.microsoft.com/machine-learning-server/r-reference/microsoftml/microsoftml-package)
+ SQL Server 2016 R Server (изолированный) - R, только с [MicrosoftML библиотеки](https://docs.microsoft.com/machine-learning-server/r-reference/microsoftml/microsoftml-package)
+ Службы SQL Server 2017 г машины обучения (в базе данных) - R с [библиотеки MicrosoftML](https://docs.microsoft.com/machine-learning-server/r-reference/microsoftml/microsoftml-package), Python с [microsoftml библиотеки](https://docs.microsoft.com/machine-learning-server/python-reference/microsoftml/microsoftml-package)
+ Сервера SQL Server 2017 г машины обучения (автономный) - R с [библиотеки MicrosoftML](https://docs.microsoft.com/machine-learning-server/r-reference/microsoftml/microsoftml-package), Python с [microsoftml библиотеки](https://docs.microsoft.com/machine-learning-server/python-reference/microsoftml/microsoftml-package)

В процессе установки, немного отличается в зависимости от используемой версии SQL Server. В следующих разделах инструкции для каждой версии.

> [!NOTE]
> Не является возможность считывать или изменять предварительно обученной модели. Они будут сжаты, использование собственного формата для повышения производительности.

## <a name="obtain-files-for-an-offline-installation"></a>Получить файлы для автономной установки

Чтобы установить предварительно обученной модели на сервере, который не имеет доступа к Интернету, необходимо заранее загрузить соответствующих установщиков и скопируйте установщик в локальную папку на сервере. 

Просмотреть эту страницу для ссылки для загрузки для всех установщиков R Server и сервера Machine обучения: [автономную установку](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-windows-offline)

## <a name="install-pre-trained-models-on-sql-server-2016-r-services"></a>Установить предварительно обученной модели на SQL Server 2016 R Services

С SQL Server 2016 можно установить и использовать предварительно обученной модели R, только при обновлении машинного обучения компонентов в процессе, называемом **привязки**. 

Это делается путем выполнения отдельного установщика Windows для Microsoft R Server или обучения машины на компьютере, имеющих установку служб R SQL Server 2016 и выбрав экземпляр или экземпляры, чтобы **привязки**. Привязка экземпляр означает, что политика поддержки связанный с экземпляром изменилось, чтобы разрешить более частые обновления R. 

1. Запустите отдельного установщика Windows для любого [R Server](https://docs.microsoft.com/machine-learning-server/rebranding-microsoft-r-server) или [машины обучения Server](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-windows-install).

2. Выберите экземпляр для обновления и выберите вариант, чтобы получить предварительно обученной модели.

    Дополнительные сведения см. в разделе [обновление компонентов машины обучения, используемый сервером SQL Server](use-sqlbindr-exe-to-upgrade-an-instance-of-sql-server.md).

    Если ранее вы уже выполнили привязки для обновления компонентов R и просто хотите добавить предварительно обученной модели, оставьте все ранее выбранные варианты **как**и выберите параметр предварительно обученной модели. 
    
    Не отменяйте Выбор все выбранные ранее параметры; Если это сделать, программа установки удаляет компоненты.

3. Рекомендуется принять параметры по умолчанию для расположений модели.

4. Примите все остальные, включая лицензионных соглашений.

После привязки версии R и библиотеками, связанными с экземпляром заменяются более новые версии в R или сервер машины обучения. 

С SQL Server 2016 необходимо выполнить некоторые дополнительные действия, чтобы зарегистрировать моделей в библиотеке экземпляр SQL Server 2016. Повторите эти шаги для каждого экземпляра, где установлен предварительно обученной модели.

1. Откройте командную строку Windows **администратор**.

2. Перейдите в папку установки начальной загрузки для SQL Server, который также содержит установщик Microsoft R. Папка в экземпляре по умолчанию SQL Server 2016 будет:
    
    `C:\Program Files\Microsoft SQL Server\130\Setup Bootstrap\SQL2017\x64\`

3. Запустите `RSetup.exe` и указать компонент для установки, версии и к папке, содержащей исходные файлы модели, используя следующий синтаксис:

    `RSetup.exe /install /component MLM /version <version> /language 1033 /destdir "<SQL_DB_instance_folder>\R_SERVICES\library\MicrosoftML\mxLibs\x64"`. 

    Для параметра версии поддерживаются следующие значения:

    + Версия-кандидат 0: **9.1.0.0**
    + Версия-кандидат 1: **9.2.0.22**
    + RTM: **9.2.0.100**
    + Накопительное обновление 1: **9.2.0.24**
    + Накопительное обновление 4: **9.3.0**

    > [!NOTE]
    > Дает общее представление времени, которое публикации обновления перечислены соответствующие выпуски SQL Server. Если вы не уверены, версии, устанавливаемые вместе с SQL Server, откройте папку R_SERVICES для экземпляра, а затем откройте RGui (`~\R_SERVICES\bin\x64`). Начальный экран перечислены версии для версии Microsoft R Open и обучения компьютере, на сервер. 

    Например, для использования R предварительно обученной модели с экземпляром по умолчанию **R_SERVICES**, можно запустить следующую команду:

    `RSetup.exe /install /component MLM /version 9.2.0.24 /language 1033 /destdir "C:\Program Files\Microsoft SQL Server\MSSQL13.MSSQLSERVER\R_SERVICES\library\MicrosoftML\mxLibs\x64"`

    Для именованного экземпляра команда будет выглядеть примерно следующим образом:

    `RSetup.exe /install /component MLM /version 9.2.0.24 /language 1033 /destdir "C:\Program Files\Microsoft SQL Server\MSSQL13.MyInstanceName\R_SERVICES\library\MicrosoftML\mxLibs\x64"`

4. Если установка выполнена успешно, следующие модели должны добавляться к вашей `R_SERVICES` папки:

    + AlexNet\_Updated.model
    + ImageNet1K\_mean.xml
    + pretrained.Model
    + ResNet\_101\_Updated.model
    + ResNet\_18\_Updated.model
    + ResNet\_50\_Updated.model

## <a name="install-pre-trained-models-on-sql-server-2017-machine-learning-services-in-database"></a>Установить предварительно обученной модели в службах SQL Server 2017 г. машин обучения (в базе данных)

Если вы уже установили 2017 г. SQL Server, предварительно обученной модели можно получить двумя способами:

+ Установка только предварительно обученной модели
+ Обновление компонентов Python и R с помощью привязки и установите предварительно обученной модели в то же время

### <a name="add-pre-trained-models-only"></a>Добавить только предварительно обученной модели

Чтобы добавить предварительно обученной модели, RSetup.exe запускается из командной строки.

Для моделей версии R установите компонент MLM R_SERVICES:

```
RSetup.exe /install /component MLM /version 9.2.0.24 /language 1033 /destdir "C:\Program Files\Microsoft SQL Server\MSSQL14.MSSQLSERVER\R_SERVICES"
```

Установите компонент MLM PYTHON_SERVICES версию Python моделей:

```
RSetup.exe /install /component MLM /version 9.2.0.24 /language 1033 /destdir "C:\Program Files\Microsoft SQL Server\MSSQL14.MSSQLSERVER\PYTHON_SERVICES"
```

### <a name="bind-and-install-pre-trained-models"></a>Привязки и установите предварительно обученной модели

Следующие инструкции описывают процесс для обновления компонентов машины обучения и получение предварительно обученной модели в то же время.

1. Запустите программу установки на основе Windows для компьютера сервера обучения. Установщик можно загрузить по ссылкам на этой странице: [установить машины обучения для Windows Server](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-windows-install).

2. Если вы устанавливаете моделей на сервере, у которого нет доступа к Интернету, убедитесь, что также загрузите установщик для предварительно обученных моделей на этой странице: [автономную установку сервера обучения машины](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-windows-offline).

3. Запустите программу установки.

4. Обновление компонентов R или Python, в то же время, выберите язык (R, Python и/или), который требуется обновить.

    Если ранее вы установили машины Server обучения и обновленные компоненты R или Python, с помощью параметра привязки, оставьте все ранее выбранные варианты **как**и выберите параметры предварительно обученной модели. Не отменяйте Выбор все выбранные ранее параметры; Если это сделать, программа установки удаляет компоненты.

5. Примите все остальные, включая лицензионных соглашений.

WITH 2017 г. SQL Server дополнительная настройка не требуется.

> [!NOTE]
> 
> Для моделей, Python может появиться ошибка при вызове файла модели в коде Python. Это связано с ограничением в текущей реализации Python, который ограничения длины пути к файлу модели. Эта проблема была исправлена и будут доступны в будущих исправлений.

## <a name="install-pre-trained-models-with-sql-server-standalone-r-server"></a>Установка предварительно обученной модели с помощью SQL Server автономным сервером r.

Если вы установили более ранней версии R Server (автономный) с помощью программы установки SQL Server 2016, можно добавить возможность использовать предварительно обученной модели по обновлению сервера R с помощью более новой установщика Windows под управлением. 

Предварительно обученной модели стали доступны как дополнительный компонент [Microsoft R Server 9.1](https://blogs.technet.microsoft.com/dataplatforminsider/2017/04/19/introducing-microsoft-r-server-9-1-release/), но были добавлены с каждым выпуском обновления. Мы рекомендуем получение последней версии, возможно, но здесь перечислены предыдущие выпуски [освобождает R Server](https://docs.microsoft.com/machine-learning-server/install/r-server-install)

Следующие инструкции описывают обновление компонентов R и в то же время добавить предварительно обученной модели.

1. Запустите отдельного установщика Windows для любого [R Server](https://docs.microsoft.com/machine-learning-server/rebranding-microsoft-r-server) или [машины обучения Server](https://docs.microsoft.com/machine-learning-server/install/machine-learning-server-windows-install).

2. Выберите языки, которые вы хотите обновить и выберите **Pre-trained моделей** параметр.

    > [!TIP]
    > Если вы ранее не выполнялась программа установки для обновления R Server (изолированный) и нужно добавить предварительно обученной модели, оставьте все ранее выбранные варианты **как**и выберите только что Pre **-обучения моделей** параметр . **Нет** снимите все выбранные ранее параметры; Если это сделать, программа установки удаляет компоненты.

    Рекомендуется принять параметры по умолчанию для расположений модели.

3. Нажмите кнопку **Продолжить**. 

4. Примите все остальные, включая лицензионных соглашений.

После завершения установки необходимо выполнить некоторые дополнительные действия, чтобы зарегистрировать предварительно обученной модели.

1. Откройте командную строку Windows **администратор**.

2. Перейдите в папку установки начальной загрузки для R Server (изолированный), которая также содержит установщик Microsoft R. 

3. Запустите `RSetup.exe` и указать компонент для установки, версии и к папке, содержащей исходные файлы модели, используя следующий синтаксис:

    `RSetup.exe /install /component MLM /version <version> /language 1033 /destdir "~\R_SERVER\library\MicrosoftML\mxLibs\x64"`

    Для параметра версии поддерживаются следующие значения:

    + Версия-кандидат 0: **9.1.0.0**
    + Версия-кандидат 1: **9.2.0.22**
    + RTM: **9.2.0.100**
    + Накопительное обновление 1: **9.2.0.24**
    + Накопительное обновление 4: **9.3.0**

    Например позволяя использовать последнюю версию предварительно обученной модели для R, в установке по умолчанию R Server (изолированный), запуске этой инструкции:

    `RSetup.exe /install /component MLM /version 9.3.0 /language 1033 /destdir "C:\Program Files\Microsoft SQL Server\130\R_SERVER\library\MicrosoftML\mxLibs\"`

## <a name="install-pre-trained-models-with-sql-server-2017-standalone-server"></a>Установить предварительно обученной модели с автономным сервером SQL Server 2017 г.

Если вы установили обучения компьютере, на сервер с помощью программы установки SQL Server 2017 г., добавляется предварительно обученной модели, запустив программу установки на основе Windows. Можно выбрать параметр для обновления компонентов R или Python и одновременно добавлять предварительно обученной модели. 

После завершения установки, никаких дополнительных настроек не требуется.

## <a name="bkmk_resources"></a> Справочные материалы и ресурсы

В настоящее время модели, которые доступны являются моделями глубокие нейронные сети (DNN) для анализа и изображение классификация мнений. Все предварительно обученной модели прошли обучение с помощью корпорации Майкрософт [Toolkit сети вычисление](https://cntk.ai/Features/Index.html), или **CNTK**.

Конфигурации всех сетей, был основан на следующих справочных реализаций:

+ ResNet 18
+ ResNet 50
+ ResNet 101
+ AlexNet

Дополнительные сведения об алгоритмах, используемых в этих углубленного обучения моделей и порядок реализации и обучить с помощью CNTK, см. в этих статьях:

+ [Специалисты корпорации Майкрософт алгоритм задает его вехи ImageNet запроса](https://www.microsoft.com/research/blog/microsoft-researchers-algorithm-sets-imagenet-challenge-milestone/)

+ [Набор средств Майкрософт вычислительной сети предлагает обучения вычислительной мощности, но наиболее эффективный распределенных глубиной](https://www.microsoft.com/research/blog/microsoft-computational-network-toolkit-offers-most-efficient-distributed-deep-learning-computational-performance/)

## <a name="how-to-use-pre-trained-models-for-text-analysis"></a>Как использовать предварительно обученной модели для анализа текста

См. в следующем примере для демонстрации использования featurization текст предварительно обученной модели классификации текста.

[Анализ мнений, с помощью Featurizer текста](https://github.com/Microsoft/microsoft-r/tree/master/microsoft-ml/Samples/101/BinaryClassification/SimpleSentimentAnalysis)

## <a name="how-to-use-pre-trained-models-for-image-detection"></a>Использование предварительно обученной модели для образа обнаружения

Предварительно обученной модели для изображений поддерживает featurization изображений, которые предоставляются. Чтобы использовать модель, вызовите **featurizeImage** преобразования. Загружено изображение, размер и создания признаков в обученной модели. Выходные данные DNN featurizer затем используется для обучения модели линейной классификации изображений.

Для использования этой модели, все образы необходимо изменять в соответствии с требованиями обученной модели. Например, при использовании модели AlexNet изображения должны изменяться в для 227 x 227 пикселей.

Дополнительные сведения см. в разделе [предварительно обученной модели для анализа и образа обнаружения мнений](https://docs.microsoft.com/machine-learning-server/install/microsoftml-install-pretrained-models)
