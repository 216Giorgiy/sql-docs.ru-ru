---
title: "Изменение пула учетных записей пользователей для служб R SQL Server | Документация Майкрософт"
ms.custom:
- SQL2016_New_Updated
ms.date: 03/03/2017
ms.prod: sql-server-2016
ms.reviewer: 
ms.suite: 
ms.technology:
- r-services
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 58b79170-5731-46b5-af8c-21164d28f3b0
caps.latest.revision: 19
author: jeannt
ms.author: jeannt
manager: jhubbard
ms.translationtype: MT
ms.sourcegitcommit: 876522142756bca05416a1afff3cf10467f4c7f1
ms.openlocfilehash: 33e22f7edec807d046798d89a9cd5daa642e8d3b
ms.contentlocale: ru-ru
ms.lasthandoff: 09/01/2017

---
# <a name="modify-the-user-account-pool-for-sql-server-r-services"></a>Изменение пула учетных записей пользователей для служб SQL Server R
  Чтобы [!INCLUDE[rsql_launchpad](../../includes/rsql-launchpad-md.md)] могла выполнять задачи, в процессе установки [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] создается новый *пул учетных записей пользователей* Windows. Эти рабочие учетные записи предназначены для того, чтобы изолировать работу пользователей SQL, которые одновременно выполняют скрипты R. 

Здесь описывается конфигурация по умолчанию, параметры безопасности и ресурсы для рабочих учетных записей и способ изменения конфигурации по умолчанию.

## <a name="worker-accounts-used-by-r-services"></a>Рабочие учетные записи, используемые службами R   

Группа учетных записей Windows создается при установке [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] для каждого экземпляра, на котором установлены службы R. Таким образом, если установлено несколько экземпляров, которые поддерживают R, будет создано несколько групп пользователей.

-   В экземпляре по умолчанию именем группы будет **SQLRUserGroup**. 
-   В именованном экземпляре имя группы по умолчанию имеет в качестве суффикса имя экземпляра, например **SQLRUserGroupИмя_экземпляра**. 

По умолчанию пул учетных записей пользователей содержит 20 учетных записей. В большинстве случаев этого количества достаточно для поддержки сеансов R, но при необходимости его можно изменить.
-  В экземпляре по умолчанию отдельным учетным записям присваиваются имена от **MSSQLSERVER01** и до **MSSQLSERVER20**.  
-   Для именованного экземпляра отдельным учетным записям присваиваются имена на основе экземпляра: например, **Имя_экземпляра01** и до **Имя_экземпляра20**.  

### <a name = "HowToChangeGroup"></a>Как изменить количество рабочих учетных записей R

Чтобы изменить число пользователей в пуле учетных записей, необходимо изменить свойства службы [!INCLUDE[rsql_launchpad](../../includes/rsql-launchpad-md.md)], как описано ниже.  
  
Пароли, связанные с каждой учетной записью пользователя, генерируются случайным образом, но при необходимости после создания учетных записей их можно изменить.  
  
1. Откройте диспетчер конфигурации SQL Server и выберите **Службы SQL Server**.
2. Дважды щелкните службу панели запуска SQL Server и остановите службу, если она запущена. 
3.  Убедитесь, что на вкладке **Служба** установлен автоматический режим запуска. Скрипты R завершатся ошибкой, если панель запуска не запущена.
4.  Щелкните вкладку **Дополнительно** и при необходимости измените значение параметра **Число внешних пользователей**. Этот параметр определяет, сколько различных пользователей SQL могут одновременно выполнять запросы в R. Значение по умолчанию — 20 учетных записей.
5. При необходимости можно задать для параметра **Сбросить пароль внешних пользователей** значение _Да_, если политика вашей организации требует регулярной смены паролей. Это приведет к повторному созданию зашифрованных паролей, которые хранит панель запуска для учетных записей пользователей. Дополнительные сведения см. в разделе [Применение политики паролей](#bkmk_EnforcePolicy).    
6.  Перезапустите службу.  

## <a name="managing-r-workload"></a>Управление рабочей нагрузкой R

Количество учетных записей в этом пуле определяет, сколько может быть одновременно активных сеансов R.  По умолчанию создаются 20 учетных записей. Это означает, что 20 разных пользователей могут одновременно работать в активных сеансах. Если вам требуется большее количество учетных записей для одновременного выполнения скриптов R, их можно увеличить. 

Если один и тот же пользователь одновременно выполняет несколько скриптов R, все сеансы будут использовать одну и ту же рабочую учетную запись. Например, один пользователь может выполнять 100 различных скриптов R одновременно с помощью одной рабочей учетной записи до тех пор, пока позволяют ресурсы.

Число поддерживаемых рабочих учетных записей и количество одновременных сеансов R, которые могут выполнять пользователи, ограничивается только ресурсами сервера.  Как правило, память является первым узким местом при использовании среды выполнения R.

Ресурсы, которые могут использоваться скриптами R в службах R, управляются SQL Server. Мы советуем отслеживать использование ресурсов с помощью динамических административных представлений SQL Server или следить за счетчиками производительности для связанного объекта задания Windows и соответствующим образом настраивать использование памяти сервера. 
 
При работе с SQL Server Enterprise Edition вы можете выделить ресурсы для выполнения скриптов R, настроив [пул внешних ресурсов](../../advanced-analytics/r-services/how-to-create-a-resource-pool-for-r.md). 

Дополнительные сведения об управлении ресурсами для скрипта R см. в статьях:

- [Настройка SQL Server для служб R](../../advanced-analytics/r-services/sql-server-configuration-r-services.md)
-  [Пример производительности служб R](../../advanced-analytics/r-services/performance-case-study-r-services.md)

## <a name="security"></a>безопасность

Каждая группа пользователей связана со службой [!INCLUDE[rsql_launchpad](../../includes/rsql-launchpad-md.md)] в определенном экземпляре и не может поддерживать задания R, выполняемые в других экземплярах.

Пока сеанс активен, для каждой рабочей учетной записи создается временная папка для хранения объектов скрипта, промежуточных результатов и других сведений, используемых R и SQL Server во время выполнения скриптов R. К этим рабочим файлам, расположенным в папке ExtensibilityData, имеют доступ только администраторы. SQL Server удаляет их после завершения скрипта. 

Дополнительные сведения см. в [обзоре безопасности](../../advanced-analytics/r-services/security-overview-sql-server-r.md).

### <a name="bkmk_EnforcePolicy"></a>Применение политики паролей

Если ваша организация имеет политику, которая требует регулярной смены паролей, может потребоваться принудительно запустить службу панели запуска для повторного создания зашифрованных паролей, которые хранит панель запуска для рабочих учетных записей.  

Чтобы включить этот параметр и принудительно обновлять пароли, откройте область **Свойства** службы панели запуска в диспетчере конфигурации SQL Server, щелкните **Дополнительно** и измените значение параметра **Сбросить пароль внешних пользователей** на **Да**. После применения этого изменения пароли немедленно будут созданы повторно для всех учетных записей пользователей. Чтобы использовать скрипт R после этого изменения, необходимо перезапустить службу панели запуска. В это время будут считаны созданные пароли. 

Для сброса паролей через регулярные интервалы можно вручную установить этот флаг или использовать скрипт.

### <a name="additional-permission-required-to-support-remote-compute-contexts"></a>Для поддержки удаленных контекстов вычислений необходимы дополнительные разрешения.

По умолчанию группа рабочих учетных записей R **не** имеет прав на вход в экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], с которым она связана. Это может стать проблемой, если все пользователи R подключаются к SQL Server с удаленного клиента, чтобы выполнить скрипты R, или если скрипт использует ODBC для получения дополнительных данных. 

Чтобы гарантировать поддержание этих сценариев, администратор базы данных должен предоставить группе рабочих учетных записей разрешение на вход в экземпляр SQL Server, где будут выполняться скрипты R (разрешения **Подключение к**). Это называется *неявной проверкой подлинности*, которая позволяет SQL Server выполнять скрипты R с учетными данными удаленного пользователя.

> [!NOTE]
> Это ограничение не распространяется на тот случай, когда вы используете имена входа SQL для выполнения скриптов R с удаленной рабочей станции, так как учетные данные имен входа SQL передаются в явной форме из клиента R в экземпляр SQL Server, а затем в ODBC.


### <a name="how-to-enable-implied-authentication"></a>Как включить неявную проверку подлинности

1. Откройте SQL Server Management Studio с правами администратора в экземпляре, в котором будет выполняться код R.

2. Выполните приведенный ниже скрипт. Измените имя группы пользователей, если вы изменили имя по умолчанию, а также имена компьютера и экземпляра.

    ```sql
    USE [master]
    GO
    
    CREATE LOGIN [computername\SQLRUserGroup] FROM WINDOWS WITH DEFAULT_DATABASE=[master], DEFAULT_LANGUAGE=[language]
    GO  
    ````


  
## <a name="see-also"></a>См. также:  
 [Настройка (службы R SQL Server)](../../advanced-analytics/r-services/configuration-sql-server-r-services.md)
  

