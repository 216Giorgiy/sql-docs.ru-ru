---
title: "Изменение пула учетных записей пользователей для SQL Server машинного обучения | Документы Microsoft"
ms.date: 11/03/2017
ms.prod: sql-non-specified
ms.reviewer: 
ms.suite: 
ms.technology: r-services
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 58b79170-5731-46b5-af8c-21164d28f3b0
caps.latest.revision: "19"
author: jeannt
ms.author: jeannt
manager: cgronlund
ms.workload: Inactive
ms.openlocfilehash: b122d94e54f70f13a1cb3baeed2740686b0b3195
ms.sourcegitcommit: 531d0245f4b2730fad623a7aa61df1422c255edc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/01/2017
---
# <a name="modify-the-user-account-pool-for-sql-server-machine-learning"></a>Изменение пула учетных записей пользователей для SQL Server машинного обучения

Чтобы [!INCLUDE[rsql_launchpad](../../includes/rsql-launchpad-md.md)] могла выполнять задачи, в процессе установки [!INCLUDE[rsql-productnamenew-md](../../includes/rsql-productnamenew-md.md)] создается новый *пул учетных записей пользователей* Windows. Эти учетные записи работника предназначена для изолирования параллельных выполнение внешних скриптов разными пользователями SQL.

В этой статье описывается конфигурация по умолчанию, безопасности и емкости рабочих учетных записей, и как изменить конфигурацию по умолчанию.

**Применяется к:** [!INCLUDE[sssql15-md](../../includes/sssql15-md.md)] [!INCLUDE[rsql-productname-md](../../includes/rsql-productname-md.md)], [!INCLUDE[sscurrent-md](../../includes/sscurrent-md.md)][!INCLUDE[rsql-productnamenew-md](../../includes/rsql-productnamenew-md.md)]

## <a name="worker-accounts-used-for-external-script-execution"></a>Рабочих учетных записей, используемых для выполнения внешних скриптов

Созданные группу учетных записей Windows [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] установки для каждого экземпляра, на компьютер, на котором установлен и включен обучения.

-   В экземпляре по умолчанию именем группы будет **SQLRUserGroup**. Имя одинаково независимо от используемого R, Python или обе.
-   В именованном экземпляре имя группы по умолчанию имеет в качестве суффикса имя экземпляра, например **SQLRUserGroupИмя_экземпляра**.

По умолчанию пул учетных записей пользователей содержит 20 учетных записей. В большинстве случаев 20 более чем достаточно для поддержки задач машинного обучения, но можно изменить количество учетных записей.
-  В экземпляре по умолчанию отдельным учетным записям присваиваются имена от **MSSQLSERVER01** и до **MSSQLSERVER20**.
-   Для именованного экземпляра отдельным учетным записям присваиваются имена на основе экземпляра: например, **Имя_экземпляра01** и до **Имя_экземпляра20**.

Если существует более одного экземпляра с применением машинного обучения, компьютер будет иметь несколько групп пользователей. Группы не могут использоваться совместно экземпляров.

### <a name = "HowToChangeGroup"></a>Изменение числа рабочих учетных записей

Чтобы изменить число пользователей в пуле учетных записей, необходимо изменить свойства службы [!INCLUDE[rsql_launchpad](../../includes/rsql-launchpad-md.md)], как описано ниже.

Пароли, связанные с каждой учетной записью пользователя, генерируются случайным образом, но при необходимости после создания учетных записей их можно изменить.

1. Откройте диспетчер конфигурации SQL Server и выберите **Службы SQL Server**.
2. Дважды щелкните службу панели запуска SQL Server и остановите службу, если она запущена.
3.  Убедитесь, что на вкладке **Служба** установлен автоматический режим запуска. Невозможно запустить внешних скриптов, если панель запуска не работает.
4.  Щелкните вкладку **Дополнительно** и при необходимости измените значение параметра **Число внешних пользователей**. Данный параметр определяет количество различных пользователей SQL можно выполнить внешний скрипт сеансов одновременно. Значение по умолчанию — 20 учетных записей.
5. При необходимости можно задать для параметра **Сбросить пароль внешних пользователей** значение _Да_, если политика вашей организации требует регулярной смены паролей. Это приведет к повторному созданию зашифрованных паролей, которые хранит панель запуска для учетных записей пользователей. Дополнительные сведения см. в разделе [Применение политики паролей](#bkmk_EnforcePolicy).
6.  Перезапустите службы панели запуска.

## <a name="managing-machine-learning-workloads"></a>Управление рабочих нагрузок машин обучения

Количество учетных записей в этом пуле определяет, сколько внешнего скрипта может быть одновременно активных сеансов.  По умолчанию создаются 20 учетных записей, это означает, что 20 различных пользователей может быть активных R или Python сеансов за один раз. Можно увеличить количество рабочих учетных записей, если планируется выполнять более 20 одновременных скриптов.

При одного пользователя одновременно выполняется несколько внешних скриптов, все сеансы, которые получают права использовать одну и ту же учетную запись работника. Например один пользователь установлена 100 различных сценариев R, выполняемых одновременно, при условии, что позволяют ресурсы, но все сценарии запускается под учетной записью одним рабочим.

Число рабочих учетных записей, которые может поддерживать и количество одновременных сеансов, которые пользователи могут выполняться, ограничивается только ресурсы сервера. Как правило, память является первым узким местом при использовании среды выполнения R.

Ресурсы, которые могут использоваться сценариями Python или R управляются SQL Server. Мы советуем отслеживать использование ресурсов с помощью динамических административных представлений SQL Server или следить за счетчиками производительности для связанного объекта задания Windows и соответствующим образом настраивать использование памяти сервера. Если SQL Server Enterprise Edition, можно распределить ресурсы, используемые для выполнения внешних скриптов, настроив [внешнего пула ресурсов](../../advanced-analytics/r-services/how-to-create-a-resource-pool-for-r.md).

Дополнительные сведения об управлении машины обучения емкости задач см. статьи:

- [Конфигурация SQL Server для служб R](../../advanced-analytics/r/sql-server-configuration-r-services.md)
-  [Пример производительности для служб R](../../advanced-analytics/r/performance-case-study-r-services.md)

## <a name="security"></a>безопасность

Каждая группа пользователей связана со службой [!INCLUDE[rsql_launchpad](../../includes/rsql-launchpad-md.md)] в определенном экземпляре и не может поддерживать задания R, выполняемые в других экземплярах.

Пока сеанс активен, для каждой рабочей учетной записи создается временная папка для хранения объектов скрипта, промежуточных результатов и других сведений, используемых R и SQL Server во время выполнения скриптов R. К этим рабочим файлам, расположенным в папке ExtensibilityData, имеют доступ только администраторы. SQL Server удаляет их после завершения скрипта. 

Дополнительные сведения см. в [обзоре безопасности](../../advanced-analytics/r-services/security-overview-sql-server-r.md).

### <a name="bkmk_EnforcePolicy"></a>Применение политики паролей

Если ваша организация имеет политику, которая требует регулярной смены паролей, может потребоваться принудительно запустить службу панели запуска для повторного создания зашифрованных паролей, которые хранит панель запуска для рабочих учетных записей.  

Чтобы включить этот параметр и принудительно обновлять пароли, откройте область **Свойства** службы панели запуска в диспетчере конфигурации SQL Server, щелкните **Дополнительно** и измените значение параметра **Сбросить пароль внешних пользователей** на **Да**. После применения этого изменения пароли немедленно будут созданы повторно для всех учетных записей пользователей. Чтобы использовать скрипт R после этого изменения, необходимо перезапустить службу панели запуска. В это время будут считаны созданные пароли. 

Для сброса паролей через регулярные интервалы можно вручную установить этот флаг или использовать скрипт.

### <a name="additional-permission-required-to-support-remote-compute-contexts"></a>Для поддержки удаленных контекстов вычислений необходимы дополнительные разрешения.

По умолчанию группа рабочих учетных записей R **не** имеет прав на вход в экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], с которым она связана. Это может стать проблемой, если все пользователи R подключаются к SQL Server с удаленного клиента, чтобы выполнить скрипты R, или если скрипт использует ODBC для получения дополнительных данных. 

Чтобы гарантировать поддержание этих сценариев, администратор базы данных должен предоставить группе рабочих учетных записей разрешение на вход в экземпляр SQL Server, где будут выполняться скрипты R (разрешения **Подключение к**). Это называется *неявной проверки подлинности*и позволяет SQL Server для запуска сценариев R, используя учетные данные удаленного пользователя.

> [!NOTE]
> Это ограничение не распространяется на тот случай, когда вы используете имена входа SQL для выполнения скриптов R с удаленной рабочей станции, так как учетные данные имен входа SQL передаются в явной форме из клиента R в экземпляр SQL Server, а затем в ODBC.


### <a name="how-to-enable-implied-authentication"></a>Как включить неявную проверку подлинности

1. Откройте SQL Server Management Studio с правами администратора на экземпляре, где будет выполняться код R или Python.

2. Выполните приведенный ниже скрипт. Измените имя группы пользователей, если вы изменили имя по умолчанию, а также имена компьютера и экземпляра.

    ```sql
    USE [master]
    GO
    
    CREATE LOGIN [computername\SQLRUserGroup] FROM WINDOWS WITH DEFAULT_DATABASE=[master], DEFAULT_LANGUAGE=[language]
    GO
    ````

