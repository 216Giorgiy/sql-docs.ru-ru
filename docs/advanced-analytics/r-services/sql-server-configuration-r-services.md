---
title: "Конфигурация SQL Server (службы R) | Microsoft Docs"
ms.custom: ""
ms.date: "03/10/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "r-services"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: 4b08969f-b90b-46b3-98e7-0bf7734833fc
caps.latest.revision: 13
author: "jeannt"
ms.author: "jeannt"
manager: "jhubbard"
caps.handback.revision: 12
---
# Конфигурация SQL Server (службы R)
Сведения в этом разделе представлены общие рекомендации по конфигурации оборудования и сети компьютера, который используется для размещения [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)]. Он должен считаться Помимо общих [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] информация, содержащаяся в настройке производительности [Центр производительности для базы данных SQL Azure и SQL Server Database Engine](../../relational-databases/security/security-center-for-sql-server-database-engine-and-azure-sql-database.md).

## Процессор

[!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] можно выполнять задачи параллельно с помощью доступных ядер на компьютере; Дополнительные ядра, которые доступны, тем выше производительность. Поскольку [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] обычно используется несколькими пользователями одновременно, администратор базы данных следует определить оптимальное количество ядер, которые необходимы для поддержки вычисления пиковой нагрузки. Хотя количество ядер, не может помочь для ввода-вывода операций, связанных с ЦП алгоритмы будет обеспечен более быстрые процессоры с большим количеством ядер.

## Память

Объем доступной памяти на компьютере может иметь большое влияние на производительность дополнительные аналитические алгоритмы. При использовании контекста вычисления SQL нехватки памяти могут повлиять на степень параллелизма. Это может также повлиять на размер фрагмента данных (строки каждой операции чтения), могут быть обработаны и количество одновременных сеансов, которые могут поддерживаться.

Настоятельно рекомендуется не менее 32 ГБ. При наличии более чем 32 ГБ, можно настроить источник данных SQL для использования нескольких строк в каждой операции чтения для повышения производительности.

## Параметры электропитания

В операционной системе Windows __высокой производительности__ питания следует использовать. С помощью параметра питания приведет снижение или нестабильной производительности при использовании [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)].

## Дисковый ввод-ВЫВОД

Обучения и прогнозирования заданий с помощью [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] по своей природе являются операции ввода-ВЫВОДА привязан и зависит от скорости дисков, хранящихся на базе данных. Может помочь быстрее дисков, такие как твердотельные накопители (SSD). 

Дискового ввода-ВЫВОДА также зависит от других приложений, обращающихся к диск: например, чтение операции в базе данных с другими клиентами. Производительность ввода-ВЫВОДА диска также может быть изменено с помощью параметров в файловой системе используются, например размер блока, используемый в файловой системе. Если доступны несколько дисков, хранения базы данных на диске, отличном от [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] таким образом, запросы для [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] предназначаются не тот же диск как запросы к данным, хранящимся в базе данных.

Дискового ввода-ВЫВОДА может значительно повлиять на производительность при выполнении RevoScaleR аналитические функции, которые используют несколько итераций во время обучения. Например `rxLogit`, `rxDTree`, `rxDForest` и `rxBTrees` все используют несколько итераций. Если источником данных является [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)], эти алгоритмы используют временные файлы, которые оптимизированы для сбора данных. Эти файлы автоматически удаляются после завершения сеанса. Наличие диск высокой производительности для операций чтения и записи может значительно повысить общее прошедшее время для этих алгоритмов.

> [!NOTE]
> [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] требуется 8.3 поддержка filename в операционных системах Windows. Fsutil.exe можно использовать для определения, поддерживает ли диск имен файлов 8.3 или для включения поддержки, если это не так. Дополнительные сведения об использовании fsutil.exe с именами файлов 8.3 см. в разделе [Fsutil 8dot3name](https://technet.microsoft.com/library/ff621566(v=ws.11).aspx).

### Сжатие таблицы

Часто производительность ввода-ВЫВОДА можно повысить с помощью сжатия или columstore индексов. Как правило часто повторяются данные в несколько столбцов в таблице, поэтому использование индекса columnstore позволяет воспользоваться преимуществами этих повторений при сжатии данных.

Индекс columnstore может быть не так эффективно, если существует множество операций вставки в таблицу, но является хорошим выбором, если статические данные или только изменения происходят нечасто. Если столбец хранилища не подходит, Включение сжатия для основной таблицы строк можно использовать для улучшения операций ввода-ВЫВОДА.

Дополнительные сведения см. в следующих документах:

* [Сжатие данных](../../relational-databases/data-compression/data-compression.md)

* [Включение сжатия таблицы или индекса](../../relational-databases/data-compression/enable-compression-on-a-table-or-index.md)

* [Руководство по индексам columnstore](Columnstore%20Indexes%20Guide.md)

## Файл подкачки

Операционная система Windows использует файл подкачки для управления аварийные дампы и для хранения страниц виртуальной памяти. При наличии чрезмерного использования файла подкачки следует увеличить объем физической памяти на компьютере. Более физической памяти не приводит к удалению разбиения по страницам, но снижается необходимость разбиения по страницам.

Скорость, файл подкачки хранится на диске также может повлиять на производительность. Сохранение файла подкачки на SSD или использование нескольких файлов страницу через несколько SSDs может повысить производительность.

В разделе [Определение необходимого размера файла подкачки для 64-разрядных версиях Windows](https://support.microsoft.com/en-us/kb/2860880) сведения об изменении размера файла подкачки.

## Управление ресурсами

[!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] поддерживает управление ресурсами для управления различные ресурсы, используемые [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)]. Например, значение по умолчанию для потребление памяти R ограничено до 20% от общего объема памяти, доступной для [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)]. Это позволяет убедиться, что [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] рабочие процессы не является существенной, длинные задания R. Тем не менее можно изменить эти ограничения администратором базы данных. 

Ограниченные ресурсы, __MAX_CPU_PERCENT__, __MAX_MEMORY_PERCENT__, и __MAX_PROCESSES__. Чтобы просмотреть текущие параметры, используйте это [!INCLUDE[tsql_md](../../includes/tsql-md.md)] инструкции:

```T-SQL
SELECT * FROM sys.resource_governor_external_resource_pools
``` 

Если [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] главным образом используется для R служб, он может быть полезно увеличить MAX_CPU_PERCENT до 40% или 60%. Если существует много R сеансов, используя тот же [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] в то же время будет возрастать все три. Чтобы изменить параметры выделенных ресурсов, используйте [!INCLUDE[tsql_md](../../includes/tsql-md.md)] инструкции. 

В этом примере задает использование памяти на 40%:

```T-SQL
ALTER EXTERNAL RESOURCE POOL [default] WITH (MAX_MEMORY_PERCENT = 40)
```
В следующем примере все три значения можно настроить:
```T-SQL
ALTER EXTERNAL RESOURCE POOL [default] WITH (MAX_CPU_PERCENT = 40, MAX_MEMORY_PERCENT = 50, MAX_PROCESSES = 20)`
``` 

> [!NOTE]
> Чтобы внести изменения в эти параметры вступают в силу немедленно, выполните инструкцию `ALTER RESOURCE GOVERNOR RECONFIGURE` после изменения память, ЦП или установка max процесса. 

## См. также
[Регулятор ресурсов](../../relational-databases/resource-governor/resource-governor.md)

[СОЗДАНИЕ ПУЛА ВНЕШНИХ РЕСУРСОВ](../../t-sql/statements/create-external-resource-pool-transact-sql.md)

 [SQL Server R служб настройки руководства по повышению производительности](../../advanced-analytics/r-services/sql-server-r-services-performance-tuning.md)
 
 
 [Исследование производительности](../../advanced-analytics/r-services/performance-case-study-r-services.md)
 
 [R и оптимизация данных](../../advanced-analytics/r-services/r-and-data-optimization-r-services.md)