---
title: "Загрузка данных в память с помощью функции rxImport (глубокое погружение в обработку и анализ данных) | Microsoft Docs"
ms.custom: ""
ms.date: "03/14/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "r-services"
ms.tgt_pltfrm: ""
ms.topic: "article"
applies_to: 
  - "SQL Server 2016"
dev_langs: 
  - "R"
ms.assetid: 47a42e9a-05a0-4a50-871d-de73253cf070
caps.latest.revision: 14
author: "jeannt"
ms.author: "jeannt"
manager: "jhubbard"
---
# Загрузка данных в память с помощью функции rxImport (глубокое погружение в обработку и анализ данных)
Функцию *rxImport* можно использовать для передачи данных из источника данных в кадр данных в памяти сеанса R или в файл XDF на диске. Если не указать файл в качестве назначения, данные помещаются в память как кадр данных.  
  
На этом шаге вы узнаете, как получить данные из [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], а затем использовать функцию *rxImport*, чтобы поместить интересующие вас данные в локальный файл. Таким образом, их можно будет повторно анализировать в локальном контексте вычисления, не выполняя запрос к базе данных еще раз.  
  
## Извлечение подмножества данных из SQL Server в локальную память  
Вы решили более подробно изучить заказчиков с высокой степенью риска. Исходная таблица в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] имеет большой размер, поэтому вы получите информацию только о заказчиках с высокой степенью риска и загрузите ее в кадр данных в памяти локальной рабочей станции.  
  
1.  Задайте в качестве контекста вычисления локальную рабочую станцию.  
  
    ```R  
    rxSetComputeContext("local")   
    ```  
  
2.  Создайте объект источника данных SQL Server, указав допустимую инструкцию SQL в параметре *sqlQuery*. В этом примере возвращается подмножество наблюдений с наивысшими показателями рисков. Таким образом, в локальную память будут помещены только действительно нужные данные.  
  
    ```R    
    sqlServerProbDS <- RxSqlServerData(       
        sqlQuery = paste("SELECT * FROM ccScoreOutput2",  
        "WHERE (ccFraudProb > .99)"),
        connectionString = sqlConnString)   
    ```  
  
3.  Используйте функцию *rxImport* для фактической загрузки данные в кадр данных в локальном сеансе R.  
  
    ```R  
    highRisk <- rxImport(sqlServerProbDS)   
    ```  
     Если операция выполнена успешно, вы увидите сообщение о состоянии: Считано строк: 35, Всего обработано строк: 35, Общее время фрагмента: 0,036 секунды 
   
4.  Теперь, когда наблюдения с высокой степенью риска находятся в кадре данных в памяти, можно использовать различные функции R для работы с кадром данных. Например, можно упорядочить клиентов по оценке риска и вывести данные по клиентам, которые представляют наибольший риск.  
  
    ```R  
    orderedHighRisk <- highRisk[order(-highRisk$ccFraudProb),]   
    row.names(orderedHighRisk) <- NULL    
    head(orderedHighRisk)  
  
    ```  
  
 **Результаты**  
  
 *ccFraudLogitScore   state gender cardholder balance numTrans numIntlTrans creditLine ccFraudProb1*  
*9,786345    SD   Male  Principal   23456       25            5 75   0,99994382*  
*9,433040    FL Female  Principal   20629       24           28 75   0,99992003*  
*8,556785    NY Female  Principal   19064       82           53 43   0,99980784*  
*8,188668    AZ Female  Principal   19948       29            0 75   0,99972235*  
*7,551699    NY Female  Principal   11051       95            0 75   0,99947516*  
*7,335080    NV   Male  Principal   21566        4            6  75   0,9993482*  
  
## Дополнительные сведения о функции rxImport  
Функцию *rxImport* можно использовать не только для передачи данных, но и для их преобразования в процессе считывания. Например, можно указать количество символов для столбцов фиксированной ширины, предоставить описание переменных, задать уровни столбцов коэффициентов и даже создать уровни, которые будут использоваться после импорта.  
  
Функция *rxImport* присваивает имена переменных столбцам в процессе импорта, но вы можете указать новые имена переменных с помощью параметра *colInfo* или изменить типы данных с помощью параметра *colClasses*.  
  
Указав дополнительные операции в параметре *transforms*, можно осуществлять простейшую обработку каждого блока считываемых данных.  
  
## Следующий шаг  
[Создание таблицы SQL Server с помощью rxDataStep (глубокое погружение в обработку и анализ данных)](../../advanced-analytics/r-services/create-new-sql-server-table-using-rxdatastep-data-science-deep-dive.md)  
  
## Предыдущий шаг  
[Занятие 3. Преобразование данных с помощью языка R (глубокое погружение в обработку и анализ данных)](../../advanced-analytics/r-services/lesson-3-transform-data-using-r-data-science-deep-dive.md)  
  
## См. также:  
[Учебники по службам SQL Server R Services](../../advanced-analytics/r-services/sql-server-r-services-tutorials.md)  
  
  
  
