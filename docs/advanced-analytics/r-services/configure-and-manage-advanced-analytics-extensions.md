---
title: "Настройка и управление расширениями углубленной аналитики | Microsoft Docs"
ms.custom: 
  - "SQL2016_New_Updated"
ms.date: "11/01/2016"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "r-services"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: 8d73fd98-0c61-4a62-94bb-75658195f2a6
caps.latest.revision: 21
author: "jeannt"
ms.author: "jeannt"
manager: "jhubbard"
caps.handback.revision: 20
---
# Настройка и управление расширениями углубленной аналитики
  После установки [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)]можно внести небольшие изменения в конфигурацию среды выполнения R и других служб, связанных с [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] .  
  
  
 **В этом разделе**  
  
-   [Подготовка учетных записей пользователей для служб SQL Server R](#bkmk_Provisioning)  
  
-   [Управление использованием памяти процессами R](#bkmk_ManagingMemory)  
  
-   [Изменение параметров службы по умолчанию с помощью файла конфигурации](#bkmk_ChangingConfig) 

-   [Изменение учетной записи службы запуска](#bkmk_Launchpad) 
  
##  <a name="bkmk_Provisioning"></a> Подготовка учетных записей пользователей для служб SQL Server R  
 Среда выполнения R процессов в [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] выполняются в контексте учетные записи локальных пользователей с низким уровнем привилегий. Выполнение процессов среды выполнения R с отдельными учетными записями с низким уровнем привилегий дает следующие преимущества.  
  
-   Уменьшение привилегий для процессов среды выполнения R, запущенных на компьютере [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
-   Обеспечение изоляции между сеансами среды выполнения R.  
  
 В процессе установки в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], новые окна *пул учетной записи пользователя* создается, содержащий учетные записи локальных пользователей, необходимые для выполнения процесса выполнения R. Можно изменить количество пользователей, при необходимости для поддержки R. Администратор базы данных должен предоставить также этой группы разрешение на подключение к любой экземпляр, где R служб был включен. Дополнительные сведения см. в разделе [Изменить пул учетной записи пользователя для служб SQL Server R](../../advanced-analytics/r-services/modify-the-user-account-pool-for-sql-server-r-services.md).  
  
 Тем не менее, список управления доступом (ACL) могут быть определены для конфиденциальным ресурсам на [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] доступу к этой группе, чтобы предотвратить получение доступа к ресурсам, процесс выполнения R.  
  
-   Пул учетной записи пользователя связан с определенным экземпляром.  Учетные записи создаются для каждого экземпляра для какой R включен сценарий, отдельный пул рабочего процесса. Учетные записи могут использоваться между экземплярами.
  
-   Имена учетных записей пользователей в пуле имеют формат SQLInstanceName*nn*. Например, при использовании экземпляра по умолчанию в качестве сервера R пул учетных записей пользователей поддерживает такие имена учетных записей, как MSSQLSERVER01, MSSQLSERVER02 и т. д.  
  
-   Размер пула учетных записей пользователей является статическим (по умолчанию — 20). Число сеансов среды выполнения R, которые могут запускаться одновременно, ограничено размером пула учетных записей пользователей. Тем не менее это ограничение может изменяться администратором с помощью диспетчера конфигурации SQL Server.  
  
  
 Дополнительные сведения об изменении пула учетных записей пользователей см. в разделе [Modify the User Account Pool for SQL Server R Services](../../advanced-analytics/r-services/modify-the-user-account-pool-for-sql-server-r-services.md).  
  
##  <a name="bkmk_ManagingMemory"></a> Управление использованием памяти процессами R  
 По умолчанию процессы среды выполнения R, связанные с [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] , могут использовать не более 20 % всей памяти компьютера. Однако при необходимости администратор может изменить это ограничение.  
  
 Как правило эта сумма будет недостаточным для серьезных R задач, таких как модели обучения и прогнозирования на несколько строк данных. Может понадобиться уменьшить объем памяти, зарезервированный для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] (или для других служб) и использовать для определения внешних пула или пулов ресурсов и выделения регулятора ресурсов. Дополнительные сведения см. в разделе [ресурсами для служб R](../../advanced-analytics/r-services/resource-governance-for-r-services.md).  
  
##  <a name="bkmk_ChangingConfig"></a> Изменить дополнительные параметры службы с помощью файла конфигурации  
 
Можно управлять расширенных свойств [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] изменив [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] файла конфигурации. Этот файл создается во время установки [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и по умолчанию сохраняется в формате обычного текста в следующем каталоге:  
 
```  
<instance path>\binn\rlauncher.config  
```  
  
 Для изменения этого файла необходимо иметь права администратора на компьютере, на котором выполняется [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . При изменением файла конфигурации рекомендуется сделать его резервную копию.  
  
 Например, чтобы открыть файл конфигурации для экземпляра по умолчанию (MSSQLSERVER) в Блокноте, откройте командную строку от имени администратора и введите следующую команду:  
  
```  
C:\>Notepad.exe "%programfiles%\Microsoft SQL Server\MSSQL13.MSSQLSERVER\mssql\binn\rlauncher.config"  
  
```  
  
###  <a name="bkmk_properties"></a> Параметры конфигурации  
 Все параметры задаются в виде пары "ключ — значение", каждый параметр указывается в отдельной строке. Например, следующий параметр задает использование не более 20 % системной памяти процессами R:  
  
 По умолчанию: `MEMORY_LIMIT_PERCENT=20`  
  
 В следующей таблице перечислены все параметры, поддерживаемые для [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], с допустимые значения.  
  
|Имя параметра|Тип значения|По умолчанию|Описание|  
|------------------|----------------|-------------|-----------------|  
|JOB_CLEANUP_ON_EXIT|Целочисленный<br /><br /> 0 = Отключено<br /><br /> 1 = Включено|1<br /><br /> Файлы журнала удаляются при выходе.|Указывает, необходимо ли очищать временную рабочую папку, создаваемую для каждого сеанса R, после завершения сеанса R. Этот параметр полезен для отладки.<br /><br /> Примечание. Это внутренний параметр. Не изменяйте его значение.|  
|TRACE_LEVEL|Целочисленный<br /><br /> 1 = ошибка<br /><br /> 2 = производительность<br /><br /> 3 = Предупреждение<br /><br /> 4 = сведения|1<br /><br /> Выводить только предупреждения|Задает уровень детализации трассировки для средства запуска R (MSSQLLAUNCHPAD) для целей отладки. Этот параметр влияет на уровень детализации трассировки, которая хранится в следующих файлах трассировки. Оба файла трассировки находятся в пути, который задается параметром LOG_DIRECTORY:<br /><br /> **rlauncher.log**: файл трассировки, созданный для сеансов R запущенно запросов T-SQL.<br /><br /> Дополнительные сведения об этом сценарии см. в разделе [Data Exploration and Predictive Modeling with R](../../advanced-analytics/r-services/data-exploration-and-predictive-modeling-with-r.md).|  

## <a name="bkmk_Launchpad"></a>Изменение учетной записи службы запуска

Отдельные [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)] служба создается для каждого экземпляра, на котором вы настроили [!INCLUDE[rsql_productname_md](../../includes/rsql-productname-md.md)]. 

По умолчанию панель запуска настроена для запуска с использованием учетной записи NT Service\MSSQLLaunchpad, которой предоставлены все необходимые разрешения для выполнения скриптов R. Однако при изменении этой учетной записи панели запуска не можно запустить или доступа к экземпляру SQL Server, где следует запускать скрипты R.
 
  При изменении учетной записи службы, необходимо с помощью **локальной политики безопасности** приложения и обновления разрешений для каждой службы учетной записи следующие разрешения:
  + Назначение квот памяти процессам (SeIncreaseQuotaPrivilege)
  + Обход проходной проверки (SeChangeNotifyPrivilege)
  + Вход в систему в качестве службы (SeServiceLogonRight)
  + Замена токена уровня процесса (SeAssignPrimaryTokenPrivilege)

Дополнительные сведения о разрешениях, необходимых для запуска служб SQL Server см. в разделе [Настройка учетных записей служб и разрешения](https://msdn.microsoft.com/library/ms143504.aspx#Windows).
   
## См. также:  
 [Приступая к работе со службами SQL Server R Services](../../advanced-analytics/r-services/getting-started-with-sql-server-r-services.md)  
  
  