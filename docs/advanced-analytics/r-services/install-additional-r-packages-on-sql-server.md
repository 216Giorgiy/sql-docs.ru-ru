---
title: "Установка дополнительных R-пакетов в SQL Server | Microsoft Docs"
ms.custom: 
  - "SQL2016_New_Updated"
ms.date: "11/08/2016"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "r-services"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: 21456462-e58a-44c3-9d3a-68b4263575d7
caps.latest.revision: 16
author: "jeannt"
ms.author: "jeannt"
manager: "jhubbard"
caps.handback.revision: 16
---
# Установка дополнительных R-пакетов в SQL Server
В этом разделе описывается установка новых пакетов R к экземпляру [!INCLUDE[rsql_productname_md](../../includes/rsql-productname-md.md)] на компьютере, который имеет доступ к Интернету.

## <a name="1-locate-the-windows-binaries-in-zip-file-format"></a>1. Найдите двоичные файлы Windows в формате ZIP

Пакеты R поддерживаются на многих платформах. Необходимо убедиться, что пакет, который вы хотите установить имеет двоичный формат для платформы Windows. В противном случае загруженного пакета не будет работать.

Например, чтобы получить пакет [FISHalyseR](http://bioconductor.org/packages/release/bioc/html/FISHalyseR.html) с сайта Bioconductor, выполните следующие действия.  
  
1.  В списке **Package Archives** (Архивы пакетов) найдите версию **Windows binary** (Двоичный файл Windows).  
  
2.  Щелкните правой кнопкой мыши ссылку на ZIP-файл и выберите  **Сохранить объект как**.  
  
3.  Перейдите к локальной папке, в которой хранятся пакеты в ZIP-формате, и нажмите кнопку **Сохранить**.  
  
 Этот процесс создает локальную копию пакета. Затем можно установить пакет или скопируйте ZIP-пакета на сервер, не имеет доступа к Интернету.  
  
  
## <a name="2-open-the-default-r-package-library-for-sql-server-r-services"></a>2. Откройте библиотеку, пакет R по умолчанию для служб SQL Server R 

Перейдите в папку на сервере, где связанные пакеты R с [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)] были установлены. Очень важно установить пакеты из библиотеки по умолчанию, связанный с текущим экземпляром. 

Инструкции о том, как найти эту библиотеку в разделе [Установка и управление пакетов R](../../advanced-analytics/r-services/installing-and-managing-r-packages.md).

   Для каждого экземпляра, где будет выполняться пакет необходимо установить отдельные копии пакетов. В настоящее время пакеты нельзя сделать общим для экземпляров.
     
  
## <a name="3-open-an-administrative-command-prompt"></a>3. Откройте командную строку администратора 

Откройте среду R с правами администратора.  Это можно сделать с помощью Windows команды p, ropt, или с помощью одной из программ R.
  
### <a name="using-the-windows-command-prompt"></a>В командной строке Windows 

1. Откройте командную строку Windows от имени администратора и перейдите в каталог, где находятся файлы RTerm.Exe или RGui.exe.  
  
    При стандартной установке это каталог R **\bin** . Например, в [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)], инструменты R можно найти здесь: 

    **Экземпляр по умолчанию**

     `C:\Program Files\MSSQL13.MSSQLSERVER\R_SERVICES\bin` 
 
     **Именованный экземпляр**
   
     `C:\Program files\MSSQL13.<instanceName>\R_SERVICES\bin\x64`  
  
2. Запустите файл **R.Exe**.  
  
### <a name="using-the-r-commandline-utilities"></a>С помощью программ командной строки R 
  
1. В проводнике Windows перейдите к каталогу, в котором содержатся средства R.  
  
2. Щелкните правой кнопкой мыши **RGui.exe** или **RTerm.exe**, и выберите **Запуск от имени администратора**.  
## <a name="4-install-the-package"></a>4. Установка пакета

Команды R для установки пакета зависит ли получение пакета из Интернета или из локального ZIP-файла.  
  
### <a name="install-package-from-internet"></a>Установка пакета из Интернета  
  
1.  В общем использовании следующую команду для установки нового пакета с CRAN или одного из узлов зеркальной.  
  
    ```  
    install.packages("target_package_name")  
    ```
    
    Обратите внимание, что двойные кавычки всегда обязательны для имени пакета.

2.  Чтобы указать библиотеке, где установлен пакет, используйте команду подобным образом задать расположение библиотеки:
    
    ```  
    lib.SQL <- "C:\\Program Files\\Microsoft SQL Server\\MSSQL13.MSSQLSERVER\\R_SERVICES\\library"    
    ```

    Обратите внимание, что для [!INCLUDE[rsql_productname](../../includes/rsql-productname-md.md)], в настоящее время допускается только один пакет библиотеки. Не устанавливайте пакеты в библиотеке пользователя, или вы не сможете запустить пакет из [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)].   
     
3.  После определения расположение библиотеки, следующий оператор устанавливает пакет популярных e1070 в библиотеку пакет R для служб.  
  
    ```  
    install.packages("e1071", lib = lib.SQL)  
    ```  
  
4.  Вам потребуется указать зеркальный сайт для получения пакета. Выберите любой зеркальный сайт, удобный для вашего расположения.  
  
    Список текущих зеркал CRAN см. на [этом сайте](https://cran.r-project.org/mirrors.html).  
  
    > [!TIP]  
    >  Чтобы не приходилось выбирать зеркальный сайт при добавлении каждого нового пакета, в среде разработки R можно настроить постоянное использование одного репозитория.  
    >   
    >  Для этого измените файл глобальных параметров R (RPROFILE) и добавьте следующую строку:  
    >   
    >  `options(repos=structure(c(CRAN="<mirror site URL>")))`  
    >   
    >  Чтобы получить подробные сведения о настройках и других файлах, загружаемых при запуске среды выполнения R, выполните следующую команду из консоли R:  
    >   
    >  `?Startup`  
  
5.  Если целевой пакет зависит от дополнительных пакетов, установщик R автоматически скачает нужные зависимости и установит их.  
  
### <a name="manual-package-installation-or-installing-on-computer-with-no-internet-access"></a>Установка вручную пакета или установки на компьютере с доступом в Интернет 

1. Если пакет, который вы собираетесь установить зависимости, требуемые пакеты заранее и добавить их в папку с другой пакет ZIP-файлов.

    > [!TIP]
    > 
    > Рекомендуется настроить локальный репозиторий с помощью [miniCRAN](https://mran.revolutionanalytics.com/package/miniCRAN/) Если необходима поддержка часто автономной установки пакетов R.  
  
2.  В командной строке R введите следующую команду, чтобы указать путь и имя пакета для установки:  
   
    ```  
    install.packages("C:\\Temp\\Downloaded packages\\mynewpackage.zip", repos=NULL)  
    ``` 
     
    Эта команда извлекает пакет R из его локальный ZIP-файл, при условии, что копии сохраняются в каталоге `C:\Temp\Downloaded packages`, и устанавливает пакет (с его зависимости) в библиотеке R на локальном компьютере.  
  
3.  Если ранее вы изменили среды R на компьютере, следует убедиться, что переменная среды R `.libPath` использует только один путь, который указывает на папку R_SERVICES для экземпляра.  
  
> [!NOTE]
> При установке Microsoft Server R (автономный) помимо R служб SQL Server на компьютере останутся отдельной установки R с R средства и библиотеки. Пакеты, которые установлены в библиотеку R_SERVER используются только R Microsoft Server и может быть недоступна для [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
> 
>  Обязательно используйте библиотеку R_SERVICES при установке пакетов, которые вы хотите использовать в SQL Server.

  
## <a name="see-also"></a>См. также  
 [Настройка служб SQL Server R &#40; В базе данных &#41;](../../advanced-analytics/r-services/set-up-sql-server-r-services-in-database.md)  
  
  