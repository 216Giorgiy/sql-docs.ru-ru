---
title: Общие сведения о безопасности для Python в службе машинного обучения SQL Server | Документация Майкрософт
ms.prod: sql
ms.technology: machine-learning
ms.date: 04/15/2018
ms.topic: conceptual
author: HeidiSteen
ms.author: heidist
manager: cgronlun
ms.openlocfilehash: a33701283635327fcaac4a9629cb02044b30dda8
ms.sourcegitcommit: 2666ca7660705271ec5b59cc5e35f6b35eca0a96
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/06/2018
ms.locfileid: "43890060"
---
# <a name="security-overview-for-python-in-sql-server-machine-learning"></a>Общие сведения о безопасности для Python в службе машинного обучения SQL Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

В этом разделе описывает архитектуру безопасности, которая используется для подключения [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] механизм баз данных и компонентов Python. Для двух распространенных сценариев приведены примеры процесса обеспечения безопасности: с языком Python в SQL Server с помощью хранимой процедуры и с языком Python с SQL Server в качестве контекста удаленных вычислений.

## <a name="security-overview"></a>Общие сведения о безопасности

Объект [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] требуется имя входа или учетной записи пользователя Windows для запуска скрипта Python в SQL Server. Эти *субъекты безопасности* управляются на уровне экземпляра и базы данных и идентификации пользователей, обладающие разрешением на подключение к базе данных, чтение и запись данных или создавать объекты базы данных, например таблиц или хранимых процедур. Кроме того пользователи, запустите скрипт Python должен имеют разрешение на выполнение внешних скриптов на уровне базы данных.

Даже пользователи с помощью Python из внешнего средства должны сопоставляться с именем входа или учетной записи в базе данных, если пользователю нужен для запуска Python кода в базе данных, или доступ к объектам базы данных и данных. Те же разрешения требуются ли скрипт Python отправляется из удаленного клиента обработки и анализа или работы с помощью T-SQL хранимой процедуры.

Например, предположим, что созданный скрипт Python, который выполняется на ноутбуке, и вы хотите использовать этот код на [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)]. Для этого должны быть выполнены приведенные ниже условия.

+ База данных должна разрешать удаленные подключения.
+ Имя входа SQL или учетной записи Windows, которая использовалась для доступа к базе данных был добавлен [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] на уровне экземпляра.
+ Имени входа SQL или пользователю Windows должны быть предоставлены разрешения на выполнение внешних скриптов. Обычно это разрешение может добавить только администратор базы данных.
+ Имя входа SQL или пользователь Windows должен быть добавлен в качестве пользователя с соответствующими разрешениями, в каждой базе данных, в которых скрипт Python выполняет любой из этих операций:
    + извлечение данных;
    + запись или обновление данных;
    + создание новых объектов, например таблиц или хранимых процедур.

После имени входа или учетной записи пользователя Windows были подготовки и предоставления необходимых разрешений, можно выполнять код Python [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] с помощью объектов источника данных, предоставляемых **revoscalepy** библиотеки, или путем обращения к хранимому процедура, которая содержит скрипт Python.

Каждый раз, когда правило запускает сценарий Python из [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)], безопасности ядра СУБД получает контекст безопасности пользователя, который запустил задание, а также управляет сопоставлением пользователя или имени входа к защищаемым объектам.

Таким образом все сценарии Python, инициированных из удаленного клиента необходимо указать данные имени входа или пользователя в строке подключения.

## <a name="interaction-of-includessnoversionmdincludesssnoversion-mdmd-security-and-launchpad-security"></a>Взаимодействие [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] безопасности и панели запуска

При выполнении сценарий Python в контексте [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] компьютера, [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)] служба получает доступную рабочую учетную запись (учетную запись локального пользователя) из пула рабочих учетных записей, установленных для внешних процессов и использует эту учетную запись рабочей роли выполнения связанных задач.

Например предположим, что запуск сценария Python учетными данными домена Windows. Получает учетные данные SQL Server и сопоставляет задачу доступные панели запуска рабочей учетной записью, такой как *SQLRUser01*.

> [!NOTE]
> Группа рабочих учетных записей называется так же, независимо от того, используете ли вы R или Python. Тем не менее для каждого экземпляра, в которой вы включаете любого внешнего языка создается отдельная группа.

После сопоставления с рабочей учетной записью [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)] создаст токен пользователя, который будет использоваться для запуска процессов. 

Когда все операции [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] будут завершены, рабочая учетная запись пользователя будет помечена как свободная и вернется в пул.

Дополнительные сведения о службе см. в разделе [Extensibility framework](../concepts/extensibility-framework.md).

### <a name="implied-authentication"></a>Неявная проверка подлинности

**Неявная проверка подлинности** — термин, используемый для процесса, в которой SQL Server возвращает пользователя, учетные данные, а затем выполняет все задачи внешний скрипт от имени пользователей, при условии, что пользователь имеет правильные разрешения в базе данных. Неявная проверка подлинности особенно важно в тех случаях, если скрипт Python должен выполнить вызов ODBC вне базы данных SQL Server. Например код может получить более короткий список факторов из электронной таблицы или другого источника.

Для таких вызовов замыкания на себя, для успешного выполнения имя группы, содержащей рабочих учетных записей, SQLRUserGroup, требуются разрешения «Локальный вход в систему». По умолчанию это право предоставляется всем новым локальным пользователям, но в некоторых организациях могут действовать более строгие групповые политики.

![Неявная проверка подлинности для R](media/implied-auth-python2.png)

## <a name="security-of-worker-accounts"></a>Безопасность рабочих учетных записей

Сопоставление внешнего пользователя Windows или допустимого имени входа SQL с рабочей учетной записью является допустимым только в том случае, для времени существования SQL хранимой процедуры, которая выполняет скрипт Python.

Параллельные запросы, выполняемые с тем же именем входа, сопоставляются с той же рабочей учетной записью пользователя.

Управляет каталогами, используемыми для процессов [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)], и каталоги имеют доступ только. Для Python PythonLauncher выполняет эту задачу. Каждая учетная запись отдельным рабочим предназначен только для его собственной папке и нет доступа к файлам в папках выше свой собственный уровень. Тем не менее рабочая учетная запись может чтения, записи или удаления дочерних элементов в сеансе рабочей папки, который был создан.

Дополнительные сведения о том, как изменить количество рабочих учетных записей, имена учетных записей или паролей учетных записей см. в разделе [изменение пула учетных записей пользователей для машинного обучения SQL Server](../../advanced-analytics/r/modify-the-user-account-pool-for-sql-server-r-services.md).


## <a name="security-isolation-for-multiple-external-scripts"></a>Изоляция безопасности для нескольких внешних скриптов

Механизм изоляции основан на учетных записях физических пользователей. Так как вспомогательные процессы запускаются для определенной языковой среды выполнения, каждая вспомогательная задача использует рабочую учетную запись, которую указала [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)]. Если для выполнения задачи требуется несколько вспомогательных процессов, как в случае параллельных запросов, то для всех связанных задач будет использоваться одна рабочая учетная запись.

При этом доступ к файлам, используемым другими рабочими учетными записями, отсутствует.

Если вы являетесь администратором компьютера, вы можете просмотреть каталоги, созданные для каждого процесса. Каждый каталог определяется собственным идентификатором GUID сеанса.

## <a name="see-also"></a>См. также

[Обзор архитектуры](../../advanced-analytics/python/architecture-overview-sql-server-python.md)
