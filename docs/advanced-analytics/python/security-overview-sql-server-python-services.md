---
title: "Общие сведения о безопасности для служб R SQL Server | Документация Майкрософт"
ms.custom: 
ms.date: 03/10/2017
ms.prod: sql-server-2016
ms.reviewer: 
ms.suite: 
ms.technology:
- r-services
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 8fc84754-7fbf-4c1b-9150-7d88680b3e68
caps.latest.revision: 9
author: jeannt
ms.author: jeannt
manager: jhubbard
ms.translationtype: MT
ms.sourcegitcommit: 876522142756bca05416a1afff3cf10467f4c7f1
ms.openlocfilehash: 6ddfc3ccb67d017dc618cfbb7e7680c0164f3a21
ms.contentlocale: ru-ru
ms.lasthandoff: 09/01/2017

---
# <a name="security-overview"></a>Общие сведения о безопасности

В этом разделе описывается архитектура безопасности, используемый для подключения [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] ядра и Python компоненты базы данных. Приведенные примеры процесса безопасности для двух стандартных сценариев: выполнение Python в SQL Server с помощью хранимой процедуры, а также с SQL Server в контексте удаленного Python.

## <a name="security-overview"></a>Общие сведения о безопасности

Объект [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] для запуска сценария Python в SQL Server требуется имя входа или учетная запись пользователя Windows. Определяет имя входа или учетной записи пользователя *субъекта безопасности*, которые должны иметь разрешение на доступ к базе данных, где данные извлекаются из. В зависимости от того, сценарий Python создает новые объекты или записывает новые данные, пользователю могут потребоваться разрешения на создание таблицы записи данных, или создать пользовательские функции или хранимые процедуры.

Следовательно, это является обязательной, каждый пользователь, запускающий код Python в [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] должно быть сопоставлено имя входа или учетную запись в базе данных. Это ограничение применяется независимо от ли скрипт отправляется из клиента обработки и анализа удаленных данных или работы с помощью T-SQL для хранимой процедуры.

Например, предположим, что созданный сценарий Python, который выполняется на вашем ноутбуке и вы хотите запустить этот код [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)]. Для этого должны быть выполнены приведенные ниже условия.

+ База данных должна разрешать удаленные подключения.
+ Имя входа SQL или учетной записью Windows, используемой для доступа к базе данных будет добавлен [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] на уровне экземпляра.
+ Имени входа SQL или пользователю Windows должны быть предоставлены разрешения на выполнение внешних скриптов. Обычно это разрешение может добавить только администратор базы данных.
+ Имя входа SQL или окно пользователя необходимо добавить как пользователь, с соответствующими разрешениями, в каждой базе данных, где выполняет сценарий Python любой из следующих операций:
    + извлечение данных;
    + запись или обновление данных;
    + создание новых объектов, например таблиц или хранимых процедур.

После имени входа или учетной записи пользователя Windows были подготовлены и предоставлены необходимые разрешения, можно выполнять код Python [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] с помощью объектов источника данных, предоставляемых **revoscalepy** библиотеки, или путем обращения к хранимому процедура, которая содержит скрипт Python.

Каждый раз, когда запускается скрипт на Python [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)], безопасность ядра базы данных возвращает контекст безопасности пользователя, запустившего задание и управляет сопоставлениями пользователя или имени входа к защищаемым объектам.

Таким образом все скрипты Python, инициированные с удаленного клиента необходимо указать сведения о имени входа или пользователя в строке подключения.


## <a name="interaction-of-includessnoversionmdincludesssnoversion-mdmd-security-and-launchpad-security"></a>Взаимодействие безопасности [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] и панели запуска

При выполнении сценария Python в контексте [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] компьютера, [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)] служба возвращает доступный рабочий учетную запись (учетная запись локального пользователя) из пула рабочих учетных записей, установленным для внешних процессов и использует учетную запись для этих рабочих Выполните задачи.

Например предположим, что запуск сценария Python вашими учетными данными домена Windows. SQL Server получить учетные данные и сопоставить его с доступных запуска рабочей учетной записью, *SQLRUser01*.

> [!NOTE]
> Имя группы рабочих учетных записей одинаково независимо от того, используется ли R или Python. Тем не менее отдельную группу создается для каждого экземпляра, где включен любой внешний язык.

После сопоставления с рабочей учетной записью [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)] создаст токен пользователя, который будет использоваться для запуска процессов. 

Когда все операции [!INCLUDE[ssNoVersion_md](../../includes/ssnoversion-md.md)] будут завершены, рабочая учетная запись пользователя будет помечена как свободная и вернется в пул.

Дополнительные сведения о [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)], в разделе [новых компонентов в SQL Server для поддержки интеграции Python](../../advanced-analytics/python/new-components-in-sql-server-to-support-python-integration.md).

> [!NOTE]
> Для запуска, чтобы управлять учетными записями работника и выполнять задания Python, группу, содержащую учетные записи работника, *SQLRUserGroup*, должна иметь разрешения «Локальный вход в систему»; в противном случае значение времени выполнения Python возможно, не запущен. По умолчанию это право предоставляется для всех новых локальных пользователей, но в некоторых организациях более строгие политики группы может быть принудительно применен, что подключение к SQL Server для задания Python блокировать рабочих учетных записей.

## <a name="security-of-worker-accounts"></a>Безопасность рабочих учетных записей

Сопоставление внешнего пользователя Windows или рабочей учетной записи входа SQL является допустимым только для времени существования SQL хранимой процедуры, которая выполняет сценарий Python.

Параллельные запросы, выполняемые с тем же именем входа, сопоставляются с той же рабочей учетной записью пользователя.

Каталоги, используемые для процессов, управляемых [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)], и каталогов, доступ ограничен. Для Python PythonLauncher выполняет эту задачу. Каждая учетная запись отдельного работника ограничен в собственную папку и нет доступа к файлам в папках выше свой собственный уровень. Однако рабочая учетная запись может чтение, запись или удаление дочерних объектов в рабочую папку сеанса, который был создан.

Дополнительные сведения о том, как изменить количество рабочих учетных записей, имена учетных записей или их пароли, см. в статье [Изменение пула учетных записей пользователей для служб R SQL Server](../../advanced-analytics/r/modify-the-user-account-pool-for-sql-server-r-services.md).


## <a name="security-isolation-for-multiple-external-scripts"></a>Изоляция безопасности для нескольких внешних скриптов

Механизм изоляции основан на учетных записях физических пользователей. Так как вспомогательные процессы запускаются для определенной языковой среды выполнения, каждая вспомогательная задача использует рабочую учетную запись, которую указала [!INCLUDE[rsql_launchpad_md](../../includes/rsql-launchpad-md.md)]. Если для выполнения задачи требуется несколько вспомогательных процессов, как в случае параллельных запросов, то для всех связанных задач будет использоваться одна рабочая учетная запись.

При этом доступ к файлам, используемым другими рабочими учетными записями, отсутствует.

Если вы являетесь администратором компьютера, вы можете просмотреть каталоги, созданные для каждого процесса. Каждый каталог определяется собственным идентификатором GUID сеанса.

## <a name="see-also"></a>См. также:

[Обзор архитектуры](../../advanced-analytics/python/architecture-overview-sql-server-python.md)

