---
title: Предоставление пользователям разрешения на службы машинного обучения SQL Server | Документация Майкрософт
description: Как предоставить пользователям разрешения на службы машинного обучения SQL Server.
ms.prod: sql
ms.technology: machine-learning
ms.date: 10/05/2018
ms.topic: conceptual
author: dphansen
ms.author: davidph
manager: cgronlun
ms.openlocfilehash: ad5c3fa3bf94bb88041c9ec81773b2a26013e517
ms.sourcegitcommit: 485e4e05d88813d2a8bb8e7296dbd721d125f940
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2018
ms.locfileid: "49100335"
---
# <a name="give-users-permission-to-sql-server-machine-learning-services"></a>Предоставление пользователям разрешения на службы машинного обучения SQL Server
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md-winonly](../../includes/appliesto-ss-xxxx-xxxx-xxx-md-winonly.md)]

В этой статье описывается, как предоставить разрешения на выполнение внешних скриптов в службах машинного обучения SQL Server и предоставить определение чтения, записи или данных разрешения языка DDL для баз данных пользователям.

Для выполнения внешних скриптов, которые используют данные SQL Server или выполняющихся с SQL Server в качестве контекста вычисления требуется имя входа SQL Server или учетной записи пользователя Windows.

Определяет имя входа или учетной записи пользователя *субъекта безопасности*, кто может потребоваться несколько уровней доступа, в зависимости от требований внешнего скрипта:

+ Разрешение на доступ к базе данных, где включены внешних скриптов.
+ Разрешения на чтение данных из защищенных объектов, таких как таблицы.
+ Возможность записи новых данных в таблицу, например модели или результаты оценки.
+ Возможность создания новых объектов, таких как таблицы, хранимые процедуры, использующие внешних скриптов, или пользовательских функций, использующих R или Python задания.
+ Право установить новые пакеты на компьютере SQL Server, или использовать пакеты, предоставленные группе пользователей.

Таким образом каждый пользователь, запускающий внешний скрипт с помощью SQL Server в качестве контекста выполнения должны сопоставляться с пользователем в базе данных. В группе безопасности SQL Server проще всего создать роли для управления наборами разрешений и назначить эти роли пользователей, а не по отдельности настроить разрешения.

Даже пользователи, при использовании R или Python из внешнего средства должны сопоставляться с именем входа или учетной записи в базе данных Если пользователю нужен для выполнения внешних скриптов в базе данных, или доступ к объектам базы данных и данных. Те же разрешения требуются ли отправляется из удаленного клиента обработки и анализа внешних скриптов, или к работе с помощью T-SQL хранимой процедуры.

Например предположим, вы создали внешнего скрипта, который выполняется на локальном компьютере, что вы хотите использовать этот код на SQL Server. Для этого должны быть выполнены приведенные ниже условия.

+ База данных должна разрешать удаленные подключения.
+ Имя входа SQL или учетной записи Windows, которая использовалась для доступа к базе данных был добавлен к SQL Server на уровне экземпляра.
+ Имя входа SQL или пользователя Windows должна иметь разрешение на выполнение внешних скриптов. Обычно это разрешение может добавить только администратор базы данных.
+ Имя входа SQL или пользователь Windows должен быть добавлен в качестве пользователя с соответствующими разрешениями, в каждой базе данных, где внешний скрипт выполняет любой из этих операций:
  + Извлечение данных.
  + Запись или обновление данных.
  + Создание новых объектов, например таблиц или хранимых процедур.

После имени входа или учетной записи пользователя Windows был подготовлен и предоставления необходимых разрешений, можно запустить внешний скрипт на сервере SQL Server с помощью объекта источника данных в R или **revoscalepy** библиотеки на языке Python, или путем обращения к хранимому процедура, которая содержит внешний скрипт.

Каждый раз, когда внешний скрипт запускается из SQL Server, безопасности ядра СУБД получает контекст безопасности пользователя, который запустил задание, а также управляет сопоставлением пользователя или имени входа к защищаемым объектам.

Таким образом все внешних скриптов, которые инициируются из удаленного клиента необходимо указать данные имени входа или пользователя как часть строки подключения.

<a name="permissions-external-script"></a> 

## <a name="permission-to-run-scripts"></a>Разрешения на запуск скриптов

Если вы установили [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] самостоятельно, а также при выполнении сценариев R или Python в собственном экземпляре, обычно выполнение скриптов с правами администратора. Таким образом имеется неявное разрешение совершение различных операций и все данные в базе данных.

Большинство пользователей, тем не менее, не имеют таких повышенных прав. Например пользователям в организации, использующим имена входа SQL для доступа к базе данных, как правило, нет повышенным уровнем разрешений. Таким образом для каждого пользователя, используя R или Python, необходимо предоставить пользователям служб машинного обучения разрешение для выполнения внешних скриптов в каждой базе данных, в которых используется язык. Вот как:

```SQL
USE <database_name>
GO
GRANT EXECUTE ANY EXTERNAL SCRIPT  TO [UserName]
```

> [!NOTE]
> Разрешения не относятся к поддерживаемый язык скриптов. Другими словами не отдельных уровней разрешений для скрипта R и сценарий Python. Если вам нужно поддерживать отдельные разрешения для этих языков, установите R и Python на отдельных экземплярах.

<a name="permissions-db"></a> 

## <a name="grant-databases-permissions"></a>GRANT, базы данных разрешения

Хотя пользователь запускает скрипты, пользователю может потребоваться считывать данные из других баз данных. Пользователь также может потребоваться создание новых таблиц для хранения результатов и записывать данные в таблицы.

Для каждой учетной записи пользователя Windows или имя входа SQL, на котором выполняется сценариев R или Python, убедитесь в наличии соответствующих разрешений на базу данных: `db_datareader` для чтения данных, `db_datawriter` для сохранения объектов в базу данных, или `db_ddladmin` для создания объектов таких как хранимые процедуры и таблицы содержащий обучена и сериализованных данных.

Например, следующая [!INCLUDE[tsql](../../includes/tsql-md.md)] инструкция предоставляет имя входа SQL *MySQLLogin* права на запуск запросов T-SQL *ML_Samples* базы данных. Для выполнения этой инструкции имя входа SQL уже должно существовать в контексте безопасности сервера.

```SQL
USE ML_Samples
GO
EXEC sp_addrolemember 'db_datareader', 'MySQLLogin'
```

## <a name="next-steps"></a>Следующие шаги

Дополнительные сведения о разрешениях, включенных в каждой роли, см. в разделе [роли уровня базы данных](../../relational-databases/security/authentication-access/database-level-roles.md).