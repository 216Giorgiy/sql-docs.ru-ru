---
title: 'Учебник: Включить пять самых медленных запросов пример мини-приложения - Studio операций SQL (Предварительная версия) | Документы Microsoft'
description: Этот учебник демонстрирует включение пять самых медленных запросов образец мини-приложения на панель мониторинга базы данных.
ms.custom: tools|sos
ms.date: 03/15/2018
ms.prod: sql
ms.reviewer: alayu; sstein
ms.suite: sql
ms.prod_service: sql-tools
ms.component: sos
ms.tgt_pltfrm: ''
ms.topic: tutorial
author: stevestein
ms.author: sstein
manager: craigg
ms.openlocfilehash: cef672411019a0c4402663597382eba426c2562b
ms.sourcegitcommit: b3bb41424249de198f22d9c6d40df4996f083aa6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/18/2018
---
# <a name="tutorial-add-the-five-slowest-queries-sample-widget-to-the-database-dashboard"></a>Учебник: Добавление *пять самых медленных запросов* пример мини-приложения на панель мониторинга базы данных

Этот учебник демонстрирует процесс добавления одного из [!INCLUDE[name-sos](../includes/name-sos-short.md)]элемента встроенного образца мини-приложения для *панель мониторинга базы данных* для быстрого просмотра пять самых медленных запросов базы данных. Вы также узнаете, как просмотреть сведения о медленных запросов и планов запросов с помощью [!INCLUDE[name-sos](../includes/name-sos-short.md)]его возможности. С помощью этого учебника вы узнаете, как:

> [!div class="checklist"]
> * Включение хранилища запросов в базе данных
> * Добавление предварительно построенного insight мини-приложения на панель мониторинга базы данных
> * Просмотр сведений о самых медленных запросов базы данных
> * Просмотр планов выполнения запросов для медленных запросов

[!INCLUDE[name-sos](../includes/name-sos-short.md)] включает в себя несколько insight мини-приложения out-of box. Этот учебник демонстрирует добавление *-данных — хранилище db анализ запросов* мини-приложения, но действия по существу одинаковы для добавления любого мини-приложения.

## <a name="prerequisites"></a>предварительные требования

Упражнений этого учебника требуется SQL Server или база данных SQL Azure *TutorialDB*. Для создания *TutorialDB* базы данных, выполните одно из следующих краткие руководства:

- [Подключения и запроса с помощью SQL Server [!INCLUDE[name-sos-short](../includes/name-sos-short.md)]](quickstart-sql-server.md)
- [Подключения и запроса с помощью базы данных SQL Azure [!INCLUDE[name-sos-short](../includes/name-sos-short.md)]](quickstart-sql-database.md)



## <a name="turn-on-query-store-for-your-database"></a>Включите хранилище запросов для базы данных

Мини-приложение в этом примере требуется *хранилище запросов* должно быть включено.

1. Щелкните правой кнопкой мыши **TutorialDB** базы данных (в **СЕРВЕРЫ** боковой панели) и выберите **новый запрос**.
2. Вставьте следующую инструкцию Transact-SQL (T-SQL) в редакторе запросов и нажмите кнопку **запуска**:

   ```sql
    ALTER DATABASE TutorialDB SET QUERY_STORE = ON
   ```

## <a name="add-the-slow-queries-widget-to-your-database-dashboard"></a>Добавление мини-приложения медленного выполнения запросов к панели мониторинга базы данных

Добавление *медленно мини-приложения запросов* на информационной панели измените *dashboard.database.widgets* в вашей *параметры пользователя* файла.

1. Откройте *параметры пользователя* , нажав клавишу **Ctrl + Shift + P** Открытие *палитры команд*.
2. Тип *параметры* в поле поиска и выберите **предпочтения: открыть параметры пользователя**.

   ![Открытие пользовательских параметров команды](./media/tutorial-qds-sql-server/open-user-settings.png)

2. Тип *мониторинга* в поиска параметров поле и найти **dashboard.database.widgets**.

   ![Параметры поиска](./media/tutorial-qds-sql-server/search-settings.png)

3. Для настройки **dashboard.database.widgets** нужно изменить параметры **dashboard.database.widgets** запись в **параметры пользователя** раздела (в столбце Правая панель). При наличии не **dashboard.database.widgets** в **параметры пользователя** статьи, наведите указатель мыши на **dashboard.database.widgets** текст в столбце параметры по умолчанию и нажмите кнопку значок карандаша, который отображается слева от текста и нажмите кнопку **Копировать параметры**. Если указано всплывающего окна **заменить в параметрах**, не щелкая! Последовательно выберите пункты **параметры пользователя** столбец вправо и найдите **dashboard.database.widgets** раздел и переход к следующему шагу.

4. В **dashboard.database.widgets** статьи, добавьте следующий код:

   ```json
        {
            "name": "slow queries widget",
            "gridItemConfig": {
                "sizex": 2,
                "sizey": 1
            },
            "widget": {
                "query-data-store-db-insight": null
            }
        },
    ```

1. Если это новое мини-приложения, добавляется в первый раз **dashboard.database.widgets** раздел должен выглядеть примерно так:

   ```json
   "dashboard.database.widgets": [
       {
           "name": "slow queries widget",
           "gridItemConfig": {
               "sizex": 2,
               "sizey": 1
           },
           "widget": {
               "query-data-store-db-insight": null
           }
       },
       {
           "name": "Tasks",
           "gridItemConfig": {
               "sizex": 1,
               "sizey": 1
           },
           "widget": {
               "tasks-widget": {}
           }
       },
       {
           "gridItemConfig": {
               "sizex": 1,
               "sizey": 2
           },
           "widget": {
               "explorer-widget": {}
           }
       }
   ]
   ```

1. Нажмите клавишу **Ctrl + S** для сохранения измененного **параметры пользователя**.

6. Откройте *панель мониторинга базы данных* , перейдя к **TutorialDB** в **СЕРВЕРЫ** боковой панели, щелкните правой кнопкой мыши и выберите **управление**.

   ![Откройте панель мониторинга](./media/tutorial-qds-sql-server/insight-open-dashboard.png)

7. Анализ мини-приложения отображается на панели мониторинга: 

   ![QDS мини-приложения](./media/tutorial-qds-sql-server/insight-qds-result.png)


## <a name="view-insight-details-for-more-information"></a>Просмотр сведений о insight Дополнительные сведения

1. Чтобы просмотреть дополнительные сведения о мини-приложение подробные сведения, нажмите кнопку с многоточием (**...** ) в верхнем правом углу экрана и выберите **Показать подробности**.
2. Чтобы отобразить дополнительные сведения для элемента, выберите любой элемент в **данные диаграммы** списка.

   ![Диалоговое окно детализации подробные сведения](./media/tutorial-qds-sql-server/insight-details-dialog.png)

3. Щелкните правой кнопкой мыши ячейку справа от **query_sql_txt** в **сведения об элементе** и нажмите кнопку **Копировать ячейку**.

4. Закрыть **Insights** области.

## <a name="view-the-query-plan"></a>Просмотр плана запроса 

1. Откройте новый редактор запросов, нажав клавишу **Ctrl + N**.

2. Вставьте текст запроса на предыдущих шагах, в редакторе.

3. Нажмите кнопку **объяснить**.

   ![Объясняется QDS подробные сведения](./media/tutorial-qds-sql-server/insight-qds-explain.png)

4. Просмотрите план выполнения запроса:

   ![showplan](./media/tutorial-qds-sql-server/showplan.png)

## <a name="save-and-open-a-query-plan"></a>Сохранить и открыть план запроса 

1. Откройте диалоговое окно детализации подробные сведения.
2. Выберите один из элементов запроса.
2. Щелкните правой кнопкой мыши **query_plan** значение и выберите **Копировать ячейку**

   ![План QDS аналитики](./media/tutorial-qds-sql-server/insight-qds-plan.png)

3. Нажмите клавишу **Ctrl + N** открыть новый редактор.

4. Вставьте скопированный план в редакторе.

5. Нажмите клавишу **Ctrl + S** сохраните файл и измените расширение файла на *.sqlplan*. *.sqlplan* не отображается в раскрывающемся списке расширение файла, поэтому просто введите его в. Для этого учебника назовите файл *slowquery.sqlplan*.

6. План запроса открывается в [!INCLUDE[name-sos](../includes/name-sos-short.md)]средство просмотра плана запроса:

   ![План QDS аналитики](./media/tutorial-qds-sql-server/sqlplan.png)


## <a name="next-steps"></a>Следующие шаги
В этом учебнике вы узнали, как:
> [!div class="checklist"]
> * Включение хранилища запросов в базе данных
> * Добавление мини-приложение подробные сведения на панель мониторинга базы данных
> * Просмотр сведений о самых медленных запросов базы данных
> * Просмотр планов выполнения запросов для медленных запросов


Чтобы узнать, как включить **таблицы использование пространства** образец анализ, выполните следующее руководство:

> [!div class="nextstepaction"]
> [Включить образец анализ таблицы пространства мини-приложения](tutorial-table-space-sql-server.md)