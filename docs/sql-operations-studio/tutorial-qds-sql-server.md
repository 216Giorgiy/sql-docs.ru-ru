---
title: "Учебник: Включить пять самых медленных запросов пример мини-приложения - Studio операций SQL (Предварительная версия) | Документы Microsoft"
description: "Этот учебник демонстрирует включение пять самых медленных запросов образец мини-приложения на панель мониторинга базы данных."
ms.custom: tools|sos
ms.date: 11/16/2017
ms.prod: sql-non-specified
ms.reviewer: alayu; erickang; sstein
ms.suite: sql
ms.prod_service: sql-tools
ms.component: sos
ms.tgt_pltfrm: 
ms.topic: tutorial
author: erickangMSFT
ms.author: erickang
manager: craigg
ms.workload: Inactive
ms.openlocfilehash: fc30051dff2bef07ac3e7d06aa98d92d4e05e79e
ms.sourcegitcommit: cc71f1027884462c359effb898390c8d97eaa414
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/21/2017
---
# <a name="tutorial-add-the-five-slowest-queries-sample-widget-to-the-database-dashboard"></a>Учебник: Добавление *пять самых медленных запросов* пример мини-приложения на панель мониторинга базы данных

Этот учебник демонстрирует процесс добавления одного из [!INCLUDE[name-sos](../includes/name-sos-short.md)]элемента встроенного образца мини-приложения для *панель мониторинга базы данных* для быстрого просмотра пять самых медленных запросов базы данных. Вы также узнаете, как просмотреть сведения о медленных запросов и планов запросов с помощью [!INCLUDE[name-sos](../includes/name-sos-short.md)]его возможности. С помощью этого учебника вы узнаете, как:

> [!div class="checklist"]
> * Включение хранилища запросов в базе данных
> * Добавление предварительно построенного insight мини-приложения на панель мониторинга базы данных
> * Просмотр сведений о самых медленных запросов базы данных
> * Просмотр планов выполнения запросов для медленных запросов

[!INCLUDE[name-sos](../includes/name-sos-short.md)]включает в себя несколько insight мини-приложения out-of box. Этот учебник демонстрирует добавление *-данных — хранилище db анализ запросов* мини-приложения, но действия по существу одинаковы для добавления любого мини-приложения.

## <a name="prerequisites"></a>предварительные требования

Упражнений этого учебника требуется SQL Server или база данных SQL Azure *TutorialDB*. Для создания *TutorialDB* базы данных, выполните одно из следующих краткие руководства:

- [Подключения и запроса с помощью SQL Server[!INCLUDE[name-sos-short](../includes/name-sos-short.md)]](quickstart-sql-server.md)
- [Подключения и запроса с помощью базы данных SQL Azure[!INCLUDE[name-sos-short](../includes/name-sos-short.md)]](quickstart-sql-database.md)



## <a name="turn-on-query-store-for-your-database"></a>Включите хранилище запросов для базы данных

Мини-приложение в этом примере требуется *хранилище запросов* быть включенным, так что выполнения следующую инструкцию Transact-SQL (T-SQL) к базе данных:

   ```sql
    ALTER DATABASE TutorialDB SET QUERY_STORE = ON
   ```

## <a name="add-an-insight-widget-to-your-database-dashboard"></a>Добавление мини-приложение представление панели мониторинга базы данных

Чтобы добавить мини-приложение представление панели мониторинга, изменение *dashboard.database.widgets* в ваш *параметры пользователя* файла.

1. Откройте *параметры пользователя* , нажав клавишу **Ctrl + Shift + P** Открытие *палитры команд*.
2. Тип *параметры* в поле поиска, а также из файлов доступных параметров выберите **предпочтения: открыть параметры пользователя**.

   ![Открытие пользовательских параметров команды](./media/tutorial-qds-sql-server/open-user-settings.png)

2. Тип *мониторинга* в поиска параметров поле и найти **dashboard.database.widgets**.

   ![Параметры поиска](./media/tutorial-qds-sql-server/search-settings.png)

3. Чтобы настроить **dashboard.database.widgets** параметр, наведите указатель мыши на значок карандаша слева от **dashboard.database.widgets** текста, нажмите кнопку **изменить**  >  **Копировать параметры**.

4. После копирования параметры **dashboard.database.widgets**, поместите курсор в конец строки после открывающей круглой скобкой, нажмите клавишу **ввод**и добавьте фигурную скобку следующим образом (закрывающая фигурная скобка автоматически появится):

   ```json
   "dashboard.database.widgets": [
   {}
   ```
5. Поместив курсор в фигурных скобках, нажмите клавишу **Ctrl + пробел** и выберите **имя**. 
6. Завершение настройки мини-приложения, чтобы он выглядел следующим образом:

   ```json
    "dashboard.database.widgets": [
        {
            "name": "slow queries widget",
            "gridItemConfig": {
                "sizex": 2,
                "sizey": 1
            },
            "widget": {
                "query-data-store-db-insight": null
            }
        }
    ...
    ```

5. Нажмите клавишу **Ctrl + S** для сохранения измененного **параметры пользователя**.

6. Откройте *панель мониторинга базы данных* , перейдя к **TutorialDB** в *серверы* боковой панели, щелкните правой кнопкой мыши и выберите **управление**.

   ![Откройте панель мониторинга](./media/tutorial-qds-sql-server/insight-open-dashboard.png)

7. Анализ мини-приложения отображается на панели мониторинга: 

   ![QDS мини-приложения](./media/tutorial-qds-sql-server/insight-qds-result.png)


## <a name="view-insight-details-for-more-information"></a>Просмотр сведений о insight Дополнительные сведения

1. Чтобы просмотреть дополнительные сведения о мини-приложение подробные сведения, нажмите кнопку с многоточием (**...** ) в верхнем правом углу экрана и выберите **Показать подробности**.
2. Чтобы отобразить дополнительные сведения для элемента, выберите любой элемент в **данные диаграммы** списка.

   ![Диалоговое окно детализации подробные сведения](./media/tutorial-qds-sql-server/insight-details-dialog.png)

3. Щелкните правой кнопкой мыши **query_sql_txt** в **сведения об элементе** и нажмите кнопку **Копировать ячейку**.

4. Закрыть **Insights** области.

## <a name="view-the-query-plan"></a>Просмотр плана запроса 

1. Откройте новый редактор запросов, нажав клавишу **Ctrl + N**.

2. Вставьте текст запроса на предыдущих шагах, в редакторе.

3. Нажмите кнопку **объяснить**.

   ![Объясняется QDS подробные сведения](./media/tutorial-qds-sql-server/insight-qds-explain.png)

4. Просмотрите план выполнения запроса:

   ![showplan](./media/tutorial-qds-sql-server/showplan.png)

## <a name="save-and-open-a-query-plan"></a>Сохранить и открыть план запроса 

1. Откройте диалоговое окно детализации подробные сведения.
2. Выберите один из элементов запроса.
2. Щелкните правой кнопкой мыши **query_plan** значение и выберите **Копировать ячейку**

   ![План QDS аналитики](./media/tutorial-qds-sql-server/insight-qds-plan.png)

3. Нажмите клавишу **Ctrl + N** открыть новый редактор.

4. Вставьте скопированный план в редакторе.

5. Нажмите клавишу **Ctrl + S** сохраните файл и измените расширение файла на *.sqlplan*. Для этого учебника назовите файл *slowquery.sqlplan*.

6. План запроса открывается в [!INCLUDE[name-sos](../includes/name-sos-short.md)]средство просмотра плана запроса:

   ![План QDS аналитики](./media/tutorial-qds-sql-server/sqlplan.png)


## <a name="next-steps"></a>Следующие шаги
В этом учебнике вы узнали, как:
> [!div class="checklist"]
> * Включение хранилища запросов в базе данных
> * Добавление мини-приложение подробные сведения на панель мониторинга базы данных
> * Просмотр сведений о самых медленных запросов базы данных
> * Просмотр планов выполнения запросов для медленных запросов


Чтобы узнать, как включить **таблицы использование пространства** образец анализ, выполните следующее руководство:

> [!div class="nextstepaction"]
> [Включить образец анализ таблицы пространства мини-приложения](tutorial-table-space-sql-server.md)