---
title: "Проектирование агрегатов (XMLA) | Документы Microsoft"
ms.custom: 
ms.date: 03/14/2017
ms.prod: sql-non-specified
ms.prod_service: analysis-services
ms.service: 
ms.component: multidimensional-models
ms.reviewer: 
ms.suite: sql
ms.technology:
- analysis-services
- docset-sql-devref
ms.tgt_pltfrm: 
ms.topic: reference
applies_to: SQL Server 2016 Preview
helpviewer_keywords:
- statistical information [XML for Analysis]
- batches [XML for Analysis]
- aggregations [Analysis Services], XML for Analysis
- XMLA, aggregations
- queries [XMLA]
- XML for Analysis, aggregations
- iterative aggregation process [XMLA]
ms.assetid: 4dd27afa-10c7-408d-bc24-ca74217ddbcb
caps.latest.revision: "14"
author: Minewiskan
ms.author: owend
manager: kfile
ms.workload: Inactive
ms.openlocfilehash: da7a6639d68c6b97725fea152d4d7f8be1224273
ms.sourcegitcommit: 44cd5c651488b5296fb679f6d43f50d068339a27
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/17/2017
---
# <a name="designing-aggregations-xmla"></a>Создание агрегатов (XMLA)
  Статические схемы связываются с секциями определенных групп мер, чтобы эти секции при хранении агрегатов использовали одинаковую структуру. Используя ту же структуру хранилища для секций позволяет легко определить секции, которые могут быть объединены с помощью [MergePartitions](../../analysis-services/xmla/xml-elements-commands/mergepartitions-element-xmla.md) команды. Дополнительные сведения о статистических схем см. в разделе [агрегаты и статистические схемы](../../analysis-services/multidimensional-models-olap-logical-cube-objects/aggregations-and-aggregation-designs.md).  
  
 Чтобы определить агрегаты для статистической схемы, можно использовать [DesignAggregations](../../analysis-services/xmla/xml-elements-commands/designaggregations-element-xmla.md) в XML для аналитики (XMLA) команду. **DesignAggregations** команда имеет свойства, которые определяют, какие статистической схемы для использования в качестве ссылки и для управления процессом проектирования по этой ссылке. С помощью **DesignAggregations** команда и его свойства, можно спроектировать агрегаты последовательно или в пакете и затем просмотреть итоговую статистику создания для оценки процесса проектирования.  
  
## <a name="specifying-an-aggregation-design"></a>Задание статистической схемы  
 [Объекта](../../analysis-services/xmla/xml-elements-properties/object-element-xmla.md) свойство **DesignAggregations** команда должна содержать ссылку на существующую статистическую схему. Ссылка содержит идентификаторы базы данных, куба, группы мер и статистической схемы. Если этой статистической схемы еще не существует, то возникнет ошибка.  
  
## <a name="controlling-the-design-process"></a>Управление процессом проектирования  
 Можно использовать следующие свойства **DesignAggregations** для управления алгоритм, используемый для определения агрегатов для статистической схемы:  
  
-   [Действия](../../analysis-services/xmla/xml-elements-properties/steps-element-xmla.md) свойство определяет, сколько итераций **DesignAggregations** команду следует предпринять перед возвратом управления клиентскому приложению.  
  
-   [Время](../../analysis-services/xmla/xml-elements-properties/time-element-xmla.md) свойство определяет, сколько миллисекунд **DesignAggregations** команду следует предпринять перед возвратом управления клиентскому приложению.  
  
-   [Оптимизации](../../analysis-services/xmla/xml-elements-properties/optimization-element-xmla.md) свойство определяет процент улучшения производительности **DesignAggregations** команду следует попытаться получить. При итеративном проектировании агрегатов это свойство необходимо передавать только в первой команде.  
  
-   [Хранения](../../analysis-services/xmla/xml-elements-properties/storage-element-xmla.md) свойство определяет Приблизительный объем дисков хранилища, в байтах, используемый **DesignAggregations** команды. При итеративном проектировании агрегатов это свойство необходимо передавать только в первой команде.  
  
-   [Материализовать](../../analysis-services/xmla/xml-elements-properties/materialize-element-xmla.md) свойство определяет, является ли **DesignAggregations** команду следует создавать агрегаты, определенные во время разработки. При последовательном проектировании агрегатов на время, пока они ни будут готовы к сохранению, этому свойству следует присвоить значение FALSE. При присваивании этому свойству значения TRUE текущий процесс проектирования завершается, а определенные агрегаты добавляются в указанную статистическую схему.  
  
## <a name="specifying-queries"></a>Задание запросов  
 В команде DesignAggregations поддержка оптимизации с учетом использования, включив один или несколько **запроса** элементов в [запросы](../../analysis-services/xmla/xml-elements-properties/queries-element-xmla.md) свойство. **Запросы** свойство может содержать один или несколько [запроса](../../analysis-services/xmla/xml-elements-properties/query-element-xmla.md) элементов. Если **запросы** не содержит свойство **запроса** , статистической схемы указываются в **объекта** элемент использует по умолчанию структура, содержащая общий набор агрегатов. Этот общий набор агрегатов разработан с учетом критериев, заданных в **оптимизации** и **хранения** свойства **DesignAggregations** команды.  
  
 Каждый элемент **Query** представляет собой целевой запрос, с помощью которого при проектировании можно определить агрегаты, охватывающие наиболее часто используемые запросы. Можно определить целевые запросы самостоятельно, или воспользуйтесь сведениями, хранящимися на экземпляре [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] в журнале запросов для получения сведений о наиболее часто используемые запросы. Мастер оптимизации с учетом использования извлекает целевые запросы на основе времени, использования или указанного пользователя при отправке с помощью журнала запросов **DesignAggregations** команды. Дополнительные сведения см. в разделе [на основе использования Справка F1 мастера оптимизации](http://msdn.microsoft.com/library/e5f5a938-ae7c-4f4e-9416-a7f94ac82763).  
  
 При итеративном проектировании агрегатов, достаточно передачи целевых запросов в первом **DesignAggregations** команда, поскольку [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] экземпляр сохраняет целевые запросы и использует их при выполнении последующих  **DesignAggregations** команд. После передачи целевых запросов в первой команде **DesignAggregations** многократной обработки, любые последующие команды **DesignAggregations** , в свойстве **Queries** которых содержатся поисковые запросы, приведут к формированию ошибки.  
  
 Элемент **Query** содержит значение с разделителями-запятыми, включающее следующие аргументы.  
  
 *Frequency*,*Dataset*[,*Dataset*...]  
  
 *Частота*  
 Весовой коэффициент, соответствующий количеству предыдущих выполнений данного запроса. Если элемент **Query** представляет новый запрос, значение *Frequency* представляет весовой коэффициент, использованный во время проектирования в целях оценки запроса. По мере увеличения частоты, увеличивается и вес, присвоенный запросу во время проектирования.  
  
 *Набор данных*  
 Числовая строка, определяющая атрибуты измерения, включаемые в запрос. Количество символов в данной строке должно совпадать с количеством атрибутов в измерении. Ноль (0) обозначает, что атрибут, находящийся на указанной порядковой позиции, в запрос для указанного измерения не включается, тогда как единица (1) обозначает включение атрибута, находящегося на указанной порядковой позиции, в запрос для указанного измерения.  
  
 Так, например, строка «011» относится к запросу, в котором задействовано измерение с тремя атрибутами, причем в запрос включены только второй и третий атрибут.  
  
> [!NOTE]  
>  Некоторые атрибуты не рассматриваются в наборе данных. Дополнительные сведения об исключенных атрибутах см. в разделе [элемента запроса &#40; XML для Аналитики &#41; ](../../analysis-services/xmla/xml-elements-properties/query-element-xmla.md).  
  
 Каждое измерение в группе мер, включающее статистическую схему, представлено значением *Dataset* в элементе **Query** . Порядок значений *Dataset* должен соответствовать порядку измерений, включенных в группу мер.  
  
## <a name="designing-aggregations-using-iterative-or-batch-processes"></a>Проектирование агрегатов при помощи последовательного или пакетного процесса  
 Можно использовать **DesignAggregations** команды в составе итеративного или пакетного процесса, в зависимости от интерактивные возможности, необходимые во время проектирования.  
  
### <a name="designing-aggregations-using-an-iterative-process"></a>Проектирование агрегатов при помощи последовательного процесса  
 Чтобы проектировать агрегаты, отправка нескольких **DesignAggregations** команд для точного управления процессом проектирования. Мастер статистических схем использует этот же подход для точного управления процессом проектирования. Дополнительные сведения см. в разделе [Справка F1 мастера статистических конструктора](http://msdn.microsoft.com/library/39e23cf1-6405-4fb6-bc14-ba103314362d).  
  
> [!NOTE]  
>  Для последовательного проектирования агрегатов требуется явный сеанс. Дополнительные сведения о явных сеансах см. в разделе [Управление соединениями и сеансами &#40; XML для Аналитики &#41; ](../../analysis-services/multidimensional-models-scripting-language-assl-xmla/managing-connections-and-sessions-xmla.md).  
  
 Чтобы начать последовательный процесс, необходимо отправить **DesignAggregations** команду, которая содержит следующие сведения:  
  
-   **Хранения** и **оптимизации** значения свойств на целевые всего процесса проектирования.  
  
-   **Действия** и **время** значения свойств, на которых ограничено первый шаг процесса проектирования.  
  
-   Если необходима оптимизация на основе использования **запросы** запрашивает свойство, содержащее цель на целевые всего процесса проектирования.  
  
-   **Материализовать** свойство в значение false. Присваивание этому свойству значения FALSE показывает, что по завершении этой команды процесс проектирования не будет сохранять определенные агрегаты в статистической схеме.  
  
 При первом **DesignAggregations** завершения команды, команда возвращает набор строк, содержащий статистику проектирования. Оценка этих данных позволит определить, следует ли продолжать процесс проектирования или же его необходимо завершить. Если процесс стоит продолжить, затем следует отправить другой **DesignAggregations** команду, которая содержит **действия** и **время** значения, с которыми обработать этот шаг разработки ограничено. После этого производится оценка итоговой статистики и определяется, следует ли продолжать процесс проектирования. Такой последовательный процесс отправки **DesignAggregations** команды и оценки результатов продолжается до достижения ваших целей и создан соответствующий набор определенных агрегатов.  
  
 После получения требуемого набора агрегатов, которые нужно, отправляется одна завершающая **DesignAggregations** команды. Этой конечной **DesignAggregations** команда должна иметь его **действия** которого задано значение 1 и его **материализовать** свойству задано значение true. С помощью этих параметров завершающая **DesignAggregations** команда завершает процесс проектирования и сохраняет определенный агрегат в статистической схеме.  
  
### <a name="designing-aggregations-using-a-batch-process"></a>Проектирование агрегатов при помощи пакетного процесса  
 Также можно создавать агрегаты в рамках пакетного процесса путем отправки одной **DesignAggregations** команду, которая содержит **действия**, **время**, **хранилища** , и **оптимизации** значения свойств, в которых целевым и ограниченный всего процесса проектирования. Если необходима оптимизация на основе использования поисковые запросы, в которых являются целью процесса проектирования также должно быть включено в **запросы** свойство. Также убедитесь, что **материализовать** задано значение true, чтобы процесс проектирования сохранил определенные агрегаты для статистической схемы, после завершения команды.  
  
 Пакетный процесс позволяет проектировать агрегаты как в рамках явного, так и неявного сеанса. Дополнительные сведения о явных и неявных сеансах см. в разделе [Управление соединениями и сеансами &#40; XML для Аналитики &#41; ](../../analysis-services/multidimensional-models-scripting-language-assl-xmla/managing-connections-and-sessions-xmla.md).  
  
## <a name="returning-design-statistics"></a>Возврат статистики проектирования  
 Когда **DesignAggregations** команда возвращает управления клиентскому приложению, команда возвращает набор строк, содержащий одну строку, которая представлена Статистика проектирования для команды. Набор строк содержит столбцы, перечисленные в следующей таблице.  
  
|Столбец|Data type|Description|  
|------------|---------------|-----------------|  
|Шаги|Целочисленный|Число шагов, выполняемых командой перед возвратом управления клиентскому приложению.|  
|Time|Long integer|Время (в миллисекундах), прошедшее до того момента, когда команда вернула управление клиентскому приложению.|  
|Optimization|Double|Примерный процент прироста производительности, достигнутый командой перед возвратом управления клиентскому приложению.|  
|Память|Long integer|Примерный объем в байтах, занятый командой перед возвратом управления клиентскому приложению.|  
|Aggregations|Long integer|Число статических схем, определенных командой перед возвратом управления клиентскому приложению.|  
|LastStep|Логическое значение|Указывает, представляют ли данные в наборе строк последний шаг в процессе проектирования. Если **материализовать** команды было задано значение true, значение этого столбца установлено значение true.|  
  
 Можно использовать Статистика проектирования, которая содержится в наборе строк, возвращаемом после выполнения каждой **DesignAggregations** команды в обоих итеративный и при пакетном проектировании. При последовательном проектировании она может использоваться для определения и отображения хода выполнения. При проектировании агрегатов в пакетном режиме эту статистику можно использовать для определения количества агрегатов, созданных командой.  
  
## <a name="see-also"></a>См. также:  
 [Разработка с использованием XMLA в службах Analysis Services](../../analysis-services/multidimensional-models-scripting-language-assl-xmla/developing-with-xmla-in-analysis-services.md)  
  
  
