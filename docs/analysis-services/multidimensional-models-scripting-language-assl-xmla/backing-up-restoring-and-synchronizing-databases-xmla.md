---
title: "Резервное копирование, восстановление и синхронизация баз данных (XMLA) | Документы Microsoft"
ms.custom: 
ms.date: 03/14/2017
ms.prod: sql-non-specified
ms.prod_service: analysis-services
ms.service: 
ms.component: multidimensional-models
ms.reviewer: 
ms.suite: sql
ms.technology:
- analysis-services
- docset-sql-devref
ms.tgt_pltfrm: 
ms.topic: reference
applies_to: SQL Server 2016 Preview
helpviewer_keywords:
- restoring databases [XML for Analysis]
- backing up databases [XML for Analysis]
- database backups [XML for Analysis]
- synchronization [XML for Analysis]
- database restores [XML for Analysis]
ms.assetid: 6c021b2e-6ad0-444e-b23f-4b5f72ce084b
caps.latest.revision: "22"
author: Minewiskan
ms.author: owend
manager: kfile
ms.workload: Inactive
ms.openlocfilehash: 6d23fcaca8e9ad0d73d1e79566d2fa11348382a3
ms.sourcegitcommit: 44cd5c651488b5296fb679f6d43f50d068339a27
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/17/2017
---
# <a name="backing-up-restoring-and-synchronizing-databases-xmla"></a>Резервное копирование, восстановление и синхронизация баз данных (XMLA)
  В XML для аналитики есть три команды для резервного копирования, восстановления и синхронизации баз данных.  
  
-   [Резервного копирования](../../analysis-services/xmla/xml-elements-commands/backup-element-xmla.md) команда создает резервную копию [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных с помощью [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] (ABF), как описано в разделе [резервное копирование баз данных](#backing_up_databases).  
  
-   [Восстановить](../../analysis-services/xmla/xml-elements-commands/restore-element-xmla.md) восстанавливает [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] из базы данных в ABF-файле, как описано в разделе [восстановление баз данных](#restoring_databases).  
  
-   [Synchronize](../../analysis-services/xmla/xml-elements-commands/synchronize-element-xmla.md) синхронизирует одну [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных с данными и метаданными другой базы данных, как описано в разделе [синхронизация баз данных](#synchronizing_databases).  
  
##  <a name="backing_up_databases"></a>Резервное копирование баз данных  
 Как упоминалось ранее, **резервного копирования** команда создает резервную копию указанного [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных в файл резервной копии. **Резервного копирования** команда имеет различные свойства, позволяющие указывать базу данных для резервного копирования, файл резервной копии для использования, как создать резервную копию определения безопасности и удаленные секции для резервного копирования.  
  
> [!IMPORTANT]  
>  У учетной записи служб Analysis Services должны быть разрешения на запись в папку резервного копирования, заданную для каждого из файлов. Кроме того, пользователь должен быть членом одной из следующих ролей: роли администратора в экземпляре служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] или роли базы данных с разрешениями «Полный доступ (Администратор)» в базе данных, для которой создается резервная копия.  
  
### <a name="specifying-the-database-and-backup-file"></a>Задание базы данных и файла резервной копии  
 Чтобы указать базу данных для резервного копирования, необходимо задать [объекта](../../analysis-services/xmla/xml-elements-properties/object-element-xmla.md) свойство **резервного копирования** команды. **Объекта** свойство должно содержать идентификатор объекта для базы данных, или возникнет ошибка.  
  
 Чтобы указать файл, чтобы создать и использовать для резервного копирования, необходимо задать [файл](../../analysis-services/xmla/xml-elements-properties/file-element-xmla.md) свойство **резервного копирования** команды. **Файла** должно быть равно UNC-путь и имя создаваемого файла резервной копии.  
  
 Помимо указания файла, в который будет произведено резервирование, для него также можно задать следующие параметры.  
  
-   Если задать [AllowOverwrite](../../analysis-services/xmla/xml-elements-properties/allowoverwrite-element-xmla.md) значение true, **резервного копирования** команда перезаписывает файл резервной копии, если указанный файл уже существует. Если задать **AllowOverwrite** свойству значение false, ошибка возникает, если указанный файл резервной копии уже существует.  
  
-   Если задать [ApplyCompression](../../analysis-services/xmla/xml-elements-properties/applycompression-element-xmla.md) значение true, файл резервной копии сжат после создания файла.  
  
-   Если задать [пароль](../../analysis-services/xmla/xml-elements-properties/password-element-xmla.md) свойство любое непустое значение, файл резервной копии зашифрован с помощью указанного пароля.  
  
    > [!IMPORTANT]  
    >  Если **ApplyCompression** и **пароль** не указаны, файл резервной копии сохраняет имена пользователей и пароли, содержащиеся в строке подключения в виде открытого текста. Данные, хранящиеся в виде открытого текста, можно извлечь. Для повышения безопасности используйте **ApplyCompression** и **пароль** параметры как сжать и зашифровать файл резервной копии.  
  
### <a name="backing-up-security-settings"></a>Резервное копирование параметров безопасности  
 [Безопасности](../../analysis-services/xmla/xml-elements-properties/security-element-xmla.md) свойство определяет, является ли **резервного копирования** команда создает резервную копию определения безопасности, такие как роли и разрешения, определенные в [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных. **Безопасности** свойства также определяет, включает ли файл резервной копии учетные записи пользователей и группы, определенные как члены определений безопасности.  
  
 Значение **безопасности** свойство может принимать значение одной из строк, перечисленных в следующей таблице.  
  
|Значение|Description|  
|-----------|-----------------|  
|*SkipMembership*|Включает определения безопасности, но исключает сведения о членстве из файла резервной копии.|  
|*CopyAll*|Включает определения безопасности и сведения о членстве в файл резервной копии.|  
|*IgnoreSecurity*|Исключает определения безопасности из файла резервной копии.|  
  
### <a name="backing-up-remote-partitions"></a>Резервирование удаленных секций  
 Резервное копирование удаленных секций в [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных, задайте [BackupRemotePartitions](../../analysis-services/xmla/xml-elements-properties/backupremotepartitions-element-xmla.md) свойство **резервного копирования** команду значение true. Этот параметр вызывает **резервного копирования** команду, чтобы создать удаленный файл резервной копии для каждого удаленного источника данных, используемый для хранения удаленных секций базы данных.  
  
 Для каждого удаленного источника данных для резервного копирования, можно задать соответствующий файл резервной копии, включая [расположение](../../analysis-services/xmla/xml-elements-properties/location-element-xmla.md) элемент в [расположения](../../analysis-services/xmla/xml-elements-properties/locations-element-xmla.md) свойство **резервного копирования** команда. **Расположение** элемента должно быть его **файл** , имеющим значение UNC-путь и имя удаленного файла резервной копии и его [DataSourceID](../../analysis-services/xmla/xml-elements-properties/datasourceid-element-xmla.md) значение свойства с помощью идентификатора Удаленный источник данных в базе данных.  
  
##  <a name="restoring_databases"></a>Восстановление баз данных  
 **Восстановить** команда восстанавливает указанную [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных из файла резервной копии. **Восстановить** команда имеет различные свойства, позволяющие указывать базу данных для восстановления файла резервной копии, восстановление определений безопасности, удаленные секции для хранения и перемещения реляционной OLAP (ROLAP) объекты.  
  
> [!IMPORTANT]  
>  Пользователь, выполняющий команду восстановления, должен иметь разрешение на чтение из папки резервного копирования, указанной для каждого восстанавливаемого файла. Чтобы восстановить базу данных служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] , которая не установлена на сервере, пользователь также должен быть членом роли сервера для этого экземпляра служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] . Чтобы перезаписать базу данных служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)], пользователь должен входить в одну из следующих ролей: член роли сервера для экземпляра служб [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] или член роли базы данных с разрешениями «Полный доступ» («Администратор») в восстанавливаемой базе данных.  
  
> [!NOTE]  
>  После восстановления существующей базы данных пользователь, выполнявший восстановление, может утратить доступ к этой базе данных. Потеря доступа может произойти в случае, если на время создания резервной копии этот пользователь не был членом роли сервера и роли базы данных с разрешением «Полный доступ (Администратор)».  
  
### <a name="specifying-the-database-and-backup-file"></a>Задание базы данных и файла резервной копии  
 **DatabaseName** свойство **восстановить** команды должны содержать идентификатор объекта для базы данных, или возникнет ошибка. Если указанная база данных уже существует, **AllowOverwrite** свойство определяет, следует ли перезаписывать существующие базы данных. Если **AllowOverwrite** свойство имеет значение false, и указанная база данных уже существует, возникает ошибка.  
  
 Необходимо задать **файл** свойство **восстановить** командой UNC-путь и имя файла резервной копии для восстановления к указанной базе данных. Можно также задать **пароль** свойство для указанного файла резервной копии. Если **пароль** задано любое непустое значение, файл резервной копии будет расшифрован при помощи указанного пароля. Если файл резервной копии не был расшифрован либо если указанный пароль не совпадает с паролем, использованным для шифрования файла резервной копии, возникает ошибка.  
  
### <a name="restoring-security-settings"></a>Восстановление параметров безопасности  
 **Безопасности** свойство определяет, является ли **восстановления** команда восстанавливает определения безопасности, такие как роли и разрешения, определенные в [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных. **Безопасности** также определяет свойство ли **восстановить** команда содержит учетные записи пользователей и группы, определенные как члены определений безопасности, как часть процесса восстановления.  
  
 Значением этого элемента может быть только одна из строк в следующей таблице.  
  
|Значение|Description|  
|-----------|-----------------|  
|*SkipMembership*|Включает определения безопасности, но исключает сведения о членстве из базы данных.|  
|*CopyAll*|Включает определения безопасности и сведения о членстве в базу данных.|  
|*IgnoreSecurity*|Исключает определения безопасности из базы данных.|  
  
### <a name="restoring-remote-partitions"></a>Восстановление удаленных секций  
 Для каждого удаленного файла резервной копии, созданные при выполнении предыдущей **резервного копирования** команды, вы можете восстановить удаленную секцию, связанную, включая **расположение** элемент в **расположения**свойство **восстановить** команды. [DataSourceType](../../analysis-services/xmla/xml-elements-properties/datasourcetype-element-xmla.md) свойства каждого **расположение** элемент следует исключить либо явно задано значение *удаленного*.  
  
 Для каждого указанного **расположение** элемент, [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] экземпляр обращается к удаленным данным источника, заданного в **DataSourceID** свойство, чтобы восстановить секции, определенные в удаленный файл резервной копии указанный в **файл** свойство. Помимо **DataSourceID** и **файл** свойства, следующие свойства доступны для каждого **расположение** элемент, используемый для восстановления удаленной секции:  
  
-   Чтобы переопределить строку подключения для удаленного источника данных указан в **DataSourceID**, можно задать **ConnectionString** свойство **расположение** элемента другую строку соединения. **Восстановить** команда будет использовать строку подключения, которая содержится в **ConnectionString** свойство. Если **ConnectionString** не указан, **восстановить** команда использует строку подключения, хранимые в файле резервной копии для указанного удаленного источника данных. Можно использовать **ConnectionString** параметр, чтобы переместить удаленной секции в другой удаленный экземпляр. Однако нельзя использовать **ConnectionString** параметр для восстановления удаленной секции в тот же экземпляр, который содержит восстановленную базу данных. Другими словами, нельзя использовать **ConnectionString** свойство, чтобы исключить удаленной секции в локальную секцию.  
  
-   Для каждой первоначальной папки, используемый для хранения удаленных секций на удаленный источник данных, можно указать [папки](../../analysis-services/xmla/xml-elements-properties/folder-element-xmla.md) , чтобы указать новую папку для восстановления удаленных секций, хранящихся в исходной папке. Если **папки** элемент не указан, **восстановить** команда использует первоначальные папки, указанные для удаленных секций, содержащихся в удаленный файл резервной копии.  
  
### <a name="relocating-rolap-objects"></a>Перемещение объектов ROLAP  
 **Восстановить** команда не может восстанавливать агрегаты или данные для объектов, использующих режим хранения ROLAP, поскольку такие сведения хранятся в таблицах в базовом реляционном источнике данных. Однако метаданные объектов ROLAP восстановить можно. Чтобы восстановить метаданные объекта ROLAP, **восстановить** команда создает повторно структуру таблицы в реляционном источнике данных.  
  
 Можно использовать **расположение** элемент в **восстановить** команду для перемещения объектов ROLAP. Для каждого **расположение** элемент, используемый для перемещения источника данных, **DataSourceType** свойства должны задаваться явным образом *локальной*. Также необходимо задать **ConnectionString** свойство **расположение** элемент к строке подключения новое расположение. Во время восстановления **восстановить** команда заменит строку подключения для источника данных, определенного **DataSourceID** свойство **расположение** элемент со значением **ConnectionString** свойство **расположение** элемента.  
  
##  <a name="synchronizing_databases"></a>Синхронизация баз данных  
 **Synchronize** команда синхронизирует данные и метаданные указанной [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] базы данных с другой базой данных. **Synchronize** команда имеет различные свойства, которые позволяют указать базы данных-источника, как синхронизировать определения безопасности, удаленные секции для синхронизации и синхронизацию объектов ROLAP.  
  
> [!NOTE]  
>  **Synchronize** команду можно выполнить только администраторы сервера и администраторами баз данных. Исходная и целевая базы данных должны иметь одинаковый уровень совместимости.  
  
### <a name="specifying-the-source-database"></a>Указание базы данных-источника  
 [Источника](../../analysis-services/xmla/xml-elements-properties/source-element-xmla.md) свойство **Synchronize** команда содержит два свойства **ConnectionString** и **объекта**. **ConnectionString** свойство содержит строку подключения к экземпляру, содержащему базы данных-источника, и **объекта** свойство содержит идентификатор объекта для базы данных-источника.  
  
 Целевая база данных является текущей базы данных для сеанса, в котором **Synchronize** выполняется команда.  
  
 Если **ApplyCompression** свойство **Synchronize** команды установлено значение true, сведения, передаваемые из источника базы данных с целевой базой данных сжимается до его отправки.  
  
### <a name="synchronizing-security-settings"></a>Синхронизация параметров безопасности  
 [SynchronizeSecurity](../../analysis-services/xmla/xml-elements-properties/synchronizesecurity-element-xmla.md) свойство определяет, является ли **Synchronize** команда синхронизирует определения безопасности, такие как роли и разрешения, определенные в исходной базе данных. **SynchronizeSecurity** свойства также определяет, является ли **синхронизировать** команда содержит учетные записи пользователей и группы, определенные как члены определений безопасности.  
  
 Значением этого элемента может быть только одна из строк в следующей таблице.  
  
|Значение|Description|  
|-----------|-----------------|  
|*SkipMembership*|Включает определения безопасности, но исключает сведения о членстве из целевой базы данных.|  
|*CopyAll*|Включает определения безопасности и сведения о членстве в целевую базу данных.|  
|*IgnoreSecurity*|Исключает определения безопасности из целевой базы данных.|  
  
### <a name="synchronizing-remote-partitions"></a>Синхронизация удаленных секций  
 Для каждого удаленного источника данных, существующую в исходной базе данных, можно синхронизировать каждого удаленную секцию, связанную, включая **расположение** элемент в **расположения** свойство  **Синхронизировать** команды. Для каждого **расположение** элемент, **DataSourceType** следует исключить либо явно задано значение свойства *удаленного*.  
  
 Для определения и подключиться к удаленному источнику данных в целевую базу данных, **Synchronize** команда использует строку подключения, определенные в **ConnectionString** свойство **расположение**  элемент. **Synchronize** затем команда использует **DataSourceID** свойство **расположение** элемент, чтобы определить, какие удаленные секции для синхронизации. **Synchronize**команда синхронизирует удаленных секций на удаленный источник данных, указываемой **DataSourceID** свойства базы данных-источника с удаленным источником данных, указываемой  **DataSourceID** свойство в целевой базе данных.  
  
 Для каждой первоначальной папки, используемый для хранения удаленных секций на удаленный источник данных для базы данных-источника, можно также указать **папки** элемент в **расположение** элемента. **Папки** элемент указывает новую папку для целевой базы данных, в которой следует синхронизировать все удаленные секции, хранящиеся в первоначальной папке на удаленный источник данных. Если **папки** элемент не указан, команда Synchronize будет использовать первоначальные папки, указанные для удаленных секций, содержащихся в базы данных-источника.  
  
### <a name="synchronizing-rolap-objects"></a>Синхронизация объектов ROLAP  
 **Synchronize** команды не удалось синхронизировать агрегаты или данные для объектов, использующих режим хранения ROLAP, поскольку такие сведения хранятся в таблицах в базовом реляционном источнике данных. Однако метаданные объектов ROLAP синхронизировать можно. Синхронизация метаданных, **Synchronize** команду повторно создает структуру таблицы в реляционном источнике данных.  
  
 Можно использовать **расположение** элемент в команде Synchronize для синхронизации объектов ROLAP. Для каждого **расположение** элемент, используемый для перемещения источника данных, **DataSourceType** свойства должны задаваться явным образом *локальной*. . Также необходимо задать **ConnectionString** свойство **расположение** элемент к строке подключения новое расположение. Во время синхронизации **Synchronize** команда заменит строку подключения для источника данных, определенного **DataSourceID** свойство **расположение** элемент со значением **ConnectionString** свойство **расположение** элемента.  
  
## <a name="see-also"></a>См. также:  
 [Резервный элемент &#40; XML для Аналитики &#41;](../../analysis-services/xmla/xml-elements-commands/backup-element-xmla.md)   
 [Восстановить элемент &#40; XML для Аналитики &#41;](../../analysis-services/xmla/xml-elements-commands/restore-element-xmla.md)   
 [Элемент Synchronize (XMLA)](../../analysis-services/xmla/xml-elements-commands/synchronize-element-xmla.md)   
 [Создание и восстановление резервных копий баз данных служб Analysis Services](../../analysis-services/multidimensional-models/backup-and-restore-of-analysis-services-databases.md)  
  
  
