---
title: 'Analysis Services tutorial занятие 4: Создание связей | Документы Microsoft'
ms.date: 05/08/2018
ms.prod: sql
ms.technology: analysis-services
ms.custom: tabular-models
ms.topic: tutorial
ms.author: owend
ms.reviewer: owend
author: minewiskan
manager: kfile
ms.openlocfilehash: 564126e1de4a8019778e33718b48462f633ae232
ms.sourcegitcommit: c12a7416d1996a3bcce3ebf4a3c9abe61b02fb9e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/10/2018
---
# <a name="create-relationships"></a>Создавать связи

[!INCLUDE[ssas-appliesto-sql2017-later-aas](../../includes/ssas-appliesto-sql2017-later-aas.md)]

На этом занятии проверьте связи, которые были автоматически созданы во время импорта данных и добавить новые связи между различными таблицами. Связь — это соединение между двумя таблицами, которое определяет, каким образом должны соотноситься данные этих таблиц. Например, таблица DimProduct и таблица DimProductSubcategory содержат связь на основе того факта, что каждый продукт принадлежит подкатегории. Дополнительные сведения см. в разделе [связи](../tabular-models/relationships-ssas-tabular.md).
  
Предполагаемое время выполнения данного занятия: **10 минут.**  
  
## <a name="prerequisites"></a>предварительные требования  

В этой статье является частью учебника по табличному моделированию, который необходимо изучать по порядку. Перед выполнением задач этого занятия, необходимо завершить предыдущее занятие: [занятия 3: пометить как таблицу дат](../tutorial-tabular-1400/as-lesson-3-mark-as-date-table.md). 
  
## <a name="review-existing-relationships-and-add-new-relationships"></a>Обзор существующих связей и добавление новых  

Во время импорта данных с помощью получения данных, полученный семь таблиц из базы данных AdventureWorksDW. Как правило при импорте данных из реляционного источника существующие связи автоматически импортируются вместе с данными. Чтобы получить данные для автоматического создания связей в модели данных должен быть связей между таблицами в источнике данных.

Прежде чем продолжить создание модели, следует проверить эти связи между таблицами были созданы неправильно. В этом учебнике также созданы три новые связи.  

  
#### <a name="to-review-existing-relationships"></a>Просмотр существующих связей  
  
1.  Нажмите кнопку **модели** меню > **представление модели** > **представление диаграммы**.  

    Конструктор моделей появится в представлении диаграммы — графическом формате отображения всех таблиц можно импортировать линиями. Линии между таблицами указывают на связи, которые были автоматически созданы во время импорта данных.
    
    ![как схема lesson4](../tutorial-tabular-1400/media/as-lesson4-diagram.png)
  
    > [!NOTE]
    > Если вы не видите все связи между таблицами, скорее всего, это означает, что нет ни одной связи между этими таблицами в источнике данных.

    Включите любое количество таблиц можно с помощью мини-карту элементов управления в правом нижнем углу конструктора моделей. Можно также выбирать и перетаскивать таблицы в другие места. Например, их можно свести вместе или разместить в определенном порядке. Перемещение таблиц не влияет на связи между таблицами. Чтобы просмотреть все столбцы в определенной таблице, щелкните и перетащите край таблицы, чтобы увеличить или уменьшить его.  
  
2.  Щелкните сплошную линию между **DimCustomer** таблицы и **DimGeography** таблицы. Сплошная линия между этими двумя таблицами показывает, что связь активна, то есть, он используется по умолчанию при расчете DAX-формул.  
  
    Обратите внимание **GeographyKey** столбца в **DimCustomer** таблицы и **GeographyKey** столбца в **DimGeography** таблицы появились в поле. Эти столбцы используются в связи. Свойства связи также отображаются в окне **Свойства** .  
  
    > [!TIP]  
    > Можно также использовать диалоговое окно «Управление связями» для отображения связей между всеми таблицами в табличном формате. Щелкните правой кнопкой мыши в обозревателе моделей табличных **связи** > **управление связями**.
  
3.  Убедитесь, что следующие связи были созданы во время каждой из таблиц были импортированы из базы данных AdventureWorksDW:  
  
    |Активен|Таблица|Связанная таблица подстановки|  
    |----------|---------|------------------------|  
    |Да|**DimCustomer [GeographyKey]**|**DimGeography [GeographyKey]**|  
    |Да|**DimProduct [ProductSubcategoryKey]**|**DimProductSubcategory [ProductSubcategoryKey]**|  
    |Да|**DimProductSubcategory [ProductCategoryKey]**|**DimProductCategory [ProductCategoryKey]**|  
    |Да|**FactInternetSales [CustomerKey]**|**DimCustomer [CustomerKey]**|  
    |Да|**FactInternetSales [ProductKey]**|**DimProduct [ProductKey]**|  
  
    Если отсутствуют какие-либо связи, проверьте модель включает следующие таблицы: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory DimProductSubcategory и FactInternetSales. Таблиц из одного подключения к источнику данных при импорте в отдельных постоянно, любых связей между этими таблицами не создаются и должны быть созданы вручную. Если связи не отображается, это означает, что в источнике данных нет ни одной связи. Их можно создать вручную в модели данных.

### <a name="take-a-closer-look"></a>Более подробно

Обратите внимание, в представлении диаграммы, стрелки, звездочку и число строк, которые показывают связи между таблицами.

![как lesson4 строки](../tutorial-tabular-1400/media/as-lesson4-line.png)

Стрелка показывает направление фильтра. Звездочка указывает, что эта таблица *много* стороне отношения количества элементов, и показывает, что эта таблица *один* стороны связи. Если нужно изменить связь. Например можно изменить направление фильтрации отношение или количество элементов, дважды щелкните по линии связи, чтобы открыть диалоговое окно Изменение связи.

![как изменить lesson4](../tutorial-tabular-1400/media/as-lesson4-edit.png)

Эти функции предназначены для моделирования данных и выходит за рамки данного руководства. Дополнительные сведения см. в разделе [двунаправленные кросс-фильтры для табличных моделей в службах Analysis Services](../tabular-models/bi-directional-cross-filters-tabular-models-analysis-services.md).

В некоторых случаях может потребоваться создание дополнительных связей между таблицами в модели, чтобы поддержать определенную бизнес-логику. В этом учебнике необходимо создать три дополнительные связи между таблицами FactInternetSales и DimDate.  
  
#### <a name="to-add-new-relationships-between-tables"></a>Добавление новых связей между таблицами  
  
1.  В конструкторе моделей в **FactInternetSales** таблицы, нажмите и удерживайте **OrderDate** столбец, затем перетащите курсор в **даты** столбца в **DimDate** таблицы, а затем отпустите.  

    Появится сплошная линия, показывающая создана активная связь между **OrderDate** столбца в **продажи через Интернет** таблицы и **даты** столбца в **даты** таблицы. 
  
      ![AS-lesson4-new](../tutorial-tabular-1400/media/as-lesson4-new.png) 
  
    > [!NOTE]  
    > При создании связи, количества элементов и фильтр направление между первичной таблицей и связанной таблицей поиска выбирается автоматически.  
  
2.  В **FactInternetSales** щелкните и удерживайте **DueDate** столбец, затем перетащите курсор в **даты** столбца в **DimDate** таблицы, а затем отпустите.  
  
    Появится пунктирная линия, показывающая создана неактивная связь между **DueDate** столбца в **FactInternetSales** таблицы и **даты** столбца в **DimDate** таблицы. Между таблицами можно создавать несколько связей, но одновременно может быть активна только одна связь. Неактивные связи можно сделать активным для выполнения специальных агрегатов в пользовательских выражений DAX.  
  
3.  Наконец создайте еще одну связь. В **FactInternetSales** щелкните и удерживайте **ShipDate** столбец, затем перетащите курсор в **даты** столбца в **DimDate** таблицы, а затем отпустите.  
    
     ![как newinactive lesson4](../tutorial-tabular-1400/media/as-lesson4-newinactive.png)
  
## <a name="whats-next"></a>Дальнейшие действия

[Занятие 5: Создание вычисляемых столбцов](../tutorial-tabular-1400/as-lesson-5-create-calculated-columns.md).
  
  
  
