---
title: "Свойства памяти | Документы Microsoft"
ms.custom: 
ms.date: 11/17/2016
ms.prod: analysis-services
ms.prod_service: analysis-services
ms.service: 
ms.component: 
ms.reviewer: 
ms.suite: pro-bi
ms.technology: 
ms.tgt_pltfrm: 
ms.topic: reference
helpviewer_keywords:
- LowMemoryLimit property
- MinimumAllocatedMemory property
- MidMemoryPrice property
- MemoryHeapType property
- memory [Analysis Services]
- DefaultPagesCountToReuse property
- TotalMemoryLimit property
- SessionMemoryLimit property
- VirtualMemoryLimit property
- WaitCountIfHighMemory property
- HighMemoryPrice property
- HeapTypeForObjects property
ms.assetid: 085f5195-7b2c-411a-9813-0ff5c6066d13
caps.latest.revision: "26"
author: Minewiskan
ms.author: owend
manager: kfile
ms.workload: On Demand
ms.openlocfilehash: 8aa2f5f5c3e39680a9b0fe41e1b92443db4c8509
ms.sourcegitcommit: f486d12078a45c87b0fcf52270b904ca7b0c7fc8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2018
---
# <a name="memory-properties"></a>Свойства памяти
[!INCLUDE[ssas-appliesto-sqlas](../../includes/ssas-appliesto-sqlas.md)][!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] предварительно размещает небольшой объем памяти в начале вверх, чтобы немедленно обработки запросов. Дополнительная память выделяется по мере увеличения числа запросов и рабочей нагрузки. 
  
  С помощью параметров конфигурации можно контролировать пороговые уровни нагрузки, при которых будет выделяться дополнительная память. Например, параметр **HardMemoryLimit** задает принудительное состояние нехватки памяти (по умолчанию этот порог неактивен), при котором запросы отклоняются до тех пор, пока не будет доступно больше ресурсов.
  
 **Область применения:** многомерный или табличный режим сервера, если не указано иное.  
 
## <a name="default-memory-configuration"></a>Конфигурация памяти по умолчанию

В конфигурации по умолчанию каждому экземпляру служб Analysis Services при загрузке выделяется небольшой объем ОЗУ (от 40 до 50 МБ), даже если экземпляр неактивен. 

Помните, что параметры конфигурации задаются для каждого экземпляра отдельно. Если вы используете несколько экземпляров служб Analysis Services, например, табличный и многомерный экземпляры одного и того же оборудования, каждый экземпляр получает собственный объем памяти независимо от других экземпляров.

В приведенной ниже таблице дается краткое описание самых распространенных параметров памяти (более подробные сведения см. в справочнике). Эти параметры настраиваются, если службы Analysis Services делят ресурсы памяти с другими приложениями на том же сервере.

Настройка | Description
--------|------------
LowMemoryLimit | Нижнее пороговое значение, при достижении которого сервер начинает высвобождать память, выделенную редко используемым объектам (для многомерных экземпляров).
VertiPaqMemoryLimit | Нижнее пороговое значение, при достижении которого сервер начинает высвобождать память, выделенную редко используемым объектам (для табличных экземпляров).
TotalMemoryLimit | Верхнее пороговое значение, при достижении которого службы Analysis Services начинают высвобождать память более агрессивно, чтобы освободить место для уже выполняемых запросов и запросов, имеющих высокий приоритет. 
HardMemoryLimit | Еще одно пороговое значение, при достижении которого службы Analysis Services начинают отклонять поступающие запросы из-за нехватки памяти. 
 
## <a name="property-reference"></a>Справочник по свойствам

Указанные ниже свойства относятся к табличному и многомерному режимам (если не указано иное).

 Значения в диапазоне от 1 до 100 представляют процент **общего объема физической памяти** или **виртуального адресного пространства**в зависимости от того, какое значение меньше. Значения, превышающие 100, представляют собой ограничения памяти в байтах.
  
 **LowMemoryLimit**  
 Свойство, выраженное 64-разрядным числом со знаком и плавающей точкой двойной точности, определяющее первый порог, по достижении которого службы Analysis Services начинают освобождать память для объектов с низким приоритетом, например, редко используемого кэша. Сервер не выделяет память сверх установленного этим свойством лимита. Значение по умолчанию равно 65, то есть предел недостатка памяти составляет 65 % от объема физической памяти или виртуального адресного пространства (в зависимости от того, какое значение меньше).  
  
 **TotalMemoryLimit**  
 Определяет порог, при достижении которого сервер начинает перераспределять память, освобождая место для других запросов. При достижении этого ограничения экземпляр начнет постепенно очищать память из кэшей, закрывая истекшие сеансы и выгружая неиспользуемые вычисления. Значение по умолчанию равно 80 % от объема физической памяти или виртуального адресного пространства (в зависимости от того, какое значение меньше). Обратите внимание, что значение **TotalMemoryLimit** всегда должно быть меньше, чем **HardMemoryLimit**  
  
 **HardMemoryLimit**  
 Задает порог памяти, после достижения которого экземпляр агрессивно прерывает активные сеансы пользователей, чтобы уменьшить использование памяти. Во всех прерванных сеансах отображается сообщение об ошибке (про отмену в связи с нехваткой памяти). Значение по умолчанию 0 означает, что для параметра **HardMemoryLimit** будет задано среднее значение между **TotalMemoryLimit** и общим объемом физической памяти системы. Если объем физической памяти системы превышает объем виртуального адресного пространства процесса, то при вычислении параметра **HardMemoryLimit**вместо физической памяти используется виртуальное адресное пространство.  
  
 **VirtualMemoryLimit**  
  Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .  
  
 **VertiPaqPagingPolicy**  
  Определяет использование подкачки в случае, если серверу не хватает памяти (только для табличных экземпляров). Допустимы следующие значения:  
  
  

Настройка  |Description  
---------|---------
**0**     |  Отключает механизм подкачки страниц. При недостатке памяти обработка прерывается с ошибкой нехватки памяти. Если подкачка запрещена, вы должны предоставить права доступа Windows учетной записи службы. Инструкции см. в разделе [Настройка учетных записей служб (службы Analysis Services)](../../analysis-services/instances/configure-service-accounts-analysis-services.md). 
**1**     |  Это значение по умолчанию, которое разрешает подкачку на диск с использованием файла подкачки операционной системы (pagefile.sys).   
  
Если задано значение 1, то ошибки обработки вследствие ограничений памяти менее вероятны, поскольку сервер использует подкачку на диск по указанному методу. Установка свойства **VertiPaqPagingPolicy** не гарантирует полное отсутствие ошибок памяти. Ошибки нехватки памяти по-прежнему могут возникать при следующих условиях.  
  
-   Недостаточно памяти для всех словарей. В ходе обработки службы Analysis Services блокируют словари для каждого столбца в памяти, и общий объем всех словарей не может превышать значения, заданного в свойстве **VertiPaqMemoryLimit**.  
  
-   Недостаточно виртуального адресного пространства для процесса.  
  
 Чтобы устранить постоянные ошибки памяти, можно изменить структуру модели, чтобы сократить объем данных, нуждающихся в обработке, или увеличить объем физической памяти на компьютере.  
  
 **VertiPaqMemoryLimit**  
 Если подкачка на диск разрешена, это свойство задает уровень использования памяти (в процентах от общего объема памяти), при котором начинается подкачка (только для табличных экземпляров). Значение по умолчанию равно 60. Если память используется менее чем на 60 процентов, сервер не осуществляет подкачку на диск. Это свойство зависит от свойства **VertiPaqPagingPolicyProperty**, которое должно быть равно 1, чтобы подкачка происходила.  
  
 **HighMemoryPrice**  
 Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .  
  
 **MemoryHeapType**  
  Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] . Ниже приведены допустимые значения в службах Analysis Services в SQL Server 2016 с пакетом обновления 1 (SP1) и более поздних версий.
  
  Настройка | Description
--------|------------
**-1** | Automatic (по умолчанию). Подсистема самостоятельно определяет, что следует использовать.
**1** | Куча служб Analysis Services.
**2** | Куча Windows с низкой степенью фрагментации (LFH).
**5** | Гибридный распределитель. Этот механизм распределения будет использовать LFH Windows для \<= выделение 16 КБ и кучи AS для > выделение 16 КБ. 
**6** | Распределитель Intel TBB. Доступен в службах Analysis Services в SQL Server 2016 с пакетом обновления 1 (SP1) и более поздних версий.
  
  
 **HeapTypeForObjects**  
  Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] . Допустимы следующие значения:
  
   Настройка | Description
--------|------------
**0** | Куча LFH Windows.
**1** | Распределитель слотов Analysis Services.
**3** | Каждый объект имеет свою собственную кучу Analysis Services.

 
 **DefaultPagesCountToReuse**  
 Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .  
  
 **HandleIA64AlignmentFaults**  
 Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .  
  
 **MidMemoryPrice**  
 Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .  
  
 **MinimumAllocatedMemory**  
 Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .  
  
 **PreAllocate**  
 Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .  
  
 **SessionMemoryLimit**  
 Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .  
  
 **WaitCountIfHighMemory**  
 Дополнительное свойство, которое следует изменять только под руководством службы поддержки [!INCLUDE[msCoName](../../includes/msconame-md.md)] .  
  
## <a name="see-also"></a>См. также:  
 [Свойства сервера в службах Analysis Services](../../analysis-services/server-properties/server-properties-in-analysis-services.md)   
 [Определение режима работы сервера экземпляра служб Analysis Services](../../analysis-services/instances/determine-the-server-mode-of-an-analysis-services-instance.md)  
  [Руководство по использованию Server 2008 R2 Analysis Services](http://go.microsoft.com/fwlink/?LinkID=225539)
  
