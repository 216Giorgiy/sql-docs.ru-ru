---
title: "Занятие&#160;6. Создание вычисляемых столбцов | Microsoft Docs"
ms.custom: ""
ms.date: "02/27/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "analysis-services"
ms.tgt_pltfrm: ""
ms.topic: "get-started-article"
applies_to: 
  - "SQL Server 2016"
ms.assetid: d126766a-5699-4e9f-8213-8c7eea0fc14e
caps.latest.revision: 26
author: "Minewiskan"
ms.author: "owend"
manager: "erikre"
---
# Занятие&#160;6. Создание вычисляемых столбцов
На этом занятии мы создадим новые данные в модели путем добавления вычисляемых столбцов. Вычисляемый столбец основывается на данных, которые уже существуют в модели. Дополнительные сведения см. в разделе [Вычисляемые столбцы (табличные службы SSAS)](../analysis-services/tabular-models/calculated-columns-ssas-tabular.md).  
  
Мы создадим пять новых вычисляемых столбцов в трех разных таблицах. Шаги выполнения для каждой задачи могут немного отличаться друг от друга. Это сделано для того, чтобы продемонстрировать разные способы создания новых столбцов, переименовывания и размещения в разных местах в таблице.  
  
Предполагаемое время выполнения этого занятия: **15 минут**  
  
## Предварительные требования  
Этот раздел является частью учебника по табличному моделированию, который необходимо изучать по порядку. Прежде чем выполнять задания в этом занятии, необходимо завершить предыдущее [Занятие 5. Создание связей](../analysis-services/lesson-5-create-relationships.md).  
  
## Создание вычисляемых столбцов  
  
#### Создание вычисляемого столбца «Месячный календарь» в таблице «Дата»  
  
1.  В среде [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)] в меню **Модель** наведите указатель на пункт **Представление модели** и выберите пункт **Представление данных**.  
  
    Вычисляемые столбцы можно создавать только с помощью конструктора моделей в представлении данных.  
  
2.  В конструкторе моделей щелкните таблицу (вкладку) **Дата**.  
  
3.  Щелкните правой кнопкой мыши столбец **Календарный квартал** и выберите пункт **Вставить столбец**.  
  
    Новый столбец с именем **Вычисляемый столбец 1** будет вставлен слева от столбца **Календарный квартал**.  
  
4.  В строке формул над таблицей введите следующую формулу. Автозаполнение помогает вводить полные имена столбцов и таблиц, а также выводит список доступных функций.  
  
    **=RIGHT(" " & FORMAT([месяц],"#0"), 2) & " - " & [название месяца]**  
  
    Завершив построение формулы, нажмите клавишу ВВОД.  
  
    Все строки вычисляемого столбца будут заполнены значениями. При прокрутке таблицы вниз будет видно, что строки могут содержать различные значения для данного столбца, на основе данных, которые содержатся в каждой строке.  
  
    > [!NOTE]  
    > При получении ошибки убедитесь в том, что имена столбцов в формуле соответствуют именам столбцов, которые были изменены в ходе выполнения задания в [занятии 3: переименование столбцов](../analysis-services/lesson-3-rename-columns.md).  
  
5.  Переименуйте этот столбец в **Месячный календарь**.  
  
Вычисляемый столбец «Месячный календарь» содержит сортируемое имя для месяца.  
  
#### Создание вычисляемого столбца «День недели» в таблице «Дата»  
  
1.  В активной таблице **Дата** щелкните меню **Столбец** и выберите команду **Добавить столбец**.  
  
2.  В строке формул введите следующую формулу:  
  
    **=RIGHT(" " & FORMAT([номер дня недели],"#0"), 2) & " - " & [название дня]**  
  
    Завершив построение формулы, нажмите клавишу ВВОД. Новый столбец будет добавлен на самой правой стороне таблицы.  
  
3.  Переименуйте столбец в **День недели**.  
  
4.  Щелкните заголовок столбца и перетащите столбец между столбцами **Название дня** и **День месяца**.  
  
    > [!TIP]  
    > Перемещение столбцов в таблице облегчает навигацию.  
  
Вычисляемый столбец «День недели» содержит сортируемое имя дня недели.  
  
#### Создание вычисляемого столбца «Имя подкатегории продуктов» в таблице «Продукт»  
  
1.  Выберите таблицу **Продукт** в конструкторе моделей.  
  
2.  Прокрутите до правого края таблицы. Обратите внимание на то, что крайний правый столбец имеет имя **Добавление столбца** (курсивом), и щелкните заголовок столбца.  
  
3.  В строке формул введите следующую формулу:  
  
    **=RELATED('Product Subcategory'[Имя подкатегории продуктов])**  
  
    Завершив построение формулы, нажмите клавишу ВВОД.  
  
4.  Переименуйте столбец в **Имя подкатегории продуктов**.  
  
Вычисляемый столбец «Имя подкатегории продуктов» используется для создания иерархии в таблице «Продукт», которая включает данные из столбца «Имя подкатегории продуктов» в таблице «Подкатегория продуктов». Иерархии не могут охватывать более одной таблицы. Иерархии будут созданы позднее, в занятии 7.  
  
#### Создание вычисляемого столбца «Имя категории продуктов» в таблице «Продукт»  
  
1.  При выбранной таблице **Продукт** откройте меню **Столбец** и выберите команду **Добавить столбец**.  
  
2.  В строке формул введите следующую формулу:  
  
    **=RELATED('Product Category'[Имя категории продуктов])**  
  
    Завершив построение формулы, нажмите клавишу ВВОД.  
  
3.  Переименуйте столбец в **Имя категории продуктов**.  
  
Вычисляемый столбец «Имя категории продуктов» используется для создания иерархии в таблице «Продукт», которая включает данные из столбца «Имя категории продуктов» в таблице «Категория продуктов». Иерархии не могут охватывать более одной таблицы.  
  
#### Создание вычисляемого столбца «Маржа» в таблице «Интернет-продажи»  
  
1.  Выберите таблицу **Интернет-продажи** в конструкторе моделей.  
  
2.  Добавление нового столбца.  
  
3.  В строке формул введите следующую формулу:  
  
    **=[Объем продаж]-[Общая стоимость продуктов]**  
  
    Завершив построение формулы, нажмите клавишу ВВОД.  
  
4.  Переименуйте столбец в **Маржа**.  
  
5.  Перетащите столбец между столбцами **Сумма продаж** и **Сумма налога**.  
  
Вычисляемый столбец «Маржа» используется для анализа маржи для каждой строки (продукта).  
  
## Следующий шаг  
Чтобы продолжить изучение этого занятия, перейдите к следующему занятию: [Занятие 7. Создание мер](../analysis-services/lesson-7-create-measures.md).  
  
  
  
