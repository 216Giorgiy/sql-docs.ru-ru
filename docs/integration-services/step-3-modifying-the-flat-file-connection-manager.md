---
title: "Шаг&#160;3. Изменение диспетчера соединений с неструктурированными файлами | Microsoft Docs"
ms.custom: ""
ms.date: "02/27/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "integration-services"
ms.tgt_pltfrm: ""
ms.topic: "get-started-article"
applies_to: 
  - "SQL Server 2016"
ms.assetid: 459e3995-2116-4f15-aaa2-32f26113869c
caps.latest.revision: 20
author: "douglaslMS"
ms.author: "douglasl"
manager: "jhubbard"
---
# Шаг&#160;3. Изменение диспетчера соединений с неструктурированными файлами
В этом задании требуется модифицировать диспетчер соединений с неструктурированными файлами, созданный и настроенный на занятии 1. При создании диспетчера соединений неструктурированных файлов он был настроен на статическую загрузку отдельного файла. Чтобы диспетчер соединений с неструктурированными файлами мог последовательно загружать файлы, необходимо изменить свойство ConnectionString диспетчера соединений таким образом, чтобы он принимал пользовательскую переменную `User:varFileName`, содержащую путь к файлу, который должен быть загружен в процессе выполнения.  
  
Изменив диспетчер соединений таким образом, чтобы для заполнения свойства ConnectionString использовалось значение пользовательской переменной `User::varFileName`, можно добиться того, чтобы диспетчер соединений подключался к различным неструктурированным файлам. При выполнении каждой итерации контейнера «цикл по каждому элементу» будет динамически обновляться переменная `User::varFileName`. Обновление переменной в свою очередь вызовет соединение диспетчера со следующим неструктурированным файлом и обработку следующего набора данных задачей потока данных.  
  
### Настройка диспетчера соединений с неструктурированными файлами для использования переменной в качестве строки соединения  
  
1.  На панели **Диспетчеры соединений** щелкните правой кнопкой мыши **Образец источника данных "неструктурированный файл"** и выберите пункт **Свойства**.  
  
2.  В окне свойств щелкните в пустой ячейке **Выражения**, а затем нажмите кнопку с многоточием **(…)**.  
  
3.  В диалоговом окне **Редактор выражений свойств** в столбце **Свойство** введите или выберите **ConnectionString**.  
  
4.  В столбце **Выражение** нажмите кнопку с многоточием **(…)**, чтобы открыть диалоговое окно **Построитель выражений**.  
  
5.  В диалоговом окне **Построитель выражений** разверните узел **Переменные**.  
  
6.  Перетащите переменную **User::varFileName** в поле **Выражение**.  
  
7.  Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Построитель выражений**.  
  
8.  Еще раз нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Редактор выражений свойств**.  
  
## Следующая задача занятия  
[Шаг 4. Проверка учебного пакета, созданного на занятии 2](../integration-services/step-4-testing-the-lesson-2-tutorial-package.md)  
  
  
  
