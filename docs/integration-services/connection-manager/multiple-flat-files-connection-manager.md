---
title: "Диспетчер соединения с несколькими неструктурированными файлами | Microsoft Docs"
ms.custom: ""
ms.date: "03/14/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "integration-services"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "диспетчер соединения с несколькими неструктурированными файлами"
  - "подключения [службы Integration Services], неструктурированные файлы"
  - "неструктурированные файлы"
  - "соединения с неструктурированными файлами [службы Integration Services]"
  - "диспетчеры подключений [службы Integration Services], несколько неструктурированных файлов"
  - "соединения с несколькими неструктурированными файлами"
ms.assetid: 31fc3f7a-d323-44f5-a907-1fa3de66631a
caps.latest.revision: 41
author: "douglaslMS"
ms.author: "douglasl"
manager: "jhubbard"
caps.handback.revision: 41
---
# Диспетчер соединения с несколькими неструктурированными файлами
  Диспетчер соединения с несколькими неструктурированными файлами позволяет пакету получить доступ к данным в нескольких неструктурированных файлах. Например, источник неструктурированных файлов может использовать диспетчер соединения с несколькими неструктурированными файлами, если задача потока данных находится в контейнере цикла, например в контейнере «цикл по элементам». В каждом цикле контейнера источник неструктированных файлов загружает данные из следующего имени файла, которое предоставляет диспетчер соединения с несколькими неструктурированными файлами.  
  
 При добавлении к пакету диспетчера соединения с несколькими неструктурированными файлами службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] создают диспетчер соединения, устанавливающий соединения с несколькими неструктурированными файлами во время работы, а также устанавливают свойства диспетчера соединения с несколькими неструктурированными файлами и добавляют его к коллекции **Соединения** пакета.  
  
 Свойству **ConnectionManagerType** диспетчера соединений присваивается значение **MULTIFLATFILE**.  
  
 Можно установить конфигурацию диспетчера соединений с несколькими неструктурированными файлами следующими способами.  
  
-   Укажите файлы, локаль и кодовую страницу для использования. Локаль используется для интерпретации данных, зависящих от локаля, например дат, а кодовая страница используется для конвертации строковых данных в формат Юникод.  
  
-   Укажите формат файла. Можно использовать форматы с разделителями, фиксированной шириной или без выравнивания по правому краю.  
  
-   Укажите строку заголовка, строку данных и разделители столбцов. Разделители столбцов могут указываться на уровне файла и перезаписываться на уровне столбцов.  
  
-   Укажите, содержит ли первая строка данных имена столбцов.  
  
-   Укажите символ ограничителя текста. Каждый столбец может быть настроен на распознавание текстового ограничителя.  
  
-   Установите свойства, например имя, тип данных и максимальную ширину отдельных столбцов.  
  
 Когда диспетчер соединений нескольких неструктурированных файлов ссылается на несколько файлов, то пути этих файлов разделены символом вертикальной черты (|). Свойство **ConnectionString** диспетчера соединений имеет следующий формат:  
  
 \<*путь*>|\<*путь*>  
  
 Можно также указать несколько файлов, используя символы-шаблоны. Например, для создания ссылки на все текстовые файлы на диске C значение свойства **ConnectionString** может быть равно "C:\\*.txt".  
  
 Если диспетчер соединений с несколькими неструктурированными файлами ссылается на несколько файлов, то все файлы должны иметь один формат.  
  
 По умолчанию диспетчер соединений с несколькими неструктурированными файлами устанавливает длину строковых столбцов в значение 50 символов. В диалоговом окне **Редактор диспетчера соединений с несколькими неструктурированными файлами** можно оценить образцы данных и автоматически изменить длину этих столбцов, чтобы предотвратить усечение данных или избыточность ширины столбца. Если изменение длины столбца происходит не в источнике или преобразовании неструктурированного файла, то длина столбца остается неизменной на всем потоке данных. Если эти столбцы сопоставляются с более узкими целевыми столбцами, то пользователю выдается предупреждение, а во время выполнения могут возникнуть ошибки, связанные с усечением данных. Можно изменить размер столбцов так, чтобы столбцы соответствовали целевым столбцам в диспетчере соединений с неструктурированными файлами, источнике неструктурированных файлов или преобразовании. Чтобы изменить длину выходных столбцов, используйте свойство **Length** выходных столбцов на вкладке **Свойства входов и выходов** диалогового окна **Расширенный редактор** .  
  
 Если длина столбцов обновляется в диспетчере соединений с несколькими неструктурированными файлами, после того как был добавлен и настроен источник неструктурированного файла, который использует диспетчер соединений, то нельзя вручную изменять размер выходных столбцов в источнике неструктурированного файла. При открытии диалогового окна **Источник «Неструктурированный файл»** источник неструктурированного файла предоставляет параметр для синхронизации метаданных столбца.  
  
## Конфигурация диспетчера соединений с несколькими неструктурированными файлами  
 Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../includes/ssis-md.md)] или программными средствами.  
  
 Дополнительные сведения о свойствах, которые можно задать в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] , см. в следующих разделах:  
  
-   [Редактор диспетчера подключений с несколькими неструктурированными файлами (страница "Общие")](../../integration-services/connection-manager/multiple-flat-files-connection-manager-editor-general-page.md)  
  
-   [Редактор диспетчера подключений с несколькими неструктурированными файлами (страница "Столбцы")](../../integration-services/connection-manager/multiple-flat-files-connection-manager-editor-columns-page.md)  
  
-   [Редактор диспетчера подключений с несколькими неструктурированными файлами (страница "Дополнительно")](../../integration-services/connection-manager/multiple-flat-files-connection-manager-editor-advanced-page.md)  
  
-   [Редактор диспетчера подключений с несколькими неструктурированными файлами (страница "Предварительный просмотр")](../../integration-services/connection-manager/multiple-flat-files-connection-manager-editor-preview-page.md)  
  
 Дополнительные сведения о программной настройке диспетчера подключений см. в разделах <xref:Microsoft.SqlServer.Dts.Runtime.ConnectionManager> и [Добавление соединений программным образом](../../integration-services/building-packages-programmatically/adding-connections-programmatically.md).  
  
## См. также  
 [Источник «Неструктурированный файл»](../../integration-services/data-flow/flat-file-source.md)   
 [Назначение «Неструктурированный файл»](../../integration-services/data-flow/flat-file-destination.md)   
 [Соединения в службах Integration Services (SSIS)](../../integration-services/connection-manager/integration-services-ssis-connections.md)  
  
  