---
title: "Включение ведения журналов при выполнении пакета на сервере служб SSIS | Microsoft Docs"
ms.custom: 
  - "SQL2016_New_Updated"
ms.date: "03/03/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "integration-services"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "SQL13.SSIS.SSMS.ISMANAGECUSTOMIZEDLOGGINGLEVEL.F1"
ms.assetid: 8930c63c-bc6f-46c2-b428-b3c29ee89a7d
caps.latest.revision: 19
author: "douglaslMS"
ms.author: "douglasl"
manager: "jhubbard"
caps.handback.revision: 19
---
# Включение ведения журналов при выполнении пакета на сервере служб SSIS
  В этой статье описывается, как задать или изменить уровень ведения журнала для пакета, когда выполняется пакет, развернутый на сервере [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . Уровень ведения журнала, задаваемый при выполнении пакета, переопределяет уровень, настроенный во время разработки с помощью [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]. Дополнительные сведения см. в разделе [Включение средств ведения журналов в SQL Server Data Tools](../../integration-services/performance/enable-package-logging-in-sql-server-data-tools.md).  
  
 В разделе **Свойства сервера** в SQL Server вы можете выбрать ведение журнала на уровне сервера (вариант по умолчанию) для свойства **Уровень ведения журнала сервера**. Вы можете выбрать один из встроенных уровней ведения журнала, описанных в этой статье, или существующий пользовательский уровень. Выбранный уровень применяется по умолчанию ко всем пакетам, развернутым в каталоге служб SSIS. По умолчанию этот уровень применяется также к заданию агента SQL Server, в рамках которого запущен пакет служб SSIS.  
  
 Кроме того, вы можете указать уровень ведения журнала для отдельного пакета с помощью одного из следующих методов. Этот раздел охватывает первый метод.  
  
-   Настройка экземпляра выполнения пакета с помощью диалогового окна «Выполнение пакета»  
  
-   Установка параметров для экземпляра выполнения с помощью [catalog.set_execution_parameter_value (база данных SSISDB)](../../integration-services/system-stored-procedures/catalog-set-execution-parameter-value-ssisdb-database.md)  
  
-   Настройка задания агента SQL Server для выполнения пакета с помощью диалогового окна «Новый шаг задания».  
  
## Задание уровня ведения журнала для пакета с помощью диалогового окна "Выполнение пакета"  
  
1.  В среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]перейдите к пакету в обозревателе объектов.  
  
2.  Щелкните пакет правой кнопкой мыши и выберите команду **Выполнить**.  
  
3.  Выберите в диалоговом окне **Выполнение пакета** вкладку **Дополнительно** .  
  
4.  В разделе **Уровень ведения журнала**выберите уровень ведения журнала. В этом разделе содержится описание доступных значений.  
  
5.  Настройте другие параметры пакета, а затем нажмите кнопку **ОК** , чтобы запустить пакет.  
  
## Выбор уровня ведения журнала  
 Доступны следующие встроенные уровни ведения журнала. Кроме того, вы можете выбрать существующий пользовательский уровень ведения журнала. В этой статье содержится описание пользовательских уровней ведения журнала.  
  
|Уровень ведения журнала|Description|  
|-------------------|-----------------|  
|Нет|Ведение журнала выключено. Регистрируется только состояние выполнения пакета.|  
|Basic|Записываются все события, за исключением пользовательских и диагностических событий. Это значение по умолчанию.|  
|RuntimeLineage|Собирает данные, необходимые для отслеживания сведений для журнала преобразований в потоке данных. Вы можете проанализировать эти сведения журнала преобразований, чтобы сопоставить отношение преобразований между задачами. С помощью этой информации независимые поставщики программного обеспечения и разработчики могут создавать пользовательские средства сопоставления для журнала преобразований.|  
|Производительность|Регистрируются только статистика производительности, а также события OnError и OnWarning.<br /><br /> Отчет **Производительность выполнения** показывает активное и общее время компонентов потока данных пакета. Эта информация доступна, если уровень ведения журнала выполнения последнего пакета был задан как **Производительность** или **Подробно**. Дополнительные сведения см. в статье [Reports for the Integration Services Server](../../integration-services/performance/reports-for-the-integration-services-server.md).<br /><br /> Представление [catalog.execution_component_phases](../../integration-services/system-views/catalog-execution-component-phases.md) отображает время начала и время окончания для компонентов потока данных для каждого этапа выполнения. Это представление содержит данные для этих компонентов, только если в качестве уровня ведения журнала выполнения пакета установлено значение **Производительность** или **Подробно**.|  
|Подробно|Регистрируются все события, в том числе пользовательские и диагностические события.<br /><br /> К пользовательским относятся события, записываемые задачами служб [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] . Дополнительные сведения о пользовательских событиях см. в статье [Custom Messages for Logging](../../integration-services/performance/custom-messages-for-logging.md).<br /><br /> Пример диагностического события — событие **DiagnosticEx** . Когда задача "Выполнение пакета" выполняет дочерний пакет, это событие всегда записывает значения параметра, передаваемые в дочерние пакеты.<br /><br /> Событие **DiagnosticEx**, кроме того, помогает получить имена столбцов, в которых на уровне строк происходят ошибки. Это событие записывает схему журнала преобразований потока данных в журнал. Потом вы сможете найти имя столбца в этой схеме журнала преобразований с помощью идентификатора столбца, записанного в выводе с ошибками.  Дополнительные сведения см. в разделе [Error Handling in Data](../../integration-services/data-flow/error-handling-in-data.md).<br /><br /> Значение столбца сообщения для **DiagnosticEx** — это XML-текст. Для просмотра текста сообщения о выполнении пакета выполните запрос к представлению [catalog.operation_messages (база данных SSISDB)](../../integration-services/system-views/catalog-operation-messages-ssisdb-database.md). Обратите внимание, что событие **DiagnosticEx** не сохраняет пробелы в выводе XML, чтобы уменьшить размер журнала. Для улучшения удобочитаемости скопируйте журнал (например, в решении Visual Studio) в редактор XML, поддерживающий форматирование XML и выделение синтаксиса.<br /><br /> Представление [catalog.execution_data_statistics](../../integration-services/system-views/catalog-execution-data-statistics.md) отображает строку каждый раз, когда компонент потока данных передает данные в компонент, находящийся ниже в иерархии, для выполнения пакета. Для сохранения этих данных в представлении уровень ведения журнала должен быть установлен в значение **Подробно** .|  
  
## Создание пользовательских уровней ведения журнала и управление ими с помощью диалогового окна "Управление пользовательскими уровнями ведения журнала"  
 Вы можете создавать пользовательские уровни ведения журнала, в рамках которых собираются только нужные вам события и статистика. При необходимости можно записывать также контекст событий, который включает значения переменных, строки подключений и свойства компонентов. При запуске пакета пользовательский уровень ведения журнала можно выбрать всегда, когда можно выбрать встроенный уровень.  
  
> [!TIP]  
>  Чтобы записать значения переменных пакета, для свойства **IncludeInDebugDump** переменных следует задать значение **True**.  
  
1.  Чтобы создать пользовательские уровни ведения журнала и управлять ими, в [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] щелкните правой кнопкой мыши базу данных SSISDB и выберите **Пользовательский уровень ведения журнала**. Откроется диалоговое окно **Управление пользовательскими уровнями ведения журнала**. Список **Пользовательские уровни ведения журнала** содержит все существующие пользовательские уровни.  
  
2.  Чтобы **создать** пользовательский уровень, щелкните **Создать**и введите имя и описание. На вкладках **Статистика** и **События** выберите статистические данные и события, которые требуется собирать. На вкладке **События** при необходимости выберите **Включить контекст** для определенных событий. Затем нажмите кнопку **Сохранить**.  
  
3.  Чтобы **обновить** существующий пользовательский уровень ведения журнала, выберите его в списке, перенастройте, а затем нажмите кнопку **Сохранить**.  
  
4.  Чтобы **удалить** существующий пользовательский уровень ведения журнала, выберите его в списке и нажмите кнопку **Удалить**.  
  
 **Разрешения для пользовательских уровней ведения журнала.**  
  
-   Когда пользователи базы данных SSISDB запускают пакеты, они видят пользовательские уровни ведения журнала и могут их выбирать.  
  
-   Только пользователи с ролью ssis_admin или sysadmin могут создавать, обновлять и удалять пользовательские уровни ведения журнала.  
  
## См. также  
 [Ведение журналов в службах Integration Services (SSIS)](../../integration-services/performance/integration-services-ssis-logging.md)   
 [Включение средств ведения журналов в SQL Server Data Tools](../../integration-services/performance/enable-package-logging-in-sql-server-data-tools.md)  
  
  