---
title: Шаг 2. Добавление и настройка диспетчера соединений с неструктурированными файлами | Документы Майкрософт
ms.custom: ''
ms.date: 03/01/2017
ms.prod: sql
ms.prod_service: integration-services
ms.reviewer: ''
ms.technology: integration-services
ms.topic: tutorial
ms.assetid: 9a77dd32-d8c2-4961-ad37-2a971f9d6043
author: douglaslMS
ms.author: douglasl
manager: craigg
ms.openlocfilehash: cc3bd44753305f7509a8777c48265f3f0edd2f2c
ms.sourcegitcommit: c19696d3d67161ce78aaa5340964da3256bf602d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/29/2018
ms.locfileid: "52617664"
---
# <a name="lesson-1-2---adding-and-configuring-a-flat-file-connection-manager"></a>Занятие 1–2. Добавление и настройка диспетчера соединений с неструктурированными файлами
В этом задании к только что созданному пакету будет добавлен диспетчер соединений с неструктурированными файлами. Диспетчер соединений с неструктурированными файлами позволяет пакету извлекать данные из неструктурированных файлов. С помощью диспетчера соединений с неструктурированными файлами можно указать имя и расположение файла, локали и кодовую страницу, а также формат файла, включая разделители столбцов. Эти данные будут использованы при извлечении пакета из неструктурированного файла. Кроме того, можно вручную указать тип данных для каждого столбца или в диалоговом окне **Предлагаемые типы столбцов** указать автоматическое сопоставление столбцов извлекаемых данных с типами данных в службах [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] .  
  
Для каждого используемого формата файла необходимо создать отдельный диспетчер соединений с неструктурированными файлами. Так как в данном учебнике данные извлекаются из неструктурированных файлов одинакового формата, в пакет необходимо добавить только один диспетчер соединений с неструктурированными файлами.  
  
В этом учебнике предстоит настроить следующие свойства диспетчера соединений с неструктурированными файлами:  
  
-   **Имена столбцов.** Так как в неструктурированном файле не указаны имена столбцов, диспетчер соединений с неструктурированными файлами создает имена столбцов по умолчанию. Указанные имена по умолчанию не дают представления о содержащихся в столбцах данных. Чтобы сделать имена по умолчанию более понятными, следует заменить их именами, взятыми из таблицы фактов, в которую производится загрузка данных из неструктурированных файлов.  
  
-   **Сопоставление данных.** Сопоставление типов данных, указанное для диспетчера соединений с неструктурированными файлами, используется всеми компонентами источников данных "неструктурированный файл", которые обращаются к диспетчеру соединений. Можно сопоставить типы данных вручную с помощью диспетчера соединений с неструктурированными файлами или использовать диалоговое окно **Предлагаемые типы столбцов** . В этом учебнике предстоит просмотреть сопоставления, предложенные в диалоговом окне **Предлагаемые типы столбцов** , а затем вручную создать необходимые сопоставления в диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** .  
  
Диспетчер соединений с неструктурированными файлами предоставляет сведения о локали файла данных. Если компьютер не настроен на использование региональных параметров "Русский (Россия)", нужно установить дополнительные свойства в диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** .  
  
### <a name="to-add-a-flat-file-connection-manager-to-the-ssis-package"></a>Добавление диспетчера соединений с неструктурированными файлами в пакет служб SSIS  
  
1.  Щелкните правой кнопкой мыши область **Диспетчеры соединений** и выберите команду **Создать соединение с неструктурированным файлом**.  
  
2.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** в поле **Имя диспетчера соединений**введите **Образец источника данных "неструктурированный файл"**.  
  
3.  Нажмите кнопку **Обзор**.  
  
4.  В диалоговом окне **Открыть** найдите файл SampleCurrencyData.txt на компьютере.  
  
    Образцы данных включаются в состав с пакетами занятий по службам [!INCLUDE[ssIS](../includes/ssis-md.md)] . Чтобы загрузить образцы данных и пакеты занятий выполните следующие действия.  
  
    1.  Перейдите к [образцам продуктов служб Integration Services](https://www.microsoft.com/download/details.aspx?id=56827).  
  
    2.  Перейдите на вкладку **DOWNLOADS** .  
  
    3.  Щелкните файл SQL2012.Integration_Services.Create_Simple_ETL_Tutorial.Sample.zip.  
  
5.  Снимите флажок «Имена столбцов в первой строке данных».  
  
### <a name="to-set-locale-sensitive-properties"></a>Установка свойств, зависящих от локали и региональных стандартов  
  
1.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** перейдите на вкладку **Общие**.  
  
2.  Установите свойство **Локаль** в значение "Русский (Россия)", а свойство **Кодовая страница** в значение 1252.  
  
### <a name="to-rename-columns-in-the-flat-file-connection-manager"></a>Переименование столбцов диспетчера соединений с неструктурированными файлами  
  
1.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** перейдите на вкладку **Дополнительно**.  
  
2.  На панели свойств сделайте следующие изменения.  
  
    -   Измените имя **Column 0** на **AverageRate**.  
  
    -   Измените имя **Column 1** на **CurrencyID**.  
  
    -   Измените имя **Column 2** на **CurrencyDate**.  
  
    -   Измените имя **Column 3** на **EndOfDayRate**.  
  
    > [!NOTE]  
    > По умолчанию для всех четырех столбцов указан строковый тип данных [DT_STR] со значением параметра **OutputColumnWidth** , равным 50.  
  
### <a name="to-remap-column-data-types"></a>Сопоставление типов данных столбцов  
  
1.  В диалоговом окне **Редактор диспетчера соединений с неструктурированными файлами** нажмите кнопку **Предложить типы**.  
  
    [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] автоматически предлагают большинство соответствующих типов данных на основании первых 200 строк данных. Можно изменить параметры предложения по большему или меньшему количеству данных, чтобы указать тип данных по умолчанию для целочисленных и логических данных или чтобы добавить пробелы в дополнение к строковым столбцам.  
  
    На данный момент не изменяйте значения параметров в диалоговом окне **Предлагаемые типы столбцов** и нажмите кнопку **ОК** , чтобы службы [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] предложили типы данных для столбцов. Вы вернетесь на панель **Дополнительно** диалогового окна **Редактор диспетчера соединений с неструктурированными файлами** , где можно просмотреть типы данных столбцов, предложенные службами [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)]. (Если нажать кнопку **Отмена**, предложения в отношении метаданных столбца и используемого типа данных строки по умолчанию (DT_STR) сделаны не будут.)  
  
    В этом учебнике для данных из файла SampleCurrencyData.txt в службах [!INCLUDE[ssISnoversion](../includes/ssisnoversion-md.md)] предлагаются типы данных, приведенные во втором столбце следующей ниже таблицы. Типы данных, требуемые для столбцов назначения, которые будут определены позже, приведены в последнем столбце следующей ниже таблицы.  
  
    |Столбец неструктурированных файлов|Предложенный тип|Целевой столбец|Тип назначения|  
    |--------------------|------------------|----------------------|--------------------|  
    |AverageRate|float [DT_R4]|FactCurrencyRate.AverageRate|FLOAT|  
    |CurrencyID|string [DT_STR]|DimCurrency.CurrencyAlternateKey|nchar(3)|  
    |CurrencyDate|date [DT_DATE]|DimDate.FullDateAlternateKey|Дата|  
    |EndOfDayRate|float [DT_R4]|FactCurrencyRate.EndOfDayRate|FLOAT|  
  
    Тип данных, предложенный для столбца **CurrencyID** , несовместим с типом данных поля целевой таблицы. Так как типом данных `DimCurrency.CurrencyAlternateKey` является nchar (3), значение **CurrencyID** нужно изменить со строки [DT_STR] на строку Unicode [DT_WSTR]. Кроме того, поле `DimDate.FullDateAlternateKey` определяется в качестве типа данных date, поэтому необходимо изменить тип параметра **CurrencyDate** с типа даты [DT_Date] на тип даты базы данных [DT_DBDATE].  
  
2.  Выберите из списка столбец CurrencyID, после чего на панели свойств измените тип данных столбца **CurrencyID** со строкового [DT_STR] на тип строки в Юникоде [DT_WSTR].  
  
3.  На панели свойств измените тип данных столбца **CurrencyDate** с типа даты [DT_DATE] на тип даты базы данных [DT_DBDATE].  
  
4.  Нажмите кнопку **ОК**.  
  
## <a name="next-task-in-lesson"></a>Следующая задача занятия  
[Шаг 3. Добавление и настройка диспетчера подключений OLE DB](../integration-services/lesson-1-3-adding-and-configuring-an-ole-db-connection-manager.md)  
  
## <a name="see-also"></a>См. также:  
[Диспетчер соединений с неструктурированными файлами](../integration-services/connection-manager/flat-file-connection-manager.md)  
[Типы данных служб Integration Services](../integration-services/data-flow/integration-services-data-types.md)  
  
  
  
