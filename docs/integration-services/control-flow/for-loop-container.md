---
title: "Контейнер &#171;цикл по элементам&#187; | Microsoft Docs"
ms.custom: ""
ms.date: "03/14/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "integration-services"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "sql13.dts.designer.forloopcontainerdetails.f1"
  - "sql13.dts.designer.forloopcontainer.f1"
helpviewer_keywords: 
  - "повторяющийся поток управления"
  - "контейнеры [службы Integration Services], цикл For"
  - "контейнеры «цикл по элементам»"
ms.assetid: 44cf7355-992b-4bbf-a28c-bfb012de06f6
caps.latest.revision: 55
author: "douglaslMS"
ms.author: "douglasl"
manager: "jhubbard"
caps.handback.revision: 54
---
# Контейнер &#171;цикл по элементам&#187;
  Контейнер «цикл по элементам» определяет повторяющийся поток управления в пакете. Управление циклом аналогично структуре цикла **For** в языках программирования. В ходе каждого повтора цикла контейнер «цикл по элементам» вычисляет выражение и повторяет рабочий процесс до тех пор, пока результатом выражения не станет **False**.  
  
 Контейнер "цикл по элементам" использует следующие элементы для определения цикла:  
  
-   дополнительное выражение инициализации, в котором присваиваются значения счетчикам цикла;  
  
-   выражение вычисления, содержащее выражение, которое используется для проверки необходимости продолжения или остановки цикла;  
  
-   дополнительное выражение итерации, которое увеличивает или уменьшает счетчик цикла.  
  
 На следующей диаграмме показан контейнер «цикл по элементам» с задачей «Отправка почты». Если выражение инициализации равно `@Counter = 0`, выражение вычисления равно `@Counter < 4`, а выражение итерации равно `@Counter = @Counter + 1`, то цикл повторяется четыре раза, после чего отправляет четыре электронных сообщения.  
  
 ![Контейнер цикла For, повторяющий задачу четыре раза](../../integration-services/control-flow/media/ssis-forloop.gif "Контейнер цикла For, повторяющий задачу четыре раза")  
  
 Выражения должны являться допустимыми выражениями служб [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] [!INCLUDE[ssISnoversion](../../includes/ssisnoversion-md.md)] .  
  
 Для создания выражений инициализации и присваивания можно использовать оператор присваивания (=). Этот оператор не поддерживается грамматикой выражений служб Integration Services и может быть использован в контейнере «цикл по элементам» только в выражениях инициализации и присваивания. Любое выражение, использующее оператор присваивания, должно содержать выражение синтаксиса `@Var = <expression>`, где **Var** является переменной выполнения, а \<expression> — это выражение, соответствующее правилам синтаксиса выражения служб [!INCLUDE[ssIS](../../includes/ssis-md.md)]. Выражение может содержать переменные, литералы и другие операторы и функции, которые поддерживаются грамматикой выражений служб SSIS. Выражение должно возвращать тип данных, который может быть приведен к типу данных переменной.  
  
 Контейнер «цикл по элементам» может содержать только одно выражение вычисления. Это означает, что контейнер «цикл по элементам» выполняет все элементы потока управления одинаковое количество раз. Ввиду того, что контейнер «цикл по элементам» может включать другие контейнеры «цикл по элементам», в пакетах можно создавать вложенные циклы и сложные циклы выполнения.  
  
 Можно устанавливать свойство транзакции для контейнера «цикл по элементам», чтобы определить транзакцию для вложенного набора пакета потока управления. Таким образом, возможно выполнение транзакции на более детальном уровне. Например, если контейнер «цикл по элементам» несколько раз повторяет выполнение потока управления для обновления данных, можно настроить «цикл по элементам» и его поток управления с использованием транзакции, чтобы в случае неполного обновления данных обновление вообще не было произведено. Дополнительные сведения см. в разделе [Транзакции служб Integration Services](../../integration-services/integration-services-transactions.md).  
  
## Настройка контейнера «цикл по элементам»  
 Значения свойств можно задавать с помощью конструктора [!INCLUDE[ssIS](../../includes/ssis-md.md)] или программными средствами.  
  
 Дополнительные сведения о свойствах, которые можно задать в конструкторе служб [!INCLUDE[ssIS](../../includes/ssis-md.md)] , см. в следующих разделах:  
  
-   [Редактор циклов по элементам](../Topic/For%20Loop%20Editor.md)  
  
-   [Страница «Выражения»](../../integration-services/expressions/expressions-page.md)  
  
 Дополнительные сведения о задании этих свойств программными средствами см. в документации по классу **T:Microsoft.SqlServer.Dts.Runtime.ForLoop** в руководстве для разработчиков.  
  
## Связанные задачи  
 Сведения о настройке контейнера «цикл по элементам» см. в следующих разделах.  
  
-   [Настройка контейнера «цикл по элементам»](../Topic/Configure%20a%20For%20Loop%20Container.md)  
  
-   [Задание свойств задач или контейнеров](../Topic/Set%20the%20Properties%20of%20a%20Task%20or%20Container.md)  
  
## См. также  
 [Поток управления](../../integration-services/control-flow/control-flow.md)   
 [Выражения служб Integration Services (SSIS)](../../integration-services/expressions/integration-services-ssis-expressions.md)  
  
  