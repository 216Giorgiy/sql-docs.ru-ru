---
title: "Пользовательский интерфейс графического конструктора запросов | Microsoft Docs"
ms.custom: ""
ms.date: "03/14/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "reporting-services-sharepoint"
  - "reporting-services-native"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "10012"
  - "sql13.rtp.rptdesigner.dataview.vdtquerydesigner.f1"
helpviewer_keywords: 
  - "графический конструктор запросов [службы Reporting Services]"
  - "источники данных [службы Reporting Services], создание"
  - "текстовый конструктор запросов [службы Reporting Services]"
  - "конструкторы запросов [службы Reporting Services]"
  - "службы Reporting Services, конструкторы запросов"
ms.assetid: 5022ae33-03a3-48de-8ac1-82742f48cebe
caps.latest.revision: 54
author: "guyinacube"
ms.author: "asaxton"
manager: "erikre"
caps.handback.revision: 54
---
# Пользовательский интерфейс графического конструктора запросов
  [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] предоставляют графический и текстовый конструкторы запросов, предназначенных для получения данных из реляционной базы данных в качестве набора данных отчета в конструкторе отчетов. Графический конструктор запросов используется для интерактивного создания запроса и для просмотра результатов при работе с источниками данных следующих типов: [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], Oracle, OLE DB и ODBC. Текстовый конструктор запросов применяется для задания нескольких инструкций [!INCLUDE[tsql](../../includes/tsql-md.md)], запросов и команд со сложным синтаксисом и запросов на основе выражений. Дополнительные сведения см. в разделе [Пользовательский интерфейс текстового конструктора запросов](../Topic/Text-based%20Query%20Designer%20User%20Interface.md). Дополнительные сведения о работе с конкретными типами источников данных см. в разделе [Наборы данных отчетов (службы SSRS)](../../reporting-services/report-data/report-datasets-ssrs.md).  
  
 .  
  
## Графический конструктор запросов  
 Графический конструктор запросов поддерживает три типа команд запроса: **Text**, **StoredProcedure**или **TableDirect**. До создания запроса для набора данных нужно выбрать параметр типа команды на странице «Запрос» диалогового окна [Свойства набора данных](../Topic/Dataset%20Properties%20Dialog%20Box,%20Query.md) .  
  
 Доступны следующие параметры типа запроса.  
  
-   **Text** Поддерживает стандартный текст запросов языка [!INCLUDE[tsql](../../includes/tsql-md.md)] для источников данных реляционных баз данных, включая модули обработки данных для [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и Oracle.  
  
-   **TableDirect** Возвращает все столбцы из выбранной таблицы. Например, для таблицы с именем Customers будет использован эквивалент инструкции [!INCLUDE[tsql](../../includes/tsql-md.md)] `SELECT * FROM Customers`.  
  
-   **StoredProcedure** Поддерживает вызовы хранимых процедур из источника данных. Чтобы использовать этот параметр, необходимо иметь разрешение на выполнение хранимых процедур. Это разрешение на источник данных предоставляет администратор базы данных.  
  
 Типом команды по умолчанию является **Text**.  
  
> [!NOTE]  
>  Некоторые модули обработки данных не поддерживают определенные типы команд. Чтобы параметр стал доступен, базовый поставщик данных должен поддерживать соответствующий тип команды.  
  
### Тип команды Text  
 При использовании типа **Text** графический конструктор запросов предоставляет четыре раздела (или панели). Для запроса [!INCLUDE[tsql](../../includes/tsql-md.md)] можно указывать столбцы, псевдонимы, параметры сортировки и критерии фильтра. Можно просматривать текст созданного запроса, выполнять его и просматривать результирующий набор. На следующем рисунке показаны четыре панели.  
  
 ![Графический конструктор запросов для SQL-запросов](../../reporting-services/report-data/media/rsqd-dsaw-sql.gif "Графический конструктор запросов для SQL-запросов")  
  
 В следующей таблице описываются функции каждой панели.  
  
|Панель|Функция|  
|----------|--------------|  
|Схема|Отображает графическое представление таблиц в запросе. Используйте эту панель для выбора полей и определения связей между таблицами.|  
|Сетка|Отображает список полей, возвращаемых запросом. Используйте эту панель, чтобы определить псевдонимы, порядок сортировки, фильтры, группирования и параметры.|  
|SQL|Отображает запрос на языке [!INCLUDE[tsql](../../includes/tsql-md.md)] , представляемый панелями «Диаграмма» и «Сетка». Используйте эту панель, чтобы создать или изменить запрос на языке [!INCLUDE[tsql](../../includes/tsql-md.md)].|  
|Результат|Отображает результаты запроса. Чтобы выполнить запрос, щелкните правой кнопкой мыши любую область и выберите команду **Выполнить** либо нажмите кнопку **Выполнить** на панели инструментов.|  
  
 При изменении данных на любой из первых трех панелей эти изменения отобразятся в остальных панелях. Например, при добавлении таблицы в панель «Диаграмма» эта таблица автоматически добавится в запрос на языке [!INCLUDE[tsql](../../includes/tsql-md.md)] в панели «SQL». Добавление поля в запрос в панель «SQL» автоматически добавит поле в список в панели «Сетка» и обновит таблицу в панели «Диаграмма».  
  
 Дополнительные сведения см. в разделе [Инструменты конструктора запросов и представлений (визуальные инструменты для баз данных)](../../ssms/visual-db-tools/query-and-view-designer-tools-visual-database-tools.md).  
  
#### Панель инструментов графического конструктора запросов  
 На панели инструментов графического конструктора запросов расположены кнопки, помогающие проектировать запросы [!INCLUDE[tsql](../../includes/tsql-md.md)] с помощью графического интерфейса.  
  
|Кнопка|Description|  
|------------|-----------------|  
|**Редактировать как текст**|Переключиться из текстового конструктора запросов в графический и обратно.|  
|**Импорт**|Импорт существующего запроса из файла или отчета. Поддерживаются только SQL- и RDL-файлы. Дополнительные сведения см. в разделе [Внедренные и общие наборы данных отчета (построитель отчетов и службы SSRS)](../../reporting-services/report-data/report-embedded-datasets-and-shared-datasets-report-builder-and-ssrs.md).|  
|![Переключатель «Показать/скрыть панель диаграмм»](../../reporting-services/report-data/media/rsqdicon-showhidediagram.png "Переключатель «Показать/скрыть панель диаграмм»")|Показать или скрыть панель «Диаграмма».|  
|![Переключатель «Показать/скрыть панель сетки»](../../reporting-services/report-data/media/rsqdicon-showhidegrid.png "Переключатель «Показать/скрыть панель сетки»")|Показать или скрыть панель «Сетка».|  
|![Переключатель «Показать/скрыть панель SQL»](../../reporting-services/report-data/media/rsqdicon-showhidesql.png "Переключатель «Показать/скрыть панель SQL»")|Показать или скрыть панель «SQL».|  
|![Переключатель «Показать/скрыть панель результатов»](../../reporting-services/report-data/media/rsqdicon-showhideresult.png "Переключатель «Показать/скрыть панель результатов»")|Показать или скрыть панель «Результат».|  
|![Выполнение запроса](../../reporting-services/report-data/media/rsqdicon-run.png "Выполнение запроса")|Выполните запрос.|  
|![Кнопка «Прове��ить SQL» на панели SQL](../../reporting-services/report-data/media/rsqdicon-verifysql.png "Кнопка «Прове��ить SQL» на панели SQL")|Проверить синтаксис текста запроса.|  
|![Сортировка по возрастанию для выбранного поля](../../reporting-services/report-data/media/rsqdicon-sortascending.png "Сортировка по возрастанию для выбранного поля")|Установить порядок сортировки **Сортировка по возрастанию** для выбранного столбца в панели «Диаграмма».|  
|![Сортировка по убыванию для выбранного поля](../../reporting-services/report-data/media/rsqdicon-sortdescending.png "Сортировка по убыванию для выбранного поля")|Установить порядок сортировки **Сортировка по убыванию** для выбранного столбца в панели «Диаграмма».|  
|![Удаление фильтра по выбранному полю](../../reporting-services/report-data/media/rsqdicon-removefilter.png "Удаление фильтра по выбранному полю")|Удалить фильтр для выбранного столбца в панели «Диаграмма», помеченного как имеющий фильтр (![Значок фильтра рядом с выбранным столбцом для фильтрации](../../reporting-services/report-data/media/rsqdicon-filter.png "Значок фильтра рядом с выбранным столбцом для фильтрации")).|  
|![Использование Group By для выбранного поля](../../reporting-services/report-data/media/rsqdicon-usegroupby.png "Использование Group By для выбранного поля")|Показать или скрыть столбец **Group By** в панели «Сетка». Если переключатель **Group By** включен, в панели «Сетка» появляется дополнительный столбец с именем **Group By** и каждое значение выбранного столбца в запросе принимает значение **Group By**. Это приводит к тому, что выбранный столбец включается в предложение Group By в тексте SQL-запроса. Кнопка «Group By» используется для автоматического добавления предложения GROUP BY, включающего все столбцы в предложении SELECT. Если предложение SELECT включает вызовы агрегатных функций (например, SUM (ColumnName)), включите каждый столбец, не участвующий в статистическом вычислении, в предложение GROUP BY, если нужно, чтобы он появился в результирующем наборе.<br /><br /> Чтобы появиться в панели «Результат», каждый столбец в запросе должен иметь определенную для него агрегатную функцию, вычисляющую значение, которое будет отображаться в панели «Результат», либо этот столбец нужно указать в предложении GROUP BY SQL-запроса.|  
|![Добавление новой таблицы на панель диаграмм](../../reporting-services/report-data/media/rsqdicon-addtable.png "Добавление новой таблицы на панель диаграмм")|Добавить новую таблицу из источника данных в панель «Диаграмма».<br /><br /> **Примечание** Если добавляется новая таблица, конструктор запросов пытается сопоставить связи внешнего ключа из источника данных. После добавления таблицы подтвердите, что отношения внешнего ключа, представленные связями между таблицами, корректны.|  
  
#### Пример  
 Следующий запрос возвращает список фамилий из таблицы [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] Person **базы данных** :  
  
```  
SELECT LastName FROM Person.Person;  
```  
  
 С панели «SQL» можно также запустить хранимую процедуру. Следующий запрос выполняет хранимую процедуру **uspGetEmployeeManagers** в базе данных [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] :  
  
```  
EXEC uspGetEmployeeManagers '1';  
```  
  
### Тип команды TableDirect  
 При использовании типа **TableDirect** графический конструктор запросов отображает раскрывающийся список доступных таблиц из источника данных и панель "Результат". Если выбрать таблицу и нажать кнопку **Выполнить** , возвращаются все столбцы этой таблицы.  
  
> [!NOTE]  
>  Функция TableDirect поддерживается только источниками данных типа **OLE DB** и **ODBC**.  
  
 В следующей таблице описываются функции каждой панели.  
  
|Панель|Функция|  
|----------|--------------|  
|Раскрывающийся список таблиц|Содержит перечень всех доступных таблиц из источника данных. Выберите хранимую процедуру из списка, чтобы сделать ее активной.|  
|Результат|Отображает все столбцы из выбранной таблицы. Для запуска запроса к таблице нажмите кнопку **Выполнить** на панели инструментов.|  
  
#### Кнопки панели инструментов для типа команды TableDirect  
 Панель инструментов графического конструктора запросов содержит раскрывающийся список таблиц в источнике данных. В следующей таблице перечислены все кнопки и их функции.  
  
|Кнопка|Description|  
|------------|-----------------|  
|**Редактировать как текст**|Переключиться из текстового конструктора запросов в графический и обратно.|  
|**Импорт**|Импорт существующего запроса из файла или отчета. Поддерживаются только SQL- и RDL-файлы. Дополнительные сведения см. в разделе [Внедренные и общие наборы данных отчета (построитель отчетов и службы SSRS)](../../reporting-services/report-data/report-embedded-datasets-and-shared-datasets-report-builder-and-ssrs.md).|  
|![Значок для кнопки «Обычный конструктор запросов»](../../reporting-services/report-data/media/icongenericquerydesigner.png "Значок для кнопки «Обычный конструктор запросов»")|Переключиться из графического конструктора запросов в обычный и обратно, сохранив текст запроса или вид хранимой процедуры.|  
|![Выполнение запроса](../../reporting-services/report-data/media/rsqdicon-run.png "Выполнение запроса")|Вернуть все столбцы из выбранной таблицы.|  
  
### Тип команды StoredProcedure  
 При использовании типа **StoredProcedure** графический конструктор запросов отображает раскрывающийся список доступных хранимых процедур из источника данных и панель "Результат". В следующей таблице описываются функции каждой панели.  
  
|Панель|Функция|  
|----------|--------------|  
|Раскрывающийся список хранимых процедур|Содержит список всех доступных хранимых процедур из источника данных. Выберите хранимую процедуру из списка, чтобы сделать ее активной.|  
|Результат|Отображает результат выполнения хранимой процедуры. Для запуска выбранной хранимой процедуры нажмите кнопку **Выполнить** на панели инструментов.|  
  
#### Кнопки панели инструментов для типа команды StoredProcedure  
 Панель инструментов графического конструктора запросов содержит раскрывающийся список хранимых процедур в источнике данных. В следующей таблице перечислены все кнопки и их функции.  
  
|Кнопка|Description|  
|------------|-----------------|  
|**Редактировать как текст**|Переключиться из текстового конструктора запросов в графический и обратно.|  
|**Импорт**|Импорт существующего запроса из файла или отчета. Поддерживаются только SQL- и RDL-файлы. Дополнительные сведения см. в разделе [Внедренные и общие наборы данных отчета (построитель отчетов и службы SSRS)](../../reporting-services/report-data/report-embedded-datasets-and-shared-datasets-report-builder-and-ssrs.md).|  
|![Выполнение запроса](../../reporting-services/report-data/media/rsqdicon-run.png "Выполнение запроса")|Выполнить выбранную хранимую процедуру.|  
|Раскрывающийся список хранимых процедур|Щелкните стрелку вниз, чтобы отобразить список доступных хранимых процедур из источника данных. Для выбора хранимой процедуры щелкните любую хранимую процедуру в этом списке.|  
  
#### Пример  
 Следующая хранимая процедура вызывает список руководителей из базы данных [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)]. Эта хранимая процедура принимает в качестве параметра идентификатор *BusinessEntityID* . Можно ввести любое небольшое целое число.  
  
 `uspGetEmployeeManagers '1';`  
  
## См. также  
 [Средства проектирования запросов (службы SSRS)](../../reporting-services/report-data/query-design-tools-ssrs.md)   
 [Наборы данных отчетов (службы SSRS)](../../reporting-services/report-data/report-datasets-ssrs.md)   
 [Тип соединения SQL Server (службы SSRS)](../../reporting-services/report-data/sql-server-connection-type-ssrs.md)   
 [Тип соединения OLE DB (службы SSRS)](../../reporting-services/report-data/ole-db-connection-type-ssrs.md)   
 [Наборы данных отчетов (службы SSRS)](../../reporting-services/report-data/report-datasets-ssrs.md)   
 [Тип соединения Oracle (службы SSRS)](../../reporting-services/report-data/oracle-connection-type-ssrs.md)   
 [Файл конфигурации RSReportDesigner](../../reporting-services/report-server/rsreportdesigner-configuration-file.md)   
 [Разделы по конструированию запросов и представлений (визуальные инструменты для баз данных)](../../ssms/visual-db-tools/design-queries-and-views-how-to-topics-visual-database-tools.md)  
  
  