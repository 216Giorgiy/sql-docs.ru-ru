---
title: Преобразование схем DB2 (DB2ToSQL) | Документы Microsoft
ms.prod: sql
ms.custom: ''
ms.date: 01/19/2017
ms.reviewer: ''
ms.suite: sql
ms.technology: ssma
ms.tgt_pltfrm: ''
ms.topic: conceptual
applies_to:
- Azure SQL Database
- SQL Server
ms.assetid: 7947efc3-ca86-4ec5-87ce-7603059c75a0
caps.latest.revision: 9
author: Shamikg
ms.author: Shamikg
manager: craigg
ms.openlocfilehash: b7d16e10ec2dfb3474679f63aff9941bd2ef84a8
ms.sourcegitcommit: 8aa151e3280eb6372bf95fab63ecbab9dd3f2e5e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/05/2018
ms.locfileid: "34774500"
---
# <a name="converting-db2-schemas-db2tosql"></a>Преобразование схем DB2 (DB2ToSQL)
После подключения к DB2, подключается к [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)], и параметры сопоставления данных и набор проектов, можно преобразовать объекты базы данных DB2 для [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] объектов базы данных.  
  
## <a name="the-conversion-process"></a>Процесс преобразования  
Преобразование объектов базы данных принимает определения объектов из DB2, преобразует их в аналогичные [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] объектов, а затем загружает эти данные в метаданных SSMA. Не загружает данные в экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)]. Затем можно просматривать объекты и их свойства с помощью [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] обозреватель метаданных.  
  
Во время преобразования SSMA выводит сообщения об ошибках на панели списка ошибок и выходных сообщений в области вывода. Позволяет определить, имеются ли изменения баз данных DB2 или процесс преобразования для получения результатов требуемое преобразование выходные данные и сведения об ошибке.  
  
## <a name="setting-conversion-options"></a>Установка параметров преобразования  
Перед преобразованием объектов, проверьте параметры преобразования проекта в **параметры проекта** диалоговое окно. В этом диалоговом окне, можно задать как SSMA преобразует функции и глобальные переменные. Дополнительные сведения см. в разделе [параметры проекта &#40;преобразования&#41; &#40;DB2ToSQL&#41;](../../ssma/db2/project-settings-conversion-db2tosql.md).  
  
## <a name="conversion-results"></a>Результаты преобразования  
В следующей таблице показаны объекты DB2 преобразуются и итоговый [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] объектов:  
  
|Объекты DB2|Полученные объекты SQL Server|  
|-----------|----------------------------|  
|Типы данных|**SSMA сопоставляет все типы, кроме перечисленных ниже следующие:**<br /><br />CLOB: Некоторые собственных функций для работы с этим типом не поддерживается (например CLOB_EMPTY())<br /><br />Большой двоичный объект: Некоторые собственных функций для работы с этим типом не поддерживается (например BLOB_EMPTY())<br /><br />DBLOB: Некоторые собственных функций для работы с этим типом не поддерживается (например DBLOB_EMPTY())|  
|Определяемые пользователем типы|**SSMA сопоставляет следующие пользовательские:**<br /><br />Отдельный тип<br /><br />Структурный тип<br /><br />Типы данных SQL PL — Обратите внимание: тип слабое курсора не поддерживаются.|  
|Специальные регистров|**SSMA сопоставляет только регистры, перечисленных ниже:**<br /><br />ТЕКУЩАЯ ОТМЕТКА ВРЕМЕНИ<br /><br />ТЕКУЩАЯ ДАТА<br /><br />ТЕКУЩЕЕ ВРЕМЯ<br /><br />ТЕКУЩИЙ ЧАСОВОЙ ПОЯС<br /><br />ТЕКУЩИЙ ПОЛЬЗОВАТЕЛЬ<br /><br />Функция SESSION_USER и пользователя<br /><br />SYSTEM_USER<br /><br />ТЕКУЩИЙ CLIENT_APPLNAME<br /><br />ТЕКУЩИЙ CLIENT_WRKSTNNAME<br /><br />ТЕКУЩЕЕ ВРЕМЯ ОЖИДАНИЯ БЛОКИРОВКИ<br /><br />ТЕКУЩАЯ СХЕМА<br /><br />ТЕКУЩИЙ СЕРВЕР<br /><br />ТЕКУЩИЙ ИЗОЛЯЦИИ<br /><br />Другие специальные регистрирует не сопоставляются с семантики SQL server.|  
|CREATE TABLE|**SSMA сопоставляет CREATE TABLE, за исключением следующих случаев:**<br /><br />Многомерные таблиц кластеризации (MDC)<br /><br />Кластерные диапазон таблицы (RCT)<br /><br />Секционированные таблицы<br /><br />Отсоединенные таблицы<br /><br />Предложение системы отслеживания ИЗМЕНЕННЫХ данных<br /><br />СКРЫТЫЕ IMPLICITLY параметр<br /><br />Параметр VOLATILE|  
|CREATE VIEW|SSMA сопоставляет CREATE VIEW с «С локальной ПРОВЕРЬТЕ параметр», но другие параметры не сопоставлены семантику SQL server|  
|CREATE INDEX|**SSMA сопоставляет CREATE INDEX, за исключением следующих случаев:**<br /><br />XML-индекс<br /><br />Параметр BUSINESS_TIME без ПЕРЕКРЫТИЯ<br /><br />СЕКЦИОНИРОВАННЫЕ предложения<br /><br />СПЕЦИФИКАЦИЯ только параметр<br /><br />РАСШИРИТЬ с помощью параметра<br /><br />Параметр MINPCTUSED<br /><br />Разбиение на страницы|  
|Триггеры|**SSMA сопоставляет следующую семантику триггер:**<br /><br />После / EACH СТРОК ТРИГГЕРОВ<br /><br />После /FOR запускает каждой инструкции<br /><br />Прежде ЧЕМ / EACH строки и ВМЕСТО / FOR EACH СТРОК триггеров|  
|Последовательности;|Сопоставлены.|  
|Инструкция SELECT|**SSMA карт ВЫБЕРИТЕ со следующими исключениями:**<br /><br />Предложение данных изменений таблица ссылке — частично сопоставлены, но ОКОНЧАТЕЛЬНОГО таблицы не поддерживается<br /><br />Ссылка на таблицу предложение — частично сопоставлены, но только для таблицы ссылке, внешней таблицы ссылкой, analyze_table-expression, производную таблицу коллекции, xmltable выражение не сопоставляются с семантику SQL server<br /><br />Предложение спецификации периода — не сопоставлен.<br /><br />Предложение продолжить обработчик — не сопоставлен.<br /><br />Предложение типизированные корреляции – не сопоставлен.<br /><br />Предложение параллельный доступ разрешения — не сопоставлен.|  
|ЗНАЧЕНИЯ инструкции|Сопоставлен.|  
|Инструкция INSERT|Сопоставлен.|  
|Инструкции UPDATE|S**SMA сопоставляет обновления со следующими исключениями:**<br /><br />Ссылка на таблицу предложение — только для таблицы ссылке не сопоставлен семантику SQL server<br /><br />Предложение периода — не сопоставлен.|  
|Инструкция MERGE|**SSMA сопоставляет СЛИЯНИЯ со следующими исключениями:**<br /><br />Единый vs несколько вхождений каждое предложение — сопоставляется семантику SQL server ограниченный вхождения каждого предложения<br /><br />Предложение СИГНАЛА — не соответствует семантику SQL Server<br /><br />Смешанные обновления и удалить предложения — не сопоставлен семантику SQL Server<br /><br />Период предложения — не соответствует семантику SQL Server|  
|Инструкция DELETE|**SSMA maps удалить со следующими исключениями:**<br /><br />Ссылка на таблицу предложение — только для таблицы ссылке не сопоставлен семантику SQL server<br /><br />Предложение периода — не соответствует семантику SQL Server|  
|Уровень изоляции и тип блокировки|Сопоставлен.|  
|Процедуры (SQL)|Сопоставлены.|  
|Процедуры (внешнее)|Требуется обновление вручную.|  
|Процедуры (точкой)|Не соответствуют семантику SQL Server.|  
|Оператор присваивания|Сопоставлен.|  
|Инструкции CALL для процедуры|Сопоставлен.|  
|Инструкция CASE |Сопоставлен.|  
|Оператор FOR|Сопоставлен.|  
|GOTO, инструкция|Сопоставлен.|  
|Инструкция IF|Сопоставлен.|  
|Инструкция ИТЕРАЦИИ|Сопоставлен.|  
|ОСТАВЬТЕ инструкции|Сопоставлен.|  
|Оператор ЦИКЛА|Сопоставлен.|  
|ПОВТОРИТЕ инструкцию|Сопоставлен.|  
|RESIGNAL инструкции|Условия не поддерживаются. Сообщения могут быть обязательными.|  
|Оператор RETURN|Сопоставлен.|  
|Инструкция СИГНАЛА|Условия не поддерживаются. Сообщения могут быть обязательными.|  
|Оператор WHILE|Сопоставлен.|  
|ДИАГНОСТИКА оператор GET|**SSMA сопоставляет получить диагностики со следующими исключениями:**<br /><br />ROW_COUNT — сопоставлен.<br /><br />DB2_RETURN_STATUS — сопоставлен.<br /><br />MESSAGE_TEXT — сопоставлен.<br /><br />DB2_SQL_NESTING_LEVEL - не сопоставлен семантику SQL Server<br /><br />DB2_TOKEN_STRING - не сопоставлен семантику SQL Server|  
|Курсоры|**SSMA сопоставляет КУРСОРЫ со следующими исключениями:**<br /><br />Инструкция ALLOCATE CURSOR - не сопоставлен семантику SQL Server<br /><br />СВЯЗАТЬ ЛОКАТОРОВ заявление — не соответствует семантику SQL Server<br /><br />Инструкция DECLARE CURSOR - Returnability предложение не сопоставлен семантику SQL server<br /><br />Инструкции FETCH — частичное сопоставление. Только поддерживаются переменные в качестве целевого объекта. ДЕСКРИПТОР sqlda, то номер не сопоставлен семантику SQL server|  
|Переменные|Сопоставлены.|  
|Исключения, обработчиками и состояния|**SSMA сопоставляет «обработки исключений» со следующими исключениями:**<br /><br />Выйти из обработчиков — сопоставлены.<br /><br />ОТМЕНИТЬ обработчики — сопоставлены.<br /><br />ПРОДОЛЖИТЬ обработчики — не сопоставлены.<br /><br />Условия — он не сопоставлен семантику SQL server.|  
|Динамические инструкции SQL|Не сопоставлен.|  
|Aliases|Сопоставлены.|  
|Псевдонимы|Частичное сопоставление. Ручная обработка необходима для нижележащий объект|  
|Синонимы|Сопоставлены.|  
|Стандартные функции в DB2|SSMA сопоставляет стандартные функции DB2 при эквивалентную функцию в SQL Server:|  
|Авторизация|Не сопоставлен.|  
|Предикаты|Сопоставлены.|  
|SELECT INTO, инструкция|Не сопоставлен.|  
|ЗНАЧЕНИЯ в инструкции|Не сопоставлен.|  
|Управление транзакциями|Не сопоставлен.|  
  
## <a name="converting-db2-database-objects"></a>Преобразование объектов базы данных DB2  
Чтобы преобразовать объекты базы данных DB2, сначала выберите объекты, которые требуется преобразовать и получится SSMA выполнить преобразование. Для просмотра выходных сообщений во время преобразования на **представление** последовательно выберите пункты **вывода**.  
  
**Для преобразования объектов DB2 в синтаксис SQL Server**  
  
1.  В обозревателе метаданных DB2, разверните сервер DB2, а затем разверните **схемы**.  
  
2.  Выберите объекты для преобразования:  
  
    -   Чтобы преобразовать все схемы, установите флажок рядом с **схемы**.  
  
    -   Чтобы преобразовать или опускать базы данных, установите флажок рядом с именем схемы.  
  
    -   Преобразовать или пропустить категории объектов, разверните схемы и установите или снимите флажок рядом с категорией.  
  
    -   Преобразовать или исключить отдельные объекты, разверните папку «категория» и затем установите или снимите флажок рядом с объектом.  
  
3.  Для преобразования всех выбранных объектов, щелкните правой кнопкой мыши **схемы** и выберите **преобразование схемы**.  
  
    Можно также преобразовать отдельных объектов и категории объектов, щелкните правой кнопкой мыши объект или его родительской папки, а затем выбрав **преобразование схемы**.  
  
## <a name="viewing-conversion-problems"></a>Просмотр проблемы преобразования  
Некоторые объекты DB2 не могут быть преобразованы. Показателях успеха преобразования можно определить, просмотрев отчет сводки преобразования.  
  
**Чтобы просмотреть сводный отчет**  
  
1.  Выберите в обозревателе метаданных DB2 **схемы**.  
  
2.  В области справа выберите **отчетов** вкладки.  
  
    Этот отчет показывает отчет сводки оценки для всех объектов базы данных, которые оцениваемого, или преобразованы. Можно также просмотреть сводный отчет для отдельных объектов:  
  
    -   Для просмотра отчета для отдельных схему, выберите схему в обозревателе метаданных DB2.  
  
    -   Чтобы просмотреть отчет, для отдельного объекта, выберите объект в обозревателе метаданных DB2. Объекты, имеющие проблемы преобразования имеют красный значок ошибки.  
  
Для объектов, которые не удалось выполнить преобразование можно просмотреть синтаксис, который привел к сбою преобразования.  
  
**Для просмотра отдельных преобразования проблем**  
  
1.  В обозревателе метаданных DB2 разверните **схемы**.  
  
2.  Раскройте схему, которая показывает красный значок ошибки.  
  
3.  В области схемы разверните папку с красным значком ошибки.  
  
4.  Выберите объект, который имеет красный значок ошибки.  
  
5.  В области справа щелкните **отчетов** вкладки.  
  
6.  В верхней части **отчетов** вкладка — в раскрывающемся списке. Если в списке отображаются **статистики**, выделение **источника**.  
  
    SSMA отобразит исходный код и несколько кнопок непосредственно над кодом.  
  
7.  Нажмите кнопку **Далее проблема** кнопки. Это красный значок ошибки с стрелка, указывающая вправо.  
  
    SSMA будет выделить первый проблемный исходный код, найденного в указанном объекте.  
  
Для каждого элемента, которые не могут быть преобразованы необходимо определить, следует выполнять над объектом:  
  
-   Можно изменить исходный код для процедуры на **SQL** вкладки.  
  
-   Можно изменить объект в базе данных DB2 для удаления или изменения неисправного кода. Чтобы загрузить обновленный код в SSMA, необходимо обновить метаданные. Дополнительные сведения см. в разделе [подключение к базе данных DB2 &#40;DB2ToSQL&#41;](../../ssma/db2/connecting-to-db2-database-db2tosql.md).  
  
-   Объект можно исключить из процесса миграции. В [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] обозревателя метаданных и обозревателя метаданных DB2, снимите флажок рядом с элементом перед загрузкой объектов в [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] и перенос данных из DB2.  
  
## <a name="next-step"></a>Следующий шаг  
Следующим шагом в процессе миграции должно [загрузит преобразованные объекты в SQL Server](http://msdn.microsoft.com/en-us/f4ea1ced-9f9f-4a9d-88ab-81dbab64adc3).  
  
## <a name="see-also"></a>См. также  
[Миграция данных DB2 в SQL Server &#40;DB2ToSQL&#41;](../../ssma/db2/migrating-db2-data-into-sql-server-db2tosql.md)  
  
