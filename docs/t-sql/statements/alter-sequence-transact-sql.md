---
title: "ПОСЛЕДОВАТЕЛЬНОСТЬ ALTER (Transact-SQL) | Документы Microsoft"
ms.custom: 
ms.date: 08/08/2015
ms.prod: sql-non-specified
ms.prod_service: database-engine, sql-database
ms.service: 
ms.component: t-sql|statements
ms.reviewer: 
ms.suite: sql
ms.technology:
- database-engine
ms.tgt_pltfrm: 
ms.topic: language-reference
f1_keywords:
- ALTER_SEQUENCE_TSQL
- ALTER SEQUENCE
dev_langs:
- TSQL
helpviewer_keywords:
- sequence number object, altering
- ALTER SEQUENCE statement
ms.assetid: decc0760-029e-4baf-96c9-4a64073df1c2
caps.latest.revision: 24
author: edmacauley
ms.author: edmaca
manager: cguyer
ms.workload: On Demand
ms.translationtype: MT
ms.sourcegitcommit: 876522142756bca05416a1afff3cf10467f4c7f1
ms.openlocfilehash: de7fd182be8fd79574c098a499a40a34d38aaf21
ms.contentlocale: ru-ru
ms.lasthandoff: 09/01/2017

---
# <a name="alter-sequence-transact-sql"></a>ALTER SEQUENCE (Transact-SQL)
[!INCLUDE[tsql-appliesto-ss2012-asdb-xxxx-xxx-md](../../includes/tsql-appliesto-ss2012-asdb-xxxx-xxx-md.md)]

  Изменяет аргументы существующего объекта последовательности. Если эта последовательность создавалась с **КЭША** параметр, изменение последовательности выполнит повторное создание кэша.  
  
 Объекты последовательностей создаются с помощью [CREATE SEQUENCE](../../t-sql/statements/create-sequence-transact-sql.md) инструкции. Последовательность — это целочисленное значение, она может иметь любой тип данных, возвращающий целое число. Тип данных нельзя изменить с помощью инструкции ALTER SEQUENCE. Чтобы изменить тип данных, удалите и заново создайте объект последовательности.  
  
 Последовательность представляет собой определяемый пользователем объект, привязанный к схеме, который формирует последовательность числовых значений в соответствии со спецификацией. Новые значения формируются из последовательности функцией NEXT VALUE FOR. Получить несколько значений из последовательности за один раз можно с помощью функции **sp_sequence_get_range** . Сведения и сценарии использования CREATE SEQUENCE **sp_sequence_get_range**и функции NEXT VALUE FOR, в разделе [порядковые номера](../../relational-databases/sequence-numbers/sequence-numbers.md).  
  
 ![Значок ссылки на раздел](../../database-engine/configure-windows/media/topic-link.gif "Значок ссылки на раздел") [Синтаксические обозначения в Transact-SQL](../../t-sql/language-elements/transact-sql-syntax-conventions-transact-sql.md)  
  
## <a name="syntax"></a>Синтаксис  
  
```  
  
ALTER SEQUENCE [schema_name. ] sequence_name  
    [ RESTART [ WITH <constant> ] ]  
    [ INCREMENT BY <constant> ]  
    [ { MINVALUE <constant> } | { NO MINVALUE } ]  
    [ { MAXVALUE <constant> } | { NO MAXVALUE } ]  
    [ CYCLE | { NO CYCLE } ]  
    [ { CACHE [ <constant> ] } | { NO CACHE } ]  
    [ ; ]  
```  
  
## <a name="arguments"></a>Аргументы  
 *sequence_name*  
 Указывает уникальное имя, под которым последовательность известна в базе данных. Тип — **sysname**.  
  
 ПЕРЕЗАПУСТИТЕ [WITH \<константа >]  
 Следующее значение, возвращаемое объектом последовательности. Если указано, то значение RESTART WITH должно быть целым числом, которое меньше максимального значения объекта последовательности или равно ему и меньше минимального или равно ему. Если значение WITH не указано, то нумерация последовательности начинается заново согласно первоначальным параметрам CREATE SEQUENCE.  
  
 INCREMENT BY \<константой >  
 Значение задает число, на которое увеличивается (или уменьшается, если оно отрицательное) базовое значение объекта последовательности при каждом вызове функции NEXT VALUE FOR. Если значение приращения отрицательно, то объект последовательности изменяется по убыванию, в противном случае — по возрастанию. Приращение не может быть равно 0.  
  
 [MINVALUE \<константа > | ПАРАМЕТР MINVALUE]  
 Указывает граничные значения для объекта последовательности. Если указано NO MINVALUE, то используется минимальное возможное значение для типа данных последовательности.  
  
 [MAXVALUE \<константа > | ПАРАМЕТР MAXVALUE  
 Указывает граничные значения для объекта последовательности. Если указано NO MAXVALUE, то используется максимально возможное значение для типа данных последовательности.  
  
 [ CYCLE | NO CYCLE ]  
 Это свойство указывает, перезапускается ли объект последовательности с минимального значения (или максимального для последовательностей по убыванию) или вызывает исключение, когда достигнуто максимальное (или максимальное) значение.  
  
> [!NOTE]  
>  При таком переходе следующим значением будет минимальное или максимальное значение, а не START VALUE последовательности.  
  
 [КЭША [\<константа >] | БЕЗ КЭШИРОВАНИЯ]  
 Повышает производительность для приложений, использующих объекты последовательностей, сводя к минимуму число операций ввода-вывода, которые требуются для сохранения сформированных значений в системных таблицах.  
  
 Дополнительные сведения о работе кэша см. в разделе [CREATE SEQUENCE &#40; Transact-SQL &#41; ](../../t-sql/statements/create-sequence-transact-sql.md).  
  
## <a name="remarks"></a>Замечания  
 Сведения о создании последовательностей и управлении кэшем последовательностей см. в разделе [CREATE SEQUENCE &#40; Transact-SQL &#41; ](../../t-sql/statements/create-sequence-transact-sql.md).  
  
 Значение MINVALUE для последовательностей по возрастанию и значение MAXVALUE для последовательностей по убыванию не может быть изменено на значение, которое не допускается значением START WITH последовательности. Чтобы изменить значение MINVALUE последовательности по возрастанию на число больше значения START WITH, либо изменить значение MAXVALUE для последовательности по убыванию, на значение меньше значения START WITH, укажите аргумент RESTART WITH, чтобы перезапустить последовательность с нужной точки, которая находится между минимальным и максимальным значениями.  
  
## <a name="metadata"></a>Метаданные  
 Чтобы получить сведения о последовательностях, запросите представление [sys.sequences](../../relational-databases/system-catalog-views/sys-sequences-transact-sql.md).  
  
## <a name="security"></a>безопасность  
  
### <a name="permissions"></a>Permissions  
 Требуется **ALTER** разрешений на последовательность или **ALTER** на схему. Чтобы предоставить **ALTER** разрешений на последовательность, используйте **ALTER ON OBJECT** в следующем формате:  
  
```  
GRANT ALTER ON OBJECT::Test.TinySeq TO [AdventureWorks\Larry]  
```  
  
 Владение объектом последовательности может быть передано с помощью **ALTER AUTHORIZATION** инструкции.  
  
### <a name="audit"></a>Аудит  
 Для аудита **ALTER SEQUENCE**, монитор **SCHEMA_OBJECT_CHANGE_GROUP**.  
  
## <a name="examples"></a>Примеры  
 Примеры создания последовательностей и использования **NEXT VALUE FOR** функцию для создания порядковых номеров см. в разделе [порядковые номера](../../relational-databases/sequence-numbers/sequence-numbers.md).  
  
### <a name="a-altering-a-sequence"></a>A. Изменение последовательности  
 В следующем примере создается схема с именем Test и последовательность с именем с помощью TestSeq **int** типом данных, имеющим в диапазоне от 0 до 255. Последовательность начинается со 125 и увеличивается на 25 при каждом создании номера. Поскольку последовательность зациклена, то при превышении максимального значения 200 она перезапускается с минимального значения 100.  
  
```  
CREATE SCHEMA Test ;  
GO  
  
CREATE SEQUENCE Test.TestSeq  
    AS int   
    START WITH 125  
    INCREMENT BY 25  
    MINVALUE 100  
    MAXVALUE 200  
    CYCLE  
    CACHE 3  
;  
GO  
```  
  
 В следующем примере изменяется последовательность TestSeq, находятся в диапазоне от 0 до 255. Последовательность перезапускает нумерацию рядов со 100 с увеличением на 50 при каждом формировании номера.  
  
```  
ALTER SEQUENCE Test. TestSeq  
    RESTART WITH 100  
    INCREMENT BY 50  
    MINVALUE 50  
    MAXVALUE 200  
    NO CYCLE  
    NO CACHE  
;  
GO  
```  
  
 Поскольку последовательность не зациклена, **NEXT VALUE FOR** функция вызовет ошибку при ее значение превысит 200.  
  
### <a name="b-restarting-a-sequence"></a>Б. Перезапуск последовательности  
 В следующем примере создается последовательность с именем CountBy1. В ней используются значения по умолчанию.  
  
```  
CREATE SEQUENCE Test.CountBy1 ;  
```  
  
 Для формирования значения последовательности ее владелец выполняет следующую инструкцию:  
  
```  
SELECT NEXT VALUE FOR Test.CountBy1  
```  
  
 Значение, возвращаемое от -9223372036854775808 является наименьшее возможное значение для **bigint** тип данных. Владелец решает он начать последовательность начинается с 1, но не показывает **START WITH** предложение при ее создании. Чтобы исправить эту ошибку, владелец выполняет следующую инструкцию.  
  
```  
ALTER SEQUENCE Test.CountBy1 RESTART WITH 1 ;  
```  
  
 Затем он снова выполняет следующую инструкцию для формирования последовательного номера.  
  
```  
SELECT NEXT VALUE FOR Test.CountBy1;  
```  
  
 Это номер 1, как и ожидалось.  
  
 CountBy1 последовательность была создана с помощью значение по умолчанию NO CYCLE, поэтому она перестанет работать после создания числа 9223372036854775807. Последующие обращения к этому объекту последовательности будут возвращать ошибку 11728. Следующая инструкция включает зацикливание для объекта и устанавливают его кэш в значение 20.  
  
```  
ALTER SEQUENCE Test.CountBy1  
    CYCLE  
    CACHE 20 ;  
  
```  
  
 Теперь, когда будет достигнут номер 9 223 372 036 854 775 807, следующим номером будет минимально возможный для этого типа данных — -9 223 372 036 854 775 808.  
  
 Владелец поняли, **bigint** тип данных используется 8 байт каждый раз, он используется. **Int** достаточно тип данных, который использует 4 байта. Однако тип данных последовательности изменить нельзя. Чтобы изменить **int** тип данных, необходимо удалить объект последовательности и повторно создать объект с правильным типом данных.  
  
## <a name="see-also"></a>См. также:  
 [Создание ПОСЛЕДОВАТЕЛЬНОСТИ &#40; Transact-SQL &#41;](../../t-sql/statements/create-sequence-transact-sql.md)   
 [Удалите ПОСЛЕДОВАТЕЛЬНОСТЬ &#40; Transact-SQL &#41;](../../t-sql/statements/drop-sequence-transact-sql.md)   
 [СЛЕДУЮЩЕЕ значение для &#40; Transact-SQL &#41;](../../t-sql/functions/next-value-for-transact-sql.md)   
 [Порядковые номера](../../relational-databases/sequence-numbers/sequence-numbers.md)   
 [sp_sequence_get_range &#40; Transact-SQL &#41;](../../relational-databases/system-stored-procedures/sp-sequence-get-range-transact-sql.md)  
  
  

