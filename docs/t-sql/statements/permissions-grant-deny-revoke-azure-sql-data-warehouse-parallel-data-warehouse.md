---
title: "Данных SQL Azure ПРЕДОСТАВЛЕНИЯ, ЗАПРЕТА ОТМЕНЫ разрешений и хранилища параллельных данных | Документы Microsoft"
ms.custom: 
ms.date: 08/10/2017
ms.prod: sql-non-specified
ms.prod_service: sql-data-warehouse, pdw
ms.service: 
ms.component: t-sql|statements
ms.reviewer: 
ms.suite: sql
ms.technology: database-engine
ms.tgt_pltfrm: 
ms.topic: language-reference
dev_langs: TSQL
ms.assetid: 5a3b7424-408e-4cb0-8957-667ebf4596fc
caps.latest.revision: "9"
author: barbkess
ms.author: barbkess
manager: jhubbard
ms.workload: On Demand
ms.openlocfilehash: a21ee8a4a525e2b8c522de140a3f482915cdb361
ms.sourcegitcommit: 66bef6981f613b454db465e190b489031c4fb8d3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/17/2017
---
# <a name="permissions-grant-deny-revoke-azure-sql-data-warehouse-parallel-data-warehouse"></a>Разрешения: GRANT, DENY, REVOKE (хранилище данных SQL Azure, параллельное хранилище данных)
[!INCLUDE[tsql-appliesto-xxxxxx-xxxx-asdw-pdw-md](../../includes/tsql-appliesto-xxxxxx-xxxx-asdw-pdw-md.md)]

  Используйте [!INCLUDE[ssSDW](../../includes/sssdw-md.md)] или [!INCLUDE[ssPDW](../../includes/sspdw-md.md)] **GRANT** и **DENY** инструкции, чтобы предоставить или отменить разрешение (например, **обновления**) для защищаемого объекта (например, база данных, таблица, представление и т. д.) Чтобы субъект безопасности (имя входа, пользователь базы данных или роли базы данных). Используйте **ОТОЗВАТЬ** удаление grant или deny для разрешения.  
  
 Разрешения на уровне сервера, применяются к именам входа. Разрешения на уровне базы данных применяются к пользователям и ролям базы данных.  
  
 Чтобы увидеть, какие разрешения были предоставлены и запрещено, запросы к представлениям sys.server_permissions и sys.database_permissions. Разрешения, которые не были явно предоставлены или запрещены для субъекта безопасности могут наследоваться обладают членством в роли, имеющей разрешения. Разрешения предопределенных ролей базы данных не может быть изменено и не отображаются в представлениях sys.server_permissions и sys.database_permissions.  
  
-   **Предоставление** явным образом предоставляет одно или несколько разрешений.  
  
-   **Запретить** явным образом запрещает участнику от случая, когда одно или несколько разрешений.  
  
-   **ОТОЗВАТЬ** удаляет существующие **GRANT** или **DENY** разрешения.  
  
 ![Значок ссылки на раздел](../../database-engine/configure-windows/media/topic-link.gif "значок ссылки на раздел") [синтаксические обозначения Transact-SQL &#40; Transact-SQL &#41;](../../t-sql/language-elements/transact-sql-syntax-conventions-transact-sql.md)  
  
## <a name="syntax"></a>Синтаксис  
  
```  
-- Azure SQL Data Warehouse and Parallel Data Warehouse  
GRANT   
    <permission> [ ,...n ]  
    [ ON [ <class_type> :: ] securable ]   
    TO principal [ ,...n ]  
    [ WITH GRANT OPTION ]  
[;]  
  
DENY   
    <permission> [ ,...n ]  
    [ ON [ <class_type> :: ] securable ]   
    TO principal [ ,...n ]  
    [ CASCADE ]  
[;]  
  
REVOKE   
    <permission> [ ,...n ]  
    [ ON [ <class_type> :: ] securable ]   
    [ FROM | TO ] principal [ ,...n ]  
    [ CASCADE ]  
[;]  
  
<permission> ::=  
{ see the tables below }  
  
<class_type> ::=  
{  
      LOGIN  
    | DATABASE  
    | OBJECT  
    | ROLE  
    | SCHEMA  
    | USER  
}  
```  
  
## <a name="arguments"></a>Аргументы  
 \<разрешение > [ **,**... *n* ]  
 Одно или несколько разрешений для предоставления, запрета или отмены.  
  
 ON [ \<class_type >::] *защищаемый объект* **ON** предложение описывает защищаемый объект параметра, для которого требуется предоставить, запретить или отменить разрешения.  
  
 \<class_type > тип класса защищаемого объекта. Это может быть **входа**, **базы данных**, **ОБЪЕКТА**, **СХЕМЫ**, **РОЛИ**, или **пользователя** . Может также иметь разрешения **сервера***class_type*, но **сервера** для этих разрешений не указан. **База данных** не указан, если разрешение включает слово **базы данных** (например **ALTER ANY DATABASE**). Если аргумент *class_type* указан и тип разрешения не ограничиваются сервера или базы данных класс, класс считается **ОБЪЕКТА**.  
  
 *защищаемый объект*  
 Имя входа, базы данных, таблицы, представления, схемы, процедуры, роли или пользователя, для которого требуется предоставить, запретить или отменить разрешения. Имя объекта можно указать правилам именования трех частей, которые описаны в [синтаксические обозначения Transact-SQL &#40; Transact-SQL &#41; ](../../t-sql/language-elements/transact-sql-syntax-conventions-transact-sql.md).  
  
 Чтобы *основной* [ **,**... *n* ]  
 Одного или нескольких участников предоставленные, запрещенные или отмененные разрешения. Участник является имя входа, пользователь базы данных или роли базы данных.  
  
 ИЗ *основной* [ **,**... *n* ]  
 Одного или нескольких участников, чтобы отменить разрешения.  Участник является имя входа, пользователь базы данных или роли базы данных. **ИЗ** может использоваться только с **ОТОЗВАТЬ** инструкции. **Чтобы** может использоваться с **GRANT**, **DENY**, или **ОТОЗВАТЬ**.  
  
 WITH GRANT OPTION  
 Показывает, что получающему разрешению будет также дана возможность предоставлять указанное разрешение другим участникам.  
  
 CASCADE  
 Указывает, что разрешение запрещено или отозвано для указанного участника и других участников, которым этот участник предоставил разрешение. Требуется, если участник имеет разрешение с **GRANT OPTION**.  
  
 GRANT OPTION FOR  
 Указывает, что возможность предоставлять указанное разрешение будет отменена. Данный аргумент необходим при использовании **CASCADE** аргумент.  
  
> [!IMPORTANT]  
>  Если участник имеет указанное разрешение без **GRANT** параметр, будет отменено само разрешение.  
  
## <a name="permissions"></a>Permissions  
 Чтобы предоставить разрешение, источник должен иметь либо само разрешение с **с ПРЕДОСТАВИТЬ параметр**, либо должен иметь разрешение более высокого уровня, которое включает в себя предоставленное разрешение.  Владельцы объектов могут предоставлять разрешения на объекты, которыми они владеют. Участники **УПРАВЛЕНИЯ** разрешение на защищаемый объект может предоставлять разрешение на этот защищаемый объект.  Члены **db_owner** и **db_securityadmin** фиксированных ролей базы данных могут предоставлять любые разрешения в базе данных.  
  
## <a name="general-remarks"></a>Общие замечания  
 Запрет или Отмена разрешений на участника не повлияет на запросов, которые прошли авторизации и выполняющихся в данный момент. Для ограничения доступа немедленно, необходимо отменить активные запросы или завершения текущих сеансов.  
  
> [!NOTE]  
>  В этом выпуске наиболее предопределенных ролей сервера недоступны. Вместо этого используйте роли базы данных, определяемых пользователем. Не удается добавить имена входа **sysadmin** предопределенной роли сервера. Предоставление **CONTROL SERVER** разрешение аппроксимирует членство в **sysadmin** предопределенной роли сервера.  
  
 Некоторые операторы требуется несколько разрешений. Например, можно создать таблицу требует **CREATE TABLE** разрешения в базе данных и **ALTER SCHEMA** разрешения для таблицы, которая будет содержать таблицу.  
  
 PDW иногда выполняет хранимые процедуры для распределения действий пользователя для вычислительных узлов. Таким образом разрешение execute для всей базы данных не может быть отказано. (Например `DENY EXECUTE ON DATABASE::<name> TO <user>;` завершится ошибкой.) Решения Запрет разрешения execute для схемы пользователя или для конкретных объектов (процедуры).  
  
### <a name="implicit-and-explicit-permissions"></a>Явные и неявные разрешения  
 *Явное разрешение* — **GRANT** или **DENY** разрешения для участника, **GRANT** или **DENY**инструкции.  
  
 *Неявное разрешение* — **GRANT** или **DENY** разрешение, которое субъект (имя входа, пользователя или роли базы данных) унаследованы от другой ролью базы данных.  
  
 Неявное разрешение также может быть унаследовано из покрытия или родительское разрешение. Например **обновление** разрешения на таблицу могут наследоваться наличие **обновление** разрешения на схему, которая содержит таблицу, или **УПРАВЛЕНИЯ** разрешение на таблицу.  
  
### <a name="ownership-chaining"></a>Цепочки владения  
 Если несколько объектов базы данных последовательно обращаются друг к другу, последовательность известна как *цепочки*. Такие цепочки не могут существовать независимо, но когда [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] проходит по звеньям цепи, то [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] проверяет разрешения составляющих объектов иначе, нежели при раздельном доступе к объектам. Цепочки владения имеют важные последствия для обеспечения безопасности. Дополнительные сведения о цепочках владения см. в разделе [цепочки владения](http://msdn.microsoft.com/en-us/library/ms188676\(v=sql11\).aspx) и [учебника: цепочки владения и переключение контекста](http://msdn.microsoft.com/en-us/library/bb153640\(v=sql11\).aspx).  
  
## <a name="permission-list"></a>Список разрешений  
  
### <a name="server-level-permissions"></a>Разрешения на уровне сервера  
 Разрешения на уровне сервера предоставлено, запрещено и отзывается имена входа.  
  
 **Разрешения, применяемые к серверам**  
  
-   CONTROL SERVER  
  
-   ADMINISTER BULK OPERATIONS  
  
-   ALTER ANY CONNECTION  
  
-   ALTER ANY DATABASE  
  
-   CREATE ANY DATABASE  
  
-   ALTER ANY EXTERNAL DATA SOURCE  
  
-   ALTER ANY EXTERNAL FILE FORMAT  
  
-   ALTER ANY LOGIN  
  
-   ALTER SERVER STATE  
  
-   CONNECT SQL  
  
-   VIEW ANY DEFINITION  
  
-   VIEW ANY DATABASE  
  
-   VIEW SERVER STATE  
  
 **Разрешения, которые применяются к именам входа**  
  
-   ПРИ ВХОДЕ В СИСТЕМУ УПРАВЛЕНИЯ  
  
-   РАЗРЕШЕНИЕ ALTER, СВЯЗАННОЕ С ИМЕНЕМ ВХОДА  
  
-   ОЛИЦЕТВОРЕНИЕ ПРИ ВХОДЕ В СИСТЕМУ  
  
-   VIEW DEFINITION  
  
### <a name="database-level-permissions"></a>Разрешения на уровне базы данных  
 Разрешения на уровне базы данных могут предоставляться, запрещенный и отозванных с пользователями базы данных и ролей базы данных, определяемых пользователем.  
  
 **Разрешения, которые применяются ко всем классам базы данных**  
  
-   CONTROL  
  
-   ALTER  
  
-   VIEW DEFINITION  
  
 **Разрешения, которые применяются ко всем классам базы данных, за исключением пользователей**  
  
-   TAKE OWNERSHIP  
  
 **Разрешения, которые применяются только к базам данных**  
  
-   ALTER ANY DATABASE  
  
-   ALTER В БАЗЕ ДАННЫХ  
  
-   ALTER ANY DATASPACE  
  
-   ALTER ANY ROLE  
  
-   ALTER ANY SCHEMA  
  
-   ALTER ANY USER  
  
-   BACKUP DATABASE  
  
-   ПОДКЛЮЧИТЬСЯ К БАЗЕ ДАННЫХ  
  
-   CREATE PROCEDURE  
  
-   CREATE ROLE  
  
-   CREATE SCHEMA  
  
-   CREATE TABLE  
  
-   CREATE VIEW  
  
-   SHOWPLAN  
  
 **Разрешения, которые применяются только к пользователям**  
  
-   IMPERSONATE  
  
 **Разрешения, которые применяются к базам данных, схемы и объекты**  
  
-   ALTER  
  
-   DELETE  
  
-   EXECUTE  
  
-   INSERT  
  
-   SELECT  
  
-   UPDATE  
  
-   ССЫЛОК  
  
 Определение каждого типа разрешений см. в разделе [разрешения (компонент Database Engine)](http://msdn.microsoft.com/library/ms191291.aspx).  
  
### <a name="chart-of-permissions"></a>Диаграмма разрешений  
 Все разрешения представлены графически на этом плакате. Это простой способ просмотра вложенной иерархии разрешений. Например **ALTER ON LOGIN** разрешение можно предоставить сам по себе, но он также будет включен, если имени входа предоставляется **УПРАВЛЕНИЯ** разрешение для этого имени входа, или если имени входа предоставляется **ALTER ANY Имя входа** разрешение.  
  
 ![Плакат о разрешениях безопасности APS](../../t-sql/statements/media/aps-security-perms-poster.png "плакат о разрешениях безопасности APS")  
  
 Загрузить полноразмерной версии этого постера [разрешения SQL Server PDW](http://go.microsoft.com/fwlink/?LinkId=244249)в разделе "файлы" на сайте APS Yammer (или запрос по электронной почте через  **apsdoc@microsoft.com** .  
  
## <a name="default-permissions"></a>Разрешения по умолчанию  
 Ниже описаны разрешения по умолчанию.  
  
-   При создании имени входа с помощью **CREATE LOGIN** инструкция получает новое имя входа **CONNECT SQL** разрешение.  
  
-   Все имена входа являются членами **открытый** роли сервера и не может быть удален из **открытый**.  
  
-   При создании пользователя базы данных с помощью **CREATE USER** получает разрешения пользователя базы данных **CONNECT** разрешений в базе данных.  
  
-   Всех участников, включая **открытый** роли, не имеют явных и неявных разрешений по умолчанию.  
  
-   Если имя входа или пользователя, становится владельцем базы данных или объекта, имя входа или пользователя всегда имеет все разрешения для базы данных или объекта. Разрешения владельца не может быть изменено и не отображаются как явные разрешения. **GRANT**, **DENY**, и **ОТОЗВАТЬ** инструкции не оказывают влияния на владельцев.  
  
-   **Sa** входа имеет все разрешения на устройстве. Аналогично разрешения владельца **sa** разрешения не может быть изменено и не отображаются как явные разрешения. **GRANT**, **DENY**, и **ОТОЗВАТЬ** инструкции не оказывают влияния **sa** входа. **Sa** входа не может быть переименован.  
  
-   **Используйте** инструкция не требует разрешений. Можно запустить всех участников **используйте** инструкции в любой базе данных.  
  
##  <a name="Examples"></a>Примеры: [!INCLUDE[ssSDW](../../includes/sssdw-md.md)] и[!INCLUDE[ssPDW](../../includes/sspdw-md.md)]  
  
### <a name="a-granting-a-server-level-permission-to-a-login"></a>A. Предоставление разрешений уровня сервера с именем входа  
 Следующие две инструкции предоставления разрешений уровня сервера с именем входа.  
  
```  
GRANT CONTROL SERVER TO [Ted];  
```  
  
```  
GRANT ALTER ANY DATABASE TO Mary;  
```  
  
### <a name="b-granting-a-server-level-permission-to-a-login"></a>Б. Предоставление разрешений уровня сервера с именем входа  
 В следующем примере предоставляется разрешение на уровне сервера для имени входа на сервер участника (другого имени входа).  
  
```  
GRANT  VIEW DEFINITION ON LOGIN::Ted TO Mary;  
```  
  
### <a name="c-granting-a-database-level-permission-to-a-user"></a>В. Предоставление пользователю разрешений уровня базы данных  
 В следующем примере предоставляется разрешение уровня базы данных на пользователя участника базы данных (другим пользователем).  
  
```  
GRANT VIEW DEFINITION ON USER::[Ted] TO Mary;  
```  
  
### <a name="d-granting-denying-and-revoking-a-schema-permission"></a>Г. Предоставления, запрета или отмены разрешения схемы  
 Следующие **GRANT** инструкция предоставляет разрешение Yuen возможность выбора данных из любой таблицы или представления в схеме dbo.  
  
```  
GRANT SELECT ON SCHEMA::dbo TO [Yuen];  
```  
  
 Следующие **DENY** инструкции предотвращает Yuen выбора данных из любой таблицы или представления в схеме dbo. Yuen не могут считывать данные, даже если у него есть разрешение другим способом, например, через членство в роли.  
  
```  
DENY SELECT ON SCHEMA::dbo TO [Yuen];  
```  
  
 Следующие **ОТОЗВАТЬ** инструкция удаляет **DENY** разрешение. Теперь явных разрешений Yuen нейтральной. Yuen может иметь возможность выбора данных из любой таблицы через некоторые другие неявные разрешения, например, членство в роли.  
  
```  
REVOKE SELECT ON SCHEMA::dbo TO [Yuen];  
```  
  
### <a name="e-demonstrating-the-optional-object-clause"></a>Д. Демонстрация необязательный объект:: предложения  
 Поскольку объект является классом по умолчанию для разрешения инструкции, следующие две инструкции одинаковы. **ОБЪЕКТА::** предложение является необязательным.  
  
```  
GRANT UPDATE ON OBJECT::dbo.StatusTable TO [Ted];  
```  
  
```  
GRANT UPDATE ON dbo.StatusTable TO [Ted];  
```  
  
  

