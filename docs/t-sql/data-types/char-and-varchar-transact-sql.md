---
title: "char и varchar (Transact-SQL) | Документы Microsoft"
ms.custom: 
ms.date: 7/23/2017
ms.prod: sql-non-specified
ms.reviewer: 
ms.suite: 
ms.technology:
- database-engine
ms.tgt_pltfrm: 
ms.topic: language-reference
f1_keywords:
- varchar
- varchar_TSQL
dev_langs:
- TSQL
helpviewer_keywords:
- fixed-length data types [SQL Server]
- character data type
- char data type
- varchar(max) data type
- variable-length data types [SQL Server]
- varchar data type
ms.assetid: 282cd982-f4fb-4b22-b2df-9e8478f13f6a
caps.latest.revision: 48
author: BYHAM
ms.author: rickbyh
manager: jhubbard
ms.workload: Active
ms.translationtype: MT
ms.sourcegitcommit: 876522142756bca05416a1afff3cf10467f4c7f1
ms.openlocfilehash: 7c7bcb0e8ad7f8904703bd6c979b00aa30dd5348
ms.contentlocale: ru-ru
ms.lasthandoff: 09/01/2017

---
# <a name="char-and-varchar-transact-sql"></a>Типы char и varchar (Transact-SQL)
[!INCLUDE[tsql-appliesto-ss2008-all_md](../../includes/tsql-appliesto-ss2008-all-md.md)]

Эти типы данных являются фиксированной длины или переменной длины.  
  
## <a name="arguments"></a>Аргументы  
**char** [(  *n*  )] фиксированной длины, не в Юникоде. *n*Определяет длину строки и должен быть числом от 1 до 8000. Размер хранилища  *n*  байт. Синонимом по стандарту ISO для **char** — **символ**.
  
**varchar** [(  *n*   |  **max** )] переменной длины, не в Юникоде. *n*Определяет длину строки и может принимать значение от 1 до 8000. **Max** указывает, что максимальный размер хранилища равен 2 ^ 31-1 байт (2 ГБ). Размер хранения — это фактическая длина введенных данных плюс 2 байта. Синонимами по стандарту ISO для **varchar** , **charvarying** или **charactervarying**.
  
## <a name="remarks"></a>Замечания  
Когда  *n*  не указан в определении данных или в инструкции объявления переменной, длина по умолчанию равна 1. Когда  *n*  не указан при использовании функций CAST и CONVERT, длина по умолчанию равна 30.
  
Объекты, использующие **char** или **varchar** присваиваются параметры сортировки по умолчанию базы данных, назначенный конкретные параметры сортировки предложением COLLATE. Параметры сортировки контролируют кодовую страницу, используемую для хранения символьных данных.
  
Если у вас есть узлы, которые поддерживают несколько языков, рассмотрите возможность использования Юникода **nchar** или **nvarchar** типы данных, чтобы свести к минимуму проблемы преобразования символов. Если вы используете **char** или **varchar**, рекомендуется следующее:
- Используйте **char** Если размеры записей данных столбцов, согласованы.  
- Используйте **varchar** Если размеры записей данных столбцов значительно изменяются.  
- Используйте **varchar(max)** Если размеры записей данных столбцов значительно изменяются и размер может превысить 8 000 байт.  
  
Если SET ANSI_PADDING имеет значение OFF при выполнении CREATE TABLE или ALTER TABLE, **char** столбец, определенный как NULL, обрабатывается как **varchar**.
  
Если кодовая страница параметров сортировки использует двухбайтовые символы, размер хранения остается  *n*  байт. В зависимости от строки символов, размера хранилища  *n*  байтов может быть меньше, чем  *n*  символов.

> [!WARNING]
> Каждая ненулевой varchar(max) или nvarchar(max) столбец требуется 24 байта дополнительного фиксированного выделения, которые учитываются ограничение строки 8060 байт во время операции сортировки. Это может создать неявное ограничение на число непустых varchar(max) или nvarchar(max) столбцы, которые могут быть созданы в таблице.  
При создании таблицы или во время вставки данных не возникает особых ошибок (кроме обычного предупреждения о том, что максимальный размер строки превышает максимально допустимое значение в 8060 байт). Этот крупный размер строки может вызывать ошибки (например, ошибку 512) во время некоторых обычных операций, таких как обновление ключа кластеризованного индекса, или сортировать полный набор столбцов, который пользователи не могут использовать до выполнения операции.
  
##  <a name="_character"></a>Преобразование символьных данных  
При преобразовании символьного выражения в символьный тип данных другой длины значения, слишком длинные для нового типа данных, усекаются. **Uniqueidentifier** тип считается преобразовании символьного выражения в символьный тип и поэтому является распространяются правила усечения при преобразовании в символьный тип. См подраздел «Примеры» ниже.
  
При символьное выражение преобразуется в символьное выражение другого типа данных или размера, например из **char(5)** для **varchar(5)**, или **char(20)** для **char(15)**, преобразованный значению присваиваются параметры сортировки входного значения. Если несимвольное выражение преобразуется в символьный тип данных, то преобразованному значению присваиваются параметры сортировки, заданные по умолчанию в текущей базе данных. В любом случае можно назначить конкретные параметры сортировки с помощью [COLLATE](http://msdn.microsoft.com/library/4ba6b7d8-114a-4f4e-bb38-fe5697add4e9) предложения.
  
> [!NOTE]  
>  Поддерживаемые преобразования кодовых страниц для **char** и **varchar** типы данных, но не для **текст** тип данных. Как и в ранних версиях [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], о потере данных во время преобразования кодовых страниц не сообщается.  
  
Символьные выражения, которые преобразуются в приближенный **числовое** тип данных может содержать необязательную экспоненциальную нотацию (e нижнего регистра или E верхнего регистра следуют необязательный плюс (+) или минус (-) входа, а затем число).
  
Символьные выражения, преобразуемые в точный **числовое** тип данных должен состоять из цифр, десятичного разделителя и необязательного знака плюс (+) или минус (-). Начальные пробелы не учитываются. Разделители в виде запятой запрещены (например, десятичный разделитель в числе 123 456,00).
  
Символьные выражения, преобразуемые в **money** или **smallmoney** типы данных также может включать необязательный десятичный разделитель и знак доллара ($). Разрешаются разделители в виде запятой, например 123 456,00 руб.
  
## <a name="examples"></a>Примеры  
  
### <a name="a-showing-the-default-value-of-n-when-used-in-variable-declaration"></a>A. Отображение значения по умолчанию n при использовании в объявлении переменной.  
В следующем примере показано значение по умолчанию  *n*  -1 для `char` и `varchar` типов данных при их использовании в объявлении переменной.
  
```sql
DECLARE @myVariable AS varchar = 'abc';  
DECLARE @myNextVariable AS char = 'abc';  
--The following returns 1  
SELECT DATALENGTH(@myVariable), DATALENGTH(@myNextVariable);  
GO  
```  
  
### <a name="b-showing-the-default-value-of-n-when-varchar-is-used-with-cast-and-convert"></a>Б. Отображение значения по умолчанию n при использовании функций CAST и CONVERT с типом данных varchar.  
В следующем примере показано, что значение по умолчанию  *n*  — 30 при `char` или `varchar` используются типы данных с `CAST` и `CONVERT` функции.
  
```sql
DECLARE @myVariable AS varchar(40);  
SET @myVariable = 'This string is longer than thirty characters';  
SELECT CAST(@myVariable AS varchar);  
SELECT DATALENGTH(CAST(@myVariable AS varchar)) AS 'VarcharDefaultLength';  
SELECT CONVERT(char, @myVariable);  
SELECT DATALENGTH(CONVERT(char, @myVariable)) AS 'VarcharDefaultLength';  
```  
  
### <a name="c-converting-data-for-display-purposes"></a>В. Преобразование данных для отображения  
В следующем примере два столбца преобразуются в символьные типы, после чего к ним применяется стиль, применяющий к отображаемым данным конкретный формат. Объект **money** тип преобразуется в символьные данные и применяется стиль 1, отображающий значения с запятыми каждых трех разрядов слева от десятичного разделителя и две цифры справа от десятичной запятой. Объект **datetime** тип преобразуется в символьные данные и применяется стиль 3, отображающий данные в формате дд/мм/гг. В предложении WHERE **money** тип приводится к символьному типу, для выполнения операции сравнения строк.
  
```sql
USE AdventureWorks2012;  
GO  
SELECT  BusinessEntityID,   
   SalesYTD,   
   CONVERT (varchar(12),SalesYTD,1) AS MoneyDisplayStyle1,   
   GETDATE() AS CurrentDate,   
   CONVERT(varchar(12), GETDATE(), 3) AS DateDisplayStyle3  
FROM Sales.SalesPerson  
WHERE CAST(SalesYTD AS varchar(20) ) LIKE '1%';  
```  
  
[!INCLUDE[ssResult](../../includes/ssresult-md.md)]
  
```sql
BusinessEntityID SalesYTD              DisplayFormat CurrentDate             DisplayDateFormat  
---------------- --------------------- ------------- ----------------------- -----------------  
278              1453719.4653          1,453,719.47  2011-05-07 14:29:01.193 07/05/11  
280              1352577.1325          1,352,577.13  2011-05-07 14:29:01.193 07/05/11  
283              1573012.9383          1,573,012.94  2011-05-07 14:29:01.193 07/05/11  
284              1576562.1966          1,576,562.20  2011-05-07 14:29:01.193 07/05/11  
285              172524.4512           172,524.45    2011-05-07 14:29:01.193 07/05/11  
286              1421810.9242          1,421,810.92  2011-05-07 14:29:01.193 07/05/11  
288              1827066.7118          1,827,066.71  2011-05-07 14:29:01.193 07/05/11  
```  
  
### <a name="d-converting-uniqueidentifer-data"></a>Г. Преобразование данных uniqueidentifier  
В следующем примере значение `uniqueidentifier` преобразуется в тип данных `char`.
  
```sql
DECLARE @myid uniqueidentifier = NEWID();  
SELECT CONVERT(char(255), @myid) AS 'char';  
```  
  
Следующий пример показывает усечение данных, когда значение является слишком длинным для преобразования в заданный тип данных. Поскольку **uniqueidentifier** ограничен 36 символов, символов, в которых превышает длину, усекаются.
  
```sql
DECLARE @ID nvarchar(max) = N'0E984725-C51C-4BF4-9960-E1C80E27ABA0wrong';  
SELECT @ID, CONVERT(uniqueidentifier, @ID) AS TruncatedValue;  
```  
  
[!INCLUDE[ssResult](../../includes/ssresult-md.md)]
  
```sql
String                                       TruncatedValue  
-------------------------------------------- ------------------------------------  
0E984725-C51C-4BF4-9960-E1C80E27ABA0wrong    0E984725-C51C-4BF4-9960-E1C80E27ABA0  
  
(1 row(s) affected)  
```  
  
## <a name="see-also"></a>См. также:
[nchar и nvarchar (Transact-SQL)](../../t-sql/data-types/nchar-and-nvarchar-transact-sql.md)  
[Функции CAST и CONVERT (Transact-SQL)](../../t-sql/functions/cast-and-convert-transact-sql.md)  
[COLLATE &#40; Transact-SQL &#41;](http://msdn.microsoft.com/library/4ba6b7d8-114a-4f4e-bb38-fe5697add4e9)  
[Преобразование типов данных &#40; компонент Database Engine &#41;](../../t-sql/data-types/data-type-conversion-database-engine.md)  
[Типы данных (Transact-SQL)](../../t-sql/data-types/data-types-transact-sql.md)  
[Оценка размера базы данных](../../relational-databases/databases/estimate-the-size-of-a-database.md)
  
  

