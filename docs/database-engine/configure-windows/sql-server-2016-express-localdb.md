---
title: SQL Server 2016 Express LocalDB | Документы Майкрософт
ms.custom: ''
ms.date: 08/10/2016
ms.prod: sql
ms.prod_service: database-engine
ms.service: ''
ms.component: configure-windows
ms.reviewer: ''
ms.suite: sql
ms.technology:
- database-engine
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- user instances
- LocalDB, described
- local database runtime
- file database
- LocalDB
ms.assetid: 5a641a46-7cfb-4d7b-a90d-6e4625719d74
caps.latest.revision: 42
author: MikeRayMSFT
ms.author: mikeray
manager: craigg
ms.workload: Active
ms.openlocfilehash: 40ae45c73e45cc9ee040b4d6fadd4469f9f0c3be
ms.sourcegitcommit: 7a6df3fd5bea9282ecdeffa94d13ea1da6def80a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
---
# <a name="sql-server-2016-express-localdb"></a>SQL Server 2016 Express LocalDB
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]
 > Материалы по предыдущим версиям SQL Server см. в статье [SQL Server 2014 Express LocalDB](https://msdn.microsoft.com/en-US/library/hh510202(SQL.120).aspx).

**LocalDB** в Microsoft SQL Server 2016 Express — это компонент [SQL Server Express](https://msdn.microsoft.com/library/ms144275(SQL.130).aspx) , ориентированный на разработчиков. Он доступен в SQL Server 2016 Express с дополнительными службами.  

 При установке**LocalDB** выполняется копирование минимального набора файлов, необходимых для запуска компонента [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)]. После установки LocalDB вы можете установить соединение с помощью специальной строки подключения. При соединении необходимая инфраструктура [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] создается и запускается автоматически, что позволяет приложению использовать базу данных без выполнения сложной настройки. Средства разработчика позволяют использовать [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] для написания и проверки кода [!INCLUDE[tsql](../../includes/tsql-md.md)] без необходимости управления полным экземпляром сервера [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]. 
 
 
 ## <a name="try-it-out"></a>Попробуйте! 
  
-   Чтобы скачать и установить SQL Server 2016 Express, перейдите на страницу **[загрузок SQL Server](https://www.microsoft.com/en-us/sql-server/sql-server-downloads)**. LocalDB — это компонент, выбираемый и доступный только при скачивании мультимедиа. Если вы скачиваете носитель, выберите **Express Advanced** или пакет **LocalDB** . 
  
-   Есть учетная запись Azure?  Затем перейдите **[сюда](https://azure.microsoft.com/en-us/services/virtual-machines/sql-server/)** , чтобы запустить виртуальную машину с уже установленным [!INCLUDE[ssSQL15](../../includes/sssql15-md.md)] .  
  
## <a name="install-localdb"></a>Установка LocalDB  
 Установите **LocalDB** с помощью мастера установки или программы SqlLocalDB.msi. Параметр**LocalDB** применяется для установки [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)]. 
 
Выберите **LocalDB** на странице **Выбор компонентов/общие компоненты** во время установки. Двоичные файлы **LocalDB** можно устанавливать лишь по одному разу для каждой основной версии [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] . Можно запускать несколько процессов [!INCLUDE[ssDE](../../includes/ssde-md.md)] , которые будут использовать одни и те же двоичные файлы. Экземпляр [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)], запущенный как **LocalDB**, имеет те же ограничения, что и [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)].  

 Управление экземпляром [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] **LocalDB** осуществляется с помощью служебной программы **SqlLocalDB.exe** . [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] **LocalDB** следует использовать вместо устаревшей функции пользовательского экземпляра [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] . 
  
## <a name="description"></a>Description  
 Программа установки **LocalDB** использует программу SqlLocalDB.msi для установки необходимых файлов на компьютере. После установки **LocalDB** становится экземпляром [!INCLUDE[ssExpress](../../includes/ssexpress-md.md)] , который способен создавать и открывать базы данных [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Файлы системной базы данных, как правило, хранятся в каталоге AppData пользователя, который обычно скрыт. Например, **C:\Users\\<пользователь\>\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\LocalDBApp1\\**. Файлы пользовательской базы данных хранятся в месте, указанном пользователем, как правило, в папке **C:\Users\\<пользователь\>\Documents\\**.  
  
 Дополнительные сведения о включении **LocalDB** в приложение см. в документации [!INCLUDE[vsprvs](../../includes/vsprvs-md.md)] [Общие сведения о локальных данных](http://msdn.microsoft.com/library/ms233817\(VS.110\).aspx), [Пошаговое руководство. Создание базы данных LocalDB SQL Server](http://msdn.microsoft.com/library/ms233763\(VS.110\).aspx) и [Пошаговое руководство. Подключение к данным в базе данных LocalDB SQL Server (формы Windows)](http://msdn.microsoft.com/library/ms171890\(VS.110\).aspx).  
  
 Дополнительные сведения об API **LocalDB** см. в разделах [Справочник по API экземпляра SQL Server Express LocalDB](http://msdn.microsoft.com/library/hh234692\(SQL.110\).aspx) и [Функция LocalDBStartInstance](http://msdn.microsoft.com/library/hh217143\(SQL.110\).aspx).  
  
 Служебная программа SqlLocalDb позволяет создавать экземпляры **LocalDB**, запускать и останавливать экземпляр **LocalDB**, а также включает параметры для управления **LocalDB**.  Дополнительные сведения о программе SqlLocalDb см. в разделе [Программа SqlLocalDB](../../tools/sqllocaldb-utility.md).  
  
 Параметры сортировки экземпляра для **LocalDB** заданы в SQL_Latin1_General_CP1_CI_AS и не могут быть изменены. Параметры сортировки на уровне базы данных, на уровне столбца и на уровне выражения поддерживаются обычным образом. Содержащиеся базы данных следуют правилам метаданных и параметрам сортировки tempdb, определенным [Contained Database Collations](../../relational-databases/databases/contained-database-collations.md).  
  
### <a name="restrictions"></a>Ограничения  
 **LocalDB** не может быть подписчиком в репликации слиянием.  
  
 **LocalDB** не поддерживает FILESTREAM.  
  
 Для**LocalDB** разрешены только локальные очереди компонента Service Broker.  
  
 Экземпляр **LocalDB** , принадлежащий встроенным учетным записям, например NT AUTHORITY\SYSTEM, может иметь проблемы с управляемостью из-за перенаправления файловой системы Windows. Вместо этого следует использовать обычную учетную запись Windows в качестве владельца.  
  
### <a name="automatic-and-named-instances"></a>Автоматические и именованные экземпляры  
 **LocalDB** поддерживает два типа экземпляров: автоматические и именованные.  
  
-   Автоматические экземпляры **LocalDB** являются общедоступными. Они создаются и обслуживаются автоматически и могут использоваться любым приложением. Для каждой версии **LocalDB** , установленной на компьютере пользователя, существует один автоматический экземпляр **LocalDB** . Автоматические экземпляры **LocalDB** обеспечивают удобное управление экземплярами. Нет необходимости создавать экземпляр. Он просто работает. Это упрощает установку приложения и его перенос на другой компьютер. Если на целевом компьютере установлена указанная версия **LocalDB** , то там также будет доступен автоматический экземпляр **LocalDB** . Автоматические экземпляры **LocalDB** именуются по специальному шаблону, принадлежащему зарезервированному пространству имен. Это позволяет избежать возникновения конфликтов имен с именованными экземплярами **LocalDB**. Автоматический экземпляр имеет имя **MSSQLLocalDB**.  
  
-   Именованные экземпляры **LocalDB** — закрытые. Они принадлежат одному приложению, которое отвечает за создание экземпляра и управление им. Именованные экземпляры обеспечивают изоляцию от других экземпляров и способствуют повышению производительности за счет снижения уровня конфликта за ресурсы с другими пользователями базы данных. Пользователь должен создавать именованные экземпляры явным образом с помощью API управления **LocalDB** или неявным образом через файл app.config управляемого приложения (при необходимости управляемое приложение также может использовать API). Каждый именованный экземпляр **LocalDB** имеет связанную с ним версию **LocalDB** , которая указывает на соответствующий набор двоичных файлов **LocalDB** . Имя экземпляра **LocalDB** имеет тип данных **sysname** и может содержать до 128 символов (в отличие от обычных именованных экземпляров [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], где допускается использование только обычных имен NetBIOS из 16 символов ASCII). Имя экземпляра **LocalDB** может содержать любые символы Юникода, допустимые в имени файла.  Именованный экземпляр, в котором используется имя автоматического экземпляра, становится автоматическим экземпляром.  
  
 Разные пользователи одного и того же компьютера могут иметь экземпляры с одинаковыми именами. Каждый экземпляр является отдельным процессом, который запускается от разных пользователей.  
  
## <a name="shared-instances-of-localdb"></a>Общие экземпляры LocalDB  
 Если нескольким пользователям компьютера требуется доступ к одному экземпляру **LocalDB**, то в **LocalDB** поддерживается общий доступ к экземплярам. Владелец экземпляра может разрешить другим пользователям компьютера соединяться со своим экземпляром. Общими могут быть как автоматические, так и именованные экземпляры **LocalDB** . Для организации общего доступа к экземпляру **LocalDB** пользователь должен указать его общее имя (псевдоним). Поскольку общее имя видно всем пользователям компьютера, то оно должно быть уникальным на этом компьютере. Общее имя экземпляра **LocalDB** имеет тот же формат, что и для именованного экземпляра **LocalDB**.  
  
 Только администратор компьютера может создавать общие экземпляры **LocalDB**. Администратор или владелец общего экземпляра **LocalDB** может отменить общий доступ к экземпляру **LocalDB**. Открытие и отмена общего доступа к экземпляру **LocalDB**производится с помощью методов `LocalDBShareInstance` и `LocalDBUnShareInstance` API **LocalDB** либо с помощью соответствующих параметров программы SqlLocalDb.  
  
## <a name="starting-localdb-and-connecting-to-localdb"></a>Запуск LocalDB и подключение к LocalDB  
  
### <a name="connecting-to-the-automatic-instance"></a>Подключение к автоматическому экземпляру  
 Самым простым способом использования **LocalDB** является подключение к автоматическому экземпляру, владельцем которого является текущий пользователь, с помощью строки подключения **"Server=(localdb)\MSSQLLocalDB;Integrated Security=true"**. Подключиться к определенной базе данных, используя имя файла, можно с помощью строки подключения, подобной следующей: **"Server=(LocalDB)\MSSQLLocalDB; Integrated Security=true; AttachDbFileName=D:\Data\MyDB1.mdf"**.  
  
> [!NOTE]  
>  При первом подключении пользователя компьютера к **LocalDB**необходимо создать и запустить автоматический экземпляр. Дополнительное время, необходимое для создания экземпляра, может стать причиной того, что попытка соединения завершится с ошибкой истечения времени ожидания. В этом случае подождите несколько секунд до завершения процесса создания экземпляра, а затем подключитесь снова.  
  
### <a name="creating-and-connecting-to-a-named-instances"></a>Создание и подключение к именованным экземплярам  
 Помимо автоматических экземпляров, **LocalDB** также поддерживает именованные экземпляры. Используйте программу SqlLocalDB.exe для создания, запуска и остановки именованного экземпляра **LocalDB**. Дополнительные сведения об SqlLocalDB.exe см. в разделе [Программа SqlLocalDB](../../tools/sqllocaldb-utility.md).  
  
```ms-dos  
REM Create an instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\130\Tools\Binn\SqlLocalDB.exe" create LocalDBApp1  
REM Start the instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\130\Tools\Binn\SqlLocalDB.exe" start LocalDBApp1  
REM Gather information about the instance of LocalDB  
"C:\Program Files\Microsoft SQL Server\130\Tools\Binn\SqlLocalDB.exe" info LocalDBApp1  
```  
  
 Вышеуказанная последняя строка возвращает информацию, аналогичную следующей.  
  
|||  
|-|-|  
|Имя|«LocalDBApp1»|  
|Версия|\<текущая версия>|  
|Общее имя|""|  
|Владелец|"\<пользователь Windows>"|  
|Автоматическое создание|нет|  
|Состояние|запуск|  
|Время последнего запуска|\<дата и время>|  
|Имя канала экземпляра|np:\\\\.\pipe\LOCALDB#F365A78E\tsql\query|  
  
> [!NOTE]  
>  Если приложение использует версию .NET ранее 4.0.2, то необходимо устанавливать соединение непосредственно с именованным каналом **LocalDB**. Значение "Имя канала экземпляра" — это именованный канал, который прослушивает экземпляр **LocalDB** . Часть имени канала экземпляра, следующая после LOCALDB#, будет изменяться при каждом запуске экземпляра **LocalDB**. Для подключения к экземпляру **LocalDB** с помощью [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] введите имя канала экземпляра в поле **Имя сервера** диалогового окна **Соединение с [!INCLUDE[ssDE](../../includes/ssde-md.md)]**. Можно установить соединение с экземпляром **LocalDB** из пользовательской программы с использованием строки подключения, аналогичной `SqlConnection conn = new SqlConnection(@"Server=np:\\.\pipe\LOCALDB#F365A78E\tsql\query");`  
  
### <a name="connecting-to-a-shared-instance-of-localdb"></a>Соединение с общим экземпляром LocalDB  
 Чтобы установить соединение с общим экземпляром **LocalDB** , добавьте в строку подключения сочетание **.\\** (точка + обратная косая черта), чтобы указать пространство имен, зарезервированное для общих экземпляров. Например, чтобы соединиться с общим экземпляром **LocalDB** с именем `AppData` , укажите в строке подключения `(localdb)\.\AppData` . Пользователь, устанавливающий соединение с общим экземпляром **LocalDB** , который ему не принадлежит, должен иметь имя входа для проверки подлинности Windows или [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .  
  
## <a name="troubleshooting"></a>Устранение неполадок  
 Дополнительные сведения по устранению неполадок в работе **LocalDB**см. в разделе [Устранение неполадок в работе SQL Server 2012 Express LocalDB](http://social.technet.microsoft.com/wiki/contents/articles/4609.aspx).  
  
## <a name="permissions"></a>Разрешения  
 Экземпляр [!INCLUDE[ssExpCurrent](../../includes/ssexpcurrent-md.md)]**LocalDB** является экземпляром, созданным пользователем для собственного использования. Любой пользователь компьютера может создать базу данных в экземпляре **LocalDB**, сохранив файлы в своем пользовательском профиле и запустив процесс со своими учетными данными. По умолчанию доступ к экземпляру **LocalDB** ограничен его владельцем. Данные, содержащиеся в **LocalDB** , защищаются средствами файловой системы. Если файлы пользовательской базы данных хранятся в общей папке, то базу данных может открыть любой пользователь, имеющий доступ к этой папке, с помощью собственного экземпляра **LocalDB** . Если файлы базы данных хранятся в защищенном месте, например в папке пользовательских данных, то базу данных может открыть только сам пользователь, а также администратор, обладающий правами доступа к данной папке. Файлы **LocalDB** могут быть открыты одновременно только одним экземпляром **LocalDB** .  
  
> [!NOTE]  
>  **LocalDB** всегда запускается в контексте безопасности пользователя. Это означает, что **LocalDB** никогда не будет запускаться с учетными данными группы локальных администраторов. Это означает, что все файлы базы данных, используемые экземпляром **LocalDB** , должны быть доступны учетной записи пользователя Windows их владельца, что не подразумевает членства в локальной группе администраторов.  
  
## <a name="see-also"></a>См. также:  
 [Программа SqlLocalDB](../../tools/sqllocaldb-utility.md)  
  
  
