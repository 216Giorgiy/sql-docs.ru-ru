---
title: "Основные сведения о поддержке SSL | Документы Microsoft"
ms.custom: 
ms.date: 01/19/2017
ms.prod: sql-non-specified
ms.reviewer: 
ms.suite: 
ms.technology:
- drivers
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 073f3b9e-8edd-4815-88ea-de0655d0325e
caps.latest.revision: 28
author: MightyPen
ms.author: genemi
manager: jhubbard
ms.workload: Inactive
ms.translationtype: MT
ms.sourcegitcommit: f7e6274d77a9cdd4de6cbcaef559ca99f77b3608
ms.openlocfilehash: 82440c6d3ffe0ee0f2c2b9080328c0fed302cb31
ms.contentlocale: ru-ru
ms.lasthandoff: 09/09/2017

---
# <a name="understanding-ssl-support"></a>Основные сведения о поддержке SSL
[!INCLUDE[Driver_JDBC_Download](../../includes/driver_jdbc_download.md)]

  При подключении к [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)], если приложение запрашивает шифрование, а экземпляр [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] , настроена поддержка SSL-шифрование, [!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] инициирует подтверждения SSL. Подтверждение обеспечивает возможность согласования сервером и клиентом алгоритмов шифрования, используемых для защиты данных. SSL-подтверждение обеспечивает защищенную передачу данных между клиентом и сервером. В ходе SSL-подтверждения сервер отправляет сертификат открытого ключа клиенту. Поставщик сертификата открытого ключа называется центром сертификации (ЦС). Клиент несет ответственность за проверку надежности используемого центра сертификации.  
  
 Если приложение запрашивает шифрование, [!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] не будет устанавливать [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] поддержку SSL-шифрования. Если [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] экземпляр не настроен на принудительное шифрование протокола SSL, то соединение устанавливается без шифрования. Если [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] экземпляре настроено принудительное SSL-шифрования, драйвер автоматически включит SSL-шифрование при запуске на правильно настроенной Java виртуальной машины (JVM), или в противном случае соединение будет разорвано и драйвер возвращает ошибку.  
  
> [!NOTE]  
>  Убедитесь, что значение, передаваемое **serverName** точно соответствует общее имя (CN) или DNS-имя в альтернативное имя СУБЪЕКТА в сертификате сервера для SSL-соединения для успешного выполнения.  
  
> [!NOTE]  
>  Дополнительные сведения о настройке SSL для [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)], см. шифрование соединений с [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] раздела [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] электронной документации.  
  
## <a name="remarks"></a>Замечания  
 Чтобы приложения могли использовать SSL-шифрование, [!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] добавлены следующие свойства соединения, начиная с версии 1.2: **шифрования**, **trustServerCertificate**, **trustStore**, **trustStorePassword**, и **hostNameInCertificate**. Дополнительные сведения см. в разделе [задание свойств соединения](../../connect/jdbc/setting-the-connection-properties.md).  
  
 В следующей таблице представлены как [!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] возможных вариантах подключения SSL. Во всех вариантах используются различные наборы свойств SSL-соединений. В таблицу входят:  
  
-   **пустой**: «свойство отсутствует в строке соединения»  
  
-   **значение**: «свойство существует в строке соединения и допустимость его значения»  
  
-   **любой**: «не проверяются наличие свойства в строке соединения и допустимость его значения»  
  
> [!NOTE]  
>  То же самое относится для [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] проверки подлинности пользователей и встроенной проверки подлинности Windows.  
  
|encrypt|trustServerCertificate|hostNameInCertificate|trustStore|trustStorePassword|Поведение|  
|-------------|----------------------------|---------------------------|----------------|------------------------|--------------|  
|false or blank|any|any|any|any|[!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] Не будет устанавливать [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] поддержку SSL-шифрования. Если на сервере имеется самозаверяющий сертификат, драйвер запускает обмен SSL-сертификатами. SSLсертификат не будет проверяться, а шифроваться будут только учетные данные (в пакете входа).<br /><br /> Если сервер требует от клиента поддержки SSL-шифрования, драйвер запускает обмен SSL-сертификатами. Проверка SSL-сертификатов не будет выполняться, а будет выполняться шифрование всего сеанса связи.|  
|true|true|any|any|any|[!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] Запрашивает использование SSL-шифрования с [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)].<br /><br /> Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами. Обратите внимание, что если **trustServerCertificate** задано значение «true», драйвер не будет проверять SSL-сертификат.<br /><br /> Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.|  
|true|false or blank|пустой|пустой|пустой|[!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] Запрашивает использование SSL-шифрования с [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)].<br /><br /> Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами.<br /><br /> Драйвер будет использовать **serverName** свойство, указанное в URL-АДРЕСЕ соединения, чтобы проверить сертификат сервера SSL и использовать правила поиска фабрики диспетчеров доверия, чтобы определить, какое хранилище сертификатов для использования.<br /><br /> Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.|  
|true|false or blank|value|пустой|пустой|[!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] Запрашивает использование SSL-шифрования с [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)].<br /><br /> Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами.<br /><br /> Драйвер проверяет значение субъекта SSL-сертификат, используя значение, указанное для **hostNameInCertificate** свойство.<br /><br /> Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.|  
|true|false or blank|пустой|value|value|[!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] Запрашивает использование SSL-шифрования с [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)].<br /><br /> Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами.<br /><br /> Драйвер будет использовать **trustStore** значение свойства для поиска файла сертификата trustStore и **trustStorePassword** значение свойства для проверки целостности файла trustStore.<br /><br /> Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.|  
|true|false or blank|пустой|пустой|value|[!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] Запрашивает использование SSL-шифрования с [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)].<br /><br /> Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами.<br /><br /> Драйвер будет использовать **trustStorePassword** значение свойства для проверки целостности файла trustStore по умолчанию.<br /><br /> Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.|  
|true|false or blank|пустой|value|пустой|[!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] Запрашивает использование SSL-шифрования с [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)].<br /><br /> Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами.<br /><br /> Драйвер будет использовать **trustStore** значение свойства для поиска местоположения файла trustStore.<br /><br /> Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.|  
|true|false or blank|value|пустой|value|[!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] Запрашивает использование SSL-шифрования с [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)].<br /><br /> Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами.<br /><br /> Драйвер будет использовать **trustStorePassword** значение свойства для проверки целостности файла trustStore по умолчанию. Кроме того, драйвер будет использовать **hostNameInCertificate** значение свойства для проверки сертификата SSL.<br /><br /> Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.|  
|true|false or blank|value|value|пустой|[!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] Запрашивает использование SSL-шифрования с [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)].<br /><br /> Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами.<br /><br /> Драйвер будет использовать **trustStore** значение свойства для поиска местоположения файла trustStore. Кроме того, драйвер будет использовать **hostNameInCertificate** значение свойства для проверки сертификата SSL.<br /><br /> Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.|  
|true|false or blank|value|value|value|[!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] Запрашивает использование SSL-шифрования с [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)].<br /><br /> Если сервер требует от клиента поддерживать SSL-шифрование или сам поддерживает шифрование, драйвер запускает обмен SSL-сертификатами.<br /><br /> Драйвер будет использовать **trustStore** значение свойства для поиска файла сертификата trustStore и **trustStorePassword** значение свойства для проверки целостности файла trustStore. Кроме того, драйвер будет использовать **hostNameInCertificate** значение свойства для проверки сертификата SSL.<br /><br /> Если на сервере не настроена поддержка шифрования, то в работе драйвера будет вызвана ошибка и соединение будет разорвано.|  
  
 Если свойству encrypt присвоено **true**, [!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] использует для согласования SSL-шифрования с поставщик безопасности JSSE в JVM по умолчанию [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)]. Поставщик безопасности по умолчанию может не поддерживать все функции, необходимые для успешного согласования SSL-шифрования. Например, поставщик безопасности по умолчанию может не поддерживать размер открытого ключа RSA, используемого в [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] SSL-сертификат. В этом случае поставщик безопасности по умолчанию может вызвать ошибку, в результате которой драйвер JDBC разорвет соединение. Чтобы устранить эту неполадку, выполните одно из следующих действий.  
  
-   Настройка [!INCLUDE[ssNoVersion](../../includes/ssnoversion_md.md)] с меньшим открытым ключом RSA сертификата сервера  
  
-   Настройте в JVM использование другого поставщика безопасности JSSE в «\<java-home > / lib/security/java.security» файл свойств безопасности  
  
-   Используйте другой JVM  
  
## <a name="validating-server-ssl-certificate"></a>Проверка SSL-сертификата сервера  
 В ходе SSL-подтверждения сервер отправляет сертификат открытого ключа клиенту. Драйвер JDBC или клиент должны обеспечить проверку того, что сертификат сервера выдан центром сертификации, которому доверяет клиент. Драйвер требует соответствия сертификата сервера следующим требованиям:  
  
-   Сертификат должен быть выдан доверенным центром сертификации.  
  
-   Сертификат должен быть выдан для проверки подлинности серверов.  
  
-   Сертификат является действительным на текущую дату.  
  
-   Общее имя (CN) в теме или DNS-имя в альтернативное имя СУБЪЕКТА сертификата точно соответствует **serverName** значения, указанного в строке подключения или, если указано,  **hostNameInCertificate** значение свойства.  
  
-   DNS-имя может содержать символы шаблонов. Но [!INCLUDE[jdbcNoVersion](../../includes/jdbcnoversion_md.md)] не поддерживает сопоставление шаблонов. То есть, что abc.com не будет соответствовать *.com, но \*.com будет соответствовать \*. com.  
  
## <a name="see-also"></a>См. также:  
 [С помощью шифрования SSL](../../connect/jdbc/using-ssl-encryption.md)   
 [Защита приложений драйвера JDBC](../../connect/jdbc/securing-jdbc-driver-applications.md)  
  
  

