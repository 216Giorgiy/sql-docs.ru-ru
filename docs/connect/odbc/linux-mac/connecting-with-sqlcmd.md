---
title: Соединение с помощью sqlcmd | Документы Microsoft
ms.custom: ''
ms.date: 01/19/2017
ms.prod: sql
ms.prod_service: connectivity
ms.reviewer: ''
ms.suite: sql
ms.technology: connectivity
ms.tgt_pltfrm: ''
ms.topic: conceptual
helpviewer_keywords:
- sqlcmd
ms.assetid: 61a2ec0d-1bcb-4231-bea0-cff866c21463
caps.latest.revision: 45
author: MightyPen
ms.author: genemi
manager: craigg
ms.openlocfilehash: c330fd329f28fa7d89b62b9af6bb8d4bb67c2bc4
ms.sourcegitcommit: 1740f3090b168c0e809611a7aa6fd514075616bf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/03/2018
ms.locfileid: "32853089"
---
# <a name="connecting-with-sqlcmd"></a>Соединение с помощью sqlcmd
[!INCLUDE[Driver_ODBC_Download](../../../includes/driver_odbc_download.md)]

[Sqlcmd](http://go.microsoft.com/fwlink/?LinkID=154481) программа доступна в [!INCLUDE[msCoName](../../../includes/msconame_md.md)] драйвер ODBC для [!INCLUDE[ssNoVersion](../../../includes/ssnoversion_md.md)] в Linux и macOS.
  
Следующие команды показывают, как использовать проверку подлинности Windows (Kerberos) и [!INCLUDE[ssNoVersion](../../../includes/ssnoversion_md.md)] проверки подлинности, соответственно:
  
```  
sqlcmd –E –Sxxx.xxx.xxx.xxx  
sqlcmd –Sxxx.xxx.xxx.xxx –Uxxx -Pxxx  
```  
  
## <a name="available-options"></a>Доступные параметры

В текущем выпуске доступны следующие параметры:  
  
- -? Отображение `sqlcmd` использования.  
  
- Запросить размер пакета.  
  
- -b завершения задания, если имеется ошибка.  
  
- -c *batch_terminator* указать признак конца пакета.  
  
- -C доверие сертификату сервера.  

- -d *имя_базы_данных* проблема `USE ` *имя_базы_данных* при запуске `sqlcmd`.  

- -D приводит значение, передаваемое `sqlcmd` параметр -S, воспринимается как имя источника данных (DSN). Дополнительные сведения см. в разделе «поддержка имени DSN в `sqlcmd` и `bcp`» в конце этого раздела.  
  
- -e записывает входные скрипты на стандартное устройство вывода (stdout).

- -E использовать доверительное соединение (встроенная проверка подлинности). Дополнительные сведения о создании доверительных соединений, использующих встроенную проверку подлинности из клиента Linux или macOS см. в разделе [с помощью встроенной проверки подлинности](../../../connect/odbc/linux-mac/using-integrated-authentication.md).

- -h *number_of_rows* укажите количество строк для печати между заголовками столбцов.  
  
- -H укажите имя рабочей станции.  
  
- -i *входной_файл*[,*входной_файл*[,...]] Указывает файл, содержащий пакет инструкций SQL или хранимых процедур.  
  
- -I набор `SET QUOTED_IDENTIFIER` параметр соединения в значение ON.  
  
- -k, удалите или замените управляющие символы.  
  
- **-K *** application_intent*  
Объявляет тип рабочей нагрузки приложения при соединении с сервером. Единственным поддерживаемым в данное время значением является **ReadOnly**. Если **-K** не указан, `sqlcmd` не поддерживает возможность подключения к вторичной реплике в группе доступности. Дополнительные сведения см. в разделе [драйвер ODBC для Linux и macOS - высокого уровня доступности и аварийного восстановления](../../../connect/odbc/linux-mac/odbc-driver-on-linux-support-for-high-availability-disaster-recovery.md).  
  
> [!NOTE]  
> Параметр **-K** не поддерживается в CTP-версии для SUSE Linux. Тем не менее, можно указать **ApplicationIntent = ReadOnly** ключевое слово в файле источника данных, передаваемый `sqlcmd`. Дополнительные сведения см. в разделе «поддержка имени DSN в `sqlcmd` и `bcp`» в конце этого раздела.  
  
- -l *время ожидания* укажите количество секунд до `sqlcmd` время ожидания входа, при попытке подключиться к серверу.

- -m *уровень_ошибки* элемента управления, какие сообщения об ошибках отправляются в стандартный вывод.  
  
- **-M *** multisubnet_failover*  
Всегда указывайте параметр **-M** при соединении с прослушивателем группы доступности [!INCLUDE[ssSQL11](../../../includes/sssql11_md.md)] или экземпляром отказоустойчивого кластера [!INCLUDE[ssSQL11](../../../includes/sssql11_md.md)]. **-M** обеспечивает более быстрое обнаружение переход на другой ресурс и подключение к серверу (активного). Если параметр **-M** не указан, значит **-M** отключен. Дополнительные сведения о [!INCLUDE[ssHADR](../../../includes/sshadr_md.md)], в разделе [драйвер ODBC для Linux и macOS - высокого уровня доступности и аварийного восстановления](../../../connect/odbc/linux-mac/odbc-driver-on-linux-support-for-high-availability-disaster-recovery.md).  
  
> [!NOTE]  
> Параметр **-M** не поддерживается в CTP-версии для SUSE Linux. Тем не менее, можно указать **MultiSubnetFailover = Yes** ключевое слово в файле источника данных, передаваемый `sqlcmd`. Дополнительные сведения см. в разделе «поддержка имени DSN в `sqlcmd` и `bcp`» в конце этого раздела.  
  
- -N шифрование для подключения.  
  
- -o *выходной_файл* определите файл, который принимает выходные данные из `sqlcmd`.  
  
- -p печать статистику производительности для каждого результирующего набора.  
  
- -P пароль пользователя.  
  
- -q *commandline_query* выполнение запроса при `sqlcmd` запускается, но не завершает работу после завершения запроса.  

- -Q *commandline_query* выполнение запроса при `sqlcmd` запускает. `sqlcmd` завершает работу после завершения запроса.  

- -r перенаправляет сообщения об ошибках в stderr.

- -R заставляет драйвер на использование региональных параметров клиента для преобразования валюты и данные даты и времени в символьные данные. В настоящее время используется только форматирование en_US (Английский (США)).
  
- -s *column_separator_char* укажите знак-разделитель столбцов.  

- -S [*протокола*:] *сервера*[**, *** порт*]  
Укажите экземпляр [!INCLUDE[ssNoVersion](../../../includes/ssnoversion_md.md)] соединиться, или, если -D используется, имя источника данных. Драйвер ODBC для Linux и macOS требует -S. Обратите внимание, что **tcp** является единственным допустимым протоколом.  
  
- -t *query_timeout* укажите число секунд времени ожидания команды (или инструкции SQL).  
  
- -u укажите файл output_file хранится в формате Юникод, независимо от формата входной_файл.  
  
- -U *login_id* укажите идентификатор имени входа пользователя.  
  
- -V *error_severity_level* контролировать уровень серьезности, которая используется для задания переменной ERRORLEVEL.  
  
- -w *ширина_столбцов* указать ширину экрана для выводимых данных.  
  
- -W удалить конечные пробелы из столбца.  
  
- Подстановка Disable - x.  
  
- -X отключение команд, скрипта запуска и переменные среды.  
  
- -y *variable_length_type_display_width* задать `sqlcmd` переменной сценария `SQLCMDMAXFIXEDTYPEWIDTH`.
  
- -Y *fixed_length_type_display_width* задать `sqlcmd` переменной сценария `SQLCMDMAXVARTYPEWIDTH`.


## <a name="available-commands"></a>Доступные команды

В текущем выпуске доступны следующие команды:  
  
-   [:]!!  
  
-   :Connect  
  
-   :Error  
  
-   [:]EXIT  
  
-   GO [*число*]  
  
-   :Help  
  
-   :List  
  
-   :Listvar  
  
-   :On Error  
  
-   :Out  
  
-   :Perftrace  
  
-   [:]QUIT  
  
-   :r  
  
-   :RESET  
  
-   :setvar  
  
## <a name="unavailable-options"></a>Недоступные параметры
В текущем выпуске не доступны следующие параметры:  

- -A вход [!INCLUDE[ssNoVersion](../../../includes/ssnoversion_md.md)] с помощью выделенного административного соединения (DAC). Сведения о том, как делать выделенное административное соединение (DAC) см. в разделе [рекомендации по программированию](../../../connect/odbc/linux-mac/programming-guidelines.md).  
  
- -f *code_page* указать входные и выходные кодовые страницы.  
  
- -L список локально настроенных серверов и имена сервера, осуществляющих передачу данных в сети.  
  
- -v создать `sqlcmd` переменной скрипта, который может использоваться в `sqlcmd` сценария.  
  
Можно использовать следующий альтернативный метод: Поместите параметры в один файл, который затем можно добавить в другой файл. Это позволит использовать файл параметров для замены значений. Например, создайте файл с именем `a.sql` (файл параметров) со следующим содержимым:
  
    :setvar ColumnName object_id  
    :setvar TableName sys.objects  
  
Затем создайте файл с именем `b.sql`, с параметрами для замены:  
  
    select $(ColumnName) from $(TableName)  

В командной строке объединения `a.sql` и `b.sql` в `c.sql` с помощью следующих команд:  
  
    cat a.sql > c.sql 
  
    cat b.sql >> c.sql  
  
Запустите `sqlcmd` и использовать `c.sql` как входной файл:  
  
    slqcmd -S<…> -P<..> –U<..> -I c.sql  

- -z *пароль* изменить пароль.  
  
- -Z *пароль* сменить пароль и выйти.  

## <a name="unavailable-commands"></a>Недоступные команды

В текущем выпуске не доступны следующие команды:  
  
-   :ED  
  
-   :ServerList  
  
-   :XML  
  
## <a name="dsn-support-in-sqlcmd-and-bcp"></a>Поддержка имени DSN в sqlcmd и bcp

Можно указать имя источника данных (DSN) вместо имени сервера в **sqlcmd** или **bcp** `-S` параметр (или **sqlcmd** : команда подключения), если задан параметр -D. -D вызывает **sqlcmd** или **bcp** для подключения к серверу, указанному в имени DSN -S параметром.  
  
Системные имена DSN хранятся в `odbc.ini` файл в каталоге ODBC sysconfigdir (`/etc/odbc.ini` в стандартных установках). Пользовательские имена DSN хранятся в `.odbc.ini` в домашнем каталоге пользователя (`~/.odbc.ini`).
  
В имени DSN на Linux или macOS поддерживаются следующие записи:

-   **ApplicationIntent = ReadOnly**  

-   **Базы данных = *** имя_базы_данных*  
  
-   **Драйвер = драйвер ODBC 11 для SQL Server** или **драйвер = ODBC Driver 13 for SQL Server**
  
-   **MultiSubnetFailover = Yes**  
  
-   **Server = *** server_name_or_IP_address*  
  
-   **Trusted_Connection=yes**|**no**  
  
В имени DSN только запись DRIVER является обязательным, но для подключения к серверу `sqlcmd` или `bcp` нужно значение в записи сервера.  

Если этот параметр указан как в имени DSN и `sqlcmd` или `bcp` командной строки, параметр командной строки переопределяет значение, используемое в имени DSN. Например, если имя DSN содержит запись в базе данных и `sqlcmd` Командная строка содержит **-d**, значение, передаваемое **-d** используется. Если **Trusted_Connection = yes** указано в DSN, используется проверка подлинности Kerberos и имя пользователя (**– U**) и пароль (**– P**), если они заданы, игнорируются.

Существующие сценарии, вызывающие `isql` можно изменить, чтобы использовать `sqlcmd` , определив следующий псевдоним: `alias isql="sqlcmd –D"`.  

## <a name="see-also"></a>См. также  
[Соединение с помощью **bcp**](../../../connect/odbc/linux-mac/connecting-with-bcp.md)  
 
