---
title: "Мгновенная инициализация файлов базы данных | Документация Майкрософт"
ms.custom: 
ms.date: 11/24/2017
ms.prod: sql-non-specified
ms.prod_service: database-engine
ms.service: 
ms.component: databases
ms.reviewer: 
ms.suite: sql
ms.technology: database-engine
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- initializing files [SQL Server]
- instant file initialization [SQL Server]
- fast file initialization (SQL Server)
- file initialization [SQL Server]
- IFI [SQL Server]
ms.assetid: 1ad468f5-4f75-480b-aac6-0b01b048bd67
caps.latest.revision: "33"
author: BYHAM
ms.author: rickbyh
manager: jhubbard
ms.workload: Active
ms.openlocfilehash: 3f0ef2d2c733a0ab1f349d42d621303cc6c133a5
ms.sourcegitcommit: 9fbe5403e902eb996bab0b1285cdade281c1cb16
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/27/2017
---
# <a name="database-file-initialization"></a>Инициализация файлов базы данных
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)] Файлы данных и журналов инициализируются, чтобы перезаписать все существующие данные на диске, оставшиеся после удаленных файлов. Файлы данных и журналов сначала инициализируются путем обнуления (заполнения нулями) при выполнении одной из следующих операций:  
  
- Создание базы данных.  
  
- Добавление файлов данных и журналов к существующей базе данных.  
  
- Увеличение размера существующего файла (включая операции автоувеличения).  
  
- Восстановление базы данных или файловой группы.  
  
Вследствие инициализации файлов эти операции занимают больше времени. Однако, если данные записываются в файлы первый раз, операционной системе не требуется заполнять файлы нулями.  
  
# <a name="instant-file-initialization-ifi"></a>Мгновенная инициализация файлов (IFI)  
В [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] файлы данных могут инициализироваться мгновенно во избежание операций обнуления. Мгновенная инициализация файлов позволяет быстро выполнять упомянутые ранее файловые операции. Мгновенная инициализация файлов освобождает место на диске, не заполняя пространство нулями. Вместо этого содержимое диска перезаписывается, поскольку в файлы записываются новые данные. Файлы журналов не могут быть инициализированы мгновенно.  
  
> [!NOTE]  
>  Мгновенная инициализация файлов доступна только в [!INCLUDE[msCoName](../../includes/msconame-md.md)][!INCLUDE[winxppro](../../includes/winxppro-md.md)] , [!INCLUDE[winxpsvr](../../includes/winxpsvr-md.md)] или более поздних версиях.  

> [!IMPORTANT]
> Мгновенная инициализация файлов доступна только для файлов данных. Файлы журналов всегда будут обнуляться при создании или увеличении размера.
  
Мгновенная инициализация файлов доступна, только если стартовой учетной записи службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] предоставлено разрешение *SE_MANAGE_VOLUME_NAME*. Участники группы администраторов Windows обладают этим правом и могут предоставить его другим пользователям, добавив их в политику безопасности **Выполнение задач обслуживания томов** .  
  
Некоторые условия, например [прозрачное шифрование данных](../../relational-databases/security/encryption/transparent-data-encryption.md), могут не допускать мгновенную инициализацию файлов.  
  
Предоставление учетной записи разрешения `Perform volume maintenance tasks` .  
  
1.  На компьютере, где будет создан файл резервной копии, откройте приложение **Local Security Policy** (`secpol.msc`).  
  
2.  Разверните на левой панели узел **Локальные политики**, а затем щелкните пункт **Назначение прав пользователей**.  
  
3.  На правой панели дважды щелкните **Выполнение задач по обслуживанию томов**.  
  
4.  Щелкните кнопку **Добавить пользователя или группу** и добавьте любые учетные записи пользователя, которые использовались для резервного копирования.  
  
5.  Нажмите кнопку **Применить**и закройте все диалоговые окна **Локальная политика безопасности** .  
  
### <a name="security-considerations"></a>Вопросы безопасности  
 Поскольку удаленное содержимое диска перезаписывается только по мере записи новых данных в файлы, доступ к удаленному содержимому может получить неавторизованный субъект, пока в эту область файла данных не будут записаны другие данные. По мере подключения файла базы данных к экземпляру [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] риск раскрытия информации уменьшается благодаря списку управления доступом на уровне пользователей (DACL) в файле. DACL разрешает доступ к файлу только учетной записи службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] и локальному администратору. Но при отсоединении файла доступ к нему может получить пользователь или служба, которым не предоставлено разрешение *SE_MANAGE_VOLUME_NAME*. Аналогичная проблема существует при резервном копировании базы данных. Если файл резервной копии не защищен с помощью соответствующего DACL, удаленное содержимое может стать доступным неавторизованному пользователю или службе.  
 
 Если сервер [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] установлен в защищенной среде, преимущества производительности от включения IFI могут превысить риск нарушения безопасности и, следовательно, эта рекомендация будет не актуальна.
  
 Если вероятность раскрытия удаленного содержимого является серьезной проблемой, необходимо выполнить одно следующее действие или оба.  
  
- Всегда проверяйте, что все отсоединенные файлы данных и резервные копии имеют ограничивающие DACL.  
  
- Отключите мгновенную инициализацию файлов для экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], отменив разрешение *SE_MANAGE_VOLUME_NAME* стартовой учетной записи службы [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].  
  
> [!NOTE]  
> Отключение мгновенной инициализации файлов влияет только на создаваемые или увеличивающиеся в размере файлы после отзыва прав пользователя.  
  
## <a name="see-also"></a>См. также:  
 [CREATE DATABASE (SQL Server Transact-SQL)](../../t-sql/statements/create-database-sql-server-transact-sql.md)  
  
  
