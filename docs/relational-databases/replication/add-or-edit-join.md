---
title: "Добавление или изменение соединения | Microsoft Docs"
ms.custom: ""
ms.date: "03/14/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "replication"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "sql13.rep.newpubwizard.addeditjoin.f1"
ms.assetid: 3b546560-720f-48b8-9d63-cf159290e9d4
caps.latest.revision: 25
author: "BYHAM"
ms.author: "rickbyh"
manager: "jhubbard"
caps.handback.revision: 25
---
# Добавление или изменение соединения
  Диалоговые окна **Добавить соединение** и **Изменить соединение** позволяют добавлять и редактировать фильтры соединения для публикаций слиянием.  
  
> [!NOTE]  
>  Для редактирования фильтра в существующей публикации необходим новый моментальный снимок для этой публикации. Если публикация содержит подписки, эти подписки должны быть повторно инициализированы. Дополнительные сведения об изменениях свойств см. в разделе [Изменение публикации и свойства статей](../../relational-databases/replication/publish/change-publication-and-article-properties.md).  
  
 Фильтр соединения позволяет фильтровать таблицу на основе фильтрации связанной таблицы в публикации. Обычно родительская таблица фильтруется с использованием параметризованного фильтра строк, затем определяются один или несколько фильтров соединений, практически аналогично определению соединения между таблицами. Фильтры соединений расширяют фильтр строк таким образом, что данные в связанных таблицах реплицируются, только когда они соответствуют предложению фильтра соединения.  
  
 Фильтры соединений, как правило, следуют связям «первичный-внешний ключ», определенным для таблиц, к которым они применяются, но не ограничиваются только этими связями. Фильтр соединения может быть основан на любой логике, сравнивающей взаимосвязанные данные в двух таблицах статей.  
  
> [!IMPORTANT]  
>  Фильтры соединений могут включать бесконечное количество таблиц, но фильтры с большим количеством таблиц могут повлиять на производительность во время обработки слияния. При создании фильтров соединения из пяти и более таблиц рассмотрите другие решения: не фильтруйте маленькие таблицы, таблицы, которые не изменяются или служат в основном таблицами подстановки. Используйте фильтры соединений только между таблицами, которые должны быть разделены среди подписчиков.  
  
## Параметры  
 Данное диалоговое окно содержит процесс создания фильтра соединения между двумя таблицами, состоящий из трех шагов. Создание нескольких фильтров соединений требует повторного выполнения последовательности действий в этом диалоговом окне.  
  
1.  **Проверьте отфильтрованную таблицу и выберите соединяемую таблицу**  
  
    -   При добавлении нового соединения, убедитесь, что таблицы в **Отфильтрованная таблица** правильность текстовое поле (если это не так, нажмите кнопку **Отменить**, выберите нужную таблицу на **Фильтрация строк таблицы** и нажмите кнопку **Добавление соединения** Чтобы вернуться к этому диалоговому окну). Выберите таблицу из **Соединяемая таблица** поле раскрывающегося списка.  
  
    -   При редактировании существующего соединения имена таблиц будут уже указаны и их нельзя изменить. Для изменения таблиц, участвующих в соединении, необходимо удалить существующий фильтр соединения на странице **Фильтрация строк таблицы** и создать новый фильтр соединения между другими таблицами.  
  
2.  **Создайте инструкцию соединения**  
  
    -   При добавлении нового соединения выберите или **Использовать конструктор для создания инструкции** , или **Написать инструкцию соединения вручную**. Если начато написание соединения вручную, то нельзя использовать конструктор.  
  
         Если выбрать с помощью построителя используйте столбцы в сетке (**вместе**, **столбец отфильтрованной таблицы**, **оператор**, и **Столбец соединяемой таблицы**) для создания инструкции соединения. Каждый столбец в сетке содержит раскрывающийся список, позволяющий выбрать два столбца и оператор (**=**, **<>**, **<=**, **\<**, **>=**, **>**, **как**). Результаты выводятся в текстовом поле **Предварительный просмотр** . Если в соединении участвуют несколько пар столбцов, выберите конъюнкцию (**AND** или **или**) из **совместно** столбец, а затем введите еще два столбца и другой оператор.  
  
         Если нужно написать инструкцию вручную, введите ее в текстовом поле **Инструкция соединения** . Используйте списки **Фильтруемые столбцы таблицы** и **Столбцы соединяемой таблицы** для перетаскивания столбцов в текстовое поле **Инструкция соединения** .  
  
    -   При изменении существующего соединения правки производятся вручную.  
  
3.  **Укажите параметры соединения**  
  
    -   Если столбец, по которому нужно соединить отфильтрованную таблицу, является уникальным, выберите **Уникальный ключ**. Если столбец уникален, то для процесса слияния будут доступны специальные способы оптимизации производительности.  
  
        > [!CAUTION]  
        >  Выбор этого параметра указывает, что связь между дочерней и родительской таблицей в фильтре соединения — «одна к одной» или «одна к нескольким». Выберите этот параметр только при наличии ограничения на соединяющийся столбец в родительской таблице, гарантирующий уникальность. Если параметр задан неправильно, может возникнуть потеря конвергенции данных.  
  
    -   [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] и более поздних версий. По умолчанию во время синхронизации процесс репликации слиянием обрабатывает изменения построчно. Чтобы связанные изменения обрабатывались в виде блока, выберите **Логическая запись**. Этот параметр доступен, только если удовлетворяются требования статьи и публикации на использование логических записей. Для получения дополнительной информации обратитесь к разделу «Вопросы использования логических записей» в [изменения группы связанных строк с логическими записями](../../relational-databases/replication/merge/group-changes-to-related-rows-with-logical-records.md).  
  
 После добавления или редактирования фильтра нажмите кнопку **ОК** для сохранения изменений и закрытия диалогового окна. Проводится синтаксический анализ указанного фильтра, после чего фильтр применяется к таблице в предложении SELECT. Если оператор фильтра содержит синтаксические ошибки или встречаются другие проблемы, пользователь уведомляется, после чего может отредактировать эту инструкцию фильтра.  
  
## См. также:  
 [Создание публикации](../../relational-databases/replication/publish/create-a-publication.md)   
 [Просмотр и изменение свойств публикации](../../relational-databases/replication/publish/view-and-modify-publication-properties.md)   
 [Фильтрация опубликованных данных](../../relational-databases/replication/publish/filter-published-data.md)   
 [Фильтры соединения](../../relational-databases/replication/merge/join-filters.md)   
 [Параметризованные фильтры строк](../../relational-databases/replication/merge/parameterized-row-filters.md)   
 [Публикация данных и объектов базы данных](../../relational-databases/replication/publish/publish-data-and-database-objects.md)  
  
  