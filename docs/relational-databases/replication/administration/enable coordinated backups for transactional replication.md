---
title: "включить скоординированное создание резервных копий для репликации транзакций (программирование репликации на языке Transact-SQL) | Microsoft Docs"
ms.custom: ""
ms.date: "03/23/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "replication"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "TSQL"
helpviewer_keywords: 
  - "репликация транзакций, резервное копирование и восстановление"
  - "sp_replicationdboption, хранимая процедура"
  - "синхронизация с резервной копией [репликация SQL Server]"
  - "скоординированное созднаие резервных копий [репликация SQL Server]"
  - "резервные копии [репликация SQL Server], репликация транзакций"
ms.assetid: 73a914ba-8b2d-4f4d-ac1b-db9bac676a30
caps.latest.revision: 31
author: "BYHAM"
ms.author: "rickbyh"
manager: "jhubbard"
---
# включить скоординированное создание резервных копий для репликации транзакций (программирование репликации на языке Transact-SQL)
  При подготовке базы данных к репликации транзакций можно указать, что перед отправкой в базу данных распространителя со всех транзакций должны быть сняты резервные копии. Кроме того, существует возможность включения в базе данных распространителя функции скоординированного резервного копирования, при которой журнал транзакций в базе данных публикации не подвергается усечению до получения резервных копий транзакций, переданных распространителю. Дополнительные сведения см. в разделе [Strategies for Backing Up and Restoring Snapshot and Transactional Replication](../../../relational-databases/replication/administration/strategies-for-backing-up-and-restoring-snapshot-and-transactional-replication.md).  
  
### Включение функции скоординированного резервного копирования для базы данных, опубликованной с использованием репликации транзакций  
  
1.  На издателе, используйте [DATABASEPROPERTYEX & #40; Transact-SQL & #41;](../../../t-sql/functions/databasepropertyex-transact-sql.md) функция, возвращающая **IsSyncWithBackup** Свойства базы данных публикации. Если функция возвратила значение **1**, то это означает, что скоординированное резервное копирование опубликованной базы данных уже включено.  
  
2.  Если функция в шаге 1 возвращает **0**, выполнение [sp_replicationdboption & #40; Transact-SQL & #41;](../../../relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql.md) на издателе в базе данных публикации. Укажите значение **sync with backup** для аргумента **@optname**и значение **true** для аргумента **@value**.  
  
    > [!NOTE]  
    >  Если значение параметра **sync with backup** заменить на **false**, то точка усечения базы данных публикации будет обновлена после запуска агента чтения журнала или по истечении определенного интервала в случае, если агент чтения журнала выполняется постоянно. Максимальный интервал управляется **– MessageInterval** параметра агента (который по умолчанию составляет 30 секунд).  
  
### Включение скоординированного резервного копирования базы данных распространителя  
  
1.  На распространителе, используйте [DATABASEPROPERTYEX & #40; Transact-SQL & #41;](../../../t-sql/functions/databasepropertyex-transact-sql.md) функция, возвращающая **IsSyncWithBackup** Свойства базы данных распространителя. Если функция возвратила значение **1**, то это означает, что скоординированное резервное копирование базы данных распространителя уже включено.  
  
2.  Если функция в шаге 1 возвращает **0**, выполнение [sp_replicationdboption & #40; Transact-SQL & #41;](../../../relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql.md) на распространителе в базе данных распространителя. Укажите в параметре **@optname** значение **sync with backup** , а в параметре **@value** — значение **true**.  
  
### Отключение скоординированного резервного копирования  
  
1.  На издателе в базе данных публикации или на распространителе в базе данных распространителя, выполните [sp_replicationdboption & #40; Transact-SQL & #41;](../../../relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql.md). Укажите в параметре **@optname** значение **sync with backup** , а в параметре **@value** — значение **false**.  
  
  