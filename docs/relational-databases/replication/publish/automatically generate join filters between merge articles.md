---
title: "Автоматическое формирование набора фильтров соединения между статьями публикации слиянием (среда SQL Server Management Studio) | Microsoft Docs"
ms.custom: ""
ms.date: "03/23/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "replication"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "автоматическое формирование фильтров соединения"
  - "фильтры соединения"
ms.assetid: 7ef419f4-c17f-42a5-9068-174a3ec08941
caps.latest.revision: 38
author: "BYHAM"
ms.author: "rickbyh"
manager: "jhubbard"
---
# Автоматическое формирование набора фильтров соединения между статьями публикации слиянием (среда SQL Server Management Studio)
  Создайте автоматически набор фильтров соединения на **Фильтрация строк таблицы** страницы мастера публикации или **Фильтрация строк** Страница **Свойства публикации — \< публикация>** диалоговое окно. Дополнительные сведения об использовании мастера и о доступе к диалоговому окну см. в разделе [Создать публикацию](../../../relational-databases/replication/publish/create-a-publication.md) и [Просмотр и изменение свойств публикации](../../../relational-databases/replication/publish/view-and-modify-publication-properties.md).  
  
> [!NOTE]  
>  Если автоматическое создание набора фильтров соединения в **Свойства публикации — \< публикация>** диалоговое окно после инициализации подписок на публикацию необходимо сформировать новый моментальный снимок и повторно инициализировать все подписки после внесения изменений. Дополнительные сведения о требованиях к изменениям свойств см. в разделе [Изменение публикации и свойства статей](../../../relational-databases/replication/publish/change-publication-and-article-properties.md).  
  
 Фильтры соединения могут быть созданы вручную для набора таблиц или автоматически системой репликации на основе определенных в таблицах отношений внешних ключей к первичным ключам. Дополнительные сведения о создании фильтров соединения вручную см. в разделе [Определение и изменение соединения фильтра между слияния статьи](../../../relational-databases/replication/publish/define-and-modify-a-join-filter-between-merge-articles.md).  
  
### Автоматическое создание набора фильтров соединения между статьями публикаций слиянием  
  
1.  На **Фильтрация строк таблицы** страницы мастера публикации или **Фильтрация строк** Страница **Свойства публикации — \< публикация>**, нажмите кнопку **Добавить**, и нажмите кнопку **автоматически создать фильтры**.  
  
    > [!NOTE]  
    >  При автоматическом создании фильтров из публикации удаляются любые существующие фильтры строк и фильтры соединения. Фильтры можно добавить вручную после автоматического создания набора фильтров.  
  
2.  Следуйте указаниям в **Создать фильтры** диалоговое окно создания фильтра строк. Затем фильтр строк расширяется на таблицы, связанные с фильтруемой таблицей связью по первичным и внешним ключам.  
  
    1.  Выберите таблицу для фильтрации в раскрывающемся списке.  
  
    2.  Создайте инструкцию фильтра в **инструкция фильтра** текстовое поле. Можно ввести текст в тестовом поле или перетащить столбцы из списка **Столбцы** .  
  
         Текстовая область **Инструкция фильтра** содержит текст по умолчанию, в виде:  
  
        ```  
        SELECT <published_columns> FROM [tableowner].[tablename] WHERE  
        ```  
  
         Текст по умолчанию изменять нельзя. Введите предложение фильтра для статического или параметризованного фильтра строк после ключевого слова WHERE, используя стандартный синтаксис SQL. Полное предложение фильтра для параметризованного фильтра строк должно иметь вид:  
  
        ```  
        SELECT <published_columns> FROM [HumanResources].[Employee] WHERE LoginID = SUSER_SNAME()  
        ```  
  
         В предложении WHERE необходимо использовать имена, состоящие из двух частей; имена, состоящие из трех или четырех частей, не поддерживаются.  
  
    3.  Укажите параметры фильтра.  
  
         Выберите параметр, который соответствует способ совместного использования данных подписчиками: **строка из этой таблицы будет отправлена нескольким подпискам** или **строка из этой таблицы будет отправлена только одной подписке**. Если выбрана настройка **Строка из этой таблицы будет отправлена только одной подписке**, производительность репликации слиянием будет оптимизирована путем уменьшения объема хранимых и обрабатываемых метаданных. Однако следует убедиться, что данные секционированы таким образом, что одна строка не может быть реплицирована более чем одному подписчику. Дополнительные сведения см. в подразделе «Настройка параметров секционирования» раздела [Parameterized Row Filters](../../../relational-databases/replication/merge/parameterized-row-filters.md).  
  
3.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
     Проводится синтаксический анализ указанного фильтра, после чего фильтр применяется к таблице в предложении SELECT. Если оператор фильтра содержит синтаксические ошибки или встречаются другие проблемы, пользователь уведомляется, после чего может отредактировать эту инструкцию фильтра.  
  
     После синтаксического анализа инструкции репликация создает необходимые фильтры соединения и отображает их в **Отфильтрованные таблицы** на панели **Фильтрация строк таблицы** или **Фильтрация строк** страницы. Если фильтры формируются в мастере создания публикаций, а распространитель для издателя, для которого выполняется мастер, еще не настроен, появляется подсказка о необходимости настроить распространитель.  
  
4.  При работе в **Свойства публикации — \< публикация>** диалоговом нажмите кнопку **ОК** Сохранить и закрыть диалоговое окно.  
  
### Изменение автоматически созданного фильтра  
  
1.  На **Фильтрация строк таблицы** страницы мастера публикации или **Фильтрация строк** страницы **Свойства публикации — \< публикация>**, выберите фильтр в **Отфильтрованные таблицы** панели, а затем щелкните **Изменить**.  
  
2.  В **Изменение фильтра** или **Изменить соединение** диалоговом окне измените фильтр.  
  
3.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
### Удаление автоматически созданного фильтра  
  
1.  На **Фильтрация строк таблицы** страницы мастера публикации или **Фильтрация строк** страницы **Свойства публикации — \< публикация>**, выберите фильтр в **Отфильтрованные таблицы** панели, а затем щелкните **Удалить**.  
  
## См. также:  
 [Фильтры соединения](../../../relational-databases/replication/merge/join-filters.md)   
 [Параметризованные фильтры строк](../../../relational-databases/replication/merge/parameterized-row-filters.md)  
  
  