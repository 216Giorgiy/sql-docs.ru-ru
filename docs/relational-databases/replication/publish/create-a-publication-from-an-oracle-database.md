---
title: "Создание публикации из базы данных Oracle | Microsoft Docs"
ms.custom: ""
ms.date: "03/14/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "replication"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "публикации [репликация SQL Server], базы данных Oracle"
  - "публикация Oracle [репликация SQL Server], настройка"
ms.assetid: b3812746-14b0-4b22-809e-b4a95e1c8083
caps.latest.revision: 39
author: "BYHAM"
ms.author: "rickbyh"
manager: "jhubbard"
caps.handback.revision: 39
---
# Создание публикации из базы данных Oracle
  В данном разделе описывается процесс создания публикации из базы данных Oracle в [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] с помощью среды [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] или [!INCLUDE[tsql](../../../includes/tsql-md.md)].  
  
 **В этом разделе**  
  
-   **Перед началом работы выполните следующие действия.**  
  
     [Предварительные требования](#Prerequisites)  
  
-   **Для создания публикации из базы данных Oracle используется:**  
  
     [Среда SQL Server Management Studio](#SSMSProcedure)  
  
     [Transact-SQL](#TsqlProcedure)  
  
##  <a name="BeforeYouBegin"></a> Перед началом  
  
###  <a name="Prerequisites"></a> Предварительные требования  
  
-   Перед созданием публикации необходимо установить программное обеспечение Oracle на распространитель [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] и настроить базу данных Oracle. Дополнительные сведения см. в разделе [настроить издатель Oracle](../../../relational-databases/replication/non-sql/configure-an-oracle-publisher.md).  
  
##  <a name="SSMSProcedure"></a> Использование среды SQL Server Management Studio  
 Создать публикацию моментальных снимков или публикацию транзакций из базы данных Oracle можно с помощью мастера создания публикаций.  
  
 При первоначальном создании публикации из базы данных Oracle необходимо идентифицировать издатель Oracle на распространителе [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] (этого не нужно делать для последующих публикаций из этой же самой базы данных). Идентификацию издателя Oracle можно выполнить из мастера создания публикаций или **Свойства распространителя — \< распространитель>** диалоговое окно, в этом разделе показано **Свойства распространителя — \< распространитель>** диалоговое окно.  
  
#### Идентификация издателя Oracle на распространителе SQL Server  
  
1.  В [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]подключитесь к экземпляру [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , который будет использоваться как распространитель издателем Oracle, затем раскройте серверный узел.  
  
2.  Щелкните правой кнопкой мыши **репликации** папку и выберите пункт **Свойства распространителя**.  
  
3.  На **издателей** Страница **Свойства распространителя — \< распространитель>** диалоговом нажмите кнопку **Добавить**, и нажмите кнопку **Добавить издатель Oracle**.  
  
4.  В диалоговом окне **Соединение с сервером** нажмите кнопку **Параметры** .  
  
5.  На вкладке **Имя входа** выполните следующие действия:  
  
    1.  Введите имя экземпляра базы данных Oracle или выберите **Продолжить обзор** в поле со списком **Экземпляр сервера** .  
  
    2.  Выберите **Стандартная проверка подлинности Oracle** (рекомендуется) или **Проверка подлинности Windows**.  
  
         При выборе **Проверка подлинности Windows**: сервер Oracle должен быть настроен таким образом, чтобы разрешить подключения с использованием учетных данных Windows (Дополнительные сведения см. в документации Oracle), и вы должны войти в настоящее время под той же [!INCLUDE[msCoName](../../../includes/msconame-md.md)] учетной записи Windows, указанный для схемы администратора репликации.  
  
    3.  Если установлен флажок **Стандартная проверка подлинности Oracle**, введите имя входа и пароль схемы администратора репликации, созданной на издателе Oracle во время настройки.  
  
6.  На вкладке **Свойства соединения** выберите тип издателя **Шлюз** или **Полный**.  
  
     Параметр **Полный** обеспечивает публикации моментальных снимков и транзакций с полным набором поддерживаемых функций для публикаций Oracle. Параметр **Шлюз** оптимизирует работу системы для случаев, когда в качестве шлюза между системами выступает репликация. Параметр **Шлюз** нельзя использовать, если одна и та же таблица будет публиковаться в нескольких публикациях транзакций. Если выбран параметр **Шлюз**, то таблица может использоваться только в одной публикации транзакций и в любом количестве публикаций моментальных снимков.  
  
7.  По щелчку **Соединиться**устанавливается соединение с издателем Oracle и выполняется его настройка для репликации.  **Подключение к серверу** диалоговое окно закроется, и вы вернетесь к **Свойства распространителя — \< распространитель>** диалоговое окно.  
  
    > [!NOTE]  
    >  Если имеются какие-либо проблемы с конфигурацией сети, в этом месте выводится сообщение об ошибке. Если при подключении к базе данных Oracle возникают проблемы, см. подраздел «Распространитель SQL Server не может подключиться к экземпляру базы данных Oracle» в разделе [Troubleshooting Oracle Publishers](../../../relational-databases/replication/non-sql/troubleshooting-oracle-publishers.md).  
  
8.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
#### Создание публикации из базы данных Oracle  
  
1.  Подключитесь к экземпляру [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , который издатель Oracle будет использовать в качестве распространителя, а затем раскройте узел сервера.  
  
2.  Раскройте папку **Репликация** .  
  
3.  Щелкните правой кнопкой мыши **Локальные публикации** папку и выберите пункт **Создать публикацию Oracle**.  
  
4.  На странице **Издатель Oracle** мастера создания публикации выберите издателя Oracle. Если издатель Oracle не отображается, щелкните **Добавить издатель Oracle**, чтобы выполнить шаги из предыдущей процедуры.  
  
5.  На странице **Тип публикации** выберите **Публикация моментальных снимков** или **Публикация транзакций**.  
  
6.  На странице **Статьи** выберите объекты базы данных, которые нужно опубликовать.  
  
     При необходимости отфильтруйте столбцы таблицы, раскрыв таблицу и сняв флажки для одного или более столбцов. Щелкните **Свойства статьи** , чтобы просмотреть и изменить свойства статьи, а также указать при необходимости альтернативные соответствия типов данных. Дополнительные сведения о сопоставлении типов данных см. в разделе [указать сопоставления типов данных для издателя Oracle](../../../relational-databases/replication/publish/specify-data-type-mappings-for-an-oracle-publisher.md).  
  
7.  На странице **Фильтрация строк таблицы** примените при необходимости фильтры для публикации подмножества данных из одной или более таблиц.  
  
8.  На странице **Агент моментальных снимков** снимите флажок **Создать моментальный снимок немедленно** только в том случае, если созданы все объекты и добавлены все требуемые данные в базу данных подписок.  
  
9. На **Безопасность агента** Укажите учетные данные для агента моментальных снимков (для всех публикаций) и агента чтения журнала (для публикаций транзакций). Агенты запускаются и создают подключения к распространителю [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] с использованием контекста указанной учетной записи [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows. Агенты выполняют подключения к базе данных Oracle, используя контекст учетной записи, указанной в качестве схемы администратора репликации. Дополнительные сведения см. в разделе [настроить издатель Oracle](../../../relational-databases/replication/non-sql/configure-an-oracle-publisher.md).  
  
     Дополнительные сведения о разрешениях, необходимых для каждого агента, см. в разделе [Replication Agent Security Model](../../../relational-databases/replication/security/replication-agent-security-model.md) и [Replication Security Best Practices](../../../relational-databases/replication/security/replication-security-best-practices.md).  
  
10. На странице **Действия мастера** можно создать при необходимости скрипт публикации. Дополнительные сведения см. в статье [Scripting Replication](../../../relational-databases/replication/scripting-replication.md).  
  
11. На странице **Завершение работы мастера** укажите имя публикации.  
  
##  <a name="TsqlProcedure"></a> Использование Transact-SQL  
 После того как база данных Oracle будет настроена как издатель, можно создать публикацию транзакций или публикацию моментальных снимков точно так же, как из издателя [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , с помощью системных хранимых процедур.  
  
#### Создание публикации Oracle  
  
1.  Настройте базу данных Oracle в качестве издателя. Дополнительные сведения см. в разделе [настроить издатель Oracle](../../../relational-databases/replication/non-sql/configure-an-oracle-publisher.md).  
  
2.  Если удаленный распространитель не существует, настройте удаленный распространитель. Дополнительные сведения см. в статье [Configure Publishing and Distribution](../../../relational-databases/replication/configure-publishing-and-distribution.md).  
  
3.  Удаленный распространитель, издатель Oracle будет использовать, выполните [sp_adddistpublisher & #40; Transact-SQL & #41;](../../../relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql.md). Укажите имя экземпляра базы данных Oracle для подложкой TNS (Transparent Network) **@publisher** и значение **ORACLE** или **ORACLE GATEWAY** для **@publisher_type**. `Specify` режим безопасности, используемый при соединении с издателем Oracle к удаленному распределителю [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] одним из следующих способов:  
  
    -   Использовать стандартную проверку подлинности Oracle, по умолчанию, укажите значение **0** для **@security_mode**, имя входа для схемы администратора репликации, созданной на издателе Oracle во время настройки для **@login**, и пароль для **@password**.  
  
        > [!IMPORTANT]  
        >  По возможности предлагайте пользователям вводить учетные данные системы безопасности во время выполнения приложения. При хранении учетных данных в файле скрипта необходимо защитить этот файл во избежание несанкционированного доступа.  
  
    -   Чтобы использовать проверку подлинности Windows, укажите значение **1** для **@security_mode**.  
  
        > [!NOTE]  
        >  Чтобы использовать проверку подлинности Windows, на сервере Oracle должны быть разрешены соединения с помощью учетных данных Windows (дополнительные сведения см. в документации Oracle). Кроме того, необходимо войти в систему с той же учетной записью Microsoft Windows, которая была указана для схемы администратора репликации.  
  
4.  Создайте задание агента чтения журнала для базы данных публикации.  
  
    -   Если вы не знаете, существует ли задание агента чтения журнала для опубликованной базы данных, выполнение [sp_helplogreader_agent & #40; Transact-SQL & #41;](../../../relational-databases/system-stored-procedures/sp-helplogreader-agent-transact-sql.md) на распространителе, используемая издателем Oracle в базе данных распространителя. В параметре **@publisher**укажите имя издателя Oracle. Если результирующий набор пуст, необходимо создать задание агента чтения журнала.  
  
    -   Если агент чтения журнала для базы данных публикации уже существует, переходите к шагу 5.  
  
    -   На распространителе, используемая издателем Oracle в базе данных распространителя, выполните [sp_addlogreader_agent & #40; Transact-SQL & #41;](../../../relational-databases/system-stored-procedures/sp-addlogreader-agent-transact-sql.md). Укажите учетные данные Windows, под которыми работает агент **@job_login** и **@job_password**.  
  
        > [!NOTE]  
        >   **@Job_login** параметр должен соответствовать имени входа, заданного на шаге 3. Не указывайте сведения о безопасности издателя. Агент чтения журнала соединяется с издателем с помощью сведений о безопасности издателя, указанных на шаге 3.  
  
5.  На распространителе в базе данных распространителя, выполните [sp_addpublication & #40; Transact-SQL & #41;](../../../relational-databases/system-stored-procedures/sp-addpublication-transact-sql.md) Чтобы создать публикацию. Дополнительные сведения см. в статье [Create a Publication](../../../relational-databases/replication/publish/create-a-publication.md).  
  
6.  На распространителе в базе данных распространителя, выполните [sp_addpublication_snapshot & #40; Transact-SQL & #41;](../../../relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql.md). Укажите имя публикации, используемое на шаге 4 для **@publication** учетные данные Windows, с которыми работает агент моментальных снимков и **@job_name** и **@password**. Чтобы использовать стандартную проверку подлинности Oracle при соединении с издателем, необходимо указать значение **0** для **@publisher_security_mode** и сведения об имени входа Oracle **@publisher_login** и **@publisher_password**. Будет создано задание агента моментальных снимков для публикации.  
  
## См. также:  
 [Настройка издателя Oracle](../../../relational-databases/replication/non-sql/configure-an-oracle-publisher.md)   
 [Публикация данных и объектов базы данных](../../../relational-databases/replication/publish/publish-data-and-database-objects.md)   
 [Настройка задания набора транзакций для издателя Oracle & #40; Программирование репликации Transact-SQL и #41;](../../../relational-databases/replication/administration/configure the transaction set job for an oracle publisher.md)   
 [Обзор публикации Oracle](../../../relational-databases/replication/non-sql/oracle-publishing-overview.md)   
 [Скрипт для предоставления разрешений Oracle](../../../relational-databases/replication/non-sql/script-to-grant-oracle-permissions.md)  
  
  