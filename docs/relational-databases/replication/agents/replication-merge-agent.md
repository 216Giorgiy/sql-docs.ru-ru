---
title: "Агент слияния репликации | Microsoft Docs"
ms.custom: ""
ms.date: "08/24/2016"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "replication"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "агент слияния, исполняемые файлы"
  - "агент слияния, ссылка на параметр"
  - "агенты [репликация SQL Server], агент слияния"
  - "командная строка [репликация SQL Server]"
ms.assetid: fe1e7f60-b0c8-45e9-a5e8-4fedfa73d7ea
caps.latest.revision: 64
author: "BYHAM"
ms.author: "rickbyh"
manager: "jhubbard"
caps.handback.revision: 64
---
# Агент слияния репликации
  Агент слияния репликации — это исполняемый файл программы, который применяет к подписчикам исходный моментальный снимок, содержащийся в таблицах базы данных. Кроме того, он выполняет слияние добавочных изменений данных, которые произошли на издателе после создания исходного моментального снимка, а также улаживает конфликты либо в соответствии с правилами, заданными пользователем, либо с помощью созданного пользователем сопоставителя.  
  
> [!NOTE]  
>  Параметры можно указывать в любом порядке. Если необязательные параметры не указаны, используются стандартные значения из реестра локального компьютера.  
  
## Синтаксис  
  
```  
  
replmerg [-?]   
-Publisher server_name[\instance_name]  
-PublisherDB publisher_database  
-Publication publication  
-Subscriber server_name[\instance_name]  
-SubscriberDB subscriber_database  
[-AltSnapshotFolder alt_snapshot_folder_path]  
[-Continuous]  
[-DefinitionFile def_path_and_file_name]  
[-DestThreads number_of_destination_threads]  
[-Distributor server_name[\instance_name]]  
[-DistributorLogin distributor_login]  
[-DistributorPassword distributor_password]  
[-DistributorSecurityMode [0|1]]  
[-DownloadGenerationsPerBatch download_generations_per_batch]  
[-DownloadReadChangesPerBatch download_read_changes_per_batch]  
[-DownloadWriteChangesPerBatch download_write_changes_per_batch]  
[-DynamicSnapshotLocation dynamic_snapshot_location]  
[-EncryptionLevel [0|1|2]]  
[-ExchangeType [1|2|3]]  
[-FastRowCount [0|1]]  
[-FileTransferType [0|1]]  
[-ForceConvergenceLevel [0|1|2 (Publisher|Subscriber|Both)]]  
[-FtpAddress ftp_address]  
[-FtpPassword ftp_password]  
[-FtpPort ftp_port]  
[-FtpUserNameftp_user_name]  
[-HistoryVerboseLevel [0|1|2|3]]  
[-Hostname host_name]  
[-InteractiveResolution [0|1]]  
[-InternetLogin internet_login]  
[-InternetPassword internet_password]  
[-InternetProxyLogin internet_proxy_login]  
[–InternetProxyPassword internet_proxy_password]  
[-InternetProxyServer internet_proxy_server]  
[-InternetSecurityMode [0|1]]  
[-InternetTimeout internet_timeout]  
[-InternetURL internet_url]  
[-KeepAliveMessageInterval keep_alive_message_interval_seconds]  
[-LoginTimeOut login_time_out_seconds]  
[-MakeGenerationInterval make_generation_interval_seconds]  
[-MaxBcpThreads number_of_threads]  
[-MaxDownloadChanges number_of_download_changes]  
[-MaxUploadChanges number_of_upload_changes]  
[-MetadataRetentionCleanup [0|1]]  
[-Output]  
[-OutputVerboseLevel [0|1|2]]  
[-ParallelUploadDownload [0|1]]  
[-PacketSize packet_size]   
[-PollingInterval polling_interval]  
[-ProfileName profile_name]  
[-PublisherFailoverPartner server_name[\instance_name] ]  
[-PublisherLogin publisher_login]  
[-PublisherPassword publisher_password]  
[-PublisherSecurityMode [0|1]]  
[-QueryTimeOut query_time_out_seconds]  
[-SrcThreads number_of_source_threads]  
[-StartQueueTimeout start_queue_timeout_seconds]  
[-SubscriberConflictClean [0|1]]  
[-SubscriberDatabasePath subscriber_path]  
[-SubscriberDBAddOption [0|1|2|3]]  
[-SubscriberLogin subscriber_login]  
[-SubscriberPassword subscriber_password   
[-SubscriberSecurityMode [0|1]]  
[-SubscriberType [0|1|2|3|4|5|6|7|8|9]]  
[-SubscriptionType [0|1|2]]  
[-SyncToAlternate [0|1]  
[-UploadGenerationsPerBatch upload_generations_per_batch]  
[-UploadReadChangesPerBatch upload_read_changes_per_batch]  
[-UploadWriteChangesPerBatch upload_write_changes_per_batch]  
[-UseInprocLoader]  
[-Validate [0|1|2|3]]  
[-ValidateInterval validate_interval]  
```  
  
## Аргументы  
 **-?**  
 Выводит список всех доступных параметров.  
  
 **-Издатель** *имя_сервера*[**\\***имя_экземпляра*]  
 Имя издателя. Укажите *имя_сервера* для экземпляра по умолчанию [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на этом сервере. Укажите *имя_сервера***\\***имя_экземпляра* для именованного экземпляра [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на этом сервере.  
  
 **-PublisherDB** *база_данных_издателя*  
 Имя базы данных издателя.  
  
 **-Публикация** *публикации*  
 Имя публикации. Этот параметр допустим только в том случае, если в данной публикации моментальный снимок всегда доступен для новых или повторно инициализированных подписок.  
  
 **-Подписчик** *имя_сервера*[**\\***имя_экземпляра*]  
 Имя подписчика. Укажите *имя_сервера* для экземпляра по умолчанию [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на этом сервере. Укажите *имя_сервера***\\***имя_экземпляра* для именованного экземпляра [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на этом сервере.  
  
 **-SubscriberDB** *subscriber_database*  
 Имя базы данных подписчика.  
  
 **-AltSnapshotFolder** *alt_snapshot_folder_path*  
 Путь к папке, где хранится исходный моментальный снимок для подписки.  
  
 **-Continuous**  
 Определяет, будет ли агент постоянно опрашивать реплицируемые транзакции. Если параметр задан, то даже при отсутствии ожидающих транзакций агент опрашивает реплицируемые транзакции с источника через интервалы опроса.  
  
 **-DestThreads** *number_of_destination_threads*  
 Указывает число целевых потоков, которые агент слияния использует для применения изменений к целевому объекту. Целевым объектом при передаче является издатель, а при загрузке — подписчик. Значение по умолчанию — 4.  
  
 **-DefinitionFile** *путь_и_имя_файла_определения*  
 Путь к файлу определения агента. Файл определения агента содержит параметры командной строки для агента. Содержимое файла анализируется как для исполняемого файла. Для указания значений параметров, содержащих произвольные символы, используются двойные кавычки (").  
  
 **-Распространитель** *имя_сервера*[**\\***имя_экземпляра*]  
 Имя распространителя. Укажите *имя_сервера* для экземпляра по умолчанию [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на этом сервере. Укажите *имя_сервера***\\***имя_экземпляра* для именованного экземпляра [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на этом сервере. При распространении (принудительном) с помощью распространителя по умолчанию используется имя применяемого по умолчанию экземпляра [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на локальном компьютере.  
  
 **-DistributorLogin** *имя_входа_распространителя*  
 Имя входа распространителя.  
  
 **-DistributorPassword** *distributor_password*  
 Пароль распространителя.  
  
 **-DistributorSecurityMode** [ **0**| **1**]  
 Указывает режим безопасности распространителя. Значение **0** указывает [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] режим проверки подлинности (по умолчанию), а значение **1** Указывает режим проверки подлинности Windows.  
  
 **-DownloadGenerationsPerBatch** *download_generations_per_batch*  
 Число поколений, которые должны быть обработаны в одном пакете при загрузке изменений от издателя на подписчик. Поколение — это логическая группа изменений для статьи. Для надежного канала связи значение по умолчанию равно 100, для ненадежного — 10.  
  
 **-DownloadReadChangesPerBatch** *download_read_changes_per_batch*  
 Число изменений, которые считываются в одном пакете при загрузке изменений от издателя на подписчик. Значение по умолчанию — 100.  
  
 **-DownloadWriteChangesPerBatch** *download_write_changes_per_batch*  
 Число изменений, применяемых в одном пакете при загрузке изменений от издателя на подписчик. Значение по умолчанию — 100.  
  
 **-DynamicSnapshotLocation** *размещение_динамического_моментального_снимка*  
 Местоположение файлов моментальных снимков фильтруемых данных в тех случаях, когда в публикации используются параметризованные фильтры строк.  
  
 **-EncryptionLevel** [ **0** | **1** | **2** ]  
 Уровень шифрования по протоколу SSL, используемый агентом слияния при установлении соединений.  
  
|Значение EncryptionLevel|Описание|  
|---------------------------|-----------------|  
|**0**|Указывает, что SSL не используется.|  
|**1**|Указывает, что SSL используется, но агент не проверяет, подписан ли сертификат сервера SSL надежным издателем.|  
|**2**|Указывает, что SSL используется и сертификат подтвержден.|  
  
 Дополнительные сведения см. в разделе [Общие сведения о безопасности и #40; Репликация & #41;](../../../relational-databases/replication/security/security-overview-replication.md).  
  
 **-ExchangeType** [ **1**| **2**| **3**]  
 > [!WARNING]  
>  [!INCLUDE[ssNoteDepFutureDontUse](../../../includes/ssnotedepfuturedontuse-md.md)] Для ограничения передачи используйте **@subscriber_upload_options** из **sp_addmergearticle** вместо.  
  
 Указывает тип обмена данными во время синхронизации, который может быть одним из следующих значений.  
  
|Значение ExchangeType|Описание|  
|------------------------|-----------------|  
|**1**|Агент должен передавать изменения данных с подписчика на издатель.|  
|**2**|Агент должен загружать изменения данных с издателя на подписчик.|  
|**3** (по умолчанию)|Агент должен сначала передавать изменения данных с подписчика на издатель, а затем загружать изменения данных с издателя на подписчик. Этот параметр следует указывать при выполнении веб-синхронизации.|  
  
 Статьи только для загрузки дают возможность управлять поведением синхронизации отдельных статей в публикации и могут способствовать повышению производительности. Дополнительные сведения см. в разделе [оптимизировать слияния производительности репликации со статьями, доступными только для загрузки](../../../relational-databases/replication/merge/optimize-merge-replication-performance-with-download-only-articles.md).  
  
 При использовании **ExchangeType** для разделения этапов передачи и загрузки репликации слиянием на отдельные сеансы сначала необходимо запустить агент слияния с параметром **ExchangeType** , которому задано значение 1, а затем снова запустить агент слияния, задав этому параметру значение 2. Если не запустить агент слияния с обоими параметрами, метаданные будут удалены, из-за чего подписку придется инициализировать повторно (без передачи данных).  
  
 **-FastRowCount** [**0**|**1**]  
 Указывает тип метода вычисления количества строк, который должен применяться при проверке числа строк. Значение **1** (по умолчанию) указывает быстрый метод. Значение **0** указывает метод полного подсчета строк.  
  
 **-FileTransferType** [**0**|**1**]  
 Определяет тип передачи файла. Значение **0** указывает UNC (соглашения об универсальных именах) и значение **1** означает FTP (протокол передачи файлов).  
  
 **-ForceConvergenceLevel** [**0**|**1**|**2** ( **издателя**| **подписчика**| **и**)]  
 Указывает уровень конвергенции, которого должен придерживаться агент слияния. Может принимать одно из следующих значений.  
  
|Значение ForceConvergenceLevel|Описание|  
|---------------------------------|-----------------|  
|**0** (по умолчанию)|По умолчанию. Выполнить стандартное слияние без дополнительной конвергенции.|  
|**1**|Принудительно включить конвергенцию для всех поколений.|  
|**2**|Принудительно включить конвергенцию для всех поколений и исправить поврежденные журналы преобразований. Если указано это значение, укажите также, где следует исправлять поврежденные журналы преобразований: на издателе, подписчике или в обоих местах.|  
  
 **-FtpAddress** *ftp_address*  
 Сетевой адрес службы FTP распространителя. Если этот параметр не указан, то по умолчанию применяется параметр **Distributor** .  
  
 **-FtpPassword** *ftp_password*  
 Пароль пользователя, используемый для подключения к службе FTP.  
  
 **-FtpPort** *ftp_port*  
 Номер порта службы FTP распространителя. Если не указан, используется порт службы FTP по умолчанию (21).  
  
 **-FtpUserName** *ftp_user_name*  
 Имя пользователя для соединения со службой FTP. Если имя не указано, используется имя входа «anonymous».  
  
 **-HistoryVerboseLevel** [**1**|**2**|**3**]  
 Указывает объем данных, регистрируемых в журнале при выполнении операции слияния. Выбрав значение **1**, можно свести к минимуму влияние ведения журнала на производительность.  
  
|Значение HistoryVerboseLevel|Описание|  
|-------------------------------|-----------------|  
|**0**|Регистрировать последнее сообщение о состоянии агента, подробные сведения о последнем сеансе и любые ошибки.|  
|**1**|В каждой записи о состоянии сеанса регистрировать дополнительные сведения о сеансе, в том числе процент выполнения операции, а также последнее сообщение о состоянии агента, подробные сведения о последнем сеансе и любые ошибки.|  
|**2**|По умолчанию. Регистрировать в каждой записи о состоянии сеанса как дополнительные сведения о сеансе, так и подробные сведения о сеансе на уровне статьи, в том числе процент выполнения операции, а также последнее сообщение о состоянии агента, подробные сведения о последнем сеансе и любые ошибки. Регистрируются также сообщения о состоянии агентов.|  
|**3**|Таким же, как **- HistoryVerboseLevel** = **2**, за исключением того, что вошли несколько сообщений о ходе выполнения агента.|  
  
 **-Hostname** *host_name*  
 Сетевое имя локального компьютера. По умолчанию используется имя локального компьютера.  
  
 **-InteractiveResolution** [**0**|**1**]  
 Указывает, используется ли интерактивный механизм устранения конфликтов в тех случаях, когда конфликт происходит в процессе синхронизации. Значение по умолчанию — **0**, то есть интерактивный механизм устранения конфликтов не применяется.  
  
 **-InternetLogin** *internet_login*  
 Указывает имя входа, используемое при соединении с ISAPI DLL прослушивателя репликации [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], который требует проверки подлинности.  
  
 **-InternetPassword** *internet_password*  
 Указывает пароль, используемый при соединении с ISAPI DLL прослушивателя репликации [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], который требует проверки подлинности.  
  
 **-InternetProxyLogin**  *internet_proxy_login*  
 Указывает имя входа, используемое при подключении к прокси-сервера, определенные в *internet_proxy_server*, который требует проверки подлинности.  
  
 **— InternetProxyPassword**  *internet_proxy_password*  
 Указывает пароль, используемый при подключении к прокси-сервера, определенные в *internet_proxy_server*, который требует проверки подлинности.  
  
 **-InternetProxyServer**  *internet_proxy_server*  
 Указывает прокси-сервер, используемый при доступе к HTTP-ресурсу, указанному в *internet_url*.  
  
 **-InternetSecurityMode** [**0**|**1**]  
 Указывает режим безопасности IIS, используемый при соединении с веб-сервером в ходе веб-синхронизации. Значение **0** указывает обычную проверку подлинности, а значение **1** указывает встроенную проверку подлинности Windows (по умолчанию).  
  
 **-InternetTimeout** *internet_timeout*  
 Время в секундах, по истечении которого разрывается соединение с ISAPI DLL прослушивателя репликации [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].  
  
 **-InternetURL** *internet_url*  
 Указывает URL-адрес, используемый для подключения к ISAPI DLL прослушивателя репликации [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]. Задание этого свойства обязательно.  
  
 **-KeepAliveMessageInterval** *keep_alive_message_interval_seconds*  
 Количество секунд до того, как поток журнала проверяет наличие соединений, ожидающих ответа от сервера. Это значение можно уменьшить, чтобы агент проверки не помечал агент слияния как подозрительный при выполнении долго выполняющегося пакета. Значение по умолчанию — **300** секунд.  
  
 **-LoginTimeOut** *время_ожидания_входа_в_сек*  
 Время ожидания входа в секундах. Значение по умолчанию составляет **15** секунд.  
  
 **-MakeGenerationInterval** *make_generation_interval_seconds*  
 Время ожидания (в секундах) между созданием поколений, или пакетов изменений, для загрузки на клиент. Значение по умолчанию составляет **15** секунд.  
  
 Makegeneration — процесс, который подготавливает изменения издателя для загрузки на подписчиков, и он может быть узким местом производительности во время загрузок. Если процесс makegeneration уже выполнялся в течение интервала, указанного параметром **- MakeGenerationInterval**, то процесс пропущен в текущем сеансе синхронизации. Это может способствовать параллелизму синхронизации, и особенно полезно, если подписчики не ожидают загрузки изменений.  
  
 **-MaxBcpThreads** *число_потоков*  
 Указывает число операций массового копирования, которые можно проводить параллельно. Максимальное число одновременно существующих потоков и соединений ODBC, которое равно меньшему из двух значений: значению параметра **MaxBcpThreads** или числу запросов на массовое копирование, которое отображается в системной таблице **sysmergeschemachange** базы данных публикации. **MaxBcpThreads** должно иметь значение больше 0 и не имеет жестко зафиксированного максимума. Значение по умолчанию — **1**.  
  
 **-MaxDownloadChanges** *number_of_download_changes*  
 Указывает максимальное число измененных строк, которые должны загружаться с издателя на подписчик. Число загружаемых строк может быть больше указанного максимума, так как обработаны завершенные поколения, и может выполняться несколько параллельных потоков назначения, каждый из которых обрабатывает по крайней мере 100 изменений за первый проход. По умолчанию отправляются все изменения, готовые к загрузке.  
  
 **-MaxUploadChanges** *number_of_upload_changes*  
 Означает максимальное число измененных строк, которые должны быть переданы с подписчика на издатель. Число загружаемых строк может быть больше указанного максимума, так как обработаны завершенные поколения, и может выполняться несколько параллельных потоков назначения, каждый из которых обрабатывает по крайней мере 100 изменений за первый проход. По умолчанию отправляются все изменения, готовые к передаче.  
  
 **-MetadataRetentionCleanup** [**0**|**1**]  
 Указывает, удаляются ли метаданные из [MSmerge_genhistory](../../../relational-databases/system-tables/msmerge-genhistory-transact-sql.md), [MSmerge_contents](../../../relational-databases/system-tables/msmerge-contents-transact-sql.md), [MSmerge_tombstone](../../../relational-databases/system-tables/msmerge-tombstone-transact-sql.md), [MSmerge_past_partition_mappings](../../../relational-databases/system-tables/msmerge-past-partition-mappings-transact-sql.md), и [MSmerge_current_partition_mappings](../../../relational-databases/system-tables/msmerge-current-partition-mappings.md) на основе срока хранения публикации. Значение по умолчанию равно **1**, что означает необходимость проведения очистки. Значение **0** указывает на то, что очистка не должна осуществляться автоматически.  
  
 **-Output** *выходной_путь_и_имя_файла*  
 Путь к выходному файлу агента. Если имя файла не указано, данные выводятся на консоль. Если указанный файл существует, то выходные данные добавляются в конец файла.  
  
 **-OutputVerboseLevel** [**0**|**1**|**2**]  
 Указывает, должны ли выводимые данные быть подробными. Если уровень подробностей равен **0**, выводятся только сообщения об ошибках. Если задан уровень детализации **1**, то выводятся все сообщения отчета о состоянии. Если уровень подробностей равен **2** (по умолчанию), все сообщения об ошибках и сообщения отчета о состоянии выводятся, что полезно для отладки.  
  
 **-ParallelUploadDownload** [**0**|**1**]  
 Указывает, должен ли агент слияния параллельно обрабатывать изменения, переданные на издатель, и изменения, загруженные на подписчик. Это может оказаться удобным в средах с большими объемами данных и высокой пропускной способностью сети. Если параметр **ParallelUploadDownload** имеет значение **1**, включается параллельная обработка.  
  
 **-PacketSize**  
 Размер пакета в байтах. Значение по умолчанию равно 4 096 байт.  
  
 **-PollingInterval** *интервал_опроса*  
 Частота (в секундах), с которой издатель или подписчик выполняют запросы об изменении данных. Значение по умолчанию — 60 секунд.  
  
 **-ProfileName** *Имя_профиля*  
 Указывает профиль агента, из которого берутся параметры агента. Если **ProfileName** имеет значение NULL, профиль агента отключен. Если значение **ProfileName** не указано, используется профиль по умолчанию для агентов этого типа. Сведения см. в разделе [профилей агентов репликации](../../../relational-databases/replication/agents/replication-agent-profiles.md).  
  
 **-PublisherFailoverPartner** *имя_сервера*[**\\***имя_экземпляра*]  
 Указывает партнера по обеспечению отработки отказа служб [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], участвующего в сеансе зеркального отображения базы данных с базой данных публикации. Дополнительные сведения см. в разделе [зеркального отображения базы данных и репликации & #40; SQL Server & #41;](../../../database-engine/database-mirroring/database-mirroring-and-replication-sql-server.md).  
  
 **-PublisherLogin** *publisher_login*  
 Имя входа издателя. Если **PublisherSecurityMode** — **0** (для [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] проверки подлинности), этот параметр должен быть указан.  
  
 **-PublisherPassword** *publisher_password*  
 Пароль издателя. Если **PublisherSecurityMode** — **0** (для [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] проверки подлинности), этот параметр должен быть указан.  
  
 **-PublisherSecurityMode** [**0**|**1**]  
 Указывает режим безопасности издателя. Значение **0** указывает [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] проверки подлинности (по умолчанию), а значение **1** Указывает режим проверки подлинности Windows.  
  
 **-QueryTimeOut** *query_time_out_seconds*  
 Время ожидания запроса в секундах. Значение по умолчанию — 300 секунд. Агент слияния также использует значение параметра **QueryTimeout** для определения времени ожидания формирования секционированного моментального снимка, когда это значение превышает отметку 1800.  
  
 **-SrcThreads** *number_of_source_threads*  
 Указывает число потоков на источнике, которые агент слияния использует для перечисления поступивших от него изменений. При передаче источником считается подписчик, а при загрузке — издатель. Значение по умолчанию — **3**.  
  
 **-StartQueueTimeout** *время_ожидания_начала_очереди*  
 Максимальное число секунд ожидания агентом слияния при достижении предельного значения, заданного число одновременно выполняющихся процессов слияния **@max_concurrent_merge** Свойства **sp_addmergepublication**. Если по истечении этого времени агент слияния все еще находится в процессе ожидания, то его работа будет завершена. Значение 0 означает, что агент ждет неопределенно долгое время, хотя его выполнение может быть отменено.  
  
 **-SubscriberDatabasePath** *subscriber_database_path*  
 — Это путь к базе данных Jet (MDB-файл), если **SubscriberType** — **2** (позволяет соединиться с базой данных Jet без данных источника Name (DSN) ODBC).  
  
 **-SubscriberDBAddOption** [**0**| **1**| **2**| **3**]  
 Указывает, имеется ли существующая база данных подписчика.  
  
|Значение SubscriberDBAddOption|Описание|  
|---------------------------------|-----------------|  
|**0**|Использовать существующую базу данных (по умолчанию).|  
|**1**|Создать новую пустую базу данных подписчика.|  
|**2**|Создать новую базу данных и присоединить ее к указанному файлу.|  
|**3**|Создать новую базу данных, присоединить ее и включить все подписки, которые могут существовать в этом файле.|  
  
> [!NOTE]  
>  При использовании значения **2** и **3**, должен быть указан путь к базе данных для подписчика в **SubscriberDatabasePath** параметр.  
  
 **-SubscriberLogin** *subscriber_login*  
 Имя входа подписчика. Если **SubscriberSecurityMode** — **0** (для [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] проверки подлинности), этот параметр должен быть указан.  
  
 **-SubscriberPassword** *subscriber_password*  
 Пароль подписчика. Если **SubscriberSecurityMode** — **0** (для [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] проверки подлинности), этот параметр должен быть указан.  
  
 **-SubscriberSecurityMode** [ **0**| **1**]  
 Определяет режим безопасности подписчика. Значение **0** указывает [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] проверки подлинности (по умолчанию), а значение **1** Указывает режим проверки подлинности Windows.  
  
 **-SubscriberConflictClean** [ **0**| **1**]  
 Если таблицы конфликтов очищаются на подписчике во время процесса синхронизации, где значение — **1** указывает на очистку таблицы конфликтов на подписчике. Этот параметр используется только для подписок на публикации с децентрализованной регистрацией конфликтов.  
  
 **-SubscriberType** [ **0**| **1**| **3**| **4**| **5**| **6**| **7**| **8**]  
 Указывает тип соединения с подписчиком, используемый агентом слияния. Для этого параметра поддерживается только одно значение по умолчанию — **0** .  
  
 **-SubscriptionType**[ **0**| **1**| **2**]  
 Определяет тип подписки для распространения. Значение **0** указывает принудительную подписку (по умолчанию), значение **1** указывает подписки по запросу, а значение **2** указывает анонимную подписку.  
  
 **-SyncToAlternate** [ **0 | 1**]  
 Указывает, осуществляет ли агент слияния процедуру синхронизации между подписчиком и альтернативным издателем. Значение **1** указывает на то, что это альтернативный издатель. Значение по умолчанию — **0**.  
  
 **-UploadGenerationsPerBatch** *upload_generations_per_batch*  
 Число поколений, которые должны обрабатываться в одном пакете при передаче изменений с подписчика на издатель. Поколение — это логическая группа изменений для статьи. Для надежного канала связи значение по умолчанию равно **100**, для ненадежного — **1**.  
  
 **-UploadReadChangesPerBatch** *upload_read_changes_per_batch*  
 Число изменений, которые считываются в одном пакете при передаче изменений с подписчика на издатель. Значение по умолчанию — **100**.  
  
 **-UploadWriteChangesPerBatch** *upload_write_changes_per_batch*  
 Число изменений, применяемых в одном пакете при передаче изменений с подписчика на издатель. Значение по умолчанию — **100**.  
  
 **-UseInprocLoader**  
 Повышает производительность исходного моментального снимка, предписывая агенту слияния применять его к подписчику командой BULK INSERT. Это устаревший параметр, несовместимый с типом данных XML. Этот параметр может использоваться, если не выполняется репликация XML-данных. Этот параметр нельзя использовать с моментальными снимками в символьном режиме. При использовании этого параметра учетная запись службы [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] на подписчике должна иметь разрешение на чтение каталога, в котором находятся BCP-файлы данных моментальных снимков. Если этот параметр не указан, то загружаемый агентом драйвер ODBC считывает данные из файлов, поэтому контекст безопасности учетной записи службы [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] не применяется.  
  
 **-Validate** [**0**|**1**|**2**|**3**]  
 Указывает, следует ли осуществлять проверку в конце сеанса слияния и, если да, каков ее тип. Рекомендуется указывать значение **3** .  
  
|Значение Validate|Описание|  
|--------------------|-----------------|  
|**0** (по умолчанию)|Проверка не выполняется.|  
|**1**|Проверка достоверности только количества строк.|  
|**2**|Проверка по количеству строк и контрольной сумме.|  
|**3**|Проверка достоверности по количеству строк и двоичной контрольной сумме.|  
  
> [!NOTE]  
>  Проверка с использованием двоичной контрольной суммы может неверно сообщить об отказе, если типы данных на подписчике и издателе отличаются. Для получения дополнительной информации обратитесь к разделу «Аспекты проверки данных» в [проверки репликации данных](../../../relational-databases/replication/validate-replicated-data.md).  
  
 **-ValidateInterval** *validate_interval*  
 Указывает частоту (в минутах) проверки подписки в непрерывном режиме. Значение по умолчанию равно **60** минут.  
  
## Замечания  
  
> [!IMPORTANT]  
>  Если агент [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] установлен для запуска от учетной записи пользователя не домена (по умолчанию), а локальной системы, то служба имеет доступ только к локальному компьютеру. Если агент слияния, запускаемый агентом [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , настроен для входа в [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]с проверкой подлинности Windows, то работа агента слияния завершится ошибкой. Значением по умолчанию является проверка подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] .  
  
 Чтобы запустить агент слияния, из командной строки выполните файл **replmerg.exe** . Дополнительные сведения см. в разделе [Исполняемые объекты агента репликации](../../../relational-databases/replication/concepts/replication-agent-executables-concepts.md).  
  
 Журнал агента слияния для текущего сеанса не удаляется при работе в непрерывном режиме. Длительная непрерывная работа агента может привести к появлению большого количества записей в таблицах журнала слияния, что может снизить производительность. Чтобы устранить эту проблему, переключитесь в режим работы по расписанию или продолжите работу в непрерывном режиме, но создайте выделенное задание, которое будет периодически перезапускать агент слияния. Также можно понизить уровень детализации журнала, чтобы уменьшить число строк, и таким образом уменьшить снижение производительности.  
  
## См. также:  
 [Администрирование агента репликации](../../../relational-databases/replication/agents/replication-agent-administration.md)  
  
  