---
title: "Занятие 2. Создание подписки на публикацию слиянием | Документация Майкрософт"
ms.custom: 
ms.date: 03/01/2017
ms.prod: sql-server-2016
ms.reviewer: 
ms.suite: 
ms.technology:
- replication
ms.tgt_pltfrm: 
ms.topic: article
applies_to:
- SQL Server 2016
helpviewer_keywords:
- replication [SQL Server], tutorials
ms.assetid: 06722baa-9065-443e-b1d5-99036cf89074
caps.latest.revision: 15
author: BYHAM
ms.author: rickbyh
manager: jhubbard
ms.workload: Inactive
ms.translationtype: Human Translation
ms.sourcegitcommit: f3481fcc2bb74eaf93182e6cc58f5a06666e10f4
ms.openlocfilehash: 423ad3b42e75c70e6826e04a298c5eac4e590291
ms.contentlocale: ru-ru
ms.lasthandoff: 06/22/2017

---
# <a name="lesson-2-creating-a-subscription-to-the-merge-publication"></a>Занятие 2. Создание подписки на публикацию слиянием
На этом занятии будет создана подписка с помощью среды [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]. Затем будут установлены разрешения на базу данных подписки и вручную будет сформирован моментальный снимок отфильтрованных данных для новой подписки. Приступать к этому занятию нужно только по завершении предыдущего: [Занятие 1. Публикация данных с помощью репликации слиянием](../../relational-databases/replication/lesson-1-publishing-data-using-merge-replication.md).  
  
### <a name="to-create-the-subscription"></a>Создание подписки  
  
1.  Подключитесь к подписчику в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], разверните узел сервера и папку **Репликация** , щелкните правой кнопкой мыши папку **Локальные подписки** и выберите пункт **Создать подписку**.  
  
    Откроется мастер создания подписки.  
  
2.  На странице **Публикация** из списка **Издатель** выберите **Найти издатель SQL Server** .  
  
3.  В диалоговом окне **Соединение с сервером** введите имя экземпляра издателя в поле **Имя сервера** , а затем щелкните **Подключиться**.  
  
4.  Щелкните элемент **AdvWorksSalesOrdersMerge**, а затем нажмите кнопку **Далее**.  
  
5.  На странице "Расположение агента слияния" щелкните **Выполнять каждый агент на своем подписчике**и нажмите кнопку **Далее**.  
  
6.  На странице "Подписчики" выберите имя экземпляра сервера подписчика и в списке **База данных подписки**выберите **<New Database>** .  
  
7.  В диалоговом окне **Новая база данных** в поле **Имя базы данных** введите **SalesOrdersReplica** , нажмите кнопку **ОК**, а затем кнопку **Далее**.  
  
8.  На странице "Безопасность агента слияния" нажмите кнопку с многоточием (**…**), введите \<*имя_компьютера>***\repl_merge** в поле **Учетная запись процесса**, введите пароль для этой учетной записи, нажмите кнопку **ОК**, кнопку **Далее** и еще раз кнопку **Далее**.  
  
9. На странице "Инициализация подписок" выберите из списка **Инициализировать, когда** пункт **При первой синхронизации** , нажмите кнопку **Далее**, а затем снова кнопку **Далее** .  
  
10. На странице "Значения HOST_NAME" в поле **Значение HOST_NAME** введите значение **adventure-works\pamela0** и нажмите кнопку **Готово**.  
  
11. Нажмите снова кнопку **Готово** и после создания подписки нажмите кнопку **Закрыть**.  
  
### <a name="setting-database-permissions-at-the-subscriber"></a>Установка разрешений базы данных на подписчике  
  
1.  Подключитесь к подписчику в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], разверните узлы **Базы данных**, **SalesOrdersReplica**и **Безопасность**, щелкните правой кнопкой мыши элемент **Пользователи**и выберите пункт **Новый пользователь**.  
  
2.  На странице **Общее** введите \<*имя_компьютера>***\repl_merge** в поле **Имя пользователя**, нажмите кнопку с многоточием (**…**), кнопку **Обзор**, выберите \<*имя_компьютера>***\repl_merge**, нажмите кнопку **ОК**, щелкните **Проверить имена** и снова нажмите кнопку **ОК**.  
  
3.  Чтобы создать пользователя, в поле **Членство в роли базы данных**выберите **db_owner**и нажмите кнопку **ОК** .  
  
### <a name="to-create-the-filtered-data-snapshot-for-the-subscription"></a>Создание моментального снимка отфильтрованных данных подписки  
  
1.  Подключитесь к издателю в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], а затем раскройте узел сервера и папку **Репликация** .  
  
2.  В папке **Локальные публикации** щелкните правой кнопкой мыши публикацию **AdvWorksSalesOrdersMerge** и выберите пункт **Свойства**.  
  
    Откроется диалоговое окно **Свойства публикации** .  
  
3.  Выберите страницу **Секции данных** и нажмите кнопку **Добавить**.  
  
4.  В диалоговом окне **Добавление секции данных** введите значение **adventure-works\pamela0** в поле **Значение HOST_NAME** и нажмите кнопку **ОК**.  
  
5.  Выберите добавленную секцию, щелкните **Создать выбранные моментальные снимки**и нажмите кнопку **ОК**.  
  
## <a name="next-steps"></a>Следующие шаги  
Подписка на публикацию слиянием создана успешно, и сформирован отфильтрованный моментальный снимок секций данных новой подписки, так что снимок будет доступен при инициализации подписки. Далее предстоит предоставить права агенту слияния на базу данных подписки и запустить агент слияния, чтобы приступить к синхронизации и инициализировать подписку. См. [Занятие 3. Синхронизация подписки на публикацию слиянием](../../relational-databases/replication/lesson-3-synchronizing-the-subscription-to-the-merge-publication.md).  
  
## <a name="see-also"></a>См. также:  
[Подписка на публикации](../../relational-databases/replication/subscribe-to-publications.md)  
[Создание подписки по запросу](../../relational-databases/replication/create-a-pull-subscription.md)  
[Моментальные снимки для публикаций слиянием с параметризованными фильтрами](../../relational-databases/replication/snapshots-for-merge-publications-with-parameterized-filters.md)  
  

