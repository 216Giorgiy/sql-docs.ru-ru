---
title: Занятие 3. Настройка распространения | Документация Майкрософт
ms.custom: ''
ms.date: 03/14/2017
ms.prod: sql-non-specified
ms.prod_service: database-engine
ms.service: ''
ms.component: replication
ms.reviewer: ''
ms.suite: sql
ms.technology:
- replication
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- SQL Server 2016
helpviewer_keywords:
- replication [SQL Server], tutorials
ms.assetid: f248984a-0b59-4c2f-a56d-31f8dafe72b5
caps.latest.revision: 21
author: MashaMSFT
ms.author: mathoma
manager: craigg
ms.workload: On Demand
ms.openlocfilehash: 8b105ea5c843bb7e015dc8ca6450f77546b7511d
ms.sourcegitcommit: d6b1695c8cbc70279b7d85ec4dfb66a4271cdb10
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/10/2018
---
# <a name="lesson-3-configuring-distribution"></a>Урок 3. Настройка распространения
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]
На этом занятии предстоит настроить распространение на издателе и установить необходимые разрешения на базу данных публикации и распространителя. Если распространитель уже настроен, необходимо отключить публикацию и распространение перед тем, как приступить к занятию. Не следует этого выполнять в случае, если необходимо сохранить существующую топологию репликации.  
  
Настройка издателя с удаленным распространителем не рассматривается в этом учебнике.  
  
### <a name="configuring-distribution-at-the-publisher"></a>Настройка распространителя на издателе  
  
1.  Подключитесь к издателю в среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], а затем раскройте узел сервера.  
  
2.  Щелкните правой кнопкой мыши папку **Репликация** и выберите пункт **Настройка распространения**.  
  
    > [!NOTE]  
    > Если подключение к [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] установлено с помощью **localhost** , а не фактического имени сервера, на экране появится предупреждение о том, что [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не может подключиться к серверу **'localhost'**. В диалоговом окне предупреждения нажмите кнопку **ОК** . В диалоговом окне **Соединение с сервером** измените значение в поле **Имя сервера** с **localhost** на имя своего сервера. Нажмите кнопку **Соединить**.  
  
    Будет запущен мастер настройки распространителя.  
  
3.  На странице **Распространитель** выберите имя сервера, который будет выступать в качестве своего собственного распространителя. SQL Server создаст базу данных распространителя и журнал**. Теперь нажмите кнопку **Далее**.  
  
4.  Если служба [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не запущена, на странице [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]**Запуск агента** выберите **Да**и настройте автоматический запуск службы агента [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] . Нажмите кнопку **Далее**.  
  
5.  Введите **\\\\**\<*имя_компьютера>***\repldata** в текстовое поле **Папка моментальных снимков**, где \<*имя_компьютера>* является именем издателя, а затем нажмите кнопку **Далее**.  
  
6.  Примите значения по умолчанию на оставшихся страницах мастера.  
  
7.  Чтобы включить распространение, нажмите кнопку **Готово** .  
  
### <a name="setting-database-permissions-at-the-publisher"></a>Установка разрешений базы данных на издателе  
  
1.  В среде [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]разверните узел **Безопасность**, щелкните правой кнопкой мыши **Имена входа**, а затем выберите пункт **Создать имя входа**.  
  
2.  На странице **Общее** щелкните **Поиск** и в поле **Введите имя объекта** введите \<*Имя_компьютера>***\repl_snapshot**, где \<*имя_компьютера>* является именем локального сервера издателя, затем щелкните **Проверить имена** и нажмите кнопку **ОК**.  
  
3.  На странице **Сопоставление пользователя** в списке **Пользователи, сопоставленные с этим именем входа** выберите **distribution** и базы данных [!INCLUDE[ssSampleDBobject](../../includes/sssampledbobject-md.md)] .  
  
    В списке **Членство в роли базы данных** выберите роль **db_owner** для этого имени входа в обеих базах данных.  
  
4.  Нажмите кнопку **ОК** , чтобы создать имя входа.  
  
5.  Для создания имени входа для локальной учетной записи repl_logreader повторите шаги 1-4. Это имя входа должно быть сопоставлено с пользователями, которые являются членами предопределенной роли базы данных **db_owner** в базах данных **распространителя** и **AdventureWorks** .  
  
6.  Для создания имени входа для локальной учетной записи repl_distribution повторите шаги 1-4. Это имя входа должно быть сопоставлено с пользователем, который является членом предопределенной роли базы данных **db_owner** в базе данных **распространителя** .  
  
7.  Для создания имени входа для локальной учетной записи repl_merge повторите шаги 1-4. С этим именем входа должны быть сопоставлены пользователи в базах данных **distribution** и **AdventureWorks** .  
  
## <a name="see-also"></a>См. также:  
[Настройка распространения](../../relational-databases/replication/configure-distribution.md)  
[Модель безопасности агента репликации](../../relational-databases/replication/security/replication-agent-security-model.md)  
  
  
  
