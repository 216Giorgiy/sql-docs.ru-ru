---
title: "Предотвращение угроз и уязвимости для безопасности (репликация) | Microsoft Docs"
ms.custom: ""
ms.date: "03/07/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "replication"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "атаки [репликация SQL Server]"
  - "угрозы [безопасность репликации SQL Server]"
  - "безопасность [репликация SQL Server], угрозы"
  - "угрозы безопасности [репликация SQL Server]"
ms.assetid: 314fe497-56d8-4192-98e9-21b87cf8db04
caps.latest.revision: 11
author: "BYHAM"
ms.author: "rickbyh"
manager: "jhubbard"
caps.handback.revision: 11
---
# Предотвращение угроз и уязвимости для безопасности (репликация)
  В этом разделе приводятся методы снижения угроз для топологии репликации.  
  
## Шифрование  
 Шифрование представляет собой процесс преобразования данных в форму, которую невозможно прочитать без специального ключа, поэтому прочитать данные могут только назначенные пользователи. Репликация не производит шифрование данных, хранящихся в таблицах или передаваемых через сетевые соединения. Это сделано намеренно, так как шифрование доступно на транспортном уровне в различных технологиях, включая следующие отраслевые стандартные технологии: виртуальные частные сети (VPN), протокол SSL и протокол IPSEC. Для соединений между компьютерами в топологии репликации рекомендуется использовать один из этих методов. Дополнительные сведения см. в разделе [Включение шифрования соединений в ядре базы данных & #40; SQL Server Configuration Manager & #41;](../../../database-engine/configure-windows/enable encrypted connections to the database engine.md). Сведения об использовании VPN и SSL для репликации данных через Интернет см. в разделе [Securing Replication Over the Internet](../../../relational-databases/replication/security/securing-replication-over-the-internet.md).  
  
 Если используется протокол SSL для защиты соединения между компьютерами в топологии репликации, укажите значение **1** или **2** для **- EncryptionLevel** параметр каждого агента репликации (значение **2** рекомендуется). Значение **1** указывает, что шифрование будет использоваться, но агент не будет проверять, подписан ли SSL-сертификат сервера доверенным издателем; значение **2** указывает, что будет проверяться подпись сертификата. Параметры агента могут задаваться в профилях агента или в командной строке. Дополнительные сведения см. в разделе:  
  
-   [Работа с профилями агента репликации](../../../relational-databases/replication/agents/work-with-replication-agent-profiles.md)  
  
-   [Просмотр и изменение параметров командной строки агента репликации & #40; SQL Server Management Studio & #41;](../../../relational-databases/replication/agents/view and modify replication agent command prompt parameters.md)  
  
-   [Основные понятия исполняемых файлов агента репликации](../../../relational-databases/replication/concepts/replication-agent-executables-concepts.md)  
  
 Репликация взаимодействует с главными ключами базы данных, которые используются для шифрования данных, следующим образом.  
  
-   Если главный ключ находится в базе данных, участвующей в репликации (база данных публикации, база данных подписки или база данных распространителя), репликация шифрует и дешифрует пароли агентов в этой базе данных с помощью симметричного ключа базы данных [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)]. Если используются главные ключи, то их необходимо создать во всех базах данных, участвующих в репликации. Дополнительные сведения о создании главных ключей см. в разделе [CREATE MASTER KEY & #40; Transact-SQL & #41;](../../../t-sql/statements/create-master-key-transact-sql.md).  
  
-   При репликации главные ключи не реплицируются. Если главный ключ требуется на подписчике, его необходимо экспортировать из базы данных публикации с помощью команды BACKUP MASTER KEY, а затем импортировать его в базу данных подписки с использованием команды RESTORE MASTER KEY. Дополнительные сведения см. в разделе [BACKUP MASTER KEY & #40; Transact-SQL & #41;](../../../t-sql/statements/backup-master-key-transact-sql.md) и [ВОССТАНОВЛЕНИЕ главного ключа & #40; Transact-SQL & #41;](../../../t-sql/statements/restore-master-key-transact-sql.md).  
  
-   Если главный ключ определен для присоединяемой базы данных подписки, укажите пароль главного ключа с помощью **@db_master_key_password** параметр [sp_attachsubscription & #40; Transact-SQL & #41;](../../../relational-databases/system-stored-procedures/sp-attachsubscription-transact-sql.md). Такое действие позволяет присоединять базу данных на подписчике.  
  
 Дополнительные сведения о шифровании и главных ключах см. в разделе [Encryption Hierarchy](../../../relational-databases/security/encryption/encryption-hierarchy.md).  
  
 Репликация позволяет публиковать данные зашифрованных столбцов. Для расшифровки и использования этих данных на подписчике ключ, который был использован при шифровании данных на издателе, должен также располагаться и на подписчике. Репликация не предоставляет безопасного механизма для передачи ключей шифрования. Необходимо вручную повторно создать ключ шифрования на подписчике. Дополнительные сведения см. в разделе [реплицировать данные в зашифрованные столбцы & #40; SQL Server Management Studio & #41;](../../../relational-databases/replication/security/replicate-data-in-encrypted-columns-sql-server-management-studio.md).  
  
## См. также:  
 [Удостоверения и управление доступом и #40; Репликация & #41;](../../../relational-databases/replication/security/identity-and-access-control-replication.md)   
 [Общие сведения о безопасности и #40; Репликация & #41;](../../../relational-databases/replication/security/security-overview-replication.md)   
 [Безопасность разработки & #40; Репликация & #41;](../../../relational-databases/replication/security/secure-development-replication.md)   
 [Безопасность развертывания & #40; Репликация & #41;](../../../relational-databases/replication/security/secure-deployment-replication.md)  
  
  