---
title: "Рекомендации по защите репликации | Документация Майкрософт"
ms.custom: 
ms.date: 03/14/2017
ms.prod: sql-non-specified
ms.prod_service: database-engine
ms.service: 
ms.component: replication
ms.reviewer: 
ms.suite: sql
ms.technology:
- replication
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- security [SQL Server replication], best practices
- security [SQL Server replication], between domains
- authentication [SQL Server replication]
- Internet [SQL Server replication], security
ms.assetid: 1ab2635d-0992-4c99-b17d-041d02ec9a7c
caps.latest.revision: 
author: MashaMSFT
ms.author: mathoma
manager: craigg
ms.workload: On Demand
ms.openlocfilehash: 367496f0a4501277a4879464cea31bd1a1c96436
ms.sourcegitcommit: ab25b08a312d35489a2c4a6a0d29a04bbd90f64d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/08/2018
---
# <a name="replication-security-best-practices"></a>Рекомендации по защите репликации
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]
  Репликация перемещает данные в распределенных средах, начиная с внутренних сетей в рамках одного домена и заканчивая приложениями, обеспечивающими передачу данных между доменами без доверия, а также через Интернет. Чтобы обеспечить безопасность соединения при репликации, важно выбрать способ, соответствующий конкретным обстоятельствам.  
  
 Сведения, указанные ниже, необходимо учитывать при проведении репликации в любых средах:  
  
-   При шифровании соединения между компьютерами, занятыми в топологии репликации, необходимо использовать общепризнанную стандартную технологию, такую как виртуальная частная сеть (VPN), протокол безопасных соединений (SSL) или IP-безопасность (IPSEC). Дополнительные сведения см. в разделе [Включение шифрования соединений в компоненте Database Engine (диспетчер конфигураций SQL Server)](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md). Сведения об использовании VPN и SSL для репликации данных через Интернет см. в разделе [Securing Replication Over the Internet](../../../relational-databases/replication/security/securing-replication-over-the-internet.md).  
  
     Если используется протокол SSL для защиты соединений между компьютерами в топологии репликации, задайте значение **1** или **2** для параметра **-EncryptionLevel** каждого агента репликации (рекомендуется значение **2** ). Значение **1** указывает, что шифрование будет использоваться, но агент не будет проверять, подписан ли SSL-сертификат сервера доверенным издателем; значение **2** указывает, что будет проверяться подпись сертификата. Параметры агента могут задаваться в профилях агента или в командной строке. Дополнительные сведения см. в разделе:  
  
    -   [Работа с профилями агента репликации](../../../relational-databases/replication/agents/work-with-replication-agent-profiles.md)  
  
    -   [Просмотр и изменение параметров командной строки агента репликации (SQL Server Management Studio)](../../../relational-databases/replication/agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
    -   [Replication Agent Executables Concepts](../../../relational-databases/replication/concepts/replication-agent-executables-concepts.md)  
  
-   При запуске каждого агента репликации необходимо использовать новую учетную запись Windows, а в отношении всех соединений агента репликации применять проверку подлинности Windows. Дополнительные сведения об указании учетных записей см. в статье [Управление именами для входа и паролями в репликации](../../../relational-databases/replication/security/manage-logins-and-passwords-in-replication.md).  
  
-   Предоставляйте каждому из агентов только те разрешения, которые необходимы. Дополнительные сведения см. в подразделе «Разрешения, необходимые для агентов» раздела [Replication Agent Security Model](../../../relational-databases/replication/security/replication-agent-security-model.md).  
  
-   Убедитесь в том, что все учетные записи агента слияния и агента распространителя находятся в списке доступа к публикации (PAL). Дополнительные сведения см. в статье [Организация безопасности издателя](../../../relational-databases/replication/security/secure-the-publisher.md).  
  
-   Учетным записям в списке доступа к публикации необходимо предоставлять только те разрешения, которые им необходимы для выполнения задач репликации. Не добавляйте в предопределенные роли сервера имена входа, которые не требуются для репликации.  
  
-   Настройте хранилище моментального снимка таким образом, чтобы оно было доступно для чтения всем агентам слияния и агентам распространителя. При работе с моментальными снимками для публикаций с параметризованными фильтрами убедитесь в том, что настройки каждой папки разрешают доступ к такой папке только учетным записям соответствующих агентов слияния.  
  
-   Настройте хранилище моментального снимка таким образом, чтобы оно было доступно для записи агенту моментальных снимков.  
  
-   В случае подписок по запросу используйте в качестве папки моментальных снимков общий сетевой ресурс, а не локальную папку.  
  
 В том случае, если в топологии репликации участвуют компьютеры, находящиеся в разных доменах или в доменах, между которыми нет доверительных отношений, можно использовать проверку подлинности Windows или проверку подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] для соединений, установленных агентами. (Дополнительные сведения о доменах см. в документации Windows.) В качестве метода, обеспечивающего наилучшую защиту, рекомендуется использовать проверку подлинности Windows.  
  
-   Чтобы использовать проверку подлинности Windows:  
  
    -   Добавьте локальную учетную запись Windows (но не учетную запись домена) для каждого агента в соответствующих узлах (в каждом узле используйте одно и то же имя и пароль). Например, агент распространителя для принудительной подписки запускается на распространителе и устанавливает соединение между распространителем и подписчиком. Учетная запись Windows для агента распространителя должна быть добавлена на распространитель и подписчик.  
  
    -   Убедитесь, что такой агент, например агент распространителя для подписки, запускается под одной и той же учетной записью на каждом компьютере.  
  
-   Чтобы использовать проверку подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] :  
  
    -   Добавьте учетную запись [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] для каждого агента в соответствующих узлах (в каждом узле используйте одно и то же имя и пароль). Например, агент распространителя для принудительной подписки запускается на распространителе и устанавливает соединение между распространителем и подписчиком. Учетная запись [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] для агента распространителя должна быть добавлена на распространитель и подписчик.  
  
    -   Убедитесь, что такой агент, например агент распространителя для подписки, устанавливает соединения под одной и той же учетной записью на каждом компьютере.  
  
    -   В ситуациях, требующих проверки подлинности [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] , часто не предоставляется доступ к хранилищу моментального снимка UNC (например, доступ может быть заблокирован брандмауэром). В таком случае моментальный снимок может быть передан подписчикам при помощи протокола передачи данных (FTP). Дополнительные сведения см. в статье [Передача моментальных снимков через FTP](../../../relational-databases/replication/transfer-snapshots-through-ftp.md).  
  
## <a name="see-also"></a>См. также:  
 [Включение шифрования соединений в ядре СУБД (диспетчер конфигурации SQL Server)](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md)   
 [Репликация через Интернет](../../../relational-databases/replication/replication-over-the-internet.md)   
 [Защита подписчика](../../../relational-databases/replication/security/secure-the-subscriber.md)   
 [Организация безопасности распространителя](../../../relational-databases/replication/security/secure-the-distributor.md)   
 [Организация безопасности издателя](../../../relational-databases/replication/security/secure-the-publisher.md)   
 [Безопасность и защита (репликация)](../../../relational-databases/replication/security/security-and-protection-replication.md)  
  
  
