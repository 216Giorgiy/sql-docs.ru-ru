---
title: "выполнить отладку обработчика бизнес-логики (программирование репликации) | Microsoft Docs"
ms.custom: ""
ms.date: "03/14/2017"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "replication"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
helpviewer_keywords: 
  - "обработчики бизнес-логики репликации слиянием [репликация SQL Server]"
  - "обработчики бизнес-логики [репликация SQL Server]"
  - "BusinessLogicModule, класс"
ms.assetid: edd0d17a-0e9c-4c28-8395-a7d47e8ce3d6
caps.latest.revision: 34
author: "BYHAM"
ms.author: "rickbyh"
manager: "jhubbard"
caps.handback.revision: 34
---
# выполнить отладку обработчика бизнес-логики (программирование репликации)
  Используйте обработчик бизнес-логики для вызова пользовательской бизнес-логики во время синхронизации подписки на публикацию слиянием. Дополнительные сведения см. в разделе [выполнение бизнес логики во время слияния синхронизации](../../relational-databases/replication/merge/execute-business-logic-during-merge-synchronization.md).  
  
 Посредник репликации слиянием (replrec.dll) осуществляет вызов сборки управляемого кода, содержащей бизнес-логику. В большинстве случаев файл replrec.dll и пользовательская бизнес-логика выполняются на компьютере с запущенным агентом слияния (на сервере подписчика для подписки по запросу или на сервере распространителя для принудительной подписки). При веб-синхронизации или для подписчика [!INCLUDE[ssEW](../../includes/ssew-md.md)] посредник и пользовательская бизнес-логика выполняются на веб-сервере.  
  
### Отладка обработчика бизнес-логики на локальном компьютере  
  
1.  Настройте публикацию и распространение, создайте новую публикацию, а затем подписку на нее. Дополнительные сведения см. в разделе [настройки публикации и распространения](../../relational-databases/replication/configure-publishing-and-distribution.md) и [Создание, изменение, удаление публикаций и статей и #40; Репликация & #41;](../../relational-databases/replication/publish/create-modify-and-delete-publications-and-articles-replication.md).  
  
2.  Создайте и зарегистрируйте обработчик бизнес-логики. Дополнительные сведения см. в статье [Implement a Business Logic Handler for a Merge Article](../../relational-databases/replication/implement-a-business-logic-handler-for-a-merge-article.md).  
  
3.  В среде [!INCLUDE[msCoName](../../includes/msconame-md.md)] Visual Studio создайте проект объектов RMO, который программным путем производит синхронный запуск агента слияния. Дополнительные сведения см. в статье [Synchronize a Pull Subscription](../../relational-databases/replication/synchronize-a-pull-subscription.md).  
  
4.  Установите точку останова в коде обработчика бизнес-логики — в методе, проходящем отладку, или в конструкторе класса. Дополнительные сведения о методах, которые можно реализовать обработчик бизнес-логики см. в разделе <xref:Microsoft.SqlServer.Replication.BusinessLogicSupport.BusinessLogicModule> разделе методов.  
  
5.  Откройте обработчик бизнес-логики в режиме отладки и произведите развертывание сборки и файла отладки (PDB) в папке, заданной на шаге 1.  
  
    > [!NOTE]  
    >  Чтобы упростить процесс отладки, создайте решение Visual Studio .NET, содержащее проект обработчика бизнес-логики и проект, осуществляющий синхронизацию подписки. В данном случае проект синхронизации должен быть задан как стартовый, а среда разработки должна быть настроена для развертывания сборки бизнес-логики в папку, которая была задана на шаге 1.  
  
6.  Выполните команды вставки, обновления или удаления в базе данных подписки или публикации. Используемая команда и место выполнения зависят от метода, проходящего отладку.  
  
7.  Чтобы синхронизировать подписку, запустите проект в режиме отладки, начиная с шага 3.  
  
8.  Если не заданы другие точки останова и репликацию проходят нужные команды, выполнение будет остановлено по достижении точки останова в обработчике бизнес-логики.  
  
### Отладка обработчика бизнес-логики на веб-сервере в режиме веб-синхронизации либо при использовании подписчика SQL Server Compact  
  
1.  Настройте публикацию и распространение, создайте публикацию по запросу и подписку на нее. Публикация должна поддерживать веб-синхронизации или подписчиков [!INCLUDE[ssEW](../../includes/ssew-md.md)] .  
  
2.  Создайте и зарегистрируйте обработчик бизнес-логики. Дополнительные сведения см. в статье [Implement a Business Logic Handler for a Merge Article](../../relational-databases/replication/implement-a-business-logic-handler-for-a-merge-article.md).  
  
3.  Установите точку останова в коде обработчика бизнес-логики — в методе, проходящем отладку, или в конструкторе класса. Дополнительные сведения о методах, которые можно реализовать обработчик бизнес-логики см. в разделе <xref:Microsoft.SqlServer.Replication.BusinessLogicSupport.BusinessLogicModule> разделе методов.  
  
4.  Откройте обработчик бизнес-логики в режиме отладки и произведите развертывание сборки и файла отладки (PDB) на сервере, заданном на шаге 1.  
  
    > [!NOTE]  
    >  В том случае, если построение обработчика бизнес-логики завершилось ошибкой по причине того, что сборка занята, необходимо перезагрузить веб-сервер командой `iisreset` из командной строки.  
  
5.  Произведите синхронизацию подписки в режиме веб-синхронизации. В процессе ее выполнения веб-сервер загрузит зарегистрированную сборку.  
  
6.  С помощью отладчика Visual Studio .NET подключитесь к одному из следующих процессов на веб-сервере.  
  
    -   w3wp.exe — Windows Server 2003.  
  
    -   inetinfo.exe — Windows 2000 и Windows XP.  
  
7.  В окне **Выход** проверьте режим отладки выходного столбца и убедитесь, что символы зарегистрированной сборки были загружены правильно. В том случае, если символы не загружены, убедитесь, что PDB-файл на шаге 4 был скопирован правильно, после чего повторите шаг 5.  
  
8.  Выполните команды вставки, обновления или удаления в базе данных подписки или публикации. Используемая команда и место выполнения зависят от метода, проходящего отладку.  
  
9. В среде Visual Studio подключитесь к процессу w3wp.exe.  
  
10. Произведите повторную синхронизацию подписки в режиме веб-синхронизации.  
  
11. Если не заданы другие точки останова и репликацию проходят нужные команды, выполнение будет остановлено по достижении точки останова в обработчике бизнес-логики.  
  
## См. также:  
 [Реализация обработчика бизнес-логики для статьи публикации слиянием](../../relational-databases/replication/implement-a-business-logic-handler-for-a-merge-article.md)  
  
  