---
title: "Неподдерживаемые функции SQL Server для выполняющейся в памяти OLTP | Microsoft Docs"
ms.custom: ""
ms.date: "10/17/2016"
ms.prod: "sql-server-2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "database-engine-imoltp"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: c39f03a7-e223-4fd7-bd30-142e28f51654
caps.latest.revision: 55
author: "JennieHubbard"
ms.author: "jhubbard"
manager: "jhubbard"
caps.handback.revision: 55
---
# Неподдерживаемые функции SQL Server для выполняющейся в памяти OLTP
[!INCLUDE[tsql-appliesto-ss2016-asdb-xxxx-xxx_md](../../includes/tsql-appliesto-ss2016-asdb-xxxx-xxx-md.md)]

  В этом разделе описаны возможности [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], которые не поддерживаются для использования с оптимизированными для памяти объектами.  
  
## [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Возможности, которые не поддерживаются для In-Memory OLTP  
 Следующие возможности [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] не поддерживаются для баз данных, которые содержат оптимизированные для памяти объекты, включая файловую группу данных, оптимизированную для памяти.  
  
|Неподдерживаемая функция|Описание функции|  
|-------------------------|-------------------------|  
|Сжатие данных для оптимизированных для памяти таблиц.|Функцию сжатия данных можно использовать для сжатия данных внутри базы данных, а также уменьшения размера базы данных. Дополнительные сведения см. в разделе [Data Compression](../../relational-databases/data-compression/data-compression.md).|  
|Секционирование оптимизированных для памяти таблиц и хэш-индексов, а также некластеризованных индексов.|Данные секционированных таблиц и индексов подразделяются на блоки, которые могут быть распределены по нескольким файловым группам в базе данных. Дополнительные сведения см. в разделе [Partitioned Tables and Indexes](../../relational-databases/partitions/partitioned-tables-and-indexes.md).|  
|Репликация|Конфигурации репликации, за исключением репликации транзакций, в оптимизированные для памяти таблицы на подписчиках несовместимы с таблицами или представлениями, которые ссылаются на оптимизированные для памяти таблицы. Репликация с использованием sync_mode='database snapshot' не поддерживается при наличии файловой группы, оптимизированной для памяти. Дополнительные сведения см. в статье [Репликация на подписчиков оптимизированных для памяти таблиц](../../relational-databases/replication/replication-to-memory-optimized-table-subscribers.md).|  
|Зеркальное отображение|Зеркальное отображение базы данных не поддерживается для баз данных с файловой группой MEMORY_OPTIMIZED_DATA. Дополнительные сведения о зеркальном отображении базы данных см. в разделе [Зеркальное отображение базы данных (SQL Server)](../../database-engine/database-mirroring/database-mirroring-sql-server.md).|  
|Повторная сборка журнала|Повторная сборка журнала с помощью подключения или ALTER DATABASE не поддерживается базами данных с файловой группой MEMORY_OPTIMIZED_DATA.|  
|Linked Server|Нельзя получить доступ к связанным серверам в том же запросе или транзакции, в которой используются оптимизированные для памяти таблицы. Дополнительные сведения см. в разделе [Связанные серверы (компонент Database Engine)](../../relational-databases/linked-servers/linked-servers-database-engine.md).|  
|С неполным протоколированием|Вне зависимости от модели восстановления базы данных все операции в устойчивых таблицах, оптимизированных для памяти, всегда полностью протоколируются.|  
|Минимальное протоколирование|Минимальное протоколирование не поддерживается для оптимизированных для памяти таблиц. Дополнительные сведения о минимальном протоколировании см. в разделах [Журнал транзакций (SQL Server)](../../relational-databases/logs/the-transaction-log-sql-server.md) и [Предварительные условия для минимального протоколирования массового импорта данных](../../relational-databases/import-export/prerequisites-for-minimal-logging-in-bulk-import.md).|  
|Отслеживание изменений|Отслеживание изменений можно включить для базы данных с объектами OLTP в памяти. Однако изменения в таблицах, оптимизированных для памяти, не отслеживаются.|  
|DDL, триггеры|Триггеры DDL уровня базы данных и уровня сервера не поддерживаются для таблиц, выполняющихся в памяти OLTP, и модулей, скомпилированных в собственном коде.|  
|Система отслеживания измененных данных (CDC)|Система CDC не может использоваться с базой данных с таблицами, оптимизированными для памяти, так как она использует триггер DDL в механизме инструкции DROP TABLE.|  
|Режим волокон|Режим волокон не поддерживается для таблиц, оптимизированных для памяти.<br /><br /> Если активен режим волокон, нельзя создавать базы данных с файловыми группами, оптимизированными для памяти, или добавлять оптимизированные для памяти файловые группы к существующим базам данных.<br /><br /> Режим волокон можно включить, если существуют базы данных с файловыми группами, оптимизированными для памяти. Однако включение режима волокон требует перезапуска сервера. В таком случае базы данных с файловыми группами, оптимизированными для памяти, не смогут выполнить восстановление и появится сообщение об ошибке, предлагающее отключить режим волокон для использования баз данных с файловыми группами, оптимизированными для памяти.<br /><br /> Присоединение и восстановление баз данных с оптимизированными для памяти файловыми группами будет завершаться с ошибками, если режим волокон активен. Базы данных будут помечены как подозрительные.<br /><br /> <br /><br /> Дополнительные сведения см. в разделе [lightweight pooling Server Configuration Option](../../database-engine/configure-windows/lightweight-pooling-server-configuration-option.md).|  
|Ограничения Service Broker|Нет доступа к очереди из скомпилированной в собственном коде хранимой процедуры.<br /><br /> Нет доступа к очереди в удаленной базе данных в транзакции, получающей доступ к оптимизированным для памяти таблицам.|  
|Репликация в подписчиков|Репликация транзакций в оптимизированные для памяти таблицы в подписчиках поддерживается, но с некоторыми ограничениями. Дополнительные сведения см. в статье [Репликация на подписчиков оптимизированных для памяти таблиц](../../relational-databases/replication/replication-to-memory-optimized-table-subscribers.md).|  
  
 За некоторыми исключениями, транзакции между базами данных не поддерживаются. В следующей таблице описываются варианты, которые поддерживаются, и соответствующие ограничения. (См. также [Межбазовые запросы](../../relational-databases/in-memory-oltp/cross-database-queries.md).)  
  
|Базы данных|Разрешено|Описание|  
|---------------|-------------|-----------------|  
|Пользовательские базы данных, model и msdb|Нет|Запросы и транзакции между базами данных не поддерживаются.<br /><br /> Запросы и транзакции, получающие доступ к оптимизированным для памяти таблицам или хранимым процедурам, скомпилированным в собственном коде, не имеют доступа к другим базам данных, за исключением системных баз данных master (только для чтения) и tempdb.|  
|База данных ресурса, tempdb|Да|Ограничений на транзакции между базами данных, которые, помимо одной пользовательской базы данных, применяют только базу данных ресурсов и tempdb, нет.|  
|master|только для чтения|Транзакциям между базами данных, которые затрагивают OLTP в памяти и базу данных master, не удается выполнить фиксацию, если они выполняют запись в базу данных master. Допустимы межбазовые транзакции, которые только читают данные из базы данных master и применяют только одну пользовательскую базу данных.|  
  
## Неподдерживаемые сценарии  
  
-   Включение базы данных ([автономные базы данных](../../relational-databases/databases/contained-databases.md)) не поддерживается при выполнении в памяти OLTP. Поддерживается проверка подлинности автономной базы данных. Однако все объекты OLTP в памяти отмечены как нарушающие вложение в DMV dm_db_uncontained_entities.  
  
-   Доступ к оптимизированным для памяти таблицам с помощью контекстного соединения из хранимых процедур CLR.  
  
-   Набор ключей и динамические курсоры в запросах, обращающихся к оптимизированным для памяти таблицам. Функциональность этих курсоров понижена, теперь они статические и доступны только для чтения.  
  
-   Использование **MERGE INTO***target* с *target* — это оптимизированная для памяти таблица. **MERGE USING***source* поддерживается для таблиц, оптимизированных для памяти.  
  
-   Тип данных ROWVERSION (TIMESTAMP) не поддерживается. Дополнительные сведения см. в разделе [FROM (Transact-SQL)](../../t-sql/queries/from-transact-sql.md).  
  
-   Автоматическое закрытие не поддерживается для баз данных, имеющих файловую группу MEMORY_OPTIMIZED_DATA.  
  
-   Моментальные снимки базы данных не поддерживаются для баз данных, имеющих файловую группу MEMORY_OPTIMIZED_DATA.  
  
-   Транзакции на DDL. В пользовательских транзакциях не поддерживаются инструкции CREATE, ALTER или DROP для объектов, выполняющихся в памяти OLTP.  
  
-   Уведомление о событии.  
  
-   Управление на основе политик (PBM). Режимы предотвращения и только протоколирование PBM не поддерживаются. Наличие таких политик на сервере может помешать успешному выполнению DDL-библиотеки OLTP в памяти. Режимы по запросу и по расписанию поддерживаются.  
  
## См. также:  
 [Поддержка SQL Server для In-Memory OLTP](../../relational-databases/in-memory-oltp/sql-server-support-for-in-memory-oltp.md)  
  
  