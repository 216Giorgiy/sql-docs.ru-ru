---
title: "Оптимизированная для памяти файловая группа | Документация Майкрософт"
ms.custom: 
ms.date: 03/01/2017
ms.prod: sql-non-specified
ms.prod_service: database-engine
ms.service: 
ms.component: in-memory-oltp
ms.reviewer: 
ms.suite: sql
ms.technology:
- database-engine-imoltp
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 14106cc9-816b-493a-bcb9-fe66a1cd4630
caps.latest.revision: 
author: JennieHubbard
ms.author: jhubbard
manager: jhubbard
ms.workload: On Demand
ms.openlocfilehash: ff868be847d703d4ce4b8b291a725abc255a5788
ms.sourcegitcommit: b09bccd6dfdba55b022355e892c29cb50aadd795
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/23/2018
---
# <a name="the-memory-optimized-filegroup"></a>Оптимизированная для памяти файловая группа
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)] Для создания оптимизированных для памяти таблиц необходимо сначала создать оптимизированную для памяти файловую группу. Оптимизированная для памяти файловая группа содержит один или несколько контейнеров. В каждом контейнере содержатся файлы данных или разностных файлы (или и те и другие).  
  
 Даже если строки данных из таблиц SCHEMA_ONLY не сохраняются, а метаданные оптимизированных для памяти таблиц и компилированных в собственном коде хранимых процедур хранятся в традиционных каталогах, модулю [!INCLUDE[hek_2](../../includes/hek-2-md.md)] все равно требуется оптимизированная для памяти файловая группа для оптимизированных для памяти таблиц SCHEMA_ONLY, чтобы обеспечить одинаковую работу баз данных, в которых есть оптимизированные для памяти таблицы.  
  
 В основе оптимизированной для памяти файловой группы лежит файловая группа FILESTREAM, но при этом имеются следующие отличия.  
  
-   Можно создать только одну оптимизированную для памяти файловую группу для одной базы данных. Необходимо явно пометить файловую группу как содержащую данные memory_optimized_data. Файловую группу можно создать при создании базы данных или же добавить ее позднее.  
  
    ```sql  
    ALTER DATABASE imoltp ADD FILEGROUP imoltp_mod CONTAINS MEMORY_OPTIMIZED_DATA  
    ```  
  
-   В файловую группу `MEMORY_OPTIMIZED_DATA` нужно добавить один или несколько контейнеров. Пример:  
  
    ```sql  
    ALTER DATABASE imoltp ADD FILE (name='imoltp_mod1', filename='c:\data\imoltp_mod1') TO FILEGROUP imoltp_mod  
    ```  
  
-   Для создания оптимизированной для памяти файловой группы не требуется включать файловый поток ([Включение и настройка FILESTREAM](../../relational-databases/blob/enable-and-configure-filestream.md)). Сопоставление с файловым потоком выполняется модулем [!INCLUDE[hek_2](../../includes/hek-2-md.md)] .  
  
-   В оптимизированную для памяти файловую группу можно добавлять новые контейнеры. Необходимость развернуть новый контейнер может возникнуть, когда требуется расширить хранилище, которое нужно надежной, оптимизированной для памяти таблице, а также для распределения ввода-вывода по нескольким контейнерам.  
  
-   Перемещение данных в оптимизированной для памяти файловой группе оптимизировано в конфигурации группы доступности AlwaysOn. В отличие от файлов FILESTREAM, которые отправляются во вторичные реплики, файлы контрольных точек (файлы данных и разностные файлы) из оптимизированной для памяти файловой группы не отправляются во вторичные реплики. Файлы данных и разностные файлы формируются на вторичной реплике с помощью журнала транзакций.  
  
Ниже приведены ограничения, применяемые к оптимизированной для памяти файловой группе:  
  
-   После создания оптимизированной для памяти файловой группы удалить ее можно только после удаления базы данных. В рабочей среде возникновение необходимости в удалении оптимизированной для памяти файловой группы маловероятно.  
  
-   Невозможно удалить контейнер, который не является пустым, или перемещать пары, состоящие из файла данных и разностного файла, в другой контейнер в оптимизированной для памяти файловой группе.  
  
-   Для контейнера запрещено указывать параметр `MAXSIZE`.  
  
## <a name="configuring-a-memory-optimized-filegroup"></a>Настройка оптимизированной для памяти файловой группы  
 Следует рассмотреть возможность создания нескольких контейнеров в оптимизированной для памяти файловой группе и разместить их на разных дисках, чтобы получить большую пропускную способность по потоковой передаче данных в память.  
  
 При настройке хранилища необходимо обеспечить наличие свободного места на диске, которое будет в четыре раза больше размера надежных, оптимизированных для памяти таблиц. Нужно также удостовериться, что подсистема ввода-вывода поддерживает необходимое число операций в секунду для вашей рабочей нагрузки. Если пары файлов данных и разностных файлов заполняются при данном IOPS, необходимо в три раза увеличить IOPS с учетом операций сортировки и объединения. Можно увеличить объем хранилища и IOPS путем добавления в оптимизированную для памяти файловую группу одного или нескольких контейнеров.  
  
## <a name="see-also"></a>См. также:  
 [Создание и управление хранилищем для оптимизированных для памяти объектов](../../relational-databases/in-memory-oltp/creating-and-managing-storage-for-memory-optimized-objects.md)  
 [Файлы и файловые группы базы данных](../../relational-databases/databases/database-files-and-filegroups.md) 
  
