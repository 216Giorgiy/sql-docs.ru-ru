---
title: "Класс событий Audit Database Mirroring Login | Документация Майкрософт"
ms.custom: 
ms.date: 03/14/2017
ms.prod: sql-non-specified
ms.prod_service: database-engine, sql-database
ms.service: 
ms.component: event-classes
ms.reviewer: 
ms.suite: sql
ms.technology: database-engine
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- event notifications [SQL Server], database mirroring
- Audit Database Mirroring Login event class
- database mirroring [SQL Server], event notifications
ms.assetid: d0bd436d-aade-4208-a7e5-75cf3b5d0ce9
caps.latest.revision: "16"
author: BYHAM
ms.author: rickbyh
manager: jhubbard
ms.workload: Inactive
ms.openlocfilehash: d845ba23a517b6afd3e74d9d807dc3cac3f3a794
ms.sourcegitcommit: 44cd5c651488b5296fb679f6d43f50d068339a27
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/17/2017
---
# <a name="audit-database-mirroring-login-event-class"></a>Audit Database Mirroring Login, класс событий
[!INCLUDE[appliesto-ss-asdb-xxxx-xxx-md](../../includes/appliesto-ss-asdb-xxxx-xxx-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] создает событие класса **Audit Database Mirroring Login** для предоставления сообщений аудита, связанных с безопасностью транспорта при зеркальном отображении базы данных.  
  
## <a name="audit-database-mirroring-login-event-class-data-columns"></a>Столбцы данных класса событий Audit Database Mirroring Login  
  
|Столбец данных|Тип|Описание|Номер столбца|Фильтруемый|  
|-----------------|----------|-----------------|-------------------|----------------|  
|**ApplicationName**|**nvarchar**|Не используется в этом классе событий.|10|Да|  
|**ClientProcessID**|**int**|Не используется в этом классе событий.|9|Да|  
|**DatabaseID**|**int**|[!INCLUDE[ssSqlProfiler](../../includes/sssqlprofiler-md.md)] отображает имя базы данных, если столбец данных **ServerName** захвачен при трассировке и сервер доступен. Определите значение для базы данных, используя функцию DB_ID.|3|Да|  
|**EventClass**|**int**|Тип захваченного класса событий. Для класса событий **Audit Database Mirroring Login** всегда равен **154**.|27|Нет|  
|**EventSequence**|**int**|Порядковый номер этого события.|51|Нет|  
|**EventSubClass**|**int**|Тип подкласса событий, предоставляющий дополнительные сведения о каждом классе события. Приведенная ниже таблица содержит список подклассов для данного класса событий.|21|Да|  
|**FileName**|**nvarchar**|Поддерживаемый метод проверки подлинности, настроенный на удаленной конечной точке зеркального отображения базы данных. Если доступен более чем один метод, принимающая (целевая) конечная точка определяет, какой метод использовать первым. Возможны следующие значения:<br /><br /> <br /><br /> **Нет**. Не настроен ни один метод проверки подлинности.<br /><br /> **NTLM**. Требуется проверка подлинности NTLM.<br /><br /> **KERBEROS**. Требуется проверка подлинности Kerberos.<br /><br /> **NEGOTIATE**. Windows согласовывает метод проверки подлинности.<br /><br /> **CERTIFICATE**. Требуется сертификат, настроенный для конечной точки, который хранится в базе данных **master** .<br /><br /> **NTLM, CERTIFICATE**. Допустимы проверка подлинности NTLM или сертификат конечной точки.<br /><br /> **KERBEROS, CERTIFICATE**. Допустимы проверка подлинности Kerberos или сертификат конечной точки.<br /><br /> **NEGOTIATE, CERTIFICATE**. Windows согласовывает метод проверки подлинности, или же для проверки подлинности может быть использован сертификат конечной точки.<br /><br /> **CERTIFICATE, NTLM**. Допустимы сертификат конечной точки или проверка подлинности NTLM.<br /><br /> **CERTIFICATE, KERBEROS**. Допустимы сертификат конечной точки или проверка подлинности Kerberos.<br /><br /> **CERTIFICATE, NEGOTIATE**. Принимается сертификат конечной точки, или способ проверки подлинности согласовывается Windows.|36|Нет|  
|**HostName**|**nvarchar**|Не используется в этом классе событий.|8|Да|  
|**IsSystem**|**int**|Указывает, произошло событие в системном или в пользовательском процессе. 1 = системный, 0 = пользовательский.|60|Нет|  
|**LoginSid**|**image**|Идентификатор безопасности вошедшего в систему пользователя. Значение идентификатора безопасности уникально для каждого имени входа на сервере.|41|Да|  
|**NTDomainName**|**nvarchar**|Домен Windows, к которому принадлежит пользователь.|7|Да|  
|**NTUserName**|**nvarchar**|Имя пользователя, которому принадлежит соединение, создавшее это событие.|6|Да|  
|**ObjectName**|**nvarchar**|Строка соединения, использованная для этого соединения.|34|Нет|  
|**OwnerName**|**nvarchar**|Поддерживаемый метод проверки подлинности, настроенный на локальной конечной точке зеркального отображения базы данных. Если доступен более чем один метод, принимающая (целевая) конечная точка определяет, какой метод использовать первым. Возможны следующие значения:<br /><br /> <br /><br /> **Нет**. Не настроен ни один метод проверки подлинности.<br /><br /> **NTLM**. Требуется проверка подлинности NTLM.<br /><br /> **KERBEROS**. Требуется проверка подлинности Kerberos.<br /><br /> **NEGOTIATE**. Windows согласовывает метод проверки подлинности.<br /><br /> **CERTIFICATE**. Требуется сертификат, настроенный для конечной точки, который хранится в базе данных **master** .<br /><br /> **NTLM, CERTIFICATE**. Допустимы проверка подлинности NTLM или сертификат конечной точки.<br /><br /> **KERBEROS, CERTIFICATE**. Допустимы проверка подлинности Kerberos или сертификат конечной точки.<br /><br /> **NEGOTIATE, CERTIFICATE**. Windows согласовывает метод проверки подлинности, или же для проверки подлинности может быть использован сертификат конечной точки.<br /><br /> **CERTIFICATE, NTLM**. Допустимы сертификат конечной точки или проверка подлинности NTLM.<br /><br /> **CERTIFICATE, KERBEROS**. Допустимы сертификат конечной точки или проверка подлинности Kerberos.<br /><br /> **CERTIFICATE, NEGOTIATE**. Принимается сертификат конечной точки, или способ проверки подлинности согласовывается Windows.|37|Нет|  
|**ProviderName**|**nvarchar**|Способ проверки подлинности для этого соединения.|46|Нет|  
|**RoleName**|**nvarchar**|Роль соединения. Это либо **initiator** , либо **target**.|38|Нет|  
|**ServerName**|**nvarchar**|Имя экземпляра [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , подвергаемого трассировке.|26|Нет|  
|**SPID**|**int**|Идентификатор процесса сервера, который [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] присвоил процессу, связанному с клиентом.|12|Да|  
|**StartTime**|**datetime**|Время начала события, если доступно.|14|Да|  
|**Состояние**|**int**|Указывает место в исходном коде [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] , которое вызвало это событие. Каждое место, которое может вызвать это событие, обозначается отдельным кодом состояния. Сотрудник службы технической поддержки Microsoft может использовать этот код состояния для обнаружения участка, выполнение которого привело к событию.|30|Нет|  
|**TargetUserName**|**nvarchar**|Состояние входа. Может принимать одно из следующих значений.<br /><br /> **INITIAL**<br /><br /> **WAIT LOGIN NEGOTIATE**<br /><br /> **ONE ISC**<br /><br /> **ONE ASC**<br /><br /> **TWO ISC**<br /><br /> **TWO ASC**<br /><br /> **WAIT ISC Confirm**<br /><br /> **WAIT ASC Confirm**<br /><br /> **WAIT REJECT**<br /><br /> **WAIT PRE-MASTER SECRET**<br /><br /> **WAIT VALIDATION**<br /><br /> **WAIT ARBITRATION**<br /><br /> **ONLINE**<br /><br /> **ERROR**<br /><br /> <br /><br /> Примечание. ISC = Initiate Security Context (инициировать контекст безопасности). ASC = Accept Security Context (принятие контекста безопасности).|39|Нет|  
|**TransactionID**|**bigint**|Назначенный системой идентификатор транзакции.|4|Нет|  
  
 Следующая таблица содержит список значений подклассов события для этого класса событий.  
  
|Идентификатор|Подкласс|Описание|  
|--------|--------------|-----------------|  
|1|Успешный вход|Событие «Успешный вход» указывает, что обработка процесса входа в систему для зеркального отображения смежной базы данных завершилась успешно.|  
|2|Ошибка входного протокола|Событие «Ошибка входного протокола» указывает, что имя входа для зеркального отображения базы данных получает корректное сообщение, но не соответствующее текущему состоянию процесса входа. Сообщение могло быть потеряно или отослано вне очереди.|  
|3|Ошибка формата сообщения|Событие «Ошибка формата сообщения» сообщает, что имя входа для зеркального отображения базы данных получило сообщение, не соответствующее ожидаемому формату. Сообщение может быть повреждено, либо на порт, предназначенный для зеркального отображения базы данных, отправляет сообщения программа, отличная от [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] .|  
|4|Ошибка согласования|Событие «Ошибка согласования» указывает, что локальная конечная точка зеркального отображения базы данных и удаленная конечная точка зеркального отображения базы данных поддерживают взаимоисключающие уровни проверки подлинности.|  
|5|Ошибка проверки подлинности|Событие «Ошибка проверки подлинности» указывает, что конечная точка зеркального отображения базы данных не может выполнить проверку подлинности соединения из-за ошибки. Для проверки подлинности Windows это событие сообщает, что конечной точке зеркального отображения базы данных не удалось применить эту проверку. Для проверки подлинности на основе сертификата это событие сообщает, что конечной точке зеркального отображения базы данных не удалось получить сертификат.|  
|6|Ошибка авторизации|Событие «Ошибка авторизации» указывает, что конечная точка зеркального отображения базы данных отклонила авторизацию соединения. Для проверки подлинности Windows это событие сообщает, что идентификатор защиты соединения не совпадает с пользователем базы данных. Для проверки подлинности на базе сертификата это событие сообщает, что открытый ключ, доставленный в сообщении, не соответствует сертификату в базе данных **master** .|  
  
## <a name="see-also"></a>См. также:  
 [CREATE ENDPOINT (Transact-SQL)](../../t-sql/statements/create-endpoint-transact-sql.md)   
 [ALTER ENDPOINT (Transact-SQL)](../../t-sql/statements/alter-endpoint-transact-sql.md)   
 [Зеркальное отображение базы данных (SQL Server)](../../database-engine/database-mirroring/database-mirroring-sql-server.md)  
  
  
